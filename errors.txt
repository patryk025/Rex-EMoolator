{VARSTEMP0^SET($1);@IF("VARSTEMP0","_",""NULL"","BFITMP1","");@WHILE(VARSTEMP0^GETLENGTH(),">","0","{VARITEMP0^SET(VARSTEMP0^FIND(");");@IF("VARITEMP0","_","-1","BFITMP4","BFITMP5");}");}
{VARSTEMP0^SET($1);@IF("VARSTEMP0","_",""NULL"","BFITMP8","");ARRSEQ^REMOVEALL();@WHILE(VARSTEMP0^GETLENGTH(),">","0","{VARITEMP0^SET(VARSTEMP0^FIND(");");@IF("VARITEMP0","_","-1","BFITMP9","BFITMP10");}");}
{VARICOUNT^SET([VARINUMSLOTS-VARISTART+1]);VARICOUNT^CLAMP(1,9);@IF("VARINUMSLOTS>9&&VARIX'0","BFITMP298","");GRPKARTKA^REMOVEALL();GRPKARTKA^ADD("IMGKARTKA");@LOOP("{VARSTEMP0^SET(["ARRSLOTS_"+_I_]);@LOOP("{VARSTEMP1^SET(*VARSTEMP0^GET(_I_));*VARSTEMP1^HIDE();}",0,*VARSTEMP0^GETSIZE(),1);}",1,VARINUMSLOTS,1);@LOOP("{VARITEMP0^SET(_I_);VARSTEMP0^SET(["ARRSLOTS_"+VARITEMP0]);VARITEMP3^SET(*VARSTEMP0^GETSIZE());VARITEMP1^SET(560);VARITEMP1^ADD(VARIX);@LOOP("{VARITEMP2^SET([VARITEMP0-VARISTART]);VARSTEMP1^SET(*VARSTEMP0^GET(_I_));VARITEMP2^MUL(55);VARITEMP2^ADD(60);@IF(*VARSTEMP1^GETHEIGHT(),">","30","BFITMP299","");*VARSTEMP1^SETPRIORITY(31);*VARSTEMP1^SHOW();@IF(VARSTEMP1^FIND("DODO"),">","-1","BFITMP300","");*VARSTEMP1^SETPOSITION(VARITEMP1,VARITEMP2);@IF(VARSTEMP1^FIND("DODO"),"_","-1","BFITMP301","BFITMP302");GRPKARTKA^ADD(VARSTEMP1);}",0,VARITEMP3,1);}",VARISTART,VARICOUNT,1);}
{@IF("VARINUMSLOTS",">","0","BFITMP303","");@LOOP("{@LOOP("{VARSTEMP0^SET(ARRSLOTEFFECTNAMES^GET(_I_));*VARSTEMP0^CLONE(1);}",0,ARRSLOTEFFECTNAMES^GETSIZE(),1);@LOOP("{VARITEMP0^SET(_I_);VARSTEMP0^SET(ARRSLOTIMGS^GET(VARITEMP0));*VARSTEMP0^CLONE(1);}",0,8,1);IMGPIECZATKA^CLONE(1);VARITEMP0^SET(_I_);VARSTEMP0^SET(["ARRSLOTS_"+VARITEMP0]);VARSTEMP1^SET(["$COMMON\SLOT_"+VARSDODOPREFIX+"_"+VARITEMP0+".SAV"]);*VARSTEMP0^LOAD(VARSTEMP1);}",1,VARINUMSLOTS,1);@IF("VARINUMSLOTS",">","0","BFITMP304","");}
{BEHSELECTOBJ^RUN(0);SOBJECT|IPARAM2^SET(VARINUMSLOTS);BEHUPDATEOBJECTS^RUN();@LOOP("{VARITEMP0^SET(_I_);VARSTEMP0^SET(["ARRSLOTS_"+VARITEMP0]);VARSTEMP1^SET(["$COMMON\SLOT_"+VARSDODOPREFIX+"_"+VARITEMP0+".SAV"]);*VARSTEMP0^SAVE(VARSTEMP1);}",1,VARINUMSLOTS,1);}
{ANNBIRDSINCAGE^LOAD("ALCHEMY\DODO_W_KLATCE.ANN");ANNDODO^LOAD("ALCHEMY\DODO.ANN");ANNDODO^SETPRIORITY(13);ANNCHMURA^LOAD("ALCHEMY\CHMURA.ANN");ANNCHMURA^SETPRIORITY(14);ANNFIRE^LOAD("ALCHEMY\FIRE.ANN");ANNFIRE^SETPRIORITY(5);ANNZASLONA^LOAD("ALCHEMY\ZASLONA.ANN");ANNZASLONA^SETPRIORITY(11);ANNMIKSTURA^LOAD("ALCHEMY\MIKSTURA.ANN");ANNMIKSTURA^SETPRIORITY(9);ANNMIKSTURA^HIDE();IMGPALNIK^LOAD("ALCHEMY\PALNIK.IMG");IMGKOLSPIDER^LOAD("ALCHEMY\KOL_SPIDER.IMG");IMGKOLSPIDER^SETPRIORITY(14);IMGKOLBAT^LOAD("ALCHEMY\KOL_BAT.IMG");IMGKOLBAT^SETPRIORITY(14);IMGKOLCOOK^LOAD("ALCHEMY\KOL_COOK.IMG");IMGKOLCOOK^SETPRIORITY(14);IMGKOLFEATHER^LOAD("ALCHEMY\KOL_FEATHER.IMG");IMGKOLFEATHER^SETPRIORITY(14);IMGKOLFLOW^LOAD("ALCHEMY\KOL_FLOW.IMG");IMGKOLFLOW^SETPRIORITY(14);IMGKOLLEBIIO^LOAD("ALCHEMY\KOL_LEBIO.IMG");IMGKOLLEBIIO^SETPRIORITY(14);IMGKOLSAND^LOAD("ALCHEMY\KOL_SAND.IMG");IMGKOLSAND^SETPRIORITY(14);IMGKOLSHOE^LOAD("ALCHEMY\KOL_SHOE.IMG");IMGKOLSHOE^SETPRIORITY(14);IMGAPARATUS^LOAD("ALCHEMY\APARATUS.IMG");IMGZIARNO^LOAD("ALCHEMY\ZIARNO.IMG");IMGZIARNO^HIDE();IMGZIARNO^SETPRIORITY(2);IMGBABKI^LOAD("ALCHEMY\BABKI.IMG");IMGBABKI^HIDE();IMGBABKI^SETPRIORITY(2);IMGCIASTKO^LOAD("ALCHEMY\CIASTKO.IMG");IMGCIASTKO^HIDE();IMGCIASTKO^SETPRIORITY(3);IMGLEBIODKA^LOAD("ALCHEMY\LEBIODKA.IMG");IMGLEBIODKA^HIDE();IMGLEBIODKA^SETPRIORITY(2);IMGPAJECZYNA^LOAD("ALCHEMY\PAJECZYNA.IMG");IMGPAJECZYNA^HIDE();IMGPAJECZYNA^SETPRIORITY(2);IMGPIORO^LOAD("ALCHEMY\PIORO.IMG");IMGPIORO^HIDE();IMGPIORO^SETPRIORITY(2);IMGBUT^LOAD("ALCHEMY\SHOE.IMG");IMGBUT^HIDE();IMGBUT^SETPRIORITY(2);IMGPIASEK^LOAD("ALCHEMY\SNAD.IMG");IMGPIASEK^HIDE();IMGPIASEK^SETPRIORITY(1);IMGRYSBOBKI^LOAD("ALCHEMY\RYS_ZIARNO.IMG");IMGRYSBOBKI^SETPRIORITY(31);IMGRYSBOBKI^HIDE();IMGRYSCIASTKO^LOAD("ALCHEMY\RYS_CIASTKO.IMG");IMGRYSCIASTKO^SETPRIORITY(31);IMGRYSCIASTKO^HIDE();IMGRYSZIARNO^LOAD("ALCHEMY\RYS_NIETOPERZ.IMG");IMGRYSZIARNO^SETPRIORITY(31);IMGRYSZIARNO^HIDE();IMGRYSBUT^LOAD("ALCHEMY\RYS_BUT.IMG");IMGRYSBUT^SETPRIORITY(31);IMGRYSBUT^HIDE();IMGRYSLEBIODKA^LOAD("ALCHEMY\RYS_LEBIODKA.IMG");IMGRYSLEBIODKA^SETPRIORITY(31);IMGRYSLEBIODKA^HIDE();IMGRYSPAJAK^LOAD("ALCHEMY\RYS_PAJAK.IMG");IMGRYSPAJAK^SETPRIORITY(31);IMGRYSPAJAK^HIDE();IMGRYSPIACH^LOAD("ALCHEMY\RYS_PIACH.IMG");IMGRYSPIACH^SETPRIORITY(31);IMGRYSPIACH^HIDE();IMGRYSPIORKO^LOAD("ALCHEMY\RYS_PIORKO.IMG");IMGRYSPIORKO^SETPRIORITY(31);IMGRYSPIORKO^HIDE();RYS_DODO_OGON^SETPRIORITY(31);RYS_DODO_OGON^HIDE();RYS_DODO_KOLOR^LOAD("ALCHEMY\RYS_DODO_KOLOR.IMG");RYS_DODO_KOLOR^SETPRIORITY(31);RYS_DODO_KOLOR^HIDE();RYS_DODO_KOLOR_M^LOAD("ALCHEMY\RYS_DODO_KOLOR_M.IMG");RYS_DODO_KOLOR_M^SETPRIORITY(31);RYS_DODO_KOLOR_M^HIDE();RYS_DODO_NORMAL^LOAD("ALCHEMY\RYS_DODO_NORMAL.IMG");RYS_DODO_NORMAL^SETPRIORITY(31);RYS_DODO_NORMAL^HIDE();RYS_DODO_NORMAL_M^LOAD("ALCHEMY\RYS_DODO_NORMAL_M.IMG");RYS_DODO_NORMAL_M^SETPRIORITY(31);RYS_DODO_NORMAL_M^HIDE();RYS_DODO_WLOSY_KOLOR_M^LOAD("ALCHEMY\RYS_DODO_WLOSY_KOLOR_M.IMG");RYS_DODO_WLOSY_KOLOR_M^SETPRIORITY(31);RYS_DODO_WLOSY_KOLOR_M^HIDE();RYS_DODO_OGON_KOLOR^LOAD("ALCHEMY\RYS_DODO_OGON_KOLOR.IMG");RYS_DODO_OGON_KOLOR^SETPRIORITY(31);RYS_DODO_OGON_KOLOR^HIDE();RYS_DODO_OGON_KOLOR_M^LOAD("ALCHEMY\RYS_DODO_OGON_KOLOR_M.IMG");RYS_DODO_OGON_KOLOR_M^SETPRIORITY(31);RYS_DODO_OGON_KOLOR_M^HIDE();RYS_DODO_OGON_M^LOAD("ALCHEMY\RYS_DODO_OGON_M.IMG");RYS_DODO_OGON_M^SETPRIORITY(31);RYS_DODO_OGON_M^HIDE();RYS_DODO_WLOSY^LOAD("ALCHEMY\RYS_DODO_WLOSY.IMG");RYS_DODO_WLOSY^SETPRIORITY(31);RYS_DODO_WLOSY^HIDE();RYS_DODO_WLOSY_KOLOR^LOAD("ALCHEMY\RYS_DODO_WLOSY_KOLOR.IMG");RYS_DODO_WLOSY_KOLOR^SETPRIORITY(31);RYS_DODO_WLOSY_KOLOR^HIDE();RYS_DODO_WLOSY_M^LOAD("ALCHEMY\RYS_DODO_WLOSY_M.IMG");RYS_DODO_WLOSY_M^SETPRIORITY(31);RYS_DODO_WLOSY_M^HIDE();RYS_DODO_WLOSY_OGON^LOAD("ALCHEMY\RYS_DODO_WLOSY_OGON.IMG");RYS_DODO_WLOSY_OGON^SETPRIORITY(31);RYS_DODO_WLOSY_OGON^HIDE();RYS_DODO_WLOSY_OGON_M^LOAD("ALCHEMY\RYS_DODO_WLOSY_OGON_M.IMG");RYS_DODO_WLOSY_OGON_M^SETPRIORITY(31);RYS_DODO_WLOSY_OGON_M^HIDE();RYS_DODO_WSZYSTKO^LOAD("ALCHEMY\RYS_DODO_WSZYSTKO.IMG");RYS_DODO_WSZYSTKO^SETPRIORITY(31);RYS_DODO_WSZYSTKO^HIDE();RYS_DODO_WSZYSTKO_M^LOAD("ALCHEMY\RYS_DODO_WSZYSTKO_M.IMG");RYS_DODO_WSZYSTKO_M^SETPRIORITY(31);RYS_DODO_WSZYSTKO_M^HIDE();IMGKARTKA^LOAD("ALCHEMY\KARTKA.IMG");IMGKARTKA^SETPRIORITY(30);IMGPIECZATKA^LOAD("ALCHEMY\PIECZATKA.IMG");IMGPIECZATKA^HIDE();IMGPIECZATKA^SETPRIORITY(31);PRAWO_GLOW^LOAD("ALCHEMY\PRAWO_GLOW.IMG");PRAWO_GLOW^SETPRIORITY(33);LEWO^LOAD("ALCHEMY\LEWO.IMG");LEWO^SETPRIORITY(33);LEWO_GLOW^LOAD("ALCHEMY\LEWO_GLOW.IMG");LEWO_GLOW^SETPRIORITY(33);PRAWO^LOAD("ALCHEMY\PRAWO.IMG");PRAWO^SETPRIORITY(33);IMGAPARATUS^SETPRIORITY(10);ANNFIRE^SETPRIORITY(5);BTNPALNIK^SETSTD("IMGPALNIK");BTNLEFT^SETSTD("LEWO");BTNLEFT^SETONMOVE("LEWO_GLOW");BTNRIGHT^SETSTD("PRAWO");BTNRIGHT^SETONMOVE("PRAWO_GLOW");ANNCHMURA^HIDE();ANNFIRE^HIDE();ANNMIKSTURA^HIDE();ANNMIKSTURA^SETPRIORITY(11);BTNKOLSPIDER^SETSTD("IMGKOLSPIDER");BTNKOLBAT^SETSTD("IMGKOLBAT");BTNKOLCOOK^SETSTD("IMGKOLCOOK");BTNKOLFEATHER^SETSTD("IMGKOLFEATHER");BTNKOLFLOW^SETSTD("IMGKOLFLOW");BTNKOLLEBIO^SETSTD("IMGKOLLEBIIO");BTNKOLSAND^SETSTD("IMGKOLSAND");BTNKOLSHOE^SETSTD("IMGKOLSHOE");IMG_EXIT_STD^LOAD("ALCHEMY\EXIT_STD.IMG");IMG_EXIT_STD^SETPTIORITY(610);IMG_EXIT_GLOW^LOAD("ALCHEMY\EXIT_GLOW.IMG");IMG_EXIT_GLOW^SETPTIORITY(610);IMG_EXIT_CLICK^LOAD("ALCHEMY\EXIT_CLICK.IMG");IMG_EXIT_CLICK^SETPTIORITY(610);BTNEXITALCH^SETSTD("IMG_EXIT_STD");BTNEXITALCH^SETONMOVE("IMG_EXIT_GLOW");BTNEXITALCH^SETONCLICK("IMG_EXIT_CLICK");}
{BEHSELECTOBJ^RUN(0);@IF("SOBJECT|IPARAM0","_","1","BFITMP305","BFITMP306");BEHSELECTOBJ^RUN(1);@IF("SOBJECT|IPARAM0","_","1","BFITMP307","BFITMP308");BEHSELECTOBJ^RUN(2);@IF("SOBJECT|IPARAM0","_","1","BFITMP309","BFITMP310");BEHSELECTOBJ^RUN(3);@IF("SOBJECT|IPARAM0","_","1","BFITMP311","BFITMP312");BEHSELECTOBJ^RUN(4);@IF("SOBJECT|IPARAM0","_","1","BFITMP313","BFITMP314");BEHSELECTOBJ^RUN(5);@IF("SOBJECT|IPARAM0","_","1","BFITMP315","BFITMP316");BEHSELECTOBJ^RUN(6);@IF("SOBJECT|IPARAM0","_","1","BFITMP317","BFITMP318");BEHSELECTOBJ^RUN(7);@IF("SOBJECT|IPARAM0","_","1","BFITMP319","BFITMP320");}
{BEHLOADSEQARR^RUN("E_SUKCES");VARBSUCCESS^SET(TRUE);BEHLOADTEMPOBJ^RUN("PIWNICA");BEHSELECTTEMPOBJS^RUN("DO_APARATUSA");@IF("STEMPOBJ|TYPE","!_","0","BFITMP293","");STEMPOBJ|TYPE^SET(0);BEHUPDATETEMPOBJ^RUN();};
{@IF("SOBJECT|SPARAM1","!_",""NULL"","BFITMP5","");BEHGOTO^RUN(SOBJECT|SPARAM0);}
{@IF("VARIRADIUS'96&&VARIMENUVISIBLE'1","BFITMP12","");BEHPLACEITEMS^RUN();VARIRADIUS^ADD([VARIMENUVISIBLE*16]);VARDMENUOPACITY^ADD([42.5*VARIMENUVISIBLE]);@IF("VARIRADIUS","_","0","BFITMP13","");}
{VARBLOCKSCENE^SET(FALSE);__GAME_INIT__^RUN();SCENENAME^SET("ARCADE");G_CARD^SETSCENE("ARCADE");G_MENU^SETSCENE("ARCADE");G_MENU^SAVESETS();G_MENU^SHOW(TRUE);G_CURSOR^SETSCENE("ARCADE");G_CURSOR^SETARCADE(G_SARCADEOBJECTS);G_AMBIENT^SETAMBIENT(G_SARCADEOBJECTS);@IF(G_SARCADEOBJECTS^FIND("TELEP"),"_","-1","BFITMP1015","");ARRIDLETIME^ADD(0,0);VARSCURRARCADE^SET(["$COMMON\"+G_SARCADEOBJECTS+"0.DTA"]);VARSCURRITEMS^SET("$COMMON\ITEMS0.DTA");__LOAD_DB__^RUN();__LOAD_ITEMS__^RUN();@IF("VARSMUSIC","_",""NULL"","BFITMP1017","BFITMP1018");ARCADE^STARTMUSIC(VARSMUSIC);ARCADE^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));ANNSELECT^SETANCHOR("CENTER");VARINEXTTRIGGER^SET(-1);VARIPATHID^SET(9000);WPATH^SETGRAVITY(0,0,0);ANNREX^SETANCHOR("LEFTLOWER");ANNKRET^SETANCHOR("LEFTLOWER");ANNREX^SETPOSITION(400,300);WPATH^LINK(100,"ANNREX");@IF("G_IKRETACTIVE",">","0","BFITMP1019","");STLIDLE0^PLAY("ELAPSE");STLIDLE1^PLAY("ELAPSE");FCOLOR^SETPROPERTY("CANUNDO","TRUE");FCOLOR^SETPROPERTY("CHANNELS","B");@IF(G_SLASTOBJECTS^FIND("LIMBO"),">","-1","BFITMP1021","BFITMP1022");WPATH^SETACTIVE(101,FALSE);G_SLASTOBJECTS^SET(G_SARCADEOBJECTS);WPATH^SETVELOCITY(100,0,0,0);WPATH^SETVELOCITY(101,0,0,0);VARITER^SET(DBOBJECTS^FIND("TYPE",102,0));BEHSELECTOBJ^RUN(VARITER);@IF("SOBJECT|IPARAM0","_","0","BFITMP1023","BFITMP1024");SCENENAME^SET("ARCADE");BEHPOSTINIT^RUN();}
{VARSTEMP0^SET([G_SARCADEOBJECTS+".CNV"]);CNVLOADER^LOAD(VARSTEMP0);DBOBJECTS^LOAD(VARSCURRARCADE);VARITER^SET(DBOBJECTS^GETROWSNO());VARINO^SET(0);VARITEMP2^SET(0);VARSMUSIC^SET("NULL");@LOOP("{VARITER^SET(_I_);DBOBJECTS^SELECT(VARITER);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("SOBJECT|TYPE","_","140","BFITMP1029","");@IF("SOBJECT|TYPE","_","108","BFITMP1030","");@IF("SOBJECT|TYPE","_","107","BFITMP1031","");@IF("SOBJECT|TYPE","_","146","BFITMP1032","");@IF("SOBJECT|TYPE","_","145","BFITMP1033","");@IF("SOBJECT|TYPE","_","106","BFITMP1034","");@IF("SOBJECT|TYPE","_","105","BFITMP1035","");@IF("SOBJECT|TYPE","_","104","BFITMP1039","");@IF("SOBJECT|TYPE","_","103","BFITMP1040","");@IF("SOBJECT|TYPE","_","102","BFITMP1041","");@IF("SOBJECT|TYPE","_","101","BFITMP1042","");@IF("SOBJECT|TYPE","<","100","BFITMP1051","");}",0,DBOBJECTS^GETROWSNO(),1);@IF("VARIBKGOFFSETX!'0||VARIBKGOFFSETY!'0","BFITMP1052","");VARDMAXVELKRET^SET([0.6*VARDMAXVEL]);VARITEMP0^SET(ARRSTARTNAME0^FIND(G_SLASTOBJECTS));@IF("VARITEMP0","_","-1","BFITMP1053","");WPATH^SETPOSITION(100,ARRSTART0X^GET(VARITEMP0),ARRSTART0Y^GET(VARITEMP0),0);VARIKRETSTARTX^SET(ARRSTART0X^GET(VARITEMP0));VARIKRETSTARTX^ADD(50);VARIKRETSTARTY^SET(ARRSTART0Y^GET(VARITEMP0));WPATH^FINDPATH(100,VARIPATHID,ARRGO0X^GET(VARITEMP0),ARRGO0Y^GET(VARITEMP0),0,FALSE);VARIKRETGOX^SET(ARRGO0X^GET(VARITEMP0));VARIKRETGOY^SET(ARRGO0Y^GET(VARITEMP0));@IF("G_IKRETACTIVE",">","0","BFITMP1056","");DBITEMS^LOAD(VARSCURRITEMS);BEHSELECTOBJT^RUN(102);@IF("SOBJECT|IPARAM0","_","0","BFITMP1057","");BEHINITSCRIPT^RUN();}
{VARINUMITEMS^SET(0);@LOOP("{VARSTEMP0^SET(["ANNITEM"+_I_]);*VARSTEMP0^LOAD("TEMPLATE.ANN");*VARSTEMP0^HIDE();}",0,10,1);@LOOP("{VARITER^SET(_I_);DBITEMS^SELECT(VARITER);SITEM^SET("DBITEMS_CURSOR");@IF("SITEM|EMPTY","_","1","BFITMP1058","");}",0,10,1);}
{VARSTEMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(MOUSE^GETPOSX(),MOUSE^GETPOSY(),TRUE,2998,2998,FALSE));@IF("VARSTEMP0","!_",""NULL"","BFITMP1067","");VARSTEMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(MOUSE^GETPOSX(),MOUSE^GETPOSY(),TRUE,0,VARIMAXPRIORITY,FALSE));VARINEXTTRIGGER^SET(-1);@IF("VARSTEMP0","_",""ANNREX"","BFITMP1071","");@IF("VARIMENUVISIBLE","_","1","BFITMP1072","");@IF(STL0^ISPLAYING(),"_","FALSE","BFITMP1073","");@IF(VARSTEMP0^FIND("ANNOBJECT"),">","-1","BFITMP1076","BFITMP1077");VARSTEMP0^SET(["POS("+VARITEMP0+","+VARITEMP1+")"]);ARRIDLETIME^CHANGEAT(0,0);ARRIDLETIME^CHANGEAT(1,0);}
{VARITEMP1^SET([VARINUMITEMS%2]);VARITEMP0^SET([VARINUMITEMS@2]);VARDTEMP2^SET(VARITEMP0);@IF("VARITEMP1","_","0","BFITMP1112","");VARDTEMP2^MUL(VARDMENUANGLE);VARDTEMP2^ADD(90);@LOOP("{VARITER^SET(_I_);VARDANGLE^SET([VARDMENUANGLE*VARITER]);VARDANGLE^SUB(VARDTEMP2);VARDTEMP0^COSINUS(VARDANGLE);VARDTEMP1^SINUS(VARDANGLE);VARITEMP0^SET([_I_@10]);VARITEMP0^MUL(34);VARITEMP0^ADD(VARIRADIUS);VARDTEMP0^MUL(VARITEMP0);VARDTEMP1^MUL(VARITEMP0);VARDTEMP0^ADD(VARIMENUX);VARDTEMP1^ADD(VARIMENUY);VARSTEMP0^SET(["ANNITEM"+_I_]);*VARSTEMP0^SETPOSITION(VARDTEMP0,VARDTEMP1);*VARSTEMP0^SETOPACITY(VARDMENUOPACITY);*VARSTEMP0^SHOW();}",0,VARINUMITEMS,1);}
{VARITEMP0^SET(DBITEMS^FIND("NAME",$1,0));@RETURN(VARITEMP0);}
{VARISELECTOR^SET(DBOBJECTS^FIND("IDNAME",$1,0));@IF("VARISELECTOR",">","-1","BFITMP1126","BFITMP1127");@RETURN(VARBTEMP0);}
{VARISELECTOR^SET(DBOBJECTS^FIND("TYPE",$1,0));@IF("VARISELECTOR",">","-1","BFITMP1128","BFITMP1129");@RETURN(VARBTEMP0);}
{VARSTEMP1^SET($1);@IF(VARSTEMP1^FIND(".ARR"),"_","-1","BFITMP1144","BFITMP1145");@IF("VARSSEQNAME!'VARSTEMP1||VARBSEQPLAYING'FALSE","BFITMP1152","BFITMP1153");@RETURN(VARBTEMP0);}
{VARSTEMP1^SET($1);VARBTEMP1^SET($2);@IF(VARSTEMP1^FIND(".ARR"),"_","-1","BFITMP1154","BFITMP1155");@IF("VARSSEQNAME!'VARSTEMP1||VARBSEQPLAYING'FALSE","BFITMP1162","BFITMP1163");@RETURN(VARBTEMP0);}
{VARSTEMP0^SET($1);VARITEMP0^SET(DBOBJECTS^FIND("IDNAME",VARSTEMP0,0));VARSTEMP0^SET("NULL");@IF("VARITEMP0",">","-1","BFITMP1173","");@RETURN(VARSTEMP0);}
{@RETURN(VARBFIRSTENTER);}
{VARISELECTOR^SET(DBTEMPOBJ^FIND("IDNAME",$1,0));@IF("VARISELECTOR",">","-1","BFITMP1185","BFITMP1186");@RETURN(VARBTEMP0);}
{VARISELECTOR^SET(DBTEMPOBJ^FIND("TYPE",$1,0));@IF("VARISELECTOR",">","-1","BFITMP1187","BFITMP1188");@RETURN(VARBTEMP0);}
{ARRTEMP^REMOVEALL();VARSTEMP0^SET("$COMMON\QUESTIONS_ASKED0.ARR");ARRTEMP^LOAD(VARSTEMP0);VARSTEMP1^SET("$1");@IF(ARRTEMP^FIND(VARSTEMP1),">","-1","BFITMP1196","BFITMP1197");ARRTEMP^REMOVEALL();@RETURN(VARBTEMP0);}
{ARRTEMP^REMOVEALL();VARSTEMP0^SET("$COMMON\QUESTIONS_ASKED0.ARR");ARRTEMP^LOAD(VARSTEMP0);@IF(ARRTEMP^FIND(VARSTEMP2),">","-1","BFITMP1198","BFITMP1199");ARRTEMP^REMOVEALL();@RETURN(VARBTEMP0);}
{@LOOP("{VARSTEMP0^SET(["ANNITEM"+_I_]);*VARSTEMP0^SETPRIORITY(2998);}",0,VARINUMITEMS,1);STL1^STOP(FALSE);};
{@LOOP("{VARSTEMP0^SET(["ANNITEM"+_I_]);*VARSTEMP0^HIDE();}",0,VARINUMITEMS,1);STL1^STOP(FALSE);};
{VARSKRETNAME^SET(SOBJECT|NAME);ANNKRET^LOAD(SOBJECT|NAME);G_IKRETACTIVE^SET(1);@IF("SOBJECT|SPARAM1","_",""NULL"","BFITMP1027","BFITMP1028");};
{VARSREXNAME^SET(SOBJECT|NAME);ANNREX^LOAD(SOBJECT|NAME);VARDMAXVEL^SET(SOBJECT|IPARAM0);@IF("VARDMAXVEL","_","0.0","BFITMP1036","");@IF("SOBJECT|SPARAM1","_",""NULL"","BFITMP1037","BFITMP1038");};
{@IF("SOBJECT|IPARAM0","_","1","BFITMP1043","BFITMP1044");};
{VARSTEMP1^SET(VARSTEMP2);VARITEMP0^SET(VARSTEMP1^FIND("-"));VARSTEMP1^SUB(VARITEMP0,[VARSTEMP2^LENGTH()-VARITEMP0]);VARSTEMP2^SUB(0,[VARITEMP0+1]);VARITEMP0^SET(VARSTEMP1);ARRGOTOX^ADD(VARITEMP0);VARSTEMP1^SET(VARSTEMP2);VARITEMP0^SET(VARSTEMP1^FIND("-"));@IF("VARITEMP0",">","-1","BFITMP1047","BFITMP1048");};
{VARSTEMP0^SET(["ANNOBJECT"+VARINO]);*VARSTEMP0^LOAD(SOBJECT|NAME);*VARSTEMP0^PLAY("PLAY");@IF("SOBJECT|TYPE","_","2","BFITMP1045","BFITMP1046");VARSTEMP2^SET(*VARSTEMP0^GETEVENTNAME(0));@IF("VARSTEMP2","_",""DEFAULT"","BFITMP1049","BFITMP1050");VARINO^INC();};
{@LOOP("{VARSTEMP0^SET(["ANNOBJECT"+_I_]);GRPMOVE^ADD(VARSTEMP0);}",0,VARINO,1);};
{VARSTEMP0^SET(["ANNITEM"+VARINUMITEMS]);VARSTEMP1^SET(["ITEMS\"+SITEM|NAME+".ANN"]);*VARSTEMP0^SETPOSITION(0,0);*VARSTEMP0^LOAD(VARSTEMP1);*VARSTEMP0^SETFRAME("PLAY",0);*VARSTEMP0^SETPOSITION(0,0);*VARSTEMP0^SETANCHOR("CENTER");*VARSTEMP0^SETPRIORITY(2999);*VARSTEMP0^HIDE();VARINUMITEMS^INC();}
{ANNSELECT^HIDE();VARSCURRENTITEMOBJECT^SET([VARSTEMP0+"_1"]);*VARSTEMP0^SETFRAME("PLAY",1);*VARSTEMP0^CLONE(1);*VARSCURRENTITEMOBJECT^SETPRIORITY(800);VARSTEMP0^SUB(0,7);VARITEMP0^SET(VARSTEMP0);VARITEMP1^SET(0);@LOOP("{VARITER^SET(_I_);DBITEMS^SELECT(VARITER);SITEM^SET("DBITEMS_CURSOR");@IF("SITEM|EMPTY","_","1","BFITMP1060","");}",0,10,1);DBITEMS^SELECT(VARITEMP2);SITEM^SET("DBITEMS_CURSOR");VARSCURRENTITEM^SET(SITEM|NAME);@IF("VARSCURRENTITEM","_",""KARTA_BUT"","BFITMP1061","");@IF("VARSCURRENTITEM","_",""KOSC_BUT"","BFITMP1062","");@IF("VARSCURRENTITEM","_",""ZWOJ_BUT"","BFITMP1063","");@LOOP("{VARITER^SET(_I_);VARSTEMP2^SET(["ANNITEM"+VARITER]);*VARSTEMP2^SETPRIORITY(2999);}",0,VARINUMITEMS,1);VARIMENUVISIBLE^SET(-1);STL1^PLAY("ELAPSE");@IF("VARSCURRENTITEM","_",""KARTA_BUT"","BFITMP1064","");@IF("VARSCURRENTITEM","_",""KOSC_BUT"","BFITMP1065","");@IF("VARSCURRENTITEM","_",""ZWOJ_BUT"","BFITMP1066","");ANNSELECT^HIDE();@BREAK();};
{@LOOP("{VARSTEMP2^SET(["ANNITEM"+_I_]);*VARSTEMP2^SETPRIORITY(2999);}",0,VARINUMITEMS,1);VARIMENUVISIBLE^SET(-1);STL1^PLAY("ELAPSE");};
{DBOBJECTS^SELECT(VARINEXTTRIGGER);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("VARSCURRENTITEM'"NULL"||SOBJECT|TYPE!'2","BFITMP1110","");};
{DBITEMS^SELECT(VARITEMP0);SITEM^SET("DBITEMS_CURSOR");@IF("SITEM|BASE'G_SARCADEOBJECTS&&SITEM|PARENT>0","BFITMP1122","");};
{VARSTEMP0^SET([G_SARCADEOBJECTS+"\"+VARSTEMP1+".ARR"]);}
{VARSTEMP0^SET([G_SARCADEOBJECTS+"\"+VARSTEMP1+".ARR"]);}
{@IF("SOBJECT|IPARAM1","_","0","BFITMP1189","BFITMP1190");};
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP876","");@IF("G_SLASTOBJECTS","_",""BARANDALF"","BFITMP883","BFITMP884");BEHSELECTOBJS^RUN("BOBROMIR");@IF("SOBJECT|IPARAM0","_","0","BFITMP885","");BEHSELECTOBJS^RUN("BARAN");@IF("SOBJECT|IPARAM0","_","0","BFITMP886","");}
{BEHSELECTOBJS^RUN("MIOTLA");@IF("SOBJECT|IPARAM0","_","0","BFITMP890","");G_SARCADEOBJECTS^SET("5");PRZYGODA^GOTO("MIOTLY");}
{BEHSELECTOBJS^RUN("BOBROMIR");@IF("SOBJECT|IPARAM2","_","0","BFITMP898","");}
{BEHSELECTOBJS^RUN("BULBO");@IF("SOBJECT|IPARAM2","_","0","BFITMP899","");}
{BEHSELECTOBJS^RUN("LOVELAS");@IF("SOBJECT|IPARAM2","_","0","BFITMP900","");}
{BEHSELECTOBJS^RUN("MIMLI");@IF("SOBJECT|IPARAM2","_","0","BFITMP901","");}
{SOBJECT|IPARAM0^SET(2);BEHUPDATEOBJECTS^RUN();G_MENU^ADDEXP(30);BEHSELECTOBJS^RUN("BOBROMIR");@IF("SOBJECT|IPARAM0","_","0","BFITMP878","");BEHENTERALL^RUN();};
{BEHSELECTOBJS^RUN("BARAN");@IF("SOBJECT|IPARAM2","_","0","BFITMP877","");BEHSELECTOBJS^RUN("POINT");SOBJECT|TYPE^SET(0);BEHUPDATEOBJECTS^RUN();};
{BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS'"MAGIC_BARANMIOT"&&SOBJECT|IPARAM0'1","BFITMP879","");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","0","BFITMP880","");@IF("SOBJECT|IPARAM0","_","1","BFITMP881","");@IF("SOBJECT|IPARAM0","<","2","BFITMP882","");};
{BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP887","");@IF("SOBJECT|IPARAM0","_","0","BFITMP888","");};
{G_SCUTSCENE^SET("C_BARANDALF");VARSTEMP0^SET(BEHGETOBJECT^RUN("BARAN"));*VARSTEMP0^SHOW();BEHSELECTOBJS^RUN("BARAN");@IF("SOBJECT|IPARAM0","_","0","BFITMP895","");SOBJECT|IPARAM0^SET(1);BEHUPDATEOBJECTS^RUN();};
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP484","");@IF("G_SLASTOBJECTS","_",""MAGIC"","BFITMP485","");BEHSELECTOBJ^RUN(2);@IF("SOBJECT|IPARAM0'0||SOBJECT|IPARAM0'1000","BFITMP486","BFITMP487");ANNOBJECT15^STOP(FALSE);ANNOBJECT15^HIDE();BEHSELECTOBJ^RUN(5);@IF("SOBJECT|IPARAM0","_","0","BFITMP488","BFITMP489");BEHSELECTOBJS^RUN("KWIAT");@IF("SOBJECT|IPARAM0",">","0","BFITMP490","BFITMP491");VARSTEMP0^SET(BEHGETOBJECT^RUN("KRASNAL"));*VARSTEMP0^HIDE();@IF("G_SLASTOBJECTS'"LABIRYNT"&&G_ISUCCESS>0","BFITMP492","");}
{BEHSELECTOBJS^RUN("KWIAT");@IF("SOBJECT|IPARAM0","_","0","BFITMP497","");}
{@IF("G_SLASTOBJECTS","_",""PIWNICA"","BFITMP338","");@IF("G_SLASTOBJECTS","_",""SKLEPALCH"","BFITMP339","");@IF("G_SLASTOBJECTS","_",""MAGIC_DOMALCHOMIKA"","BFITMP340","");BEHSELECTOBJ^RUN(10);@IF("SOBJECT|IPARAM0","_","1","BFITMP341","");BEHTOGGLEKRET^RUN();@IF("G_IKRETACTIVE","_","1","BFITMP342","");VARSTEMP0^SET(BEHGETOBJECT^RUN("KARTKA1"));*VARSTEMP0^HIDE();BEHSELECTOBJS^RUN("DRZWI");@IF("SOBJECT|IPARAM0","_","0","BFITMP343","");}
{BEHSELECTOBJS^RUN("DRZWI2");@IF("SOBJECT|IPARAM0","_","1","BFITMP350","");}
{BEHSELECTOBJS^RUN("DRZWI");@IF("SOBJECT|IPARAM0","_","0","BFITMP351","");}
{BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","2","BFITMP347","");@IF("SOBJECT|IPARAM0","_","1","BFITMP348","");};
{BEHADDQUESTION^RUN("66");BEHADDQUESTION^RUN("67");BEHADDQUESTION^RUN("68");BEHADDQUESTION^RUN("69");BEHADDQUESTION^RUN("70");VARSTEMP0^SET(BEHGETOBJECT^RUN("POMOST2"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();BEHSELECTOBJS^RUN("SPIELMAUSTER");@IF("SOBJECT|IPARAM2'1&&G_SLASTOBJECTS'"DIALOGS"","BFITMP429","");BEHSELECTOBJ^RUN(10);@IF("SOBJECT|IPARAM0",">","0","BFITMP432","BFITMP433");@IF(BEHISFIRSTENTER^RUN(),"_","FALSE","BFITMP440","");BEHSELECTOBJ^RUN(5);@IF("SOBJECT|IPARAM0","_","0","BFITMP441","");@IF("SOBJECT|IPARAM0","_","1","BFITMP442","");@IF("SOBJECT|IPARAM0","_","2","BFITMP443","");@IF("SOBJECT|IPARAM0","_","3","BFITMP444","");ANNOBJECT10^PLAY(VARSTEMP1);DBTEMPOBJ^REMOVEALL();}
{BEHSELECTOBJS^RUN("SPIELMAUSTER");SOBJECT|TYPE^SET(1);BEHUPDATEOBJECTS^RUN();BEHSELECTOBJS^RUN("SPIELMAUSTER");@IF("SOBJECT|IPARAM2","_","0","BFITMP430","");};
{BEHSELECTOBJ^RUN(1);@IF("SOBJECT|IPARAM0","_","0","BFITMP434","");};
{@IF("SOBJECT|IPARAM2","_","0","BFITMP435","");};
{BEHSELECTOBJS^RUN("SPIELMAUSTER");@IF("SOBJECT|TYPE","_","0","BFITMP438","BFITMP439");};
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP507","");@IF("G_SLASTOBJECTS","_",""MAGIC"","BFITMP508","");BEHSELECTOBJ^RUN(4);@IF("SOBJECT|IPARAM0","_","2","BFITMP509","");}
{BEHSELECTOBJS^RUN("DRATEWKA");@IF("SOBJECT|IPARAM0","_","2","BFITMP516","BFITMP517");}
{BEHSELECTOBJS^RUN("BECZKA");@IF("SOBJECT|IPARAM0'0&&BEHFINDITEM^RUN("BECZKA_DRAT_BUT")>-1","BFITMP502","BFITMP503");};
{BEHSELECTOBJS^RUN("DRATEWKA");@IF("SOBJECT|IPARAM0","<","1","BFITMP513","BFITMP514");};
{BEHSELECTOBJS^RUN("BUIRKO");@IF("SOBJECT|IPARAM0","_","0","BFITMP109","BFITMP110");}
{BEHSELECTOBJS^RUN("BIURKO");@IF("SOBJECT|IPARAM0","_","1","BFITMP111","");}
{BEHTOGGLEKRET^RUN();@IF("G_IKRETACTIVE","_","1","BFITMP112","");BEHADDQUESTION^RUN("1");BEHADDQUESTION^RUN("2");BEHADDQUESTION^RUN("4");BEHADDQUESTION^RUN("11A");BEHADDQUESTION^RUN("7");BEHLOADTEMPOBJ^RUN("MIASTO");BEHSELECTTEMPOBJS^RUN("POMOST_PIKLIBIA");@IF("STEMPOBJ|IPARAM0","_","0","BFITMP114","");BEHSELECTOBJS^RUN("BUREKTOR");@IF("SOBJECT|IPARAM1'4&&G_CARD^ISFULL()'TRUE","BFITMP115","");BEHSELECTOBJS^RUN("BUREKTOR");@IF("SOBJECT|IPARAM1","_","6","BFITMP120","BFITMP121");@IF(BEHISFIRSTENTER^RUN(),"_","FALSE","BFITMP122","");}
{BEHSELECTOBJS^RUN("BUREKTOR");@IF("SOBJECT|IPARAM1","_","3","BFITMP127","BFITMP128");}
{BEHSELECTOBJS^RUN("BUREKTOR");@IF("SOBJECT|IPARAM1","_","0","BFITMP113","");};
{@IF("SOBJECT|IPARAM0",">","1","BFITMP116","");};
{VARSTEMP0^SET(BEHGETOBJECT^RUN("BUREKTOR"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS'"MAGIC_GABINETDYR"&&SOBJECT|IPARAM0'1","BFITMP117","BFITMP118");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP119","");};
{@IF("SOBJECT|IPARAM0","_","0","BFITMP842","BFITMP843");};
{BEHTOGGLEKRET^RUN();ANNOBJECT1^PLAY("STATE1");BEHADDQUESTION^RUN("51");VARITER^SET([G_ARRREXSPELLS^GET(0)+G_ARRREXSPELLS^GET(3)+G_ARRREXSPELLS^GET(6)+G_ARRREXSPELLS^GET(9)]);@IF(G_SLASTOBJECTS^FIND("MAGIC"),">","-1","BFITMP739","BFITMP740");@IF("G_SLASTOBJECTS","_",""MAGIC_GULDRYK13"","BFITMP741","");VARSTEMP0^SET(BEHGETOBJECT^RUN("KULA_BUDYN"));BEHSELECTOBJS^RUN("KULA_BUDYN");@IF("SOBJECT|IPARAM0","_","0","BFITMP742","");@IF(G_ARRREXSPELLS^GET(3),"_","1","BFITMP743","");VARSTEMP0^SET(BEHGETOBJECT^RUN("KULA_BUDYN_OBR"));BEHSELECTOBJS^RUN("KULA_BUDYN_OBR");@IF("SOBJECT|IPARAM0","_","0","BFITMP744","");@IF(G_ARRREXSPELLS^GET(9),"_","1","BFITMP745","");VARSTEMP0^SET(BEHGETOBJECT^RUN("KULA_SEN"));BEHSELECTOBJS^RUN("KULA_SEN");@IF("SOBJECT|IPARAM0","_","0","BFITMP746","");@IF(G_ARRREXSPELLS^GET(0),"_","1","BFITMP747","");VARSTEMP0^SET(BEHGETOBJECT^RUN("KULA_SEN_OBR"));BEHSELECTOBJS^RUN("KULA_SEN_OBR");@IF("SOBJECT|IPARAM0","_","0","BFITMP748","");@IF(G_ARRREXSPELLS^GET(6),"_","1","BFITMP749","");@IF(BEHISASKED^RUN("13"),"_","FALSE","BFITMP753","BFITMP754");}
{BEHHIDECURRENTITEM^RUN();@IF("VARSITEMTO'"OGLOSZENIE2_BUT"&&VARSITEMON'"GUL"","BFITMP755","");BEHLOADTEMPOBJ^RUN("RATUSZIN");BEHSELECTTEMPOBJS^RUN("OGLOSZENIE2");@IF("STEMPOBJ|IPARAM0","_","0","BFITMP759","");}
{BEHSELECTOBJS^RUN("MANEKIN");@IF("SOBJECT|IPARAM0","_","1","BFITMP763","");}
{BEHSELECTOBJS^RUN("WYJSCIE");@IF("SOBJECT|IPARAM0'0&&BEHFINDITEM^RUN("BROSZKA_BUT")'-1","BFITMP725","BFITMP726");};
{BEHSELECTOBJT^RUN(102);@IF("SOBJECT|IPARAM1","_","0","BFITMP751","");BEHSELECTOBJS^RUN("MANEKIN");@IF("SOBJECT|IPARAM0","_","0","BFITMP752","");BEHUPDATEOBJECTS^RUN();};
{VARIINTRO^SET(0);@IF("G_SLASTOBJECTS","_",""GABINETDYR"","BFITMP96","");BEHSELECTOBJS^RUN("ARRAS");@IF("SOBJECT|IPARAM0","_","1","BFITMP97","");BEHTOGGLEKRET^RUN();}
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP562","");@IF(BEHFINDITEM^RUN("BUTY_BUT"),">","-1","BFITMP564","");BEHSELECTOBJ^RUN(0);@IF("SOBJECT|IPARAM0","_","1","BFITMP565","");BEHSELECTOBJ^RUN(0);@IF("SOBJECT|TYPE","_","0","BFITMP566","");BEHLOADTEMPOBJ^RUN("SMOK");BEHSELECTTEMPOBJS^RUN("GORA");@IF("STEMPOBJ|IPARAM0","_","0","BFITMP569","BFITMP570");BEHSELECTOBJS^RUN("GRZEBIEN");@IF("SOBJECT|IPARAM0","_","1","BFITMP571","");}
{BEHHIDECURRENTITEM^RUN();BEHLOADTEMPOBJ^RUN("SMOK");BEHSELECTTEMPOBJS^RUN("GORA");@IF("STEMPOBJ|IPARAM0","_","1","BFITMP573","");}
{BEHSELECTOBJ^RUN(0);@IF("SOBJECT|IPARAM0","_","0","BFITMP574","");}
{BEHLOADTEMPOBJ^RUN("SMOK");BEHSELECTTEMPOBJS^RUN("GORA");@IF("STEMPOBJ|IPARAM0","_","1","BFITMP576","BFITMP577");}
{BEHSELECTOBJ^RUN(0);@IF("SOBJECT|IPARAM0","_","0","BFITMP563","");SOBJECT|IPARAM0^SET(1);SOBJECT|TYPE^SET(0);BEHUPDATEOBJECTS^RUN();};
{BEHSELECTOBJS^RUN("GRZEBIEN");@IF("SOBJECT|IPARAM2","_","0","BFITMP567","");};
{BEHSELECTOBJS^RUN("GRZEBIEN");@IF("SOBJECT|IPARAM0","!_","1","BFITMP568","");};
{BEHSELECTOBJS^RUN("BABA");VARITER^SET(SOBJECT|IPARAM0);BEHSELECTOBJS^RUN("GRZBIEN");@IF("SOBJECT|IPARAM0'0&&VARITER'0","BFITMP575","");};
{BEHSELECTOBJ^RUN(3);@IF("SOBJECT|IPARAM0","_","0","BFITMP471","");BEHSELECTOBJ^RUN(4);@IF("SOBJECT|IPARAM0","_","0","BFITMP472","");BEHSELECTOBJ^RUN(0);VARIWITH^SET(SOBJECT|IPARAM0);@IF("VARIWITH","_","1","BFITMP473","BFITMP474");BEHSELECTOBJS^RUN("KOSZYK");@IF("SOBJECT|IPARAM0","_","1","BFITMP475","");}
{@IF("G_SLASTOBJECTS","_",""GULDRYK"","BFITMP797","");@IF("G_SLASTOBJECTS","_",""UNIVPIWNICA"","BFITMP798","");@IF("G_SLASTOBJECTS","_",""WINDA"","BFITMP799","");BEHTOGGLEKRET^RUN();BEHSELECTOBJS^RUN("GES");VARIKURA^SET(SOBJECT|IPARAM0);@IF(BEHISASKED^RUN("75"),"_","FALSE","BFITMP800","");BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS","_",""MAGIC_KORYTARZ"","BFITMP802","BFITMP803");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP804","");}
{BEHLOADTEMPOBJ^RUN("GABINETDYR");BEHSELECTTEMPOBJS^RUN("BUREKTOR");@IF("STEMPOBJ|IPARAM2","_","0","BFITMP811","BFITMP812");}
{BEHSELECTOBJS^RUN("DO_WINDY");@IF("SOBJECT|TYPE","_","3","BFITMP813","");}
{@IF("SOBJECT|IPARAM0",">","1","BFITMP801","");};
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP531","");@IF("G_SLASTOBJECTS","_",""MAGIC"","BFITMP532","");DBTEMPOBJ^REMOVEALL();VARSTEMP0^SET("$COMMON\SMOK0.DTA");DBTEMPOBJ^LOAD(VARSTEMP0);DBTEMPOBJ^SELECT(4);STEMPOBJ^SET("DBTEMPOBJ_CURSOR");@IF("STEMPOBJ|IPARAM0","_","0","BFITMP533","BFITMP534");DBTEMPOBJ^REMOVEALL();BEHSELECTOBJ^RUN(3);@IF("SOBJECT|IPARAM0",">","0","BFITMP535","BFITMP536");}
{BEHSELECTOBJ^RUN(3);@IF("SOBJECT|IPARAM0","_","1","BFITMP539","BFITMP540");}
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP666","");BEHADDQUESTION^RUN("77");BEHADDQUESTION^RUN("87");BEHADDQUESTION^RUN("88");BEHADDQUESTION^RUN("89");BEHADDQUESTION^RUN("90");VARSTEMP0^SET(BEHGETOBJECT^RUN("DZIN"));*VARSTEMP0^HIDE();@IF(BEHISASKED^RUN("91"),"_","TRUE","BFITMP669","");BEHSELECTOBJ^RUN(0);@IF("SOBJECT|IPARAM0","_","0","BFITMP671","BFITMP672");BEHSELECTOBJS^RUN("CHRUMB");@IF("SOBJECT|IPARAM0","_","0","BFITMP673","");BEHLOADTEMPOBJ^RUN("SMOK");BEHSELECTTEMPOBJS^RUN("GORA");@IF("STEMPOBJ|IPARAM0","_","0","BFITMP676","BFITMP677");BEHTOGGLEKRET^RUN();}
{BEHSELECTOBJS^RUN("CHATKA");@IF("SOBJECT|IPARAM0","<","2","BFITMP682","");}
{BEHSELECTOBJS^RUN("KROLOWA");@IF("SOBJECT|IPARAM0","_","0","BFITMP667","");@IF("G_SDIALOGCHARACTER'"CHRUMBURAK"&&G_SLASTOBJECTS'"DIALOGS"","BFITMP668","");};
{ANNOBJECT0^STOP(FALSE);ANNOBJECT0^SETFRAME"STATE0",1);}
{@IF("SOBJECT|IPARAM0","_","2","BFITMP670","");};
{BEHSELECTOBJS^RUN("CHATKA");@IF("SOBJECT|IPARAM0","_","0","BFITMP674","");@IF("SOBJECT|IPARAM0","_","2","BFITMP675","");};
{VARSRETURN^SET(G_SLASTOBJECTS);ARRGATES^ADD("WEJSCIE_0","WEJSCIE_3D","WEJSCIE_1L","WEJSCIE_10L","WEJSCIE_11L","WEJSCIE_12L","WEJSCIE_13L","WEJSCIE_14L");ARRGATES^ADD("WEJSCIE_15L","WEJSCIE_16L","WEJSCIE_2L","WEJSCIE_3L","WEJSCIE_4L","WEJSCIE_5L","WEJSCIE_6L","WEJSCIE_7L");ARRGATES^ADD("WEJSCIE_8L","WEJSCIE_9L","WEJSCIE_1P","WEJSCIE_10P","WEJSCIE_11P","WEJSCIE_12P","WEJSCIE_13P","WEJSCIE_14P");ARRGATES^ADD("WEJSCIE_15P","WEJSCIE_16P","WEJSCIE_2P","WEJSCIE_3P","WEJSCIE_4P","WEJSCIE_5P","WEJSCIE_6P","WEJSCIE_7P");ARRGATES^ADD("WEJSCIE_8P","WEJSCIE_9P","WEJSCIE_17");ARRENTX^ADD(546,278,201,386,615,435,480,376,630,703,427,233,676,392,258,151,501,452);ARRENTY^ADD(852,590,504,459,473,377,233,200,169,53,64,76,-223,-60,-75,-43,-170,693);@LOOP("{VARSTEMP0^SET(["ANNOBJECT"+_I_]);*VARSTEMP0^SETPRIORITY(2000);}",0,19,1);@LOOP("{VARSTEMP0^SET(["ANNOBJECT"+_I_]);*VARSTEMP0^SETPRIORITY(1);}",19,ARRGATES^GETSIZE(),1);BEHSELECTOBJS^RUN("KROLIK");@IF("SOBJECT|IPARAM0","_","2","BFITMP359","");@IF("SOBJECT|IPARAM0","_","1","BFITMP360","");STL10^PLAY("ELAPSE");}
{BEHSELECTOBJS^RUN("KROLIK");@IF("SOBJECT|IPARAM0","_","0","BFITMP376","");}
{BEHINITBRIDGES^RUN();BEHSELECTOBJS^RUN("POMOST_PIKLIBIA");@IF("SOBJECT|IPARAM0","_","0","BFITMP179","");BEHSELECTOBJS^RUN("POMOST_KB");@IF("SOBJECT|IPARAM0","_","0","BFITMP180","");BEHSELECTOBJS^RUN("POMOST_BOBROR");@IF("SOBJECT|IPARAM0","_","0","BFITMP181","");@IF("G_SLASTOBJECTS","_",""UNIVFRONT"","BFITMP182","");@IF("G_SLASTOBJECTS","_",""DOMALCHOMIKA"","BFITMP183","");@IF("G_SLASTOBJECTS","_",""MAGIC_MIASTO_PRZYSTAN"","BFITMP184","");@IF("G_SLASTOBJECTS","_",""MAGIC_MIASTO_MIOTLISKO"","BFITMP185","");BEHTOGGLEKRET^RUN();BEHSELECTOBJS^RUN("GES_MIOTLISKO");VARIGESMIOTLISKO^SET(SOBJECT|IPARAM0);VARSTEMP0^SET(BEHGETOBJECT^RUN("GES_MIOTLISKO"));@IF("VARIGESMIOTLISKO","_","2","BFITMP186","");@IF("VARIGESMIOTLISKO","_","0","BFITMP187","");BEHSELECTOBJS^RUN("GES_PRZYSTAN");VARIGESPRZYSTAN^SET(SOBJECT|IPARAM0);VARSTEMP0^SET(BEHGETOBJECT^RUN("GES_PRZYSTAN"));@IF("VARIGESPRZYSTAN","_","2","BFITMP188","");@IF("VARIGESPRZYSTAN","_","0","BFITMP189","");@IF("G_IKRETACTIVE","_","0","BFITMP190","BFITMP191");@IF(G_SLASTOBJECTS^FIND("MIOTL"),">","-1","BFITMP192","");}
{BEHSELECTOBJS^RUN("POMOST_BOBROR");@IF("SOBJECT|IPARAM0","_","0","BFITMP209","BFITMP210");}
{BEHSELECTOBJS^RUN("POMOST_KB");@IF("SOBJECT|IPARAM0","_","0","BFITMP211","BFITMP212");}
{BEHSELECTOBJS^RUN("POMOST_PIKLIBIA");@IF("SOBJECT|IPARAM0","_","0","BFITMP213","BFITMP214");}
{BEHLOADTEMPOBJ^RUN("UNIVFRONT");BEHSELECTTEMPOBJS^RUN("NAKLADKA");@IF("BEHISASKED^RUN("65")'TRUE&&STEMPOBJ|IPARAM0'7","BFITMP228","");@IF(BEHISASKED^RUN("75"),"_","TRUE","BFITMP229","");@IF(BEHISASKED^RUN("80"),"_","TRUE","BFITMP230","");}
{VARSTEMP0^SET(BEHGETOBJECT^RUN("GES_MIOTLISKO"));*VARSTEMP0^PLAY("STATE0);}
{VARSTEMP0^SET(BEHGETOBJECT^RUN("GES_PRZYSTAN"));*VARSTEMP0^PLAY("STATE0);}
{BEHSELECTOBJS^RUN("POMOST_BOBROR");SOBJECT|IPARAM0^SET(0);BEHUPDATEOBJECTS^RUN();VARSTEMP0^SET(BEHGETOBJECT^RUN("DZIELNICA3));*VARSTEMP0^HIDE();}
{@IF(BEHISASKED^RUN("85"),"_","TRUE","BFITMP457","BFITMP458");BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS'"MAGIC_MIOTLISKO"&&SOBJECT|IPARAM0'1","BFITMP460","BFITMP461");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP462","");@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP463","");}
{BEHSELECTOBJS^RUN("MIOTLA");@IF("SOBJECT|IPARAM0","_","0","BFITMP468","");G_SARCADEOBJECTS^SET("3");PRZYGODA^GOTO("MIOTLY");}
{BEHSELECTOBJ^RUN(3);@IF("SOBJECT|IDNAME","_",""KAMIEN"","BFITMP454","");ANNOBJECT3^STOP(FALSE);ANNOBJECT3^HIDE();VARIKAMIEN^SET(2);};
{@IF("SOBJECT|IPARAM0",">","1","BFITMP459","");};
{BEHTOGGLEKRET^RUN();@IF(BEHISFIRSTENTER^RUN(),"_","FALSE","BFITMP823","");BEHSELECTOBJS^RUN("MIOTLA");@IF("SOBJECT|IPARAM0","_","1","BFITMP824","");}
{BEHSELECTOBJS^RUN("MIOTLA");@IF("SOBJECT|IPARAM0","_","1","BFITMP828","BFITMP829");}
{BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS'"MAGIC_NORASZ"&&SOBJECT|IPARAM0'1","BFITMP626","BFITMP627");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP628","");BEHLOADTEMPOBJ^RUN("JAGA");BEHSELECTTEMPOBJS^RUN("GRZEBIEN");@IF("STEMPOBJ|IPARAM0","_","0","BFITMP629","BFITMP630");}
{@IF("SOBJECT|IPARAM0",">","1","BFITMP625","");};
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP588","");ANNOBJECT5^PLAY("STATE0");STLJEZ^PLAY("ELAPSE");BEHSELECTOBJ^RUN(6);@IF("SOBJECT|IPARAM0","_","1","BFITMP589","BFITMP590");BEHSELECTOBJ^RUN(2);@IF("SOBJECT|IPARAM0","_","1","BFITMP591","BFITMP592");}
{ANNOBJECT4^PLAY("STATE1");BEHSELECTOBJS^RUN("JABLKO");@IF("SOBJECT|IPARAM0","_","2","BFITMP596","BFITMP597");}
{STLJEZ^PLAY("ELAPSE");BEHSELECTOBJS^RUN("NOGA1");@IF("SOBJECT|IPARAM0","_","1","BFITMP598","");}
{BEHSELECTOBJ^RUN(2);@IF("VARIJEZX'220&&SOBJECT|IPARAM0'0","BFITMP582","");VARIJEZDIR^MUL(-1);@IF(ANNOBJECT5^GETEVENTNAME(),"_",""STATE0"","BFITMP583","BFITMP584");};
{BEHLOADTEMPOBJ^RUN("DOMSPIEL");BEHSELECTTEMPOBJS^RUN("SPIELMAUSTER");@IF("STEMPOBJ|TYPE","_","0","BFITMP379","");@IF("G_SLASTOBJECTS'"LABIRYNT"&&G_ISUCCESS>0","BFITMP382","");BEHSELECTOBJ^RUN(24);@IF("SOBJECT|IPARAM0","_","0","BFITMP383","");@IF("G_SLASTOBJECTS","_",""DOMSPIEL"","BFITMP384","");ANNPOLA^LOAD("PIKLIBIA\POLA.ANN");ANNPOLA^SETPRIORITY(2000);@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);ARRJUNK^ADD(SOBJECT|IPARAM2);VARSTEMP0^SET(["ANNKNIGHT"+VARITER]);VARSTEMP1^SET(["PIKLIBIA\RYCERZ"+VARITER+".ANN"]);*VARSTEMP0^LOAD(VARSTEMP1);*VARSTEMP0^SETPRIORITY(2000);BEHSELECTOBJ^RUN(VARITER);ARRSTART^ADD(SOBJECT|IPARAM1);}",0,8,1);ARRKNIGHTX^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTY^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTDELTAX^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTDELTAY^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTFRAME^ADD(0,0,0,0,0,0,0,0);ARRLASTIDX^ADD(0,0,0,0,0,0,0,0);ARRRECENTFIELD^ADD(0,0,0,0,0,0,0,0);ARRCROSS^ADD(0,0,0);ARRLASTCROSS^ADD("NULL","NULL");ARRDEAD^ADD(1,1,1,1,1,1,1,1);BEHMAKEFIELDS^RUN();@LOOP("{VARITER2^SET(_I_);BEHPLACEATFIELD^RUN(VARITER2,ARRSTART^GET(VARITER2));VARITER^SET([VARITER2+8]);BEHSELECTOBJ^RUN(VARITER);@IF("SOBJECT|IPARAM1","_","0","BFITMP387","BFITMP388");}",0,8,1);@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);VARSTEMP0^SET(["ANNOBJECT"+VARITER]);*VARSTEMP0^SETPRIORITY(3);*VARSTEMP0^PLAY("STATE0");@LOOP("{BEHTOGGLECROSS^RUN(VARSTEMP0);VARSTEMP1^SET(*VARSTEMP0^GETEVENTNAME());}",0,SOBJECT|IPARAM0,1);}",0,24,1);@LOOP("{VARSTEMP0^SET(["ANNOBJECT"+_I_]);*VARSTEMP0^HIDE();}",32,8,1);VARSTEMP0^SET(BEHGETOBJECT^RUN("DO_MIOTLISKA"));*VARSTEMP0^SHOW();VARSTEMP0^SET(BEHGETOBJECT^RUN("DRZWI"));*VARSTEMP0^SHOW();}
{VARITEMP0^SET(ANNPOLA^GETNOF());ARRFIELDS^CLONE(VARITEMP0);@LOOP("{VARITER^SET(_I_);ANNPOLA^SETFRAME("PLAY",_I_);VARSTEMP0^SET(["ARRFIELDS_"+_I_]);VARSTEMP1^SET(ANNPOLA^GETFRAMENAME());@LOOP("{@IF(VARSTEMP1^LENGTH(),">","0","BFITMP396","");}",0,4,1);}",0,VARITEMP0,1);}
{VARITER2^SET($1);BEHSELECTOBJ^RUN(VARITER2);@IF("SOBJECT|IPARAM2","_","0","BFITMP413","BFITMP414");}
{BEHSELECTOBJS^RUN("DO_PODZIEMI");@IF("SOBJECT|IPARAM0","_","1","BFITMP419","BFITMP420");}
{BEHSELECTOBJS^RUN("DO_PODZIEMI");@IF("SOBJECT|IPARAM0","_","1","BFITMP421","");}
{BEHSELECTTEMPOBJS^RUN("SPIELMAUSTER");@IF("STEMPOBJ|TYPE","_","0","BFITMP424","BFITMP425");}
{BEHSELECTOBJS^RUN("DO_PODZIEMI");@IF("SOBJECT|TYPE","_","1","BFITMP381","");};
{VARITEMP0^SET(-1);@LOOP("{VARITEMP1^SET(*VARSTEMP1^GET(_I_));@IF(ARRRECENTFIELD^GET(VARITER),"!_","VARITEMP1","BFITMP390","");}",0,VARITEMP2,1);};
{VARITEMP1^SET(VARSTEMP1^FIND("-"));VARSTEMP2^SET(VARSTEMP1);@IF("VARITEMP1",">","-1","BFITMP393","BFITMP394");VARITEMP2^SET(VARSTEMP2);@IF("VARITEMP2","!_","VARITER","BFITMP395","");};
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP950","");BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS","_",""MAGIC_PIKMIOT"","BFITMP951","");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP952","");}
{BEHSELECTOBJS^RUN("MIOTLA");@IF("SOBJECT|IPARAM0","_","0","BFITMP957","");G_SARCADEOBJECTS^SET("1");PRZYGODA^GOTO("MIOTLY");}
{BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP953","");@IF("SOBJECT|IPARAM0","_","0","BFITMP954","");};
{BEHTOGGLEKRET^RUN();@IF("G_IKRETACTIVE'1&&BEHISFIRSTENTER^RUN()'FALSE","BFITMP231","");ANNDODO0^HIDE();ANNDODO1^HIDE();ANNDODO2^HIDE();BEHLOADDODOS^RUN();@IF("G_SLASTOBJECTS","_",""ALCHEMY"","BFITMP232","");BEHSELECTOBJS^RUN("NAKLADKA2");@IF("SOBJECT|IPARAM0","_","0","BFITMP233","");BEHSELECTOBJS^RUN("SKRZYNIA3");@IF("SOBJECT|IPARAM0","_","1","BFITMP234","");BEHSELECTOBJS^RUN("SKRZYNIA4");@IF("SOBJECT|IPARAM0","_","1","BFITMP235","");BEHSELECTOBJ^RUN(12);@IF("SOBJECT|IPARAM0","_","1","BFITMP236","");@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);VARSTEMP0^SET(["ANNOBJECT"+VARITER]);VARITER^MUL(10);@IF("SOBJECT|IPARAM0","_","1","BFITMP237","BFITMP238");}",1,8,1);BEHSELECTOBJ^RUN(15);@IF("SOBJECT|IPARAM0","_","0","BFITMP239","BFITMP240");BEHSELECTOBJ^RUN(23);@IF("SOBJECT|IPARAM0","_","0","BFITMP241","BFITMP242");BEHSELECTOBJ^RUN(29);@IF("SOBJECT|IPARAM0","_","0","BFITMP243","BFITMP244");BEHSELECTOBJ^RUN(25);@IF("SOBJECT|IPARAM0","_","0","BFITMP245","BFITMP246");BEHSELECTOBJ^RUN(22);@IF("SOBJECT|IPARAM0","_","0","BFITMP247","");}
{BEHSELECTOBJ^RUN(23);@IF("SOBJECT|IPARAM0","_","0","BFITMP248","");}
{BEHLOADTEMPOBJ^RUN("ALCHEMY");BEHSELECTTEMPOBJ^RUN(0);VARINUMDODOS^SET(STEMPOBJ|IPARAM2);VARSDODOPREFIX^SET(STEMPOBJ|SPARAM1);ANNDODO2^LOAD("PIWNICA\DODO1.ANN");ANNDODO1^LOAD("PIWNICA\DODO2.ANN");ANNDODO0^LOAD("PIWNICA\DODO3.ANN");ANNDODO0^HIDE();ANNDODO1^HIDE();ANNDODO2^HIDE();ANNDODO2^CLONE(17);ANNDODO1^CLONE(8);ANNDODO0^CLONE(23);ARRANIM0^ADD(0,0,0,0,0,0,0,0,10,26,14,18,22,6,30,3,11,27,15,19,7,31,23);ARRANIM1^ADD(0,10,26,14,18,22,6,30);ARRANIM2^ADD(3,11,27,15,19,23,7,31,0,2,10,26,14,18,22,6,30);ANNDODO0^CLONE(ARRANIM0^GETSIZE());ANNDODO1^CLONE(ARRANIM1^GETSIZE());ANNDODO2^CLONE(ARRANIM2^GETSIZE());@IF("VARINUMDODOS",">","0","BFITMP249","");}
{BEHSELECTOBJS^RUN("SKRZYNIA3");SOBJECT|IPARAM0^SET(1);BEHUPDATEOBJECTS^RUN();BEHSELECTOBJS^RUN("SKRZYNIA4");@IF("SOBJECT|IPARAM0","_","1","BFITMP255","");}
{BEHSELECTOBJS^RUN("SKRZYNIA4");SOBJECT|IPARAM0^SET(1);BEHUPDATEOBJECTS^RUN();BEHSELECTOBJS^RUN("SKRZYNIA3");@IF("SOBJECT|IPARAM0","_","1","BFITMP256","");}
{BEHSELECTOBJS^RUN("DO_PODZIEMI");@IF("SOBJECT|IPARAM0","_","0","BFITMP258","");G_SARCADEOBJECTS^SET("0");PRZYGODA^GOTO("LABIRYNT");@BREAK();}
{@IF("VARSSEQNAME","_",""KOT1","BFITMP42","");}
{@IF("G_SLASTOBJECTS","_",""LABIRYNTH"","BFITMP53","");BEHSELECTOBJS^RUN("CIASTKO");@IF("SOBJECT|IPARAM0","_","1","BFITMP54","");@IF("G_SLASTOBJECTS","_",""DIALOGS"","BFITMP56","");BEHADDQUESTION^RUN("95");ARRPATHORDER^ADD(4,2,1,5,3,6);BEHRESTORESZUF^RUN();BEHCHECKMASHPATH^RUN();BEHSELECTOBJS^RUN("GASIE");@IF("SOBJECT|IPARAM2'1&&VARBDONTSTART'FALSE","BFITMP57","");}
{@IF("VARSSEQNAME","_",""KOT3","BFITMP66","");@IF("VARSSEQNAME","_",""USE_CIASTECZKO"","BFITMP67","");@IF("VARSSEQNAME","_",""USE_GRZYBEK"","BFITMP68","");@IF("VARSSEQNAME","_",""PODIALOGSUKCES"","BFITMP69","");@IF("VARSSEQNAME","_",""GASIENICA_PREDIALOG"","BFITMP70","");}
{VARIFIRSTENTER^SET(0);WPATH^SETACTIVE(9000,20,TRUE);WPATH^SETACTIVE(9000,10,TRUE);BEHSELECTOBJS^RUN("GASIE");@IF("BEHISASKED^RUN("112")'TRUE&&SOBJECT|IPARAM2'0","BFITMP55","");};
{VARSTEMP0^SET(BEHGETOBJECT^RUN("GASIE));*VARSTEMP0^HIDE();BEHLOADSEQARREX^RUN("USE_GRZYBEK",FALSE);}
{SNDELECTRIC^PLAY();BEHINITBAD^RUN();VARSTEMP0^SET(BEHGETOBJECT^RUN("STRONA"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("BLYSK"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_GLOWA"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_GWIAZDKI"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_KORPUS"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_SZATY"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_POKONANY"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("MILION_KAWALKOW"));*VARSTEMP0^HIDE();@IF(G_SLASTOBJECTS^FIND("MAGIC"),">","-1","BFITMP995","BFITMP996");BEHSELECTOBJS^RUN("ZLY_GLOWA");@IF("SOBJECT|IPARAM0","_","1","BFITMP1000","");}
{BEHSELECTOBJS^RUN("ZLY_GLOWA");@IF("SOBJECT|IPARAM0","_","0","BFITMP993","");};
{CANVASOBSERVER^SETBACKGROUND("POMPA\BKG2.IMG");BEHHIDEALLBAD^RUN();G_AMBIENT^SETAMBIENT("NULL");ANNOBJECT1^STOP(FALSE);ANNOBJECT1^HIDE();VARIPOSDESTROY^SET(1);VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_KORPUS"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_SZATY"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_POKONANY"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_GWIAZDKI"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("OTWOR"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("MASZYNA"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("KOLO"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("PROMIENIE"));*VARSTEMP0^PAUSE();*VARSTEMP0^STOP();*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("RAMIE"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("TLOK"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("MILION_KAWALKOW"));*VARSTEMP0^SHOW();BEHSELECTOBJS^RUN("SZKATULKA");SOBJECT|TYPE^SET(1);BEHUPDATEOBJECTS^RUN();SNDELECTRIC^STOP(FALSE);BEHSELECTOBJS^RUN("STRONA");@IF("SOBJECT|IPARAM0","_","1","BFITMP997","");};
{BEHSELECTOBJS^RUN("OTWOR");@IF("SOBJECT|IPARAM0","_","0","BFITMP998","BFITMP999");};
{VARIPOSDESTROY^SET(1);BEHSELECTOBJT^RUN(101);SOBJECT|NAME^SET("POMPA\BKG2.IMG");BEHUPDATEOBJECTS^RUN();CANVASOBSERVER^SETBACKGROUND("POMPA\BKG2.IMG");VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_POKONANY"));*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("ZLY_GWIAZDKI"));*VARSTEMP0^HIDE();SNDELECTRIC^STOP(FALSE);G_SCUTSCENE^SET("C_WYBUCH");ANNOBJECT1^STOP(FALSE);ANNOBJECT1^HIDE();VARIPOSDESTROY^SET(1);VARSTEMP0^SET(BEHGETOBJECT^RUN("OTWOR"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("MASZYNA"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("KOLO"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("PROMIENIE"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("RAMIE"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("TLOK"));*VARSTEMP0^STOP(FALSE);*VARSTEMP0^HIDE();VARSTEMP0^SET(BEHGETOBJECT^RUN("MILION_KAWALKOW"));*VARSTEMP0^SHOW();SNDELECTRIC^STOP(FALSE);G_AMBIENT^SETAMBIENT("NULL");}
{BEHSELECTOBJ^RUN(11);@IF("SOBJECT|IPARAM0","_","1","BFITMP645","");BEHSELECTOBJ^RUN(10);@IF("SOBJECT|IPARAM0","_","1","BFITMP646","");BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS'"MAGIC_PRZEDSEZAMEM"&&SOBJECT|IPARAM0'1","BFITMP648","BFITMP649");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP650","");}
{@IF("SOBJECT|IPARAM0",">","1","BFITMP647","");};
{BEHSELECTOBJ^RUN(11);@IF(ANNOBJECT11^GETEVENTNAME(),"_",""STATE0"","BFITMP655","BFITMP656");@IF("SOBJECT|IPARAM1","_","0","BFITMP657","BFITMP658");};
{BEHSELECTOBJ^RUN(1);@IF("SOBJECT|IPARAM0","_","0","BFITMP447","BFITMP448");}
{BEHLOADTEMPOBJ^RUN("DOMSPIEL");BEHSELECTTEMPOBJS^RUN("SPIELMAUSTER");@IF("STEMPOBJ|TYPE","_","0","BFITMP449","");VARITEMP0^SET(4);BEHLOADSEQARR^RUN("WRZUT_LAST");};
{BEHSELECTOBJS^RUN("WODA");@IF("SOBJECT|IPARAM0","_","0","BFITMP830","");};
{BEHREMOVEQUESTION^RUN("42A");BEHLOADTEMPOBJ^RUN("SKLEPALCH");BEHSELECTTEMPOBJT^RUN(102);@IF("STEMPOBJ|IPARAM0","_","1","BFITMP836","");G_MENU^ADDEXP(20);BEHLOADSEQARREX^RUN("USE_LICENCJA",FALSE);BEHREMOVEITEM^RUN(VARSITEMTO);BEHSELECTOBJS^RUN("SMOK_GLOWA");SOBJECT|IPARAM0^SET(1);BEHUPDATEOBJECTS^RUN();};
{BEHTOGGLEKRET^RUN();ARRDOORS^ADD(10,6,4,8,2,-1,1,9,3,7,0);ANNOBJECT23^SETFPS(6);ARRKRETS^ADD("UNIVFRONT","UNIVBACK","GABINETDYR","MIASTO","PRZYSTAN","DOMALCHOMIKA");ARRKRETS^ADD("SKLEPALCH","RATUSZ","RATUSZIN","PIWNICA","KORYTARZ","UNIVPIWNICA","GULDRYK");ARRKRETS^ADD("GABINETSNEJKA","SALA","MIOTSHOP","HOLGLOWNY");BEHSELECTOBJS^RUN("KURA");@IF("SOBJECT|IPARAM1","_","0","BFITMP685","");@IF("G_IKRETACTIVE","_","1","BFITMP686","BFITMP687");}
{BEHSELECTOBJS^RUN("KURA");@IF("SOBJECT|IPARAM1","_","1","BFITMP695","");BEHSELECTOBJS^RUN("KURA");@IF("SOBJECT|IPARAM0","_","1","BFITMP700","BFITMP701");}
{@IF("SOBJECT|IPARAM0'0&&BEHISASKED^RUN("41")'TRUE","BFITMP698","");@IF("SOBJECT|IPARAM0'0&&BEHISASKED^RUN("41")'FALSE","BFITMP699","");};
{ZLY^LOAD(["SALA\"+ARRWIZARDS^GET(VARITER)+".ANN"]);VARSTEMP1^SET(ZLY^GETEVENTNAME());VARSTEMP1^SUB(0,8);VARITEMP1^SET(VARSTEMP1);ZLY^SETPRIORITY(VARITEMP1);BTNBAD^SETSTD("",FALSE);BTNBAD^SETSTD("ZLY",FALSE);ARRMAP^CHANGEAT(VARITER,7);}
{ARRMAP^CHANGEAT(VARITER,VARITEMP0);VARSTEMP0^SET(["DOBRY"+VARITEMP0]);*VARSTEMP0^LOAD(["SALA\"+ARRWIZARDS^GET(VARITER)+".ANN"]);VARSTEMP1^SET(*VARSTEMP0^GETEVENTNAME());VARSTEMP1^SUB(0,8);VARITEMP1^SET(VARSTEMP1);*VARSTEMP0^SETPRIORITY(VARITEMP1);VARITEMP2^SET([VARITEMP0-1]);VARSTEMP1^SET(["BTNGOOD"+VARITEMP2]);*VARSTEMP1^SETSTD("",FALSE);*VARSTEMP1^SETSTD(VARSTEMP0,FALSE);VARITEMP0^INC();}
{BEHSELECTOBJS^RUN("DZIN");@IF("SOBJECT|IPARAM0'0||SOBJECT|IPARAM0'2","BFITMP638","BFITMP639");}
{BEHSELECTOBJS^RUN("DZIN");@IF("SOBJECT|IPARAM0","_","0","BFITMP643","");}
{BEHSELECTOBJS^RUN("ALCHOMIK");@IF("SOBJECT|IPARAM0","_","0","BFITMP966","BFITMP967");}
{G_MENU^ADDEXP(10);BEHLOADTEMPOBJ^RUN("PRZYSTAN");BEHSELECTTEMPOBJS^RUN("SMOK_GLOWA");@IF("STEMPOBJ|IPARAM0","_","0","BFITMP958","BFITMP959");};
{BEHSELECTOBJ^RUN(1);@IF("SOBJECT|IPARAM0","_","0","BFITMP962","");};
{BEHLOADSEQARR^RUN("ALCHOMIK_PREKLUCZ");VARSTEMP0^SET(BEHGETOBJECT^RUN("SLINA"));*VARSTEMP0^PLAY("PLAY");@IF("SOBJECT|IPARAM1","_","0","BFITMP965","");};
{@IF("G_SLASTOBJECTS","_",""MAGIC"","BFITMP543","");BEHSELECTOBJ^RUN(4);@IF("SOBJECT|IPARAM0","_","0","BFITMP544","BFITMP545");BEHLOADTEMPOBJ^RUN("KROLOWA");BEHSELECTTEMPOBJS^RUN("KROLOWA");VARIINSP^SET(STEMPOBJ|IPARAM0);BEHLOADTEMPOBJ^RUN("CALINECZKA");BEHSELECTTEMPOBJS^RUN("BECZKA");@IF("STEMPOBJ|IPARAM0","_","1000","BFITMP546","");}
{BEHSELECTOBJS^RUN("SMOK");@IF("SOBJECT|IPARAM0","_","1","BFITMP552","");@IF("SOBJECT|IPARAM0","_","0","BFITMP553","");};
{BEHSELECTOBJS^RUN("GORA");@IF("SOBJECT|IPARAM0","_","0","BFITMP551","");};
{@IF("STEMPOBJ|IPARAM0'1000&&VARIINSP'1","BFITMP556","BFITMP557");};
{BEHSELECTOBJS^RUN("SNIEZKA");@IF("SOBJECT|IPARAM0","_","0","BFITMP525","BFITMP526");BEHSELECTOBJS^RUN("JABLKO");@IF("SOBJECT|IPARAM0","_","1","BFITMP527","");}
{BEHSELECTOBJS^RUN("SNIEZKA");@IF("SOBJECT|IPARAM0","_","0","BFITMP528","");}
{@IF("SOBJECT|IPARAM1","_","0","BFITMP524","");};
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP602","");BEHSELECTOBJ^RUN(3);@IF("SOBJECT|IPARAM0",">","1","BFITMP603","");}
{BEHSELECTOBJS^RUN("SZREKSIO");@IF("SOBJECT|IPARAM0","_","2","BFITMP609","BFITMP610");}
{BEHSELECTOBJS^RUN("SZREKSIO");@IF("SOBJECT|IPARAM0","_","2","BFITMP613","");};
{BEHSELECTOBJS^RUN("SZREKSIO");@IF("SOBJECT|IPARAM0","_","2","BFITMP615","");};
{@IF("G_SLASTOBJECTS","_",""TELEP_KURNIKI"","BFITMP169","");@IF("G_SLASTOBJECTS","_",""TELEP_WARSZTAT"","BFITMP170","");VARINUMASSEMBLED^SET(0);@LOOP("{VARITER^SET(_I_);VARSTEMP0^SET(["ANNOBJECT"+VARITER]);DBOBJECTS^SELECT(VARITER);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("SOBJECT|IPARAM0","_","1","BFITMP171","BFITMP172");}",4,16,1);STL8^PLAY("ELAPSE");@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP173","");}
{@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP619","");BEHSELECTOBJS^RUN("LAS");@IF("SOBJECT|IPARAM0","_","1","BFITMP620","BFITMP621");}
{BEHLOADTEMPOBJ^RUN("GABINETDYR");BEHSELECTTEMPOBJS^RUN("BUREKTOR");@IF("STEMPOBJ|IPARAM1","_","1","BFITMP710","");@IF("STEMPOBJ|IPARAM1","_","3","BFITMP711","");@IF("STEMPOBJ|IPARAM1","_","5","BFITMP712","");}
{G_MENU^ADDEXP(40);BEHLOADTEMPOBJ^RUN("GABINETDYR");BEHSELECTTEMPOBJS^RUN("BUREKTOR");STEMPOBJ|IPARAM1^SET(6);BEHUPDATETEMPOBJ^RUN();BEHLOADTEMPOBJ^RUN("KORYTARZ");BEHSELECTTEMPOBJS^RUN("DO_WINDY");STEMPOBJ|TYPE^SET(3);BEHUPDATETEMPOBJ^RUN();BEHSELECTTEMPOBJS^RUN("DRZWI_GULDRYK");STEMPOBJ|TYPE^SET(0);BEHUPDATETEMPOBJ^RUN();BEHSELECTTEMPOBJS^RUN("DO_GULDRYKA");STEMPOBJ|TYPE^SET(0);BEHUPDATETEMPOBJ^RUN();BEHSELECTOBJ;}
{VARIINTRO^SET(0);BEHSELECTOBJS^RUN("NAKLADKA");@IF(BEHISASKED^RUN("65"),"_","TRUE","BFITMP84","");@IF("G_SLASTOBJECTS","_",""HOLGLOWNY"","BFITMP85","");BEHTOGGLEKRET^RUN();BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS","_",""MAGIC_UNIVFRONT"","BFITMP86","");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP87","");}
{BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP91","");@IF("SOBJECT|IPARAM0","_","0","BFITMP92","");};
{@IF("G_SLASTOBJECTS","_",""KORYTARZ"","BFITMP713","");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP714","");@IF("G_SLASTOBJECTS","_",""MAGIC_UNIVPIWNICA"","BFITMP715","");BEHTOGGLEKRET^RUN();}
{BEHSELECTOBJS^RUN("DRZWI");@IF("SOBJECT|IPARAM0",">","0","BFITMP722","");}
{BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP716","");@IF("SOBJECT|IPARAM0","_","0","BFITMP717","");};
{BEHADDQUESTION^RUN("43B");@IF(BEHISFIRSTENTER^RUN(),"_","TRUE","BFITMP902","");@IF("G_SLASTOBJECTS","_",""WMWNETRZE"","BFITMP904","");BEHSELECTOBJS^RUN("GES");@IF("G_SLASTOBJECTS'"MAGIC_WMWEJSCIE"&&SOBJECT|IPARAM0'1","BFITMP906","BFITMP907");BEHSELECTOBJS^RUN("GES");@IF("SOBJECT|IPARAM0","_","1","BFITMP908","");}
{BEHSELECTOBJS^RUN("DO_SRODKA");@IF("SOBJECT|IPARAM0","_","0","BFITMP903","");};
{@IF("SOBJECT|IPARAM0",">","1","BFITMP905","");};
{G_SARCADEOBJECTS^SET("4');PRZYGODA^GOTO("DRAGON");@BREAK();}
{@IF("SOBJECT|IPARAM0","_","0","BFITMP916","BFITMP917");};
{CANVASOBSERVER^SETBACKGROUND(["BKG"+VARLEVEL+".IMG"]);IMGEXIT^LOAD(["EXIT"+VARLEVEL+".IMG"]);IMGEXIT^HIDE();IMGNAKLADKA^LOAD(["NAKLADKA"+VARLEVEL+".IMG"]);ANNWODA^LOAD(["WODA"+VARLEVEL+".ANN"]);ANNWODA^SETFPS(8);IMGMASK^LOAD(["MASK"+VARLEVEL+".IMG"]);IMGMASK^HIDE();ANNLISCIESLOTY^LOAD(["LISC_SLOT"+VARLEVEL+".ANN"]);WORLD^LOAD(["LEVEL"+VARLEVEL+".SEK"]);WORLD^SETGRAVITY(0,0,0);ANNDRUZYNA^PLAY("PLAY");ANNDRUZYNA^SETANCHOR("CENTER");WORLD^ADDBODY(100,1,0.0,100.0,0.0,0.0,0,1,2,20,20,20);WORLD^SETLIMIT(100,0,0,0,800,600,0);WORLD^SETMAXSPEED(100,50);WORLD^LINK(100,"ANNDRUZYNA");@IF("VARLEVEL","_","0","BFITMP9","BFITMP10");VARINT0^SET(ANNLISCIESLOTY^GETNOE());ANNLISCIE^CLONE(VARINT0);ANNLISCIESLOTY^CLONE(VARINT0);ANNLISCIE^HIDE();ANNLISCIESLOTY^HIDE();CANVASOBSERVER^REMOVE("ANNLISCIE");CANVASOBSERVER^REMOVE("ANNLISCIESLOTY");@LOOP("{VARSTRING0^SET(["ANNLISCIE_"+[_I_+1]]);VARSTRING1^SET(["ANNLISCIESLOTY_"+[_I_+1]]);*VARSTRING0^SETANCHOR("CENTER");*VARSTRING1^SETANCHOR("CENTER");*VARSTRING1^PLAY(_I_);*VARSTRING1^HIDE();*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^PLAY("PAUSE");}",0,VARINT0,1);ANNWODA^PLAY("PLAY");VARFORCEX^SET(0);VARFORCEY^SET(0);VARPLAYERNAME^SET("ANNDRUZYNA");VARPLAYERID^SET(100);WORLD^START();ANNELAPSE^PLAY("ELAPSE");SEQMANDOLINA^PLAY("ENTRE0");}
{CANVASOBSERVER^SETBACKGROUND(["BKG"+VARLEVEL+".IMG"]);IMGEXIT^LOAD(["EXIT"+VARLEVEL+".IMG"]);IMGEXIT^HIDE();IMGNAKLADKA^LOAD(["NAKLADKA"+VARLEVEL+".IMG"]);ANNWODA^LOAD(["WODA"+VARLEVEL+".ANN"]);ANNWODA^SETFPS(8);IMGMASK^LOAD(["MASK"+VARLEVEL+".IMG"]);IMGMASK^HIDE();ANNLISCIESLOTY^LOAD(["LISC_SLOT"+VARLEVEL+".ANN"]);WORLD^LOAD(["LEVEL"+VARLEVEL+".SEK"]);WORLD^SETGRAVITY(0,0,0);ANNDRUZYNA^PLAY("PLAY");ANNDRUZYNA^SETANCHOR("CENTER");WORLD^ADDBODY(100,1,0.0,100.0,0.0,0.0,0,1,2,20,20,20);WORLD^SETLIMIT(100,0,0,0,800,600,0);WORLD^SETMAXSPEED(100,50);WORLD^LINK(100,"ANNDRUZYNA");@IF("VARLEVEL","_","0","BFITMP65","BFITMP66");VARINT0^SET(ANNLISCIESLOTY^GETNOE());ANNLISCIE^CLONE(VARINT0);ANNLISCIESLOTY^CLONE(VARINT0);ANNLISCIE^HIDE();ANNLISCIESLOTY^HIDE();CANVASOBSERVER^REMOVE("ANNLISCIE");CANVASOBSERVER^REMOVE("ANNLISCIESLOTY");@LOOP("{VARSTRING0^SET(["ANNLISCIE_"+[_I_+1]]);VARSTRING1^SET(["ANNLISCIESLOTY_"+[_I_+1]]);*VARSTRING0^SETANCHOR("CENTER");*VARSTRING1^SETANCHOR("CENTER");*VARSTRING1^PLAY(_I_);*VARSTRING1^HIDE();*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^PLAY("PAUSE");}",0,VARINT0,1);ANNWODA^PLAY("PLAY");VARFORCEX^SET(0);VARFORCEY^SET(0);VARPLAYERNAME^SET("ANNDRUZYNA");WORLD^START();ANNELAPSE^PLAY("ELAPSE");SEQMANDOLINA^PLAY("ENTRE2");}
{@LOOP("{VARSTEMP0^SET(["ANNSMOKE_"+_I_]);*VARSTEMP0^HIDE();*VARSTEMP0^SETPOSITION(0,0);}",0,24,1);VARITEMP0^SET(0);VARITEMP1^SET(0);ARRCOLORS^REMOVEALL();VARITEMP2^SET(ARRQUESTIONS^GETSIZE());VARITEMP2^CLAMP(0,24);@LOOP("{VARITEMP2^SET(DBDIALOG^FIND("ID",ARRQUESTIONS^GET(_I_),0));VARITEMP2^MOD(6);VARITEMP2^INC();VARSTEMP2^SET(["PLAY"+VARITEMP2]);ARRCOLORS^ADD(VARITEMP2);VARSTEMP0^SET(["ANNSMOKE_"+_I_]);*VARSTEMP0^MOVE([VARITEMP0*88],[VARITEMP1*80]);*VARSTEMP0^PLAY(VARSTEMP2);*VARSTEMP0^SHOW();VARITEMP0^INC();@IF("VARITEMP0","_","4","BFITMP57","");}",0,VARITEMP2,1);}
{@LOOP("{VARSTEMP0^SET(["ANNSMOKEHIST_"+_I_]);*VARSTEMP0^HIDE();*VARSTEMP0^SETPOSITION(0,0);}",0,24,1);VARITEMP0^SET(0);VARITEMP1^SET(0);VARITEMP2^SET(ARRHISTORY^GETSIZE());VARITEMP2^CLAMP(0,24);@LOOP("{VARSTEMP0^SET(["ANNSMOKEHIST_"+_I_]);*VARSTEMP0^MOVE([VARITEMP0*88],[VARITEMP1*80]);*VARSTEMP0^SHOW();VARITEMP0^INC();@IF("VARITEMP0","_","4","BFITMP58","");}",0,VARITEMP2,1);}
{IMGWODA^SETPOSITION([795-[VARAMMO*2]],78);}
{VARINT0^SET(ANNLEVEL^GETNOFINEVENT(0));ANNELEMENT^CLONE(VARINT0);@LOOP("{ANNLEVEL^SETFRAME("PLAY",_I_);VARINT1^SET([ANNLEVEL^GETCENTERX()@10]);VARINT2^SET([ANNLEVEL^GETCENTERY()@10]);VARSTRING0^SET(ANNLEVEL^GETFRAMENAME());VARSTRING1^SET(["ANNELEMENT_"+[_I_+1]]);*VARSTRING1^SETFRAME(VARSTRING0,0);*VARSTRING1^MOVE(0,-1200);PATTERNBKG^ADD([VARSTRING0+"_"+_I_],VARINT1,VARINT2,VARSTRING1,0);}",0,VARINT0,1);ANNELEMENT^PLAY(0);ANNELEMENT^STOP(FALSE);ANNELEMENT^HIDE();ANNELEMENT^MOVE(-200,0);ANNLEVEL^PLAY(0);ANNLEVEL^STOP(FALSE);ANNLEVEL^HIDE();CANVASOBSERVER^REMOVE("ANNELEMENT");CANVASOBSERVER^REMOVE("ANNLEVEL");VARINT0^SET(ANNLEVELFIRE^GETNOFINEVENT(0));ANNFIRE^CLONE(VARINT0);@LOOP("{ANNLEVELFIRE^SETFRAME("PLAY",_I_);VARINT1^SET([ANNLEVELFIRE^GETCENTERX()@10]);VARINT2^SET([ANNLEVELFIRE^GETCENTERY()@10]);VARSTRING0^SET(["ANNFIRE_"+[_I_+1]]);*VARSTRING0^PLAY(ANNLEVELFIRE^GETFRAMENAME());*VARSTRING0^MOVE(0,-1200);*VARSTRING0^SETCLIPPING(0,0,800,500);VARSTRING1^SET(_I_);PATTERNFIRE^ADD(VARSTRING1,VARINT1,VARINT2,VARSTRING0,0);}",0,VARINT0,1);ANNFIRE^MOVE(0,-10200);ANNLEVELFIRE^MOVE(0,-10200);ANNFIRE^STOP(FALSE);ANNLEVELFIRE^STOP(FALSE);CANVASOBSERVER^REMOVE("ANNFIRE");CANVASOBSERVER^REMOVE("ANNLEVELFIRE");VARDIR^SET("F");VARFORCE^SET(0);VARPOSY^SET(200);VARAMMO^SET(100);VARWATER^SET(100);VARENERGY^SET(200);ARRAYFORCE^ADD(-7,-5,-3,-1,6,8,10,12,14,16);@LOOP("{VARINT0^SET(_I_);VARINT0^MUL(_I_);VARINT0^DIV(15);ARRAYGRAVITY^ADD(VARINT0);}",0,200,1);ANNSKRZYDLA^PLAY("UP");ANNKORPUS^PLAY(["LECI"+VARKORPUS]);GRDRAGON^ADD("ANNSKRZYDLA","ANNKORPUS","ANNGLOWA","ANNPTHEAD0","ANNPTHEAD1","ANNCOLLRIGHT","ANNCOLLUP","ANNCOLLDOWN","ANNDRAGONFIRE");WORLD^SETGRAVITY(0,-15,0);WORLD^ADDBODY(100,1,0.0,200.0,0,0.0,600,1,2,16,16,16);WORLD^SETPOSITION(100,380,200,0);WORLD^SETVELOCITY(100,-100,0,0);WORLD^LINK(100,"ANNSKRZYDLA",2);WORLD^START();ANNELAPSE^PLAY("ELAPSE");ANNAMMO^HIDE();ANNWATER^HIDE();ANNAMMO^CLONE(100);ANNWATER^CLONE(100);@LOOP("{*["ANNAMMO_"+[_I_+1]]^SETANCHOR("CENTER");*["ANNWATER_"+[_I_+1]]^SETANCHOR("CENTER");ARRAYAMMODX^ADD(0);ARRAYAMMODY^ADD(0);ARRAYWODADX^ADD(0);ARRAYWODADY^ADD(0);}",0,100,1);GRBKG^ADD("IMGBKG0","IMGBKG1","IMGBKG2","IMGBKG3");IMGBKGA^CLONE(2);IMGBKGB^CLONE(2);IMGBKGA^MOVE(0,800);IMGBKGB^MOVE(0,800);CANVASOBSERVER^REMOVE("IMGBKGA");CANVASOBSERVER^REMOVE("IMGBKGB");@LOOP("{VARINT0^SET([1600*_I_]);ARRAYBKGA^ADD(VARINT0);*["IMGBKGA_"+[_I_+1]]^MOVE(VARINT0,0);*["IMGBKGA_"+[_I_+1]]^SHOW();VARINT0^SET([2000*_I_]);ARRAYBKGB^ADD(VARINT0);*["IMGBKGB_"+[_I_+1]]^MOVE(VARINT0,2);*["IMGBKGB_"+[_I_+1]]^SHOW();}",0,2,1);@LOOP("{VARINT0^SET([800*_I_]);ARRAYBKG^ADD(VARINT0);*["IMGBKG"+_I_]^MOVE(VARINT0,0);}",0,4,1);}
{VARINT5^SET([VARINT0^ABS(VARINT0)@4]);VARINT4^SET([VARINT5+2]);VARINT3^SET([VARINT5+1]);VARINT2^SET(VARINT5);VARINT5^SET([0-VARINT0@VARINT0]);VARINT4^MUL(VARINT5);VARINT3^MUL(VARINT5);VARINT2^MUL(VARINT5);@IF("VARCPUSPEED","_","1","BFITMP83","");GRBKG^MOVE(VARINT3,0);IMGBKGB_1^MOVE(VARINT4,0);IMGBKGB_2^MOVE(VARINT4,0);ARRAYBKG^SUB([0-VARINT3]);ARRAYBKGB^SUB([0-VARINT4]);};
{KEYBOARD^SETAUTOREPEAT(FALSE);G_AMBIENT^SETAMBIENT("NULL");G_IFLIPPAGE^SET(1);__FLIP__^RUN();G_SLASTOBJECTS^SET("FRED");G_SARCADEOBJECTS^SET("FRED");SCENENAME^SET("FRED");FRED^STARTMUSIC("BAJKI.WAV");FRED^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));G_CURSOR^SETSCENE("FRED");G_MENU^SETSCENE("FRED");G_MENU^SAVESETS();VARENERGIA^SET(200);GROUPNAK^ADD("IMGNAK1","IMGNAK2","IMGNAK3","IMGNAK4","IMGNAK5","IMGNAK6","IMGNAK7","IMGNAK8","IMGNAK9","IMGNAK10","IMGNAK11","IMGNAK12","IMGNAK13","IMGNAK14","IMGNAK15","IMGNAK16","IMGNAK17","IMGNAK18");GROUPNAK^MOVE(0,-3000);ANNELEMENT^CLONE(ANNUKLAD^GETNOFINEVENT(0));ANNELEMENT^MOVE(-200,0);ANNELEMENT^HIDE();CANVASOBSERVER^REMOVE("ANNELEMENT");@LOOP("{ANNUKLAD^SETFRAME(0,_I_);VARSTRING0^SET(["ANNELEMENT_"+[_I_+1]]);VARX^SET([ANNUKLAD^GETCENTERX()@20]);VARY^SET([ANNUKLAD^GETCENTERY()@20]);*VARSTRING0^PLAY(ANNUKLAD^GETFRAMENAME());*VARSTRING0^MOVE(-200,0);PATBOARD^ADD(["E"+_I_],VARX,VARY,VARSTRING0,0);}",0,ANNUKLAD^GETNOFINEVENT(0),1);PATBOARD^MOVE(0,-3000);ANNENEMY^CLONE(ANNEUKLAD^GETNOFINEVENT(0));ANNENEMY^HIDE();CANVASOBSERVER^REMOVE("ANNENEMY");@LOOP("{ANNEUKLAD^SETFRAME(0,_I_);ANNEUKLAD^HIDE();VARSTRING0^SET(["ANNENEMY_"+[_I_+1]]);GROUPENEMY^ADD(VARSTRING0);*VARSTRING0^SETPOSITION(ANNEUKLAD^GETCENTERX(),[ANNEUKLAD^GETCENTERY()-3000]);*VARSTRING0^PLAY(ANNEUKLAD^GETFRAMENAME());}",0,ANNEUKLAD^GETNOFINEVENT(0),1);ANNCOLL^PLAY("ELAPSE");ANNPLAYERPOS^SETANCHOR("LEFTUPPER");ANNPLAYER^PLAY("IDLEL");ANNPLAYER^SETANCHOR("CENTER");ANNPLAYER^MOVE(100,400);VARPLAYERX^SET(175);VARPLAYERY^SET(3450);VARX^SET([VARPLAYERX@50*5]);VARY^SET([VARPLAYERY@50*5]);ANNPLAYERPOS^SETPOSITION(VARX,VARY);}
{VARX^SET([VARPLAYERX+VARALPHADX@50*5]);VARY^SET([VARPLAYERY+VARALPHADY@50*5]);@IF("VARX'5&&VARY'0","BFITMP31","");VARALPHA^SET(IMGLEVEL^GETALPHA(VARX,VARY));@IF("VARALPHA","_","0","BFITMP33","");VARPLAYERX^ADD(VARDX);VARPLAYERY^ADD(VARDY);ANNPLAYERPOS^SETPOSITION(VARX,VARY);BEHMOVEBKG^RUN();}
{VARX^SET([VARPLAYERX@50*5]);VARY^SET([VARPLAYERY-4@50*5]);VARINT0^SET([VARPLAYERX@50*50]);@IF(IMGLEVEL^GETALPHA(VARX,VARY),"!_","0","BFITMP9","BFITMP10");@BREAK();};
{VARX^SET([VARPLAYERX@50*5]);VARY^SET([VARPLAYERY+50@50*5]);VARINT0^SET([VARPLAYERX@50*50]);@IF(IMGLEVEL^GETALPHA(VARX,VARY),"!_","0","BFITMP14","BFITMP15");@BREAK();};
{VARX^SET([VARPLAYERX-25@50*5]);VARY^SET([VARPLAYERY+40@50*5]);@IF("IMGLEVEL^GETALPHA(VARX,VARY)'0||VARDIR'"L"","BFITMP18","BFITMP19");};
{VARX^SET([VARPLAYERX+25@50*5]);VARY^SET([VARPLAYERY+40@50*5]);@IF("IMGLEVEL^GETALPHA(VARX,VARY)'0||VARDIR'"R"","BFITMP24","BFITMP25");};
{@IF("VARINT0<200&&[VARSCROLL-VARDY]<3000","BFITMP34","BFITMP35");};
{@IF("VARINT0>400&&[VARSCROLL-VARDY]>0","BFITMP36","BFITMP37");};
{S_BFIRSTINTRO^SET(FALSE);__FLIP__^RUN();G_CURSOR^SETSCENE("HILLS");G_IFLIPPAGE^SET(0);G_SARCADEOBJECTS^SET("HILLS");G_SLASTOBJECTS^SET("NULL");G_MENU^SETSCENE("HILLS");G_MENU^SAVESETS();VARITEMP0^SET([S_IHILLNUMBER+1]);VARSTEMP0^SET(["HILLS"+VARITEMP0]);G_AMBIENT^SETAMBIENT(VARSTEMP0);VARSTEMP0^SET(["BEHINITHILLS"+S_IHILLNUMBER]);*VARSTEMP0^RUN();@LOOP("{VARSTEMP0^SET(["ANNHILL"+_I_]);ARRPOSITION^ADD(*VARSTEMP0^GETCURRFRAMEPOSY());ARRMOVEMENT^ADD(0.0);}",0,VARINUMHILLS,1);BEHPOSITIONHILLS^RUN();@LOOP("{VARIITER^SET(_I_);VARSTEMP0^SET(["ANNHILL"+_I_]);*VARSTEMP0^STOP(FALSE);}",0,VARINUMHILLS,1);STL0^PLAY("ELAPSE");@IF("S_IHILLNUMBER","_","0","BFITMP32","BFITMP33");}
{@LOOP("{VARIITER^SET(_I_);VARSTEMP3^SET(["ANNHILL"+VARIITER]);VARSTEMP0^SET(*VARSTEMP3^GETEVENTNAME(0));VARSTEMP1^SET(VARSTEMP0);VARSTEMP1^SUB(3,6);VARITEMP0^SET(VARSTEMP1);VARSTEMP1^SET(VARSTEMP0);VARSTEMP1^SUB(0,4);VARSTEMP1^SUB(3,2);VARITEMP1^SET(VARSTEMP1);VARSTEMP1^SET(VARSTEMP0);VARSTEMP1^SUB(0,8);VARITEMP2^SET(VARSTEMP1);*VARSTEMP3^SETPRIORITY(ARRPRIORITY^GET(VARIITER));}",0,VARINUMHILLS,1);}
{ARRPRIORITY^REMOVEALL();ARRPRIORITY^ADD(35,30,25,20,15,20,10,27,10);VARINUMHILLS^SET(9);VARILASTHILL^SET(6);@LOOP("{VARSTEMP0^SET(["GORKI0\HILL"+_I_+".ANN"]);VARSTEMP1^SET(["ANNHILL"+_I_]);*VARSTEMP1^LOAD(VARSTEMP0);*VARSTEMP1^SHOW();}",0,VARINUMHILLS,1);CANVASOBSERVER^SETBACKGROUND("GORKI0\BKG.IMG");IMGOVER1^LOAD("GORKI0\OVERLAY0.IMG");IMGOVER2^LOAD("GORKI0\OVERLAY1.IMG");IMGOVER3^LOAD("GORKI0\OVERLAY2.IMG");ARRADJACENT0^ADD(-1,7,-1,2,1,-1,-1,-1);ARRADJACENT1^ADD(0,2,3,-1,-1,-1,-1,-1);ARRADJACENT2^ADD(7,5,4,3,-1,1,-1,0);ARRADJACENT3^ADD(5,4,8,-1,-1,-1,4,2);ARRADJACENT4^ADD(-1,6,-1,8,-1,3,2,5);ARRADJACENT5^ADD(-1,-1,6,4,3,2,7,-1);ARRADJACENT6^ADD(-1,-1,-1,-1,-1,4,5,-1);ARRADJACENT7^ADD(-1,-1,5,-1,2,0,-1,-1);ARRADJACENT8^ADD(-1,-1,-1,-1,-1,-1,3,4);ARRCOEFF^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRRABBIT^ADD("ANNHILL1","ANNHILL2","ANNHILL3","ANNHILL4","ANNHILL5","ANNHILL6");}
{ARRPRIORITY^REMOVEALL();ARRPRIORITY^ADD(67,64,61,58,55,58,52,49,46,70,46,43,40,37,34);VARINUMHILLS^SET(15);VARILASTHILL^SET(8);@LOOP("{VARSTEMP0^SET(["GORKI1\GORKA"+_I_+".ANN"]);VARSTEMP1^SET(["ANNHILL"+_I_]);*VARSTEMP1^LOAD(VARSTEMP0);*VARSTEMP1^SHOW();}",0,VARINUMHILLS,1);CANVASOBSERVER^SETBACKGROUND("GORKI1\BKG.IMG");IMGOVER1^LOAD("GORKI1\NAKLADKA1.IMG");IMGOVER2^LOAD("GORKI1\NAKLADKA2.IMG");IMGOVER3^LOAD("GORKI1\NAKLADKA3.IMG");ARRADJACENT0^ADD(-1,-1,3,2,1,9,-1,-1);ARRADJACENT1^ADD(-1,2,5,-1,-1,-1,9,0);ARRADJACENT2^ADD(-1,3,4,5,-1,1,-1,0);ARRADJACENT3^ADD(-1,-1,10,4,5,2,0,-1);ARRADJACENT4^ADD(-1,10,7,6,-1,5,2,-1);ARRADJACENT5^ADD(-1,4,6,13,-1,-1,1,2);ARRADJACENT6^ADD(-1,7,8,14,13,-1,5,4);ARRADJACENT7^ADD(11,12,-1,8,-1,6,4,3);ARRADJACENT8^ADD(-1,-1,-1,-1,14,-1,6,7);ARRCOEFF^ADD(0.0,0.0,0.0,0.0,0.0,0.0,00.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRRABBIT^ADD("ANNHILL1","ANNHILL2","ANNHILL3","ANNHILL4","ANNHILL5","ANNHILL6","ANNHILL7","ANNHILL8");}
{ARRPRIORITY^REMOVEALL();ARRPRIORITY^ADD(70,67,61,58,61,55,52,49,46,43,67,64,55,37,34,0,0,0);VARINUMHILLS^SET(18);VARILASTHILL^SET(9);@LOOP("{VARSTEMP0^SET(["GORKI2\GORKA"+_I_+".ANN"]);VARSTEMP1^SET(["ANNHILL"+_I_]);*VARSTEMP1^LOAD(VARSTEMP0);*VARSTEMP1^SHOW();}",0,VARINUMHILLS,1);CANVASOBSERVER^SETBACKGROUND("GORKI2\BKG.IMG");IMGOVER1^LOAD("GORKI2\NAKLADKA1.IMG");IMGOVER2^LOAD("GORKI2\NAKLADKA2.IMG");IMGOVER3^HIDE();ARRADJACENT0^ADD(-1,1,11,10,-1,-1,-1,-1);ARRADJACENT1^ADD(-1,-1,2,-1,11,0,-1,-1);ARRADJACENT2^ADD(-1,-1,12,3,-1,11,1,-1);ARRADJACENT3^ADD(-1,12,6,-1,-1,4,11,2);ARRADJACENT4^ADD(-1,3,5,-1,-1,-1,10,11);ARRADJACENT5^ADD(6,14,16,-1,-1,-1,4,-1);ARRADJACENT6^ADD(12,7,13,14,5,4,-1,3);ARRADJACENT7^ADD(-1,8,9,13,-1,6,3,12);ARRADJACENT8^ADD(-1,-1,17,9,01,7,12,-1);ARRADJACENT9^ADD(17,-1,-1,-1,15,13,7,8);ARRCOEFF^ADD(0.0,30.0,00.0,0.0,0.0,0.0,80.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRRABBIT^ADD("ANNHILL1","ANNHILL2","ANNHILL3","ANNHILL4","ANNHILL5","ANNHILL6","ANNHILL7","ANNHILL8","ANNHILL9");}
{VARDTEMP1^MUL(-1.0);}
{VARSTRING2^SET(["ARRAYKUBEK"+VARINT0]);VARINT3^SET(*VARSTRING2^GET(0));VARINT4^SET(*VARSTRING2^GET(1));*VARSTRING4^ENABLE();*VARSTRING3^SETPRIORITY([11+ARRAYKUBEK^GET(VARLAYER)]);*VARSTRING3^SETPOSITION([VARINT3+90],[VARINT4+130-[ARRAYKUBEK^GET(VARLAYER)*5]]);}
{CANVASOBSERVER^SETBACKGROUND("BKG0.IMG");BEHPLAYERS^RUN();ANNWIEZIENIE^LOAD("WIEZIENIE0.ANN");ANNWIEZIENIE^HIDE();ANNBTN^LOAD("LEVEL0\BTN.ANN");ANNBTNMASK^LOAD("LEVEL0\BTNMASK.ANN");ANNBTNGRAPH^LOAD("LEVEL0\BTNGRAPH.ANN");ANNSWITCH^LOAD("LEVEL0\SWITCH.ANN");ANNSWITCHMASK^LOAD("LEVEL0\SWITCHMASK.ANN");ANNSWITCHGRAPH^LOAD("LEVEL0\SWITCHGRAPH.ANN");ANNLODKA^PLAY("4");ANNLAWA^PLAY("PLAY");ANNTELEP0^PLAY("PLAY");ANNTELEP1^PLAY("PLAY");ANNTELEP2^PLAY("PLAY");ANNTELEP3^PLAY("PLAY");ANNTELEP4^PLAY("PLAY");ANNTELEP5^PLAY("PLAY");ANNTELEP6^PLAY("PLAY");ANNGARG0^PLAY("PLAY");ANNGARG1^PLAY("PLAY");}
{@IF(ARRAYSAVE^GET(1),"_","0","BFITMP71","");@IF(ARRAYSAVE^GET(1),"_","1","BFITMP74","");ANNENEMY0^LOAD("OGIEN.ANN");ANNENEMY0PATH^LOAD("LEVEL0\ENEMY0_PATH.ANN");ANNENEMY0FIELD^LOAD("LEVEL0\ENEMY0_FIELD.ANN");ANNENEMY0MASK^LOAD("LEVEL0\ENEMY0_MASK.ANN");ANNENEMY0MMASK^LOAD("LEVEL0\ENEMY0_MMASK.ANN");ANNENEMY0MMASK^PLAY("UP");ARRAYENEMY0STARTX^ADD(4,8,12);ARRAYENEMY0STARTY^ADD(4,5,6);VARENEMYNAME^SET("ANNENEMY0");VARENEMYSTATE^SET("ARRAYENEMY0STATE");VARARRAYNAME^SET("ARRAYENEMY0");BEHINITENEMY^RUN();ANNENEMY1^LOAD("GES.ANN");ANNENEMY1PATH^LOAD("LEVEL0\ENEMY1_PATH.ANN");ANNENEMY1FIELD^LOAD("LEVEL0\ENEMY1_FIELD.ANN");ANNENEMY1MASK^LOAD("LEVEL0\ENEMY1_MASK.ANN");ANNENEMY1MMASK^LOAD("LEVEL0\ENEMY1_MMASK.ANN");ANNENEMY1MMASK^PLAY("UP");ARRAYENEMY1STARTX^ADD(18,8);ARRAYENEMY1STARTY^ADD(4,10);VARENEMYNAME^SET("ANNENEMY1");VARENEMYSTATE^SET("ARRAYENEMY1STATE");VARARRAYNAME^SET("ARRAYENEMY1");BEHINITENEMY^RUN();}
{CANVASOBSERVER^SETBACKGROUND("BKG1.IMG");IMGNAKLADKA^LOAD("BKG1NAKLADKA.IMG");IMGMASK^LOAD("MASK1.IMG");IMGMASK^HIDE();BEHPLAYERS^RUN();ANNWIEZIENIE^LOAD("WIEZIENIE0.ANN");ANNWIEZIENIE^HIDE();ANNBTN^LOAD("LEVEL1\BTN.ANN");ANNBTNMASK^LOAD("LEVEL1\BTNMASK.ANN");ANNBTNGRAPH^LOAD("LEVEL1\BTNGRAPH.ANN");ANNSWITCH^LOAD("LEVEL1\SWITCH.ANN");ANNSWITCHMASK^LOAD("LEVEL1\SWITCHMASK.ANN");ANNSWITCHGRAPH^LOAD("LEVEL1\SWITCHGRAPH.ANN");SEQLAB^PLAY("ENTRE_LAB1");}
{ARRAYPLAYERSSTARTX^ADD(1,2,1,1,1,18,13,14,15);ARRAYPLAYERSSTARTY^ADD(2,2,10,11,12,2,13,13,13);ARRAYPLAYERS^ADD("ANNPLAYER0","ANNPLAYER1","ANNPLAYER2","ANNPLAYER3","ANNPLAYER4","ANNPLAYER5","ANNPLAYER6","ANNPLAYER7","ANNPLAYER8");ANNENEMY0^LOAD("GES.ANN");ANNENEMY0PATH^LOAD("LEVEL1\ENEMY0_PATH.ANN");ANNENEMY0FIELD^LOAD("LEVEL1\ENEMY0_FIELD.ANN");ANNENEMY0MASK^LOAD("LEVEL1\ENEMY0_MASK.ANN");ANNENEMY0MMASK^LOAD("LEVEL1\ENEMY0_MMASK.ANN");ANNENEMY0MMASK^PLAY("UP");ARRAYENEMY0STARTX^ADD(3,9,15);ARRAYENEMY0STARTY^ADD(12,10,5);VARENEMYNAME^SET("ANNENEMY0");VARENEMYSTATE^SET("ARRAYENEMY0STATE");VARARRAYNAME^SET("ARRAYENEMY0");BEHINITENEMY^RUN();}
{CANVASOBSERVER^SETBACKGROUND("BKG2.IMG");IMGNAKLADKA^LOAD("BKG2NAKLADKA.IMG");IMGMASK^LOAD("MASK2.IMG");IMGMASK^HIDE();BEHPLAYERS^RUN();ANNBTN^LOAD("LEVEL2\BTN.ANN");ANNBTNMASK^LOAD("LEVEL2\BTNMASK.ANN");ANNBTNGRAPH^LOAD("LEVEL2\BTNGRAPH.ANN");ANNSWITCH^LOAD("LEVEL2\SWITCH.ANN");ANNSWITCHMASK^LOAD("LEVEL2\SWITCHMASK.ANN");ANNSWITCHGRAPH^LOAD("LEVEL2\SWITCHGRAPH.ANN");ANNLAWA^PLAY("PLAY");ANNCZASZKAA^PLAY("PLAY");ANNCZASZKAB^PLAY("PLAY");ANNITEM^PLAY("PLAY");SEQLAB^PLAY("ENTRE_LAB2");}
{ARRAYPLAYERSSTARTX^ADD(1,2);ARRAYPLAYERSSTARTY^ADD(2,2);ARRAYPLAYERS^ADD("ANNPLAYER0","ANNPLAYER1");ANNENEMY0^LOAD("LOCHA.ANN");ANNENEMY0PATH^LOAD("LEVEL2\ENEMY0_PATH.ANN");ANNENEMY0FIELD^LOAD("LEVEL2\ENEMY0_FIELD.ANN");ANNENEMY0MASK^LOAD("LEVEL2\ENEMY0_MASK.ANN");ANNENEMY0MMASK^LOAD("LEVEL2\ENEMY0_MMASK.ANN");ANNENEMY0MMASK^PLAY("UP");ARRAYENEMY0STARTX^ADD(14,11,1,3,10,1);ARRAYENEMY0STARTY^ADD(2,4,4,7,8,13);VARENEMYNAME^SET("ANNENEMY0");VARENEMYSTATE^SET("ARRAYENEMY0STATE");VARARRAYNAME^SET("ARRAYENEMY0");BEHINITENEMY^RUN();ANNENEMY1^LOAD("GES.ANN");ANNENEMY1PATH^LOAD("LEVEL2\ENEMY1_PATH.ANN");ANNENEMY1FIELD^LOAD("LEVEL2\ENEMY1_FIELD.ANN");ANNENEMY1MASK^LOAD("LEVEL2\ENEMY1_MASK.ANN");ANNENEMY1MMASK^LOAD("LEVEL2\ENEMY1_MMASK.ANN");ANNENEMY1MMASK^PLAY("UP");ARRAYENEMY1STARTX^ADD(2,11);ARRAYENEMY1STARTY^ADD(9,11);VARENEMYNAME^SET("ANNENEMY1");VARENEMYSTATE^SET("ARRAYENEMY1STATE");VARARRAYNAME^SET("ARRAYENEMY1");BEHINITENEMY^RUN();}
{ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(MOUSE^GETPOSX());VARILASTY^SET(MOUSE^GETPOSY());VARIDOMAGIC^SET(1);}
{@IF("VARIDOMAGIC","_","0","BFITMP30","");VARIX^SET(VARMOUSEPOSX);VARIY^SET(VARMOUSEPOSY);VARIDIRX^SET([VARIX-VARILASTX]);VARIDIRY^SET([VARIY-VARILASTY]);VARIDOT^SET([VARIDIRX*VARILASTDIRX]);VARIDOT^ADD([VARIDIRY*VARILASTDIRY]);VARDTEMP1^ARCTANEX(VARIDIRY,VARIDIRX);VARDTEMP0^LENGTH(VARIDIRX,VARIDIRY);@IF("VARDTEMP0","<","30","BFITMP31","");VARDTAN^ARCTANEX(VARIDIRY,VARIDIRX);@IF("VARDLASTTAN","<","0.0","BFITMP32","BFITMP33");@IF("VARDTEMP0","<","0.0","BFITMP34","");@IF("VARDTEMP0>45.0&&VARDTEMP0<315.0","BFITMP35","");ARRROUTEX^ADD(VARIX);ARRROUTEY^ADD(VARIY);VARDLASTTAN^SET(VARDTAN);VARILASTDIRX^SET(VARIDIRX);VARILASTDIRY^SET(VARIDIRY);VARILASTX^SET(VARIX);VARILASTY^SET(VARIY);VARILASTCLONE^INC();@IF("VARILASTCLONE",">","10","BFITMP36","");VARSTEMP0^SET(["ANNMAGIC_"+VARILASTCLONE]);*VARSTEMP0^SETPOSITION(VARIX,VARIY);*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}
{VARITEMP0^SET(0);VARITEMP1^SET(0);@LOOP("{VARITER^SET(_I_);@IF("VARITEMP0","_","0","BFITMP47","");}",0,VARITEMP2,1);@IF("VARITEMP0","_","1","BFITMP48","");}
{VARDTEMP0^MUL(-1.0);}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{@IF("VARPLAYERCHANGED","_","1","BFITMP265","");VARINT1^SET(*VARSWITCH^GETNOFINEVENT(*VARSWITCH^GETEVENTNAME()));@LOOP("{@IF("VARINT1","_","1","BFITMP266","BFITMP267");VARSTRING0^SET(["ANNSWITCHGRAPH_"+VARINT0]);VARSTRING1^SET(["ANNSWITCHMASK_"+VARINT0]);*VARSTRING0^SETPRIORITY(*VARSTRING0^GETFRAMENAME());VARINT2^SET(*VARSTRING1^GETCFRAMEINEVENT());VARINT2^INC();VARINT2^MOD(*VARSTRING1^GETNOFINEVENT(*VARSTRING1^GETEVENTNAME()));*VARSTRING0^SETFRAME(["A"+VARINT0],VARINT2);*VARSTRING1^SETFRAME(["A"+VARINT0],VARINT2);}",0,VARINT1,1);}
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);SNDTELE^PLAY();*VARPLAYERNAME^SETPOSITION(VARINT1,VARINT2);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTDBG^SET(0);}
{VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTX^SET(VARICURSORX);VARILASTY^SET(VARICURSORY);ANNWAND0^PLAY("IDLE");}
{VARITEMP0^SET([40@ARREFFECTLEVEL0^GET(1)]);@IF(ARREFFECTELAPSED0^GET(1),"_","0","BFITMP35","");@IF(ARREFFECTELAPSED0^GET(1),"_","VARITEMP0","BFITMP36","");ARREFFECTELAPSED0^ADDAT(1,1);}
{VARITEMP0^SET([40@ARREFFECTLEVEL1^GET(1)]);@IF(ARREFFECTELAPSED1^GET(1),"_","0","BFITMP37","");@IF(ARREFFECTELAPSED1^GET(1),"_","VARITEMP0","BFITMP38","");ARREFFECTELAPSED1^ADDAT(1,1);}
{G_AMBIENT^SETAMBIENT("MAGIC");ARRACTIVESPELLS^ADD(G_ARRREXSPELLS^GET(0),G_ARRREXSPELLS^GET(1),G_ARRREXSPELLS^GET(2),G_ARRREXSPELLS^GET(3),G_ARRREXSPELLS^GET(4));ARRACTIVESPELLS^ADD(G_ARRREXSPELLS^GET(5),G_ARRREXSPELLS^GET(6),G_ARRREXSPELLS^GET(7),G_ARRREXSPELLS^GET(8),G_ARRREXSPELLS^GET(9));ARRACTIVESPELLS^ADD(G_ARRREXSPELLS^GET(10),G_ARRREXSPELLS^GET(11));DBFIGHTERS^LOAD("$COMMON\FIGHTERS.DTA");DBFIGHTERS^SELECT(S_IMAGICFIGHTER);SFIGHTER^SET("DBFIGHTERS_CURSOR");S_SMAGICPLACE^SET(SFIGHTER|PLACE);BEHGETFIGHTERSPELLS^RUN();BEHLOADFIGHTER^RUN();VARBFLEE^SET(TRUE);ARRTUTSPELLS^ADD("TUT_SLEEP_","TUT_FROG_","TUT_FLIES_","TUT_PUDDING_","TUT_WHIRLS_","TUT_DARK_");ARRTUTSPELLS^ADD("TUT_SLEEPDEF_","TUT_FROGDEF_","TUT_FLIESDEF_","TUT_PUDDINGDEF_","TUT_WHIRLSDEF_","TUT_DARKDEF_");ANNFLIES1^CLONE(2);G_CURSOR^SETSCENE("MAGIC");G_MENU^SETSCENE("MAGIC");G_MENU^SHOWWAND(TRUE);G_MENU^SHOW(FALSE);@IF("S_IMAGICFIGHTER",">","1","BFITMP64","BFITMP65");@LOOP("{VARINUMREXSPELLS^ADD(ARRACTIVESPELLS^GET(_I_));}",0,12,1);S_SLIMBORETURN^SET(G_SLASTOBJECTS);VARSRETURNTO^SET(G_SLASTOBJECTS);G_SLASTOBJECTS^SET("MAGIC");ANNSPELL^CLONE(1000);ANNSPELL2^CLONE(1000);MOUSE^SETPOSITION(400,300);VARILASTX^SET(400);VARILASTY^SET(300);ANNMAGIC^CLONE(10);ANNMAGIC2^CLONE(10);VARIOFFSETX^SET([ANNSPELL^GETWIDTH()@2]);VARIOFFSETY^SET([ANNSPELL^GETHEIGHT()@2]);ARRENERGIZETIME^ADD(G_ARRREXSPELLS^GET(12),SFIGHTER|TIME);ARRDEFENSE^ADD(-1,-1);ARRTIMEELAPSED^ADD(0,0);ARREFFECTELAPSED0^ADD(0,0);ARREFFECTELAPSED1^ADD(0,0);ARREFFECTLEVEL0^ADD(0,0,0,0,0,0);ARREFFECTLEVEL1^ADD(0,0,0,0,0,0);ARRSPEEDFACTOR^ADD(1,1);ARRIDLENAME^ADD("IDLE","IDLE");ARRJUMP^ADD(0,0);ARRSLIDE^ADD(0.0,0.0);ARRREXDIR^ADD(0.0,0.0);ARRVELOCITY^ADD(0.0,0.0);ARRPATTERN0^ADD(270,45,315,90);ARRPATTERN1^ADD(90,0,270,180,45,135);ARRPATTERN2^ADD(90,225,0,225);ARRPATTERN3^ADD(180,90,0,90,180);ARRPATTERN4^ADD(270,45,270,135,0);ARRPATTERN5^ADD(0,225,315,180);ARRPATTERN6^ADD(0,90,180,270,0);ARRPATTERN7^ADD(280,0,90,0,270,135);ARRPATTERN8^ADD(225,135,45,315,180);ARRPATTERN9^ADD(270,180,90,180,270);ARRPATTERN10^ADD(45,180,315,180);ARRPATTERN11^ADD(180,45,135,0);ARRENEMYPARTS^ADD("ANNHEAD1","ANNBODY1","ANNWAND1");GRPMOVE^ADD("ANNBODY1","ANNWAND1","ANNHEAD1");@IF("SFIGHTER|TYPE","_","-1","BFITMP66","");@IF("SFIGHTER|TYPE","<","2","BFITMP67","");ARRSPELLTYPE^ADD(-1,-1);@LOOP("{VARSTEMP0^SET(["ANNMAGIC_"+_I_]);}",1,10,1);@LOOP("{VARSTEMP0^SET(["ITEM"+_I_]);}",0,12,1);ARRCOMPSPELLS^ADD("SPELL0_","SPELL1_","SPELL2_","SPELL3_","SPELL4_","SPELL5_","TUT_SLEEPDEF_","TUT_FROGDEF_","TUT_FIESDEF_","TUT_PUDDINGDEF_","TUT_WHIRLSDEF_","TUT_DARKDEF_");STL8^PLAY("ELAPSE");ANNBODY0^PLAY("IDLE");@IF("VARINUMREXSPELLS",">","0","BFITMP69","BFITMP70");ANNHEAD0^PLAY("IDLE");ANNBODY1^PLAY("IDLE");ANNWAND1^PLAY("IDLE");ANNHEAD1^PLAY("IDLE");MAGIC^STARTMUSIC("POJEDYNEK.WAV");MAGIC^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));@IF("S_IMAGICFIGHTER","_","13","BFITMP71","");@IF("S_IMAGICFIGHTER","_","14","BFITMP72","");@IF("S_IMAGICFIGHTER","_","15","BFITMP73","");@IF("S_IMAGICFIGHTER","_","16","BFITMP74","");@IF("S_IMAGICFIGHTER","_","17","BFITMP75","");@IF("S_IMAGICFIGHTER","_","18","BFITMP76","");@IF("S_IMAGICFIGHTER","_","19","BFITMP77","");@IF("S_IMAGICFIGHTER","_","20","BFITMP78","");@IF("S_IMAGICFIGHTER","_","21","BFITMP79","");@IF("S_IMAGICFIGHTER","_","22","BFITMP80","");@IF("S_IMAGICFIGHTER","_","23","BFITMP81","");@IF("S_IMAGICFIGHTER","_","24","BFITMP82","");@IF("S_IMAGICFIGHTER",">","39","BFITMP83","");@IF("S_IMAGICFIGHTER<13||S_IMAGICFIGHTER'30","BFITMP84","BFITMP85");}
{@IF("VARIWINNER>-1||VARITUTORIAL'1","BFITMP86","");VARIX^SET(VARICURSORX);VARIY^SET(VARICURSORY);VARIDIRX^SET([VARIX-VARILASTX]);VARIDIRY^SET([VARIY-VARILASTY]);VARIDOT^SET([VARIDIRX*VARILASTDIRX]);VARIDOT^ADD([VARIDIRY*VARILASTDIRY]);VARDTEMP1^ARCTANEX(VARIDIRY,VARIDIRX);VARDTEMP0^LENGTH(VARIDIRX,VARIDIRY);@IF("VARDTEMP0","<","30","BFITMP87","");VARDTAN^ARCTANEX(VARIDIRY,VARIDIRX);@IF("VARDLASTTAN","<","0.0","BFITMP88","BFITMP89");@IF("VARDTEMP0","<","0.0","BFITMP90","");@IF("VARDTEMP0>45.0&&VARDTEMP0<315.0","BFITMP91","");ARRROUTEX^ADD([VARIX-VARIOFFSETX]);ARRROUTEY^ADD([VARIY-VARIOFFSETY]);VARDLASTTAN^SET(VARDTAN);VARILASTDIRX^SET(VARIDIRX);VARILASTDIRY^SET(VARIDIRY);VARILASTX^SET(VARIX);VARILASTY^SET(VARIY);VARITUTCOUNT^INC();VARILASTCLONE^INC();@IF("VARILASTCLONE",">","10","BFITMP92","");VARSTEMP0^SET(["ANNMAGIC_"+VARILASTCLONE]);*VARSTEMP0^SETPOSITION([VARIX-VARIOFFSETX],[VARIY-VARIOFFSETY]);*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}
{VARITEMP0^SET(0);VARITEMP1^SET(0);@LOOP("{VARITER^SET(_I_);@IF("VARITEMP0","_","0","BFITMP114","");}",0,VARITEMP2,1);@IF("VARITEMP0","_","1","BFITMP115","");}
{VARSTEMP0^SET(SFIGHTER|SPELLS);@IF("SFIGHTER|TYPE",">","1","BFITMP170","BFITMP171");@WHILE("VARITEMP2","!_","0","{VARITEMP0^SET(VARSTEMP0^FIND("_"));@IF("VARITEMP0","_","-1","BFITMP176","BFITMP177");}");}
{@IF("SFIGHTER|TYPE","_","-1","BFITMP178","");@IF("SFIGHTER|TYPE","_","0","BFITMP179","");@IF("SFIGHTER|TYPE","_","1","BFITMP180","");@IF("SFIGHTER|TYPE","_","2","BFITMP181","");@IF("SFIGHTER|TYPE","_","3","BFITMP182","");@IF("SFIGHTER|TYPE","_","4","BFITMP183","");@IF("SFIGHTER|TYPE",">","1","BFITMP184","");ANNHEAD1^SETPRIORITY(15);ANNBODY1^SETPRIORITY(10);}
{VARITEMP0^SET(0);VARITEMP1^SET(0);VARITER2^SET(0);@LOOP("{VARITER^SET(_I_);VARITEMP0^ADD(ARREFFECTLEVEL0^GET(VARITER));@IF(ARREFFECTLEVEL0^GET(VARITER),">","VARITEMP1","BFITMP191","");}",0,6,1);VARITEMP2^SET(RANDOM^GET(0,100));@IF("VARITEMP2",">","50","BFITMP197","BFITMP198");@IF("VARITEMP2","_","-1","BFITMP201","");@RETURN(VARITEMP2);}
{VARITER^SET($1);@IF("SFIGHTER|TYPE","_","-1","BFITMP204","BFITMP205");}
{@IF("SFIGHTER|TYPE","_","-1","BFITMP208","BFITMP209");}
{@IF("SFIGHTER|TYPE","_","-1","BFITMP0","");@IF("SFIGHTER|TYPE","_","0","BFITMP1","");@IF("SFIGHTER|TYPE","_","1","BFITMP2","");};
{VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTDBG^SET(0);SNDREXSLEEP^PLAY();ANNWAND0^TOP(FALSE);ANNHEAD0^TOP(FALSE);ANNHEAD0^PLAY("SPI");ANNWAND0^STOP(FALSE);ANNWAND0^PLAY("ZWISA");ARRTIMEELAPSED^CHANGEAT(0,0);}
{BEHPLAYSOUND^RUN(5;);ANNHEAD1^STOP(FALSE);ANNHEAD1^PLAY("SPI");ANNWAND1^STOP(FALSE);ANNWAND1^PLAY("ZWISA");STLMAGIC^STOP(FALSE);ARRTIMEELAPSED^CHANGEAT(1,0);}
{ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(VARICURSORX);VARILASTY^SET(VARICURSORY);VARIDOMAGIC^SET(1);VARILASTDBG^SET(0);}
{@IF("SFIGHTER|TYPE","<","1","BFITMP68","");ANNWAND0^PLAY("IDLE");};
{VARDTEMP0^MUL(-1.0);}
{@IF("SFIGHTER|TYPE","_","0","BFITMP202","");@IF("SFIGHTER|TYPE","_","1","BFITMP203","");};
{VARITER^RANDOM(0,5);@IF("SFIGHTER|TYPE","_","0","BFITMP206","");@IF("SFIGHTER|TYPE","_","1","BFITMP207","");};
{VARITEMP0^SET([40@ARREFFECTLEVEL0^GET(1)]);@IF(ARREFFECTELAPSED0^GET(1),"_","0","BFITMP11","");@IF(ARREFFECTELAPSED0^GET(1),"_","VARITEMP0","BFITMP12","");ARREFFECTELAPSED0^ADDAT(1,1);}
{VARITEMP0^SET([40@ARREFFECTLEVEL1^GET(1)]);@IF(ARREFFECTELAPSED1^GET(1),"_","0","BFITMP13","");@IF(ARREFFECTELAPSED1^GET(1),"_","VARITEMP0","BFITMP14","");ARREFFECTELAPSED1^ADDAT(1,1);}
{VARIX^SET(VARICURSORX);VARIY^SET(VARICURSORY);VARIDIRX^SET([VARIX-VARILASTX]);VARIDIRY^SET([VARIY-VARILASTY]);VARIDOT^SET([VARIDIRX*VARILASTDIRX]);VARIDOT^ADD([VARIDIRY*VARILASTDIRY]);VARDTEMP1^ARCTANEX(VARIDIRY,VARIDIRX);VARDTEMP0^LENGTH(VARIDIRX,VARIDIRY);@IF("VARDTEMP0","<","30","BFITMP23","");VARDTAN^ARCTANEX(VARIDIRY,VARIDIRX);@IF("VARDLASTTAN","<","0.0","BFITMP24","BFITMP25");@IF("VARDTEMP0","<","0.0","BFITMP26","");@IF("VARDTEMP0>45.0&&VARDTEMP0<315.0","BFITMP27","");ARRROUTEX^ADD([VARIX-VARIOFFSETX]);ARRROUTEY^ADD([VARIY-VARIOFFSETY]);VARDLASTTAN^SET(VARDTAN);VARILASTDIRX^SET(VARIDIRX);VARILASTDIRY^SET(VARIDIRY);VARILASTX^SET(VARIX);VARILASTY^SET(VARIY);VARILASTCLONE^INC();@IF("VARILASTCLONE",">","10","BFITMP28","");VARSTEMP0^SET(["ANNMAGIC_"+VARILASTCLONE]);*VARSTEMP0^SETPOSITION([VARIX-VARIOFFSETX],[VARIY-VARIOFFSETY]);*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}
{VARDTEMP0^MUL(-1.0);}
{G_AMBIENT^SETAMBIENT("NULL");MIOTLY^RESUME();KEYBOARD^SETAUTOREPEAT(FALSE);G_IFLIPPAGE^SET(1);__FLIP__^RUN();MIOTLY^STARTMUSIC("LOTNAMIOTLE.WAV");MIOTLY^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));G_CURSOR^SETSCENE("MIOTLY");G_MENU^SETSCENE("MIOTLY");VARSPEED^SET(SYSTEM^GETMHZ());@IF("VARSPEED",">","799","BFITMP26","BFITMP27");VARSAVENAME^SET("$COMMON\MIOTLY0.ARR");@IF("G_SARCADEOBJECTS","_",""MIOTLY"","BFITMP30","BFITMP31");SCENENAME^SET("MIOTLY");G_SLASTOBJECTS^SET("MIOTLY");G_MENU^SAVESETS();VARBKGPOSY^SET(0);VARENERGIA^SET(200);ANNREX^SETANCHOR("CENTER");ANNREX^PLAY("0");ANNKRET^SETANCHOR("CENTER");ANNKRET^PLAY("0");ANNPT0^SETANCHOR("CENTER");ANNPT1^SETANCHOR("CENTER");ANNKURZ^CLONE(10);@LOOP("{*["ANNKURZ"_+[_I_+1]]^SETPRIORITY(20);*["ANNKURZ"_+[_I_+1]]^PLAY("PLAY");*["ANNKURZ_"+[_I_+1]]^SETANCHOR("CENTER");}",0,10,1);CNVLOADER^LOAD(["CNVLEVEL"+VARLEVEL+".CNV"]);BEHINITCNV^RUN();BEHINITLEVEL^RUN();BEHINITWORLD^RUN();SEQKRET^PLAY("ENTRE");SNDWIR^PLAY();}
{WORLD^SETGRAVITY(0,0,0);GROUPANIMO^ADD("ANNREX","ANNKRET","ANNR0","ANNR1","ANNR2","ANNR3","ANNR4","ANNR5","ANNR6","ANNKURZ_1","ANNKURZ_2","ANNKURZ_3","ANNKURZ_4","ANNKURZ_5","ANNKURZ_6","ANNKURZ_7","ANNKURZ_8","ANNKURZ_9","ANNKURZ_10");ARRAYANIMO^ADD("ANNREX","ANNKRET","ANNR0","ANNR1","ANNR2","ANNR3","ANNR4","ANNR5","ANNR6");ARRAYID^ADD(199,207,200,201,202,203,204,205,206);ARRAYDX^ADD(0,0,0,0,0,0,0,0,0);ARRAYDY^ADD(0,0,0,0,0,0,0,0,0);ANNREX^SETPOSITION(380,300);WORLD^ADDBODY(199,40,0.0,0.0,0,0.0,0,1,2,16,16,16);WORLD^SETPOSITION(199,380,300,0);WORLD^SETLIMIT(199,50,-9999999,0,750,9999999,0);WORLD^LINK(199,"ANNREX",2);WORLD^SETACTIVE(199,FALSE);ANNKRET^SETPOSITION(562,300);WORLD^ADDBODY(207,1,0.0,0,0.0,0.0,300,1,2,16,16,16);WORLD^SETPOSITION(207,562,300,0);WORLD^SETLIMIT(207,50,-9999999,0,750,9999999,0);WORLD^LINK(207,"ANNKRET",2);WORLD^SETACTIVE(207,FALSE);@LOOP("{*["ANNR"+_I_]^SETANCHOR("CENTER");VARINT0^SET([200+_I_]);VARINT1^SET([20*[_I_+1]+400]);VARINT2^SET([0-_I_*5]);VARSTRING0^SET(["ANNR"+_I_]);*VARSTRING0^SETANCHOR("CENTER");*VARSTRING0^PLAY("PLAY");*VARSTRING0^SETPOSITION(VARINT1,300);WORLD^ADDBODY(VARINT0,0.1,0.5,0.5,0.0,0.0,100000,1,2,16,16,16);WORLD^SETPOSITION(VARINT0,VARINT1,300,0);WORLD^SETLIMIT(VARINT0,50,-9999999,0,750,9999999,0);WORLD^LINK(VARINT0,VARSTRING0,2);}",0,7,1);WORLD^JOIN(199,200,400,300,0,0,-180,180);WORLD^JOIN(200,201,420,300,0,0,-180,180);WORLD^JOIN(201,202,440,300,0,0,-180,180);WORLD^JOIN(202,203,460,300,0,0,-180,180);WORLD^JOIN(203,204,480,300,0,0,-180,180);WORLD^JOIN(204,205,500,300,0,0,-180,180);WORLD^JOIN(205,206,520,300,0,0,-180,180);WORLD^JOIN(206,207,540,300,0,0,-180,180);WORLD^START();ANNELAPSE^PLAY("ELAPSE");ANNREXELAPSE^PLAY("ELAPSE");}
{VARINT0^SET(ANNLEVEL^GETNOFINEVENT(0));VARCLONE^SET(0);ANNELEMENT^CLONE(VARINT0);ANNREXMASK^CLONE(VARINT0);ANNKRETMASK^CLONE(VARINT0);@LOOP("{ANNLEVEL^SETFRAME("PLAY",_I_);VARINT1^SET([ANNLEVEL^GETPOSITIONX()@10]);VARINT2^SET([ANNLEVEL^GETPOSITIONY()@10]);VARSTRING1^SET(["ANNELEMENT_"+[_I_+1]]);VARSTRING2^SET(["ANNREXMASK_"+[_I_+1]]);VARSTRING3^SET(["ANNKRETMASK_"+[_I_+1]]);VARSTRING0^SET(ANNLEVEL^GETFRAMENAME());*VARSTRING1^SETFRAME(VARSTRING0,0);*VARSTRING2^SETFRAME(VARSTRING0,0);*VARSTRING3^SETFRAME(VARSTRING0,0);*VARSTRING2^HIDE();*VARSTRING3^HIDE();@IF(VARSTRING0^FIND("D"),"!_","-1","BFITMP32","BFITMP33");PATTERNMASKREX^ADD([VARSTRING0+"_MK_"+_I_],VARINT1,VARINT2,VARSTRING2,0);PATTERNMASKKRET^ADD([VARSTRING0+"_MK_"+_I_],VARINT1,VARINT2,VARSTRING3,0);*VARSTRING1^MOVE(-800,0);*VARSTRING2^MOVE(-800,0);*VARSTRING3^MOVE(-800,0);}",0,VARINT0,1);GROUPPATTERN^ADD("PATTERNBKG","PATTERNFOREST","PATTERNMASKREX","PATTERNMASKKRET");GROUPPATTERN^MOVE(0,VARBKGSTARTPOSY);@IF("VARSPEED","_","1","BFITMP34","");ANNELEMENT^PLAY(0);ANNELEMENT^STOP(FALSE);ANNELEMENT^HIDE();ANNELEMENT^MOVE(-1800,0);ANNREXMASK^PLAY(0);ANNREXMASK^STOP(FALSE);ANNREXMASK^HIDE();ANNREXMASK^MOVE(-1800,0);ANNKRETMASK^PLAY(0);ANNKRETMASK^STOP(FALSE);ANNKRETMASK^HIDE();ANNKRETMASK^MOVE(-1800,0);ANNLEVEL^PLAY(0);ANNLEVEL^STOP(FALSE);ANNLEVEL^HIDE();}
{ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(MOUSE^GETPOSX());VARILASTY^SET(MOUSE^GETPOSY());VARIDOMAGIC^SET(1);}
{@IF("VARIDOMAGIC","_","0","BFITMP35","");VARIX^SET($1);VARIY^SET($2);VARIDIRX^SET([VARIX-VARILASTX]);VARIDIRY^SET([VARIY-VARILASTY]);VARIDOT^SET([VARIDIRX*VARILASTDIRX]);VARIDOT^ADD([VARIDIRY*VARILASTDIRY]);VARDTEMP1^ARCTANEX(VARIDIRY,VARIDIRX);VARDTEMP0^LENGTH(VARIDIRX,VARIDIRY);@IF("VARDTEMP0","<","30","BFITMP36","");VARDTAN^ARCTANEX(VARIDIRY,VARIDIRX);@IF("VARDLASTTAN","<","0.0","BFITMP37","BFITMP38");@IF("VARDTEMP0","<","0.0","BFITMP39","");@IF("VARDTEMP0>45.0&&VARDTEMP0<315.0","BFITMP40","");ARRROUTEX^ADD(VARIX);ARRROUTEY^ADD(VARIY);VARDLASTTAN^SET(VARDTAN);VARILASTDIRX^SET(VARIDIRX);VARILASTDIRY^SET(VARIDIRY);VARILASTX^SET(VARIX);VARILASTY^SET(VARIY);VARILASTCLONE^INC();@IF("VARILASTCLONE",">","10","BFITMP41","");VARSTEMP0^SET(["ANNMAGIC_"+VARILASTCLONE]);*VARSTEMP0^SETPOSITION(VARIX,VARIY);*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}
{VARITEMP0^SET(0);VARITEMP1^SET(0);@LOOP("{VARITER^SET(_I_);@IF("VARITEMP0","_","0","BFITMP52","");}",0,VARITEMP2,1);@IF("VARITEMP0","_","1","BFITMP53","");}
{VARDTEMP0^MUL(-1.0);}
{VARINT0^SET([ARRAYPIECHURZYPARAM^GET(3)+VARENEMYNO]);@IF("VARINT0",">","VARSUKCES","BFITMP69","");VARENEMYNO^ADD(ARRAYPIECHURZYPARAM^GET(3));ANNPIECHUR^CLONE(1);VARPIECHURNO^INC();VARSTRING0^SET(["ANNPIECHUR_"+VARPIECHURNO]);*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$0","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$2","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$4","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$6","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$12","BEHANIMOPRIORITY");*VARSTRING0^SETFPS(ARRAYPIECHURZYPARAM^GET(2));*VARSTRING0^PLAY(["P"+RANDOM^GET(7)]);@IF(SEQDROB^ISPLAYING(),"_","FALSE","BFITMP70","");}
{VARINT0^SET([ARRAYGOOSEPARAM^GET(3)+VARENEMYNO]);@IF("VARINT0",">","VARSUKCES","BFITMP71","");VARENEMYNO^ADD(ARRAYGOOSEPARAM^GET(3));ANNGOOSE^CLONE(1);VARGOOSENO^INC();VARSTRING0^SET(["ANNGOOSE_"+VARGOOSENO]);*VARSTRING0^SETFPS(ARRAYGOOSEPARAM^GET(2));*VARSTRING0^SETPRIORITY(0);*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$0","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$2","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$4","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$6","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$8","BEHANIMOPRIORITY");*VARSTRING0^PLAY(["P"+RANDOM^GET(8)]);@IF(SEQDROB^ISPLAYING(),"_","FALSE","BFITMP72","");}
{VARINT0^SET([ARRAYKURAPARAM^GET(3)+VARENEMYNO]);@IF("VARINT0",">","VARSUKCES","BFITMP73","");VARENEMYNO^ADD(ARRAYKURAPARAM^GET(3));ANNKURA^CLONE(1);VARKURANO^INC();VARSTRING0^SET(["ANNKURA_"+VARKURANO]);*VARSTRING0^SETFPS(ARRAYKURAPARAM^GET(2));*VARSTRING0^SETPRIORITY(0);*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$0","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$2","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$4","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$6","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$8","BEHANIMOPRIORITY");*VARSTRING0^PLAY(["P"+RANDOM^GET(2)]);@IF(SEQDROB^ISPLAYING(),"_","FALSE","BFITMP74","");}
{@IF(GSAVE^GET("AWARIA_STATUS"),"_",""NIEODWIEDZONY"","BFITMP449","");ANNMASKA^LOAD("AWARIA_STATKU\AC_MASKS_EASY.ANN");ANNMASKA^HIDE();}
{BEHMUSICSET^RUN("REJS");BEHAMBIENTSNDPLAY^RUN("SFX_ENGIN_BGR");SFX_ENGIN_AWARIA^PLAY();CLSWALKEROBJ^NEW("REX");REX^LOADANIM("REX22");REX^ADDFRIEND("KRET22");REX^SETSPEED(7.0);DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("AWARIA_STATKU\DIALOGI.DTA");@IF(GSAVE^GET("AWARIA_STATUS"),"_",""NIEODWIEDZONY"","BFITMP466","");ARRWAVSDONE^REMOVEALL();ARRWAVSDONE^ADD(FALSE,FALSE,FALSE,FALSE);SDIFFSEL^SET(SGAMEDIFFICULTY);BEHINITSCENE^RUN();@IF(GSAVE^GET("AWARIA_STATUS"),"_",""NIEODWIEDZONY"","BFITMP467","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("AWARIA_STATKU\BKG.IMG");BEHINITPLAN^RUN();BEHINITMASKI^RUN();REX^LOADPATH("AWARIA_STATKU\PATHS","PLANSZA",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);}
{ANNPOD^CLONE(7);ANNPOD^PLAY("MOD_B0");ANNPOD_1^PLAY("MOD_BW0");ANNPOD_2^PLAY("MOD_C0");ANNPOD_3^PLAY("MOD_A0");ANNPOD_4^SETFRAME("PANEL",0);ANNPOD_5^SETFRAME("ZAWOR",0);ANNPOD_6^SETFRAME("TLOK",0);ANNPOD_7^SETFRAME("OBRAZ",0);ANNOBJ^CLONE(5);I1^SET(ANNOBJ^GETNOFINEVENT("PARA_STOP"));ANNOBJ^SETFRAME("PARA_STOP",[I1-1]);ANNOBJ_1^SETFRAME("PODEST",0);ANNOBJ_2^SETFRAME("SRUBA",0);ANNOBJ_4^SETFRAME("MLOTEK",0);ANNOBJ_5^SETFRAME("SZAFA",0);ANNOBJ^SETPRIORITY(820);ANNOBJ_2^SETPRIORITY(600);ANNOBJ_5^SETPRIORITY(810);I1^SET(GSAVE^GET("AWARIA_FRANCUZ_POS"));ANNOBJ_3^SETFRAME("FRANCUZ",I1);@IF("I1","<","3","BFITMP468","BFITMP469");@IF(INV^CHECK("FRANCUZ"),"_","TRUE","BFITMP470","");@IF(INV^CHECK("MLOTEK"),"_","TRUE","BFITMP471","");ANNNAK^CLONE(5);ANNNAK^PLAY("RURA");ANNNAK_1^PLAY("PARA");ANNNAK_2^SETFRAME("1PLAN",0);ANNNAK_3^SETFRAME("WSK_A",0);ANNNAK_4^SETFRAME("WSK_B",0);ANNNAK_5^SETFRAME("WSK_C",0);IMODBPOSX^SET(ANNPOD^GETPOSITIONX());IMODBPOSY^SET(ANNPOD^GETPOSITIONY());ANNPOD^ADDBEHAVIOUR("ONFRAMECHANGED","BEHMOVEWSKAZOWKIB");IMODCPOSX^SET(ANNPOD_2^GETPOSITIONX());IMODCPOSY^SET(ANNPOD_2^GETPOSITIONY());ANNPOD_2^ADDBEHAVIOUR("ONFRAMECHANGED","BEHMOVEPARAC");ANNOBJ^ADDBEHAVIOUR("ONFINISHED$PARA_START","BEHPARAFINISHEDSTART");ANNOBJ_3^ADDBEHAVIOUR("ONFINISHED$FRANCUZ_SPADA","BEHFRANCUZFINISHEDSPADA");ISTANMODA^SET(GSAVE^GET("AWARIA_STAN_MOD_A"));ISTANMODB^SET(GSAVE^GET("AWARIA_STAN_MOD_B"));ISTANMODC^SET(GSAVE^GET("AWARIA_STAN_MOD_C"));}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG1.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN1^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA1",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("DZIKI_ZACHOD");BEHAMBIENTSNDPLAY^RUN("SFX_WEST_BGRBRZEG");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1426","BFITMP1427");REX^LOADANIM("REX22","KRET22");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG2.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN2^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA2",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("DZIKI_ZACHOD");BEHAMBIENTSNDPLAY^RUN("SFX_WEST_BGR");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1428","BFITMP1429");REX^LOADANIM("REX16","KRET16");@IF("ILEVEL","_","1","BFITMP1431","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG3.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN3^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA3",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("DZIKI_ZACHOD");BEHAMBIENTSNDPLAY^RUN("SFX_WEST_BGR");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1432","BFITMP1433");REX^LOADANIM("REX22","KRET22");@IF("ILEVEL","_","1","BFITMP1435","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG4.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN4^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA4",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("DZIKI_ZACHOD");BEHAMBIENTSNDPLAY^RUN("SFX_WEST_BGR");@IF(GSAVE^GET("DZIKI_PLANSZA4_FIRST_TIME"),"_","TRUE","BFITMP1436","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG5.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN5^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA5",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@IF(GSAVE^GET("DZIKI_PLANSZA5_FIRST_TIME"),"_","TRUE","BFITMP1437","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG6.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN6^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA6",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@IF(GSAVE^GET("DZIKI_PLANSZA6_FIRST_TIME"),"_","TRUE","BFITMP1438","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG7.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN7^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA7",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@IF(GSAVE^GET("DZIKI_PLANSZA7_FIRST_TIME"),"_","TRUE","BFITMP1439","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG8.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN8^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA8",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG9.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN9^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA9",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("DZIKI_ZACHOD\BKG10.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN10^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("DZIKI_ZACHOD\PATHS","PLANSZA10",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_WEST_CAGE");@IF(GSAVE^GET("DZIKI_PLANSZA10_FIRST_TIME"),"_","TRUE","BFITMP1440","");}
{CLSWALKEROBJ^NEW("REX");REX^LOADANIM("REX22");REX^ADDFRIEND("KRET22");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1545","BFITMP1546");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("DZIKI_ZACHOD\DIALOGI.DTA");@LOOP("{ARRPODANNS^ADD(FALSE);ARROBJANNS^ADD(FALSE);ARRNAKANNS^ADD(FALSE);ARRMASKANNS^ADD(0);}",0,[10+1],1);SSTANGRATOW^SET(GSAVE^GET("DZIKI_GRATY"));ILEVEL^SET(GSAVE^GET("DZIKI_LEVEL"));IPLANSZASEL^SET(GSAVE^GET("DZIKI_PLANSZA_NO"));@IF("ILEVEL","_","1","BFITMP1548","");@IF("ILEVEL","_","2","BFITMP1550","");}
{@INT("IGSGGRATNO",$1);@STRING("SGSGGRATSTAN",SSTANGRATOW^GET(IGSGGRATNO));@RETURN(SGSGGRATSTAN);}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG1.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN1^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA1",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("EGIPT");BEHAMBIENTSNDPLAY^RUN("SFX_HANDEL_ULICA");@IF("ILEVEL","_","2","BFITMP474","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG2.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN2^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA2",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("EGIPT");BEHAMBIENTSNDPLAY^RUN("SFX_HANDEL_RZEKA");@IF("ILEVEL","_","1","BFITMP476","");@IF("ILEVEL","_","3","BFITMP477","");@IF("ILEVEL","_","4","BFITMP479","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG3.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN3^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA3",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("EGIPT");BEHAMBIENTSNDPLAY^RUN("SFX_HANDEL_ULICA");@IF("ILEVEL","_","1","BFITMP481","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG4.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN4^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA4",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("EGIPT");BEHAMBIENTSNDPLAY^RUN("SFX_HANDEL_PIRAMID");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP482","BFITMP483");REX^ADDFRIEND("KRET6");REX^LOADANIM("REX6","KRET6");@IF("ILEVEL","_","1","BFITMP485","");@IF("ILEVEL","_","2","BFITMP487","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG5.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN5^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA5",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@IF("ILEVEL","_","2","BFITMP489","");@IF("ILEVEL","_","3","BFITMP493","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG6.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN6^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA6",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("EGIPT");BEHAMBIENTSNDPLAY^RUN("SFX_RECZNIKI_DOM");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP494","BFITMP495");@IF(GSAVE^GET("EGIPT_PLANSZA6_REX_ZOSTAL"),"_","FALSE","BFITMP496","BFITMP497");@IF("ILEVEL","_","2","BFITMP503","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG7.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN7^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA7",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@IF("ILEVEL","_","3","BFITMP505","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG8.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN8^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA8",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG9.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN9^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA9",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG10.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN10^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA10",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG11.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN11^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA11",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("EGIPT\BKG12.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN12^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("EGIPT\PATHS","PLANSZA12",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@IF(GSAVE^GET("EGIPT_PLANSZA12_FIRST_TIME"),"_","TRUE","BFITMP506","");@IF("ILEVEL","_","3","BFITMP508","");}
{CLSWALKEROBJ^NEW("REX");@IF(GSAVE^GET("EGIPT_PRZEBRANIE"),"!_",""WIELBLAD"","BFITMP791","BFITMP792");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP793","BFITMP794");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("EGIPT\DIALOGI.DTA");@LOOP("{ARRPODANNS^ADD(FALSE);ARROBJANNS^ADD(FALSE);ARRNAKANNS^ADD(FALSE);ARRMASKANNS^ADD(0);}",0,[12+1],1);SDIFFSEL^SET(SGAMEDIFFICULTY);ILEVEL^SET(GSAVE^GET("EGIPT_LEVEL"));IPLANSZASEL^SET(GSAVE^GET("EGIPT_PLANSZA_NO"));@IF("ILEVEL'1&&GSAVE^GET("EGIPT1_STATUS")'"NIEODWIEDZONY"","BFITMP795","");@IF("ILEVEL'2&&GSAVE^GET("EGIPT2_STATUS")'"NIEODWIEDZONY"","BFITMP796","");@IF("ILEVEL'3&&GSAVE^GET("EGIPT3_STATUS")'"NIEODWIEDZONY"","BFITMP797","");@IF("ILEVEL'4&&GSAVE^GET("EGIPT4_STATUS")'"NIEODWIEDZONY"","BFITMP798","");}
{REX^DISABLE();ANNPOD4^ADDBEHAVIOUR("ONFINISHED$WPADAJA","BEHFINISHEDWPADAJA");BEHDIALOGPLAYOFF^RUN("WSTEP4A",10);}
{@IF(ARRPODANNS^GET(5),"_","FALSE","BFITMP850","");@IF(ARROBJANNS^GET(5),"_","FALSE","BFITMP851","");ANNPOD5^SETFRAME("SZTALUGA",0);S1^SET(GSAVE^GET("EGIPT_PLANSZA5_STAN_TABLICY"));I2^SET(S1^GET(1));I3^SET(S1^GET(2));ANNPOD5_1^SETFRAME("TABLICA1",0);ANNPOD5_2^SETFRAME("TABLICA2",I2);ANNPOD5_3^SETFRAME("TABLICA3",I3);ANNPOD5_4^SETFRAME("STOLIK",0);ANNOBJ5^PLAY("TOM_IDLE");ANNOBJ5_1^PLAY("JONES_IDLE");ANNOBJ5_2^SETFRAME("PAPIERY",0);ANNOBJ5_3^SETFRAME("NOTES",0);ANNOBJ5_4^SETFRAME("LAMPA",0);SPL5UKLADPRZYCISKOW^SET(GSAVE^GET("EGIPT_PLANSZA5_UKLAD_PRZYCISKOW"));I1^SET(SPL5UKLADPRZYCISKOW^GET(0));ANNOBJ5_5^SETFRAME("PRZ1_1",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(1));ANNOBJ5_6^SETFRAME("PRZ1_2",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(2));ANNOBJ5_7^SETFRAME("PRZ1_3",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(3));ANNOBJ5_8^SETFRAME("PRZ1_4",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(4));ANNOBJ5_9^SETFRAME("PRZ2_1",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(5));ANNOBJ5_10^SETFRAME("PRZ2_2",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(6));ANNOBJ5_11^SETFRAME("PRZ2_3",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(7));ANNOBJ5_12^SETFRAME("PRZ2_4",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(8));ANNOBJ5_13^SETFRAME("PRZ3_1",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(9));ANNOBJ5_14^SETFRAME("PRZ3_2",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(10));ANNOBJ5_15^SETFRAME("PRZ3_3",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(11));ANNOBJ5_16^SETFRAME("PRZ3_4",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(12));ANNOBJ5_17^SETFRAME("PRZ4_1",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(13));ANNOBJ5_18^SETFRAME("PRZ4_2",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(14));ANNOBJ5_19^SETFRAME("PRZ4_3",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(15));ANNOBJ5_20^SETFRAME("PRZ4_4",I1);I1^SET(GSAVE^GET("EGIPT_PLANSZA5_PRZEJSCIE_B"));ANNOBJ5_21^SETFRAME("PRZEJSCIE",I1);ANNOBJ5_21^ADDBEHAVIOUR("ONFINISHED$PRZEJSCIE_OPEN","BEHFINISHEDPRZEJSCIEOPEN");ANNNAK5^SETFRAME("1PLAN",0);ANNPOD5^SETPRIORITY(400);ANNPOD5_1^SETPRIORITY(403);ANNPOD5_2^SETPRIORITY(402);ANNPOD5_3^SETPRIORITY(401);ANNPOD5_4^SETPRIORITY(1000);ANNOBJ5_2^SETPRIORITY(1010);ANNOBJ5_3^SETPRIORITY(1010);ANNOBJ5_4^SETPRIORITY(1010);GPRZYCISKINAPANELU^SETPRIORITY(401);ANNPOD5^SHOW();ANNPOD5_1^SHOW();ANNPOD5_2^SHOW();ANNPOD5_3^SHOW();ANNPOD5_4^SHOW();ANNOBJ5^SHOW();ANNOBJ5_1^SHOW();ANNOBJ5_2^SHOW();ANNOBJ5_3^SHOW();ANNOBJ5_4^SHOW();@IF(GSAVE^GET("EGIPT_PLANSZA5_PRZEJSCIE_B"),"_","0","BFITMP852","");ANNOBJ5_21^SHOW();ANNNAK5^SHOW();ARROTHERIDLEOBJEVT^ADD("ANNOBJ5","TOM_","ANNOBJ5_1","JONES_");ANNRUNNEROTHERIDLE^PLAY("RUN");}
{BEHMUSICSET^RUN("KONSTANTYNOPOL");BEHAMBIENTSNDPLAY^RUN("SFX_KONST_PORT");CLSWALKEROBJ^NEW("REX");REX^LOADANIM("REX11");REX^ADDFRIEND("KRET11");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP426","BFITMP427");GSCROLL^ADD("REX");ILEVEL^SET(GSAVE^GET("KONST_LEVEL"));@IF("ILEVEL'1&&GSAVE^GET("KONST1_STATUS")'"NIEODWIEDZONY"","BFITMP428","");@IF("ILEVEL'2&&GSAVE^GET("KONST2_STATUS")'"NIEODWIEDZONY"","BFITMP429","");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("KONSTANTYNOPOL\DIALOGI.DTA");BEHINITSCENE^RUN();BEHSCROLLSETPOS^RUN(GSAVE^GET("ARCADE_SCROLL_POS_X"),GSAVE^GET("ARCADE_SCROLL_POS_Y"),FALSE);@IF("REX^GETPOSX()>53&&REX^GETPOSX()<68","BFITMP430","");@IF("ILEVEL","_","1","BFITMP432","");@IF("ILEVEL","_","2","BFITMP434","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("KONSTANTYNOPOL\BKG.IMG");BEHINITPLAN^RUN();BEHINITMASKI^RUN();REX^LOADPATH("KONSTANTYNOPOL\PATHS","PLANSZA",2000,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,2,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP247","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,2,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP248","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(1,3,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP249","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,2,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP250","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(2,3,4);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP251","");}",0,I3,1);I1^SET(GSAVE^GET("KONST_PRZEDZIALY_PRZEDZIAL_HOLMESA"));@IF("I1","_","0","BFITMP252","");@IF("I1","_","1","BFITMP255","");@IF("I1","_","2","BFITMP256","");}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,4,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP257","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,2);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP258","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP259","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(1,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP260","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,2);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP261","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(2,3);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP262","");}",0,I3,1);I1^SET(GSAVE^GET("KONST_PRZEDZIALY_PRZEDZIAL_HOLMESA"));@IF("I1","_","0","BFITMP263","");@IF("I1","_","1","BFITMP266","");@IF("I1","_","2","BFITMP267","");}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,4);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP268","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,2);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP269","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP270","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(1,5);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP271","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,2);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP272","");}",0,I3,1);}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(2,3);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP273","");}",0,I3,1);I1^SET(GSAVE^GET("KONST_PRZEDZIALY_PRZEDZIAL_HOLMESA"));@IF("I1","_","0","BFITMP274","");@IF("I1","_","1","BFITMP277","");@IF("I1","_","2","BFITMP278","");}
{GPOSTACIE^SETFRAME([""+IPRZEDZIALNR+"_IDLE"],0);ARRTMP^REMOVEALL();ARRTMP^ADD(0,4);I3^SET(ARRTMP^GETSIZE());I2^SET(RANDOM^GET(I3));@LOOP("{I1^SET(_I_);@IF("I1","!_","I2","BFITMP279","");}",0,I3,1);}
{BEHMUSICSET^RUN("ORIENT_EXPRESS");BEHAMBIENTSNDPLAY^RUN("SFX_TRAIN_INSIDE");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("KONST_PRZEDZIALY\DIALOGI.DTA");ILEVEL^SET(GSAVE^GET("KONST_PRZEDZIALY_LEVEL"));@IF(GSAVE^GET("KONST_PRZEDZIALY_STATUS"),"_",""NIEODWIEDZONY"","BFITMP369","");ISCREENPOSX^SET(GSAVE^GET("ARCADE_SCROLL_POS_X"));BKRETINSIDE^SET(GSAVE^GET("KONST_PRZEDZIALY_KRET_INSIDE"));BEHINITSCENE^RUN();BEHSCROLLSETPOS^RUN(GSAVE^GET("ARCADE_SCROLL_POS_X"),GSAVE^GET("ARCADE_SCROLL_POS_Y"),FALSE);GPOSTACIE_1^SETFRAME("NULL",0);SPRZEDZIALPOSTACIESEL^SET([""+IPRZEDZIALNR+SGAMEDIFFICULTY]);GPOSTACIE^SETPOSITION(0,0);ANNSTRZALKA^CLONE(1);ANNSTRZALKA_1^SETFRAME("R",0);BTNLEFT^SETSTD("ANNSTRZALKA");BTNRIGHT^SETSTD("ANNSTRZALKA_1");BEHSETBUTTONS^RUN();SLEVELSEL^SET([""+ILEVEL+SGAMEDIFFICULTY]);@IF("BKRETINSIDE","_","TRUE","BFITMP370","");ANNKRET^SETFRAME("IDLE",0);ANNRUNNERBKG^PLAY("RUN");@IF(GSAVE^GET("KONST_PRZEDZIALY_STATUS"),"_",""NIEODWIEDZONY"","BFITMP371","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("KONST_PRZEDZIALY\BKG.IMG");BEHINITPLAN^RUN();BEHINITMASKI^RUN();}
{BEHDIALOGSTOP^RUN(FALSE);@IF("SSTANMACHINY","_",""X210121121022X"","BFITMP1591","BFITMP1592");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN1^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("MACHINA\PATHS","PLANSZA1",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@IF(GSAVE^GET("MACHINA_PLANSZA1_PANEL"),"_",""NIEMA"","BFITMP1593","BFITMP1594");@IF(GSAVE^GET("MACHINA_PLANSZA1_PANEL"),"_",""WYSUWA"","BFITMP1595","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("MACHINA\BKG2.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN2^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_MU_BGR");REX^DISABLE();BTNRESTART^DISABLE();}
{CANVASOBSERVER^SETBACKGROUND("MACHINA\BKG1A.IMG");ANNRUNNERGLOWPRZYCISKI^HIDE();BEHLOCKMOUSE^RUN(FALSE);ANNOBJ1_13^PLAY("PANEL_WYSUWA");BEHDIALOGPLAY^RUN("SUKCES1",FALSE);}
{BEHMUSICSET^RUN("MU");CLSWALKEROBJ^NEW("REX");REX^LOADANIM("REX22");REX^ADDFRIEND("KRET22");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1648","BFITMP1649");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("MACHINA\DIALOGI.DTA");@LOOP("{ARRPODANNS^ADD(FALSE);ARROBJANNS^ADD(FALSE);ARRNAKANNS^ADD(FALSE);ARRMASKANNS^ADD(0);}",0,[2+1],1);@IF(GSAVE^GET("MACHINA_STATUS"),"_",""NIEODWIEDZONY"","BFITMP1651","");SSTANMACHINY^SET(GSAVE^GET("MACHINA_MACHINA_STAN"));SSTANPANELU^SET(GSAVE^GET("MACHINA_PANEL_STAN"));IPLANSZASEL^SET(GSAVE^GET("MACHINA_PLANSZA_NO"));@IF(GSAVE^GET("MACHINA_STATUS"),"_",""NIEODWIEDZONY"","BFITMP1652","");}
{@INT("IGSPPRZYCISKNO",$1);@STRING("SGSPPRZYCISKSTAN",SSTANPANELU^GET(IGSPPRZYCISKNO));@RETURN(SGSPPRZYCISKSTAN);}
{@INT("IGSMPRZYCISKNO",$1);@STRING("SGSMPRZYCISKSTAN",SSTANMACHINY^GET(IGSMPRZYCISKNO));@RETURN(SGSMPRZYCISKSTAN);}
{CANVASOBSERVER^SETBACKGROUND("MACHINA\BKG1A.IMG");}
{CANVASOBSERVER^SETBACKGROUND("MACHINA\BKG1.IMG");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG1.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN1^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);KRET^LOADPATH("PARYZ\PATHS","PLANSZA1",800,600);KRET^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);@IF(GSAVE^GET("PARYZ_PLANSZA1_PATH_SET"),"_",""GORA"","BFITMP17","BFITMP18");IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_BGR_PARYZ_MOST");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG2.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN2^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);KRET^LOADPATH("PARYZ\PATHS","PLANSZA2",800,600);KRET^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);KRET^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_BGR_PARYZ_SPIACY");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG3.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN3^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);KRET^LOADPATH("PARYZ\PATHS","PLANSZA3",800,600);KRET^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);KRET^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_BGR_PARYZ_LISTONOSZ");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG4.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN4^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);KRET^LOADPATH("PARYZ\PATHS","PLANSZA4",800,600);KRET^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);KRET^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BJPKZAGADANE^SET(FALSE);BEHAMBIENTSNDPLAY^RUN("SFX_BGR_PARYZ_PIEKARZ");}
{BEHMUSICSET^RUN("PARYZ");CLSWALKEROBJ^NEW("KRET");KRET^LOADANIM("KRET9_CIEMNY");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP213","BFITMP214");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("PARYZ\DIALOGI.DTA");@LOOP("{ARRPODANNS^ADD(FALSE);ARROBJANNS^ADD(FALSE);ARRNAKANNS^ADD(FALSE);ARRMASKANNS^ADD(0);}",0,[4+1],1);IPLANSZASEL^SET(GSAVE^GET("PARYZ_PLANSZA_NO"));@IF(GSAVE^GET("PARYZ_STATUS"),"_",""NIEODWIEDZONY"","BFITMP215","");}
{GSAVE^SET("PARYZ_PLANSZA3_LAMPA",1);CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG3_LAMP_ON.IMG");ANNNAK3_1^SETFRAME("LAMPA",1);BEHDIALOGPLAY^RUN("LAMPA3");BEHSFXPLAY^RUN("SFX_PARYZ_LAMPA");}
{GSAVE^SET("PARYZ_PLANSZA4_LAMPA",1);CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG4_LAMP_ON.IMG");ANNNAK4^SETFRAME("LAMPA",1);GSAVE^SET("PARYZ_PLANSZA4_STUDZIENKA_A",2);ANNPOD4^SETFRAME("STUD_A",2);ANNOBJ4_4^SETFRAME("KRASNAL",1);BEHDIALOGPLAY^RUN("LAMPA4");BEHSFXPLAY^RUN("SFX_PARYZ_LAMPA");}
{@IF(ARROBJANNS^GET(2),"_","FALSE","BFITMP222","");@IF(ARRNAKANNS^GET(2),"_","FALSE","BFITMP223","");CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG2_LAMP_ON.IMG");ANNPOD2^SETFRAME("DRZWI_N",0);ANNNAK2^SETFRAME("LAMPA",1);ANNOBJ2^SETFRAME("LATARNIK",1);@IF(INV^CHECK("ZAPALACZ"),"_","FALSE","BFITMP224","BFITMP225");ANNNAK2_1^PLAY("DYM");ANNPOD2^SHOW();ANNOBJ2^SHOW();ANNOBJ2_1^SHOW();ANNNAK2^SHOW();ANNNAK2_1^SHOW();}
{CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG3_LAMP_ON.IMG");}
{CANVASOBSERVER^SETBACKGROUND("PARYZ\BKG4_LAMP_ON.IMG");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG1.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN1^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA1",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("INDIE");BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@IF(GSAVE^GET("SCENE_INFO"),"_",""HANOI_DONE"","BFITMP1149","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG2.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN2^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA2",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@IF("SSTANMISEK","_",""X43132X"","BFITMP1150","BFITMP1151");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG3.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN3^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA3",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");SSTANMISEK^SET(GSAVE^GET("SZANGRILA_PLANSZA2_MISKI"));@IF("SSTANMISEK","_",""X43132X"","BFITMP1152","BFITMP1153");@IF(GSAVE^GET("SZANGRILA_PLANSZA3_FIRST_TIME"),"_","TRUE","BFITMP1154","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG4.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN4^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA4",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);IGMUSICVOLUMEFIX^SET(0);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@IF(GSAVE^GET("SZANGRILA_PLANSZA4_FIRST_TIME"),"_","TRUE","BFITMP1155","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG5.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN5^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA5",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG6.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN6^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA6",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG7.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN7^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA7",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG8.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN8^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA8",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("SZANGRILA\BKG9.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN9^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("SZANGRILA\PATHS","PLANSZA9",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHMUSICSET^RUN("KOMNATA_B");BEHAMBIENTSNDPLAY^RUN("SFX_JOHNES_CAGE");@INT("ITMPMISJAKANGUR",GSAVE^GET("SZANGRILA_MISJA_KANGUR"));@IF("ITMPMISJAKANGUR","_","4","BFITMP1156","");@IF("ITMPMISJAKANGUR","_","5","BFITMP1157","");@IF("ITMPMISJAKANGUR","_","6","BFITMP1158","");@IF("ITMPMISJAKANGUR","_","7","BFITMP1159","");}
{CLSWALKEROBJ^NEW("REX");REX^LOADANIM("REX22");REX^ADDFRIEND("KRET22");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1247","BFITMP1248");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("SZANGRILA\DIALOGI.DTA");@LOOP("{ARRPODANNS^ADD(FALSE);ARROBJANNS^ADD(FALSE);ARRNAKANNS^ADD(FALSE);ARRMASKANNS^ADD(0);}",0,[9+1],1);IMISJAKANGURA^SET(GSAVE^GET("SZANGRILA_MISJA_KANGUR"));IPLANSZASEL^SET(GSAVE^GET("SZANGRILA_PLANSZA_NO"));@IF("IPLANSZASEL","_","1","BFITMP1250","");@IF("IPLANSZASEL","_","2","BFITMP1252","");}
{@INT("IGSMMISKANO",$1);@STRING("SGSMMISKASTAN",SSTANMISEK^GET(IGSMMISKANO));@RETURN(SGSMMISKASTAN);}
{BEHMUSICSET^RUN("INTRO");BTNCLICK^SETPRIORITY(25000);DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("TEATRZYK\DIALOGI.DTA");BEHINITSCENE^RUN();ARRPOSTAC^REMOVEALL();ARRWAVCNT^REMOVEALL();ARRPOSTAC^ADD("KRET");ARRPOSTAC^ADD("KMH");ARRPOSTAC^ADD("REX");ARRPOSTAC^ADD("NEMO");ARRPOSTAC^ADD("SZH");ARRPOSTAC^ADD("MLOT");ARRPOSTAC^ADD("JONES");ARRPOSTAC^ADD("FROGG");ARRPOSTAC^ADD("GURU");ARRPOSTAC^ADD("WODZM");ARRPOSTAC^ADD("RAFIKI");ARRPOSTAC^ADD("RODAK");ARRPOSTAC^ADD("ROLL");ARRPOSTAC^ADD("SLON");ARRPOSTAC^ADD("WODZI");ARRPOSTAC^ADD("KOLI");ARRPOSTAC^ADD("NORNIK");ARRWAVCNT^ADD(1413);ARRWAVCNT^ADD(90);ARRWAVCNT^ADD(6);ARRWAVCNT^ADD(150);ARRWAVCNT^ADD(49);ARRWAVCNT^ADD(12);ARRWAVCNT^ADD(41);ARRWAVCNT^ADD(38);ARRWAVCNT^ADD(18);ARRWAVCNT^ADD(22);ARRWAVCNT^ADD(31);ARRWAVCNT^ADD(24);ARRWAVCNT^ADD(11);ARRWAVCNT^ADD(23);ARRWAVCNT^ADD(15);ARRWAVCNT^ADD(13);ARRWAVCNT^ADD(22);IILOSCPOSTACI^SET(ARRPOSTAC^GETSIZE());ARRMUSIC^REMOVEALL();ARRMUSIC^ADD("DOROZKA");ARRMUSIC^ADD("DZIKI_ZACHOD");ARRMUSIC^ADD("EGIPT");ARRMUSIC^ADD("HAPPYEND");ARRMUSIC^ADD("INDIE");ARRMUSIC^ADD("INTRO");ARRMUSIC^ADD("KOMNATA_B");ARRMUSIC^ADD("KONSTANTYNOPOL");ARRMUSIC^ADD("KRETES");ARRMUSIC^ADD("MASAJAJE");ARRMUSIC^ADD("MU");ARRMUSIC^ADD("ORIENT_EXPRESS");ARRMUSIC^ADD("PARYZ");ARRMUSIC^ADD("REJS");ARRMUSIC^ADD("WIEZA");ARRMUSIC^ADD("WYSPA");@INT("ITMPMUSICSCNT",ARRMUSIC^GETSIZE());ITMPMUSICSCNT^SET(RANDOM^GET(ITMPMUSICSCNT));@STRING("STMPMUSIC",ARRMUSIC^GET(ITMPMUSICSCNT));BEHMUSICSET^RUN(STMPMUSIC);ANNRUNNERMUSIC^PLAY("RUN");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("TEATRZYK\BKG.IMG");BEHINITPLAN^RUN();BEHINITMASKI^RUN();}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("WIOSKA_MASAJOW\BKG1.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN1^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("WIOSKA_MASAJOW\PATHS","PLANSZA1",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_MASAJ_GARNEK");}
{BEHDIALOGSTOP^RUN(FALSE);@IF("ILEVEL","_","1","BFITMP903","BFITMP904");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN2^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("WIOSKA_MASAJOW\PATHS","PLANSZA2",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@IF("ILEVEL","_","2","BFITMP905","");@IF("ILEVEL","_","1","BFITMP907","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("WIOSKA_MASAJOW\BKG3.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN3^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("WIOSKA_MASAJOW\PATHS","PLANSZA3",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@IF("ILEVEL","_","1","BFITMP910","BFITMP911");@IF("ILEVEL","_","1","BFITMP917","BFITMP918");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("WIOSKA_MASAJOW\BKG4.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN4^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("WIOSKA_MASAJOW\PATHS","PLANSZA4",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@IF(GSAVE^GET("WIOSKA_PLANSZA4_FIRST_TIME"),"_","TRUE","BFITMP919","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("WIOSKA_MASAJOW\BKG5.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN5^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("WIOSKA_MASAJOW\PATHS","PLANSZA5",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_MASAJ_JASKINIA");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP920","BFITMP921");REX^LOADANIM("REX11","KRET11");@IF(GSAVE^GET("WIOSKA_PLANSZA5_FIRST_TIME"),"_","TRUE","BFITMP922","");}
{BEHMUSICSET^RUN("MASAJAJE");CLSWALKEROBJ^NEW("REX");REX^LOADANIM("REX22");REX^ADDFRIEND("KRET22");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1110","BFITMP1111");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("WIOSKA_MASAJOW\DIALOGI.DTA");@LOOP("{ARRPODANNS^ADD(FALSE);ARROBJANNS^ADD(FALSE);ARRNAKANNS^ADD(FALSE);ARRMASKANNS^ADD(0);}",0,[5+1],1);SBUDOWAKURY^SET(GSAVE^GET("WIOSKA_PLANSZA3_BUDOWA_KURY"));ILEVEL^SET(GSAVE^GET("WIOSKA_LEVEL"));IPLANSZASEL^SET(GSAVE^GET("WIOSKA_PLANSZA_NO"));@IF("ILEVEL","_","1","BFITMP1113","");@IF("ILEVEL","_","2","BFITMP1115","");}
{@INT("IGBKITEMNO",$1);@STRING("SGBKITEMSTAN",SBUDOWAKURY^GET(IGBKITEMNO));@RETURN(SGBKITEMSTAN);}
{CANVASOBSERVER^SETBACKGROUND("WIOSKA_MASAJOW\BKG2.IMG");}
{CANVASOBSERVER^SETBACKGROUND("WIOSKA_MASAJOW\BKG2B.IMG");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("WYSPA\BKG1.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN1^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("WYSPA\PATHS","PLANSZA1",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_BRZEG");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1320","BFITMP1321");REX^LOADANIM("REX22","KRET22");BEHSCROLLSETPOS^RUN(0,0,FALSE);}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("WYSPA\BKG2.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN2^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("WYSPA\PATHS","PLANSZA2",1600,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1322","BFITMP1323");REX^LOADANIM("REX11","KRET11");BEHSCROLLSETPOS^RUN(GSAVE^GET("ARCADE_SCROLL_POS_X"),GSAVE^GET("ARCADE_SCROLL_POS_Y"),FALSE);@IF(GSAVE^GET("WYSPA_PLANSZA2_FIRST_TIME"),"_","TRUE","BFITMP1324","");}
{BEHDIALOGSTOP^RUN(FALSE);CANVASOBSERVER^SETBACKGROUND("WYSPA\BKG3.IMG");*["BEHINITPLAN"+IPLANSZALAST]^RUN(FALSE);BEHINITPLAN3^RUN(TRUE);BEHINITMASKI^RUN(IPLANSZASEL);REX^LOADPATH("WYSPA\PATHS","PLANSZA3",800,600);REX^SETPOS(GSAVE^GET("ARCADE_LEADER_POS_X"),GSAVE^GET("ARCADE_LEADER_POS_Y"),FALSE);REX^SETPATH(1,TRUE);IPLANSZALAST^SET(IPLANSZASEL);BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1325","BFITMP1326");REX^LOADANIM("REX22","KRET22");BEHSCROLLSETPOS^RUN(0,0,FALSE);@IF(GSAVE^GET("WYSPA_PLANSZA3_FIRST_TIME"),"_","TRUE","BFITMP1327","");}
{BEHMUSICSET^RUN("WYSPA");CLSWALKEROBJ^NEW("REX");REX^LOADANIM("REX22");@IF(GSAVE^GET("WYSPA_KRETES_JEST"),"_","TRUE","BFITMP1397","");@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP1398","BFITMP1399");GSCROLL^ADD("REX");DBDIALOGI^REMOVEALL();DBDIALOGI^LOAD("WYSPA\DIALOGI.DTA");@LOOP("{ARRPODANNS^ADD(FALSE);ARROBJANNS^ADD(FALSE);ARRNAKANNS^ADD(FALSE);ARRMASKANNS^ADD(0);}",0,[3+1],1);SSTANGRATOW^SET(GSAVE^GET("WYSPA_PLANSZA1_GRATY"));IPLANSZASEL^SET(GSAVE^GET("WYSPA_PLANSZA_NO"));@IF(GSAVE^GET("WYSPA_STATUS"),"_",""NIEODWIEDZONY"","BFITMP1400","");}
{@INT("IGSGGRATNO",$1);@STRING("SGSGGRATSTAN",SSTANGRATOW^GET(IGSGGRATNO));@RETURN(SGSGGRATSTAN);}
{ITNTSGATHERED^DEC();ITNTRX^SET(IPLAYERPOSX);ITNTRY^SET(IPLAYERPOSY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);I1^SUB(IBKGSTARTX);I2^SUB(IBKGSTARTY);GOBJ^ADD("ANNTNTR");ANNTNTR^SETPOSITION(I1,I2);ANNTNTR^PLAY("IDLE");ANNRUNNERTNTEXP^PLAY("RUN");}
{ANNPOLA^HIDE();ANNPOLACOPY^HIDE();DBLEVEL^REMOVEALL();DBLEVEL^LOAD(["LEV"+IBDLEVEL+"_"+SGAMEDIFFICULTY+".FLD"]);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));ISIZEX^SET(S1^GET(0,3));ISIZEY^SET(S1^GET(4,3));DBLEVEL^NEXT();STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));IPLAYERPOSX^SET(S1^GET(0,3));IPLAYERPOSY^SET(S1^GET(4,3));DBLEVEL^NEXT();I1^SET(0);@WHILE("I1","<","ISIZEY","{STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));@LOOP("{I2^SET(S1^GET([_I_*4],3));ARRMAPA^SET(_I_,I1,I2);}",0,ISIZEX,1);DBLEVEL^NEXT();I1^INC();}");ICENTERX^SET(6);ICENTERY^SET(5);ISCROLLMAXX^SET([[ISIZEX*IGRID]-[14*IGRID]]);ISCROLLMAXY^SET([[ISIZEY*IGRID]-[10*IGRID]]);IBKGSTARTX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);IBKGSTARTY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);IBKGSTARTX^CLAMP(0,ISCROLLMAXX);IBKGSTARTY^CLAMP(0,ISCROLLMAXY);ISCREENPOSX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);ISCREENPOSY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);ISLOWNIKSELECTOR^SET(IBDLEVEL);I1^SET(0);I2^SET(0);@WHILE("I1","<","ISIZEY","{@LOOP("{I3^SET(ARRMAPA^GET(_I_,I1));@IF("I3","_","5","BFITMP42","");@IF("I3>IINFO_OD&&I3<IINFO_DO","BFITMP43","");}",0,ISIZEX,1);I1^INC();}");ANNPLAYER^SETFPS(40);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPLAYER^SETPOSITION(I1,I2);CANVASOBSERVER^MOVEBKG(IBKGSTARTX,IBKGSTARTY);GOBJ^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);ANNPLAYER^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);IMGMASKCUT^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);BEHINITBKG^RUN();}
{I1^SET(0);@WHILE("I1","<","ISIZEX","{@LOOP("{ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[_I_*IGRID]);IPOLESEL^SET(ARRMAPA^GET(I1,_I_));I2^SET(RANDOM^GET(ANNPOLA^GETNOFINEVENT(SPOLE)));ANNPOLA^SETFRAME(SPOLE,I2);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[_I_*IGRID]);}",0,ISIZEY,1);I1^INC();}");}
{ISCREENPOSX^ADD([ILASTDIRX*IGRID]);ISCREENPOSY^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET(IPLAYERPOSX,IPLAYERPOSY,IEMPTY);ISPADX^SET(IPLAYERPOSX);ISPADY^SET(IPLAYERPOSY);SSPADANAME^SET(NULL);SSPADANIESELECTOR^SET(SPLAYEREVENT);IPLAYERLASTPOSX^SET(IPLAYERPOSX);IPLAYERLASTPOSY^SET(IPLAYERPOSY);IPLAYERPOSX^ADD(ILASTDIRX);IPLAYERPOSY^ADD(ILASTDIRY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",I1,I2);CANVASOBSERVER^REFRESH();@IF("IPCHANY",">","-1","BFITMP53","");ARRMAPA^SET(IPLAYERPOSX,IPLAYERPOSY,IPLAYER);}
{I2^SET([IPLAYERPOSX+[2*ILASTDIRX]]);I3^SET([IPLAYERPOSY+[2*ILASTDIRY]]);I1^SET(ARRMAPA^GET(I2,I3));@IF("I1","_","IEMPTY","BFITMP81","BFITMP82");}
{I1^SET($1);I2^SET($2);I3^SET($3);ARRMAPA^SET(I1,I2,IEMPTY);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[I2*IGRID]);CANVASOBSERVER^REFRESH();ARREXPLOX^CHANGEAT(I3,-1);ISPADX^SET(I1);ISPADY^SET(I2);SSPADANIESELECTOR^SET("D");}
{ITNTSGATHERED^DEC();ITNTRX^SET(IPLAYERPOSX);ITNTRY^SET(IPLAYERPOSY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);I1^SUB(IBKGSTARTX);I2^SUB(IBKGSTARTY);GOBJ^ADD("ANNTNTR");ANNTNTR^SETPOSITION(I1,I2);ANNTNTR^PLAY("IDLE");ANNRUNNERTNTEXP^PLAY("RUN");BEHSEQPLAY^RUN("SEQGADA","POSTAWIENIE_BOMBY",5);SFX_WYKOP_LONT^PLAY();}
{ANNPOLACOPY^HIDE();I1^ADD([ILASTDIRX*IGRID]);I2^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET([IPLAYERPOSX+ILASTDIRX],[IPLAYERPOSY+ILASTDIRY],IPCHANY);CANVASOBSERVER^PASTE("ANNPOLACOPY",I1,I2);IPCHANY^SET(-1);ISPADX^SET([I1 @ IGRID]);ISPADY^SET([[I2 @ IGRID]+1]);ISPADREMX^SET(ISPADX);ISPADREMY^SET([ISPADY-1]);SSPADANIESELECTOR^SET("D");@IF("BSPADA","_","FALSE","BFITMP51","");@IF("BSPADA","_","FALSE","BFITMP52","");}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);@IF("ISPADAID","_","17","BFITMP72","BFITMP73");BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);SFX_WYKOP_GLAZ^PLAY();BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);SFX_WYKOP_GLAZ^PLAY();BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{I4^SET(ANNPLAYER^GETCENTERX());I5^SET(ANNPLAYER^GETCENTERY());I4^DIV(IGRID);I5^DIV(IGRID);I4^MUL(IGRID);I5^MUL(IGRID);I4^ADD([IGRID*ILASTDIRX]);I5^ADD([IGRID*ILASTDIRY]);IPCHANY^SET(ICOLLISIONSELECTOR);ARRMAPA^SET(I2,I3,IFALLINGSTONE);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I4+IBKGSTARTX],[I5+IBKGSTARTY]);CANVASOBSERVER^REFRESH();IPOLESEL^SET(ICOLLISIONSELECTOR);ANNPOLACOPY^SETFRAME(SPOLE,0);ANNPOLACOPY^SHOW();ANNPOLACOPY^SETPOSITION(I4,I5);}
{I4^SET(S1^LENGTH());ILITERKAFIRST^ADD(I3);@LOOP("{ARRMAPA^SET(_I_,I2,IWALL2);}",ILITERKAFIRST,I4,1);B1^SET(TRUE);I5^SET(ARRWYRAZY^GETSIZE());}
{@IF(GSAVE^GGET("GAME_STATUS"),"_",""INTRO_TYTUL"","BFITMP123","BFITMP124");DBSCENE^REMOVEALL();DBSCENE^LOAD([SPATHNAME+"\__SCENA.TXT"]);ARRANNS^REMOVEALL();ARRIMGS^REMOVEALL();ARRWAVS^REMOVEALL();ARRANNSCLONES^REMOVEALL();ARRWAVSLOOP^REMOVEALL();@LOOP("{ARRANNS^ADD("");ARRIMGS^ADD("");ARRWAVS^ADD("");ARRANNSCLONES^ADD(0);ARRWAVSLOOP^ADD(FALSE);}",0,50,1);}
{SOBJACTION^REMOVEBEHAVIOUR("ONBRUTALCHANGED$__END__");}
{CANVASOBSERVER^SETBACKGROUND([SPATHNAME+"\"+SOBJNAME]);}
{I1^SET(ARRANNS^FIND(""));SANN^SET(["ANN"+I1]);*SANN^LOAD([SPATHNAME+"\"+SOBJNAME]);I2^SET(*SANN^GETNOE());@IF("SOBJARG","!_","""","BFITMP129","");@IF("B1'TRUE&&I2>1","BFITMP130","");ARRANNS^CHANGEAT(I1,SOBJNAME);ARRANNSCLONES^CHANGEAT(I1,I2);*SANN^ADDBEHAVIOUR("ONFINISHED","BEHFINISHEDANN");}
{I1^SET(ARRIMGS^FIND(""));SIMG^SET(["IMG"+I1]);*SIMG^LOAD([SPATHNAME+"\"+SOBJNAME]);@IF("SOBJARG","!_","""","BFITMP132","");ARRIMGS^CHANGEAT(I1,SOBJNAME);}
{ILEVEL^SET(1);ANNKON^LOAD("CZOLG.ANN");ANNKOLASA^LOAD("WIEZYCZKA.ANN");ANNKON^SETPRIORITY(55);ANNKOLASA^SETPRIORITY(50);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(55.0);DKOLASAHALFWIDTH^SET(26.0);DKONLEN^SET(32.0);DKONACCELERATION^SET(0.20);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-3.0);DKONSPEEDMAX^SET(10.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);GTRASA^ADD("ANNBUM");BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();}
{ILEVEL^SET(1);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(36.0);DKOLASAHALFWIDTH^SET(16.0);DKONLEN^SET(55.0);DKONACCELERATION^SET(0.075);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-1.0);DKONSPEEDMAX^SET(7.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();}
{ILEVEL^SET(1);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(36.0);DKOLASAHALFWIDTH^SET(16.0);DKONLEN^SET(55.0);DKONACCELERATION^SET(0.05);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-0.7);DKONSPEEDMAX^SET(9.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();IMGZEGAR^SHOW();ANNWSKAZOWKA^SHOW();ICZAS^ADDBEHAVIOUR("ONCHANGED","BEHCZAS");}
{D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[1.0+D3],"BFITMP0","");BEHSEQPLAY^RUN("SEQPLAYER","WODA",2);IJAZDAWAVE^SET(1);}
{D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[0.5+D3],"BFITMP1","");IJAZDAWAVE^SET(0);}
{IKONANGLENEW^SET(IKONANGLE);D1^SINUS(IKONANGLENEW);D2^COSINUS(IKONANGLENEW);DKONMOVEX^SET([D1*DKONSPEED]);DKONMOVEY^SET([D2*[0.0-DKONSPEED]]);IKONNEWX^SET([DKONPOSX+DKONMOVEX]);IKONNEWY^SET([DKONPOSY+DKONMOVEY]);@IF(RANDOM^GET(100),"<","10","BFITMP5","");}
{ANNKON^SETFPS([IKONFPS*8]);}
{@IF("IDIR","_","0","BFITMP18","BFITMP19");IKONANGLEADD^SET([[3.0*DKONSPEED]@DKONSPEEDMAX]);IKONANGLEADD^SET([5-IKONANGLEADD]);IKONFPS^SET([6-IKONANGLEADD]);@IF("DKONSPEED",">_","0.0","BFITMP20","");D1^SINUS(IKONANGLENEW);D2^COSINUS(IKONANGLENEW);DKONMOVEX^SET([D1*DKONSPEED]);DKONMOVEY^SET([D2*[0.0-DKONSPEED]]);IKONNEWX^SET([DKONPOSX+DKONMOVEX]);IKONNEWY^SET([DKONPOSY+DKONMOVEY]);@IF("DKONSPEED",">_","0.0","BFITMP21","BFITMP22");D1^COSINUS(IKOLASAANGLE);D2^SINUS(IKOLASAANGLE);D3^SET([D1*[0.0-DKOLASAHALFWIDTH]]);D4^SET([D2*[0.0-DKOLASAHALFWIDTH]]);ICOLLSELBOKI^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));D3^SET([D1*DKOLASAHALFWIDTH]);D4^SET([D2*DKOLASAHALFWIDTH]);ICOLLSELBOKI^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));ICOLLSEL^SET(IMGMASK^GETPIXEL(IKONNEWX,IKONNEWY));IKONANGLE^SET(IKONANGLENEW);I1^SET(IKOLASAANGLE);I1^CLAMP([IKONANGLE-30],[IKONANGLE+30]);I2^SET([IKONANGLE-IKOLASAANGLE]);I2^CLAMP(-2,2);IKOLASAANGLE^SET([I1+I2]);DKONPOSX^ADD(DKONMOVEX);DKONPOSY^ADD(DKONMOVEY);IKONMOVEX^SET([DKONPOSX-IKONPOSX]);IKONMOVEY^SET([DKONPOSY-IKONPOSY]);@IF("IKONMOVEX!'0||IKONMOVEY!'0","BFITMP23","");ICZAS^INC();}
{@INT("ITMPCLONENO",0);I2^SET(ANNSKRZYNIEPOS^GETNOE());I1^SET(0);@WHILE("I1","<","I2","{S1^SET(["TYPE"+I1]);I3^SET(ANNSKRZYNIEPOS^GETNOFINEVENT(S1));ANNSKRZYNIA^CLONE(I3);@LOOP("{ANNSKRZYNIEPOS^SETFRAME(S1,_I_);ITMPCLONENO^INC();S2^SET(["ANNSKRZYNIA_"+ITMPCLONENO]);*S2^SETFRAME(S1,0);*S2^SETPOSITION(ANNSKRZYNIEPOS^GETPOSITIONX(),ANNSKRZYNIEPOS^GETPOSITIONY());}",0,I3,1);I1^INC();}");GTRASA^ADDCLONES("ANNSKRZYNIA",1,ITMPCLONENO);ANNSKRZYNIA^SETPOSITION(-200,-200);ANNSKRZYNIA^HIDE();}
{@IF("ICZAS","_","ICZASMAX","BFITMP46","");ICZASANGLE^SET([[20*ICZAS]@ICZASMAX]);}
{D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[0.5+D3],"BFITMP9","");}
{D3^SET([[DKONSPEEDMAX-DKONSPEED]*2.0]);D3^SET([2.5-[D3@DKONSPEEDMAX]]);D3^CLAMP(0.5,2.5);DKONSPEED^ADD([DKONACCELERATION*D3]);DKONSPEED^CLAMP(DKONSPEEDMIN,DKONSPEEDMAX);}
{D3^SET([[DKONSPEEDMAX-DKONSPEED]*2.0]);D3^SET([3.0-[D3@DKONSPEEDMAX]]);D3^CLAMP(0.5,2.5);DKONSPEED^SUB([DKONACCELERATION*D3]);DKONSPEED^CLAMP(0.0,DKONSPEEDMAX);}
{IKONANGLENEW^SET([IKONANGLE+[IKONANGLEADD*IDIR]]);}
{D3^SET([D1*DKONLEN]);D4^SET([D2*[0.0-DKONLEN]]);ICOLLSELLEB^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));ICOLLSELTULOW^SET(IMGMASK^GETPIXEL([IKONNEWX+[D3@2.0]],[IKONNEWY+[D4@2.0]]));}
{D1^SINUS(IKONANGLE);D2^COSINUS(IKONANGLE);D3^SET([D1*200.0]);D4^SET([D2*[0.0-200.0]]);ANNBUM^SETPOSITION([IKONPOSX+IPLANPOSX+D3],[IKONPOSY+IPLANPOSY+D4]);ANNBUM^PLAY("BUM");S1^SET(CANVASOBSERVER^GETGRAPHICSAT([IKONPOSX+IPLANPOSX+D3],[IKONPOSY+IPLANPOSY+D4],TRUE,20,20,TRUE));@IF("S1","!_","NULL","BFITMP27","");}
{IMIECZMAX^SET(10);ARRMAPABKG^LOAD(["CH1_EASY_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH1_EASY_POLA.ARR"]);I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);ANNPLAYER^SETFRAME("IDLE_R",0);}
{IMIECZMAX^SET(10);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH2_EASY_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH2_EASY_POLA.ARR"]);ANNNAKLADKI^LOAD("2_NAKLADKI.ANN");ANNNAKBRZEGI^LOAD("2_NAK_BRZEGI.ANN");I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);}
{IMIECZMAX^SET(10);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH3_EASY_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH3_EASY_POLA.ARR"]);ANNNAKLADKI^LOAD("3_NAKLADKI.ANN");ANNNAKBRZEGI^LOAD("3_NAK_BRZEGI.ANN");I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);ANNNAKLADKI_2^SETPRIORITY(0);ANNNAKLADKI_3^SETPRIORITY(0);}
{IMIECZMAX^SET(10);ARRMAPABKG^LOAD(["CH1_NORMAL_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH1_NORMAL_POLA.ARR"]);I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);ANNPLAYER^SETFRAME("IDLE_R",0);}
{IMIECZMAX^SET(10);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH2_NORMAL_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH2_NORMAL_POLA.ARR"]);ANNNAKLADKI^LOAD("2_NAKLADKI.ANN");ANNNAKBRZEGI^LOAD("2_NAK_BRZEGI.ANN");I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);}
{IMIECZMAX^SET(10);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH3_NORMAL_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH3_NORMAL_POLA.ARR"]);ANNNAKLADKI^LOAD("3_NAKLADKI.ANN");ANNNAKBRZEGI^LOAD("3_NAK_BRZEGI.ANN");I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);ANNNAKLADKI_2^SETPRIORITY(0);ANNNAKLADKI_3^SETPRIORITY(0);}
{IMIECZMAX^SET(10);ARRMAPABKG^LOAD(["CH1_EASY_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH1_EASY_POLA.ARR"]);I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);ANNPLAYER^SETFRAME("IDLE_R",0);}
{IMIECZMAX^SET(10);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH2_EASY_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH2_EASY_POLA.ARR"]);ANNNAKLADKI^LOAD("2_NAKLADKI.ANN");ANNNAKBRZEGI^LOAD("2_NAK_BRZEGI.ANN");I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);}
{IMIECZMAX^SET(10);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH3_EASY_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH3_EASY_POLA.ARR"]);ANNNAKLADKI^LOAD("3_NAKLADKI.ANN");ANNNAKBRZEGI^LOAD("3_NAK_BRZEGI.ANN");I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);ANNNAKLADKI_1^SETPRIORITY(0);ANNNAKLADKI_2^SETPRIORITY(0);ANNNAKLADKI_3^SETPRIORITY(0);}
{S1^SET(["ENEMY"+IENEMYNO]);CLSCHASZCZEENEMYOBJ^NEW(S1,0,IX,IY);GENEMIES^ADD(S1);GENEMYNAMES^ADD(S1);SPLAYERGOON^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+S1],"BEHGOONENEMY");IENEMYNO^INC();ARRMAPA^SET(IX,IY,S1);SPOLE^SET("");}
{S1^SET(["ENEMY"+IENEMYNO]);CLSCHASZCZEENEMYOBJ^NEW(S1,1,IX,IY);GENEMIES^ADD(S1);GENEMYNAMES^ADD(S1);SPLAYERGOON^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+S1],"BEHGOONENEMY");IENEMYNO^INC();ARRMAPA^SET(IX,IY,S1);SPOLE^SET("");}
{ANNPOLA^CLONE(1);ICLONENO^INC();S1^SET(["ANNPOLA_"+ICLONENO]);ARRCLONES^ADD(1);I1^SET(RANDOM^GET(4));I2^SET(*S1^GETNOFINEVENT([SPOLE+"_ROSNIE"+I1]));*S1^SETFRAME([SPOLE+"_ROSNIE"+I1],[I2-1]);*S1^SETPOSITION([IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);ARRMAPAOBJ^SET(IX,IY,S1);SPOLE^SET("");}
{ANNPOLA^CLONE(1);ICLONENO^INC();S1^SET(["ANNPOLA_"+ICLONENO]);ARRCLONES^ADD(1);*S1^PLAY(SPOLE);*S1^SETPOSITION([IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);ARRMAPAOBJ^SET(IX,IY,S1);ARRSERCAK^ADD(IX,IY);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP2","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP3","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP4","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP5","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP6","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP7","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP8","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP9","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP10","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP11","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP12","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP13","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);@IF(RANDOM^GET(100),">","33","BFITMP14","");ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{ITRATWA^SET(1);ANNPONTON^SETFRAME("IDLE",1);S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));BEHSEQPLAY^RUN("SEQPLAYER","PONTON_TAKE",2);SFX_THING^PLAY();}
{ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));BEHSEQPLAY^RUN("SEQPLAYER","MACZETA_TAKE",2);SFX_THING^PLAY();}
{@IF(ARRINVENTORY^FIND("KLUCZ_RED"),"_","-1","BFITMP79","");S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));SFX_THING^PLAY();}
{@IF(ARRINVENTORY^FIND("KLUCZ_YELLOW"),"_","-1","BFITMP80","");S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));SFX_THING^PLAY();}
{S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);ANNPLAYER^LOAD("PLAYER_MASKA.ANN");ANNPLAYER^SETFPS(32);ANNPLAYER^SETPOSITION([[IPLAYERX+IBKGSTARTX]*50],[[IPLAYERY+IBKGSTARTY]*50]);GENEMIES^NOCOLL();BEHREMOVEENEMYCOLL^RUN();SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));BEHSEQPLAY^RUN("SEQWSTEP","MASKI_TAKE",2);SFX_THING^PLAY();}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP117","BFITMP118");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP119","BFITMP120");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP121","BFITMP122");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP123","BFITMP124");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP125","BFITMP126");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP127","BFITMP128");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP129","BFITMP130");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP131","BFITMP132");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP133","BFITMP134");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP135","BFITMP136");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP137","BFITMP138");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP139","BFITMP140");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{I1^SET(ARRMAPABKG^GETSIZE());ISIZEX^SET(ARRMAPABKG^GET([I1-4]));ISIZEY^SET(ARRMAPABKG^GET([I1-3]));IPLAYERX^SET(ARRMAPABKG^GET([I1-2]));IPLAYERY^SET(ARRMAPABKG^GET([I1-1]));ARRSERCAK^REMOVEALL();ARRCLONES^REMOVEALL();ARRCLONES^ADD(1);ICLONENO^SET(0);ICLONENOSEL^SET(0);IY^SET(0);@WHILE("IY","<","ISIZEY","{@LOOP("{IX^SET(_I_);S1^SET(ARRMAPABKG^GET([[IY*ISIZEX]+IX]));I1^SET(ANNPOLA^GETNOFINEVENT(S1));ANNPOLA^SETFRAME(S1,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,S1);SPOLE^SET(S1);}",0,ISIZEX,1);IY^INC();}");IY^SET(0);IENEMYNO^SET(0);@WHILE("IY","<","ISIZEY","{@LOOP("{IX^SET(_I_);SPOLE^SET(ARRMAPAPOLA^GET([[IY*ISIZEX]+IX]));@IF("SPOLE","!_","""","BFITMP201","");}",0,ISIZEX,1);IY^INC();}");ANNPOLA^HIDE();ANNPLAYER^SETPOSITION([IPLAYERX*IGRID],[IPLAYERY*IGRID]);SPLAYERCAMEFROM^SET(ARRMAPABKG^GET([[IPLAYERY*ISIZEX]+IPLAYERX]));I1^SET(ANNNAKBRZEGI^GETNOFINEVENT("IDLE"));ANNNAKBRZEGI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKBRZEGI_"+_I_]);*S1^SETFRAME("IDLE",_I_);GENEMIES^ADD(S1);}",0,I1,1);I1^SET([IPLAYERX-ICENTERX]);I2^SET([IPLAYERY-ICENTERY]);I1^CLAMP(0,[ISIZEX-16]);I2^CLAMP(0,[ISIZEY-12]);IBKGSTARTX^SET([0-I1]);IBKGSTARTY^SET([0-I2]);CANVASOBSERVER^MOVEBKG([I1*IGRID],[I2*IGRID]);GALL^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL1^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL2^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL3^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL4^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL5^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL6^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL7^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GENEMIES^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);ANNPLAYER^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);@IF(ARRSERCAK^GETSIZE(),">","0","BFITMP202","");}
{ANNPOLA^CLONE(1);ICLONENO^INC();S1^SET(["ANNPOLA_"+ICLONENO]);ARRCLONES^ADD(1);I1^SET(ANNPOLA^GETNOFINEVENT("MUR_NAK"));*S1^SETFRAME("MUR_NAK",RANDOM^GET(I1));*S1^SETPOSITION([IX*IGRID],[IY*IGRID]);*S1^SETPRIORITY(105);}
{@INT("ITMP1",ARRCLONES^FIND(-1));@STRING("STMP1","");@INT("ITMP2",0);@IF("ITMP1",">","-1","BFITMP218","BFITMP219");ARRMAPA^SET(IX,IY,"KRZAK");ARRMAPAOBJ^SET(IX,IY,STMP1);ARRCLONES^CHANGEAT(ITMP1,1);ITMP1^SET([[IX+IBKGSTARTX]*IGRID]);ITMP2^SET([[IY+IBKGSTARTY]*IGRID]);ITMP1^ADD(IBKGDELTAX);ITMP2^ADD(IBKGDELTAY);*STMP1^SETPOSITION(ITMP1,ITMP2);ITMP1^SET(RANDOM^GET(4));*STMP1^SETPRIORITY(59);*STMP1^PLAY(["KRZAK_ROSNIE"+ITMP1]);}
{@LOOP("{S1^SET(["ENEMY"+_I_]);SPLAYERGOON^REMOVEBEHAVIOUR(["ONBRUTALCHANGED^"+S1]);SPLAYERGOON^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+S1],"BEHGOONENEMYNOCOLL");}",0,IENEMYNO,1);}
{IMIECZ^DEC();S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));IKRZAKSCINANR^INC();SFX_DZUNGLA_CIECIE^PLAY();}
{I1^SET([IMIECZ+5]);I1^CLAMP(0,IMIECZMAX);IMIECZ^SET(I1);S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));@IF("BODWOSELKA","_","FALSE","BFITMP71","BFITMP72");SFX_THING^PLAY();}
{I1^SET([IMIECZ+5]);I1^CLAMP(0,IMIECZMAX);IMIECZ^SET(I1);S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));@IF("BODWOSELKA","_","FALSE","BFITMP75","BFITMP76");SFX_THING^PLAY();}
{ANNPOLA^CLONE(1);ICLONENO^INC();S1^SET(["ANNPOLA_"+ICLONENO]);ARRCLONES^ADD(1);I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));*S1^SETFRAME(SPOLE,RANDOM^GET(I1));*S1^SETPOSITION([IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);ARRMAPAOBJ^SET(IX,IY,S1);}
{ILEVEL^SET(1);CANVASOBSERVER^SETBACKGROUND("1_BKG.IMG");IMGPLAN^LOAD("1_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1200);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(2100);IPLANSIZEPXY^SET(1425);I1PLANSIZEPXX^SET(1728);I1PLANSIZEPXY^SET(1425);IKRETPOSX^SET(300);IKRETPOSY^SET(1425);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);ANNBELKA^HIDE();ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("1_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("1_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(35);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(20);ANNTELEPORT4^SETPRIORITY(20);ANNTELEPORT5^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(1);CANVASOBSERVER^SETBACKGROUND("1_BKG.IMG");IMGPLAN^LOAD("1_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1200);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(2100);IPLANSIZEPXY^SET(1425);I1PLANSIZEPXX^SET(1728);I1PLANSIZEPXY^SET(1425);IKRETPOSX^SET(300);IKRETPOSY^SET(1425);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);IRZEDOWBELEK^SET(5);ARRBELKISPEED^REMOVEALL();ARRBELKISTART^REMOVEALL();ARRBELKIGESTOSC^REMOVEALL();ARRBELKIMOVEDSOFAR^REMOVEALL();ARRBELKISPEED^ADD(1,2,1,2,1);ARRBELKISTART^ADD(4,3,2,0,-1);ARRBELKIGESTOSC^ADD(350,375,400,375,325);ARRBELKIMOVEDSOFAR^ADD(0,0,0,0,0);I6^SET(0);I4^SET(1);I3^SET(10);I5^SET(1);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(1);I4^ADD(I3);I3^SET(10);I5^SET(3);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(2);I4^ADD(I3);I3^SET(10);I5^SET(5);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(3);I4^ADD(I3);I3^SET(10);I5^SET(9);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(4);I4^ADD(I3);I3^SET(10);I5^SET(13);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");ANNBELKA^HIDE();CLSEIFELENEMYOBJ^NEW("ENEMY0","1_ENEMY0.ANN",2,5,16,4,0,2,18);CLSEIFELENEMYOBJ^NEW("ENEMY2","1_ENEMY0.ANN",1,17,2,9,0,8,6);CLSEIFELENEMYOBJ^NEW("ENEMY3","1_ENEMY0.ANN",1,21,6,5,0,8,6);CLSEIFELENEMYOBJ^NEW("ENEMY5","1_ENEMY0.ANN",1,15,14,6,0,25,16);GENEMIES^ADD("ENEMY0");GENEMIES^ADD("ENEMY2");GENEMIES^ADD("ENEMY3");GENEMIES^ADD("ENEMY5");GBKG^ADD("ENEMY0");GBKG^ADD("ENEMY2");GBKG^ADD("ENEMY3");GBKG^ADD("ENEMY5");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^2","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^6","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^14","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^16","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("1_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("1_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(35);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(20);ANNTELEPORT4^SETPRIORITY(20);ANNTELEPORT5^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(1);CANVASOBSERVER^SETBACKGROUND("1_BKG.IMG");IMGPLAN^LOAD("1_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1200);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(2100);IPLANSIZEPXY^SET(1425);I1PLANSIZEPXX^SET(1728);I1PLANSIZEPXY^SET(1425);IKRETPOSX^SET(300);IKRETPOSY^SET(1425);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);IRZEDOWBELEK^SET(5);ARRBELKISPEED^REMOVEALL();ARRBELKISTART^REMOVEALL();ARRBELKIGESTOSC^REMOVEALL();ARRBELKIMOVEDSOFAR^REMOVEALL();ARRBELKISPEED^ADD(3,3,2,2,1);ARRBELKISTART^ADD(4,3,2,0,-1);ARRBELKIGESTOSC^ADD(225,300,225,300,225);ARRBELKIMOVEDSOFAR^ADD(0,0,0,0,0);I6^SET(0);I4^SET(1);I3^SET(10);I5^SET(1);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(1);I4^ADD(I3);I3^SET(10);I5^SET(3);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(2);I4^ADD(I3);I3^SET(10);I5^SET(5);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(3);I4^ADD(I3);I3^SET(10);I5^SET(9);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(4);I4^ADD(I3);I3^SET(10);I5^SET(13);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");ANNBELKA^HIDE();CLSEIFELENEMYOBJ^NEW("ENEMY0","1_ENEMY0.ANN",1,5,16,4,0,2,18);CLSEIFELENEMYOBJ^NEW("ENEMY1","1_ENEMY0.ANN",2,2,10,4,0,22,10);CLSEIFELENEMYOBJ^NEW("ENEMY2","1_ENEMY0.ANN",3,17,2,9,0,8,6);CLSEIFELENEMYOBJ^NEW("ENEMY3","1_ENEMY0.ANN",1,21,6,5,0,8,6);CLSEIFELENEMYOBJ^NEW("ENEMY4","1_ENEMY0.ANN",2,19,12,4,0,25,16);CLSEIFELENEMYOBJ^NEW("ENEMY5","1_ENEMY0.ANN",3,15,14,6,0,25,16);GENEMIES^ADD("ENEMY0","ENEMY1","ENEMY2","ENEMY3","ENEMY4","ENEMY5");GBKG^ADD("ENEMY0","ENEMY1","ENEMY2","ENEMY3","ENEMY4","ENEMY5");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^2","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^6","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^10","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^12","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^14","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^16","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("1_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("1_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(35);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(20);ANNTELEPORT4^SETPRIORITY(20);ANNTELEPORT5^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(2);CANVASOBSERVER^SETBACKGROUND("2_BKG.IMG");IMGPLAN^LOAD("2_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1100);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(1875);IPLANSIZEPXY^SET(1650);I1PLANSIZEPXX^SET(1650);I1PLANSIZEPXY^SET(1650);IKRETPOSX^SET(1200);IKRETPOSY^SET(1650);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);ANNBELKA^HIDE();ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("2_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("2_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("2_TELE0.ANN");ANNTELEPORT1^LOAD("2_TELE1.ANN");ANNTELEPORT2^LOAD("2_TELE2.ANN");ANNTELEPORT3^LOAD("2_TELE3.ANN");ANNTELEPORT4^LOAD("2_TELE4.ANN");ANNTELEPORT5^LOAD("2_TELE5.ANN");ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(20);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(35);ANNTELEPORT4^SETPRIORITY(35);ANNTELEPORT5^SETPRIORITY(35);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(2);CANVASOBSERVER^SETBACKGROUND("2_BKG.IMG");IMGPLAN^LOAD("2_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1100);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(1875);IPLANSIZEPXY^SET(1650);I1PLANSIZEPXX^SET(1650);I1PLANSIZEPXY^SET(1650);IKRETPOSX^SET(1200);IKRETPOSY^SET(1650);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);IRZEDOWBELEK^SET(5);ARRBELKISPEED^REMOVEALL();ARRBELKISTART^REMOVEALL();ARRBELKIGESTOSC^REMOVEALL();ARRBELKIMOVEDSOFAR^REMOVEALL();ARRBELKISPEED^ADD(1,-1,2,-1,1);ARRBELKISTART^ADD(2,[5+14],3,[2+21],1);ARRBELKIGESTOSC^ADD(350,-210,375,-225,275);ARRBELKIMOVEDSOFAR^ADD(0,0,0,0,0);I6^SET(0);I4^SET(1);I3^SET(3);I5^SET(4);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(1);I4^ADD(I3);I3^SET(5);I5^SET(8);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(2);I4^ADD(I3);I3^SET(4);I5^SET(12);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(3);I4^ADD(I3);I3^SET(7);I5^SET(16);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(4);I4^ADD(I3);I3^SET(6);I5^SET(18);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");ANNBELKA^HIDE();CLSEIFELENEMYOBJ^NEW("ENEMY3","1_ENEMY0.ANN",1,13,5,4,0,17,9);CLSEIFELENEMYOBJ^NEW("ENEMY4","1_ENEMY0.ANN",1,11,7,3,0,17,9);CLSEIFELENEMYOBJ^NEW("ENEMY8","1_ENEMY0.ANN",1,16,11,3,0,21,9);CLSEIFELENEMYOBJ^NEW("ENEMY10","1_ENEMY0.ANN",1,6,13,5,0,9,17);CLSEIFELENEMYOBJ^NEW("ENEMY14","1_ENEMY0.ANN",3,8,21,6,0,16,21);GENEMIES^ADD("ENEMY3");GENEMIES^ADD("ENEMY4");GENEMIES^ADD("ENEMY8");GENEMIES^ADD("ENEMY10");GENEMIES^ADD("ENEMY14");GBKG^ADD("ENEMY3");GBKG^ADD("ENEMY4");GBKG^ADD("ENEMY8");GBKG^ADD("ENEMY10");GBKG^ADD("ENEMY14");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^5","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^7","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^11","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^13","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^17","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^21","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("2_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("2_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("2_TELE0.ANN");ANNTELEPORT1^LOAD("2_TELE1.ANN");ANNTELEPORT2^LOAD("2_TELE2.ANN");ANNTELEPORT3^LOAD("2_TELE3.ANN");ANNTELEPORT4^LOAD("2_TELE4.ANN");ANNTELEPORT5^LOAD("2_TELE5.ANN");ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(20);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(35);ANNTELEPORT4^SETPRIORITY(35);ANNTELEPORT5^SETPRIORITY(35);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(2);CANVASOBSERVER^SETBACKGROUND("2_BKG.IMG");IMGPLAN^LOAD("2_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1100);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(1875);IPLANSIZEPXY^SET(1650);I1PLANSIZEPXX^SET(1650);I1PLANSIZEPXY^SET(1650);IKRETPOSX^SET(1200);IKRETPOSY^SET(1650);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);IRZEDOWBELEK^SET(5);ARRBELKISPEED^REMOVEALL();ARRBELKISTART^REMOVEALL();ARRBELKIGESTOSC^REMOVEALL();ARRBELKIMOVEDSOFAR^REMOVEALL();ARRBELKISPEED^ADD(1,-2,2,-1,1);ARRBELKISTART^ADD(2,[5+14],3,[2+21],1);ARRBELKIGESTOSC^ADD(350,-210,375,-225,275);ARRBELKIMOVEDSOFAR^ADD(0,0,0,0,0);I6^SET(0);I4^SET(1);I3^SET(3);I5^SET(4);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(1);I4^ADD(I3);I3^SET(5);I5^SET(8);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(2);I4^ADD(I3);I3^SET(4);I5^SET(12);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(3);I4^ADD(I3);I3^SET(7);I5^SET(16);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(4);I4^ADD(I3);I3^SET(6);I5^SET(18);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");ANNBELKA^HIDE();CLSEIFELENEMYOBJ^NEW("ENEMY0","1_ENEMY0.ANN",2,3,3,5,0,5,11);CLSEIFELENEMYOBJ^NEW("ENEMY1","1_ENEMY0.ANN",1,18,3,4,0,6,7);CLSEIFELENEMYOBJ^NEW("ENEMY2","1_ENEMY0.ANN",1,6,5,4,0,6,7);CLSEIFELENEMYOBJ^NEW("ENEMY3","1_ENEMY0.ANN",2,13,5,4,0,17,9);CLSEIFELENEMYOBJ^NEW("ENEMY4","1_ENEMY0.ANN",1,11,7,3,0,17,9);CLSEIFELENEMYOBJ^NEW("ENEMY6","1_ENEMY0.ANN",1,7,9,3,0,6,7);CLSEIFELENEMYOBJ^NEW("ENEMY8","1_ENEMY0.ANN",2,16,11,3,0,21,9);CLSEIFELENEMYOBJ^NEW("ENEMY9","1_ENEMY0.ANN",1,20,11,3,0,21,9);CLSEIFELENEMYOBJ^NEW("ENEMY10","1_ENEMY0.ANN",2,6,13,5,0,9,17);CLSEIFELENEMYOBJ^NEW("ENEMY11","1_ENEMY0.ANN",1,3,15,4,0,9,17);CLSEIFELENEMYOBJ^NEW("ENEMY13","1_ENEMY0.ANN",1,7,19,4,0,16,21);CLSEIFELENEMYOBJ^NEW("ENEMY14","1_ENEMY0.ANN",3,8,21,6,0,16,21);GENEMIES^ADD("ENEMY0");GENEMIES^ADD("ENEMY1");GENEMIES^ADD("ENEMY2");GENEMIES^ADD("ENEMY3");GENEMIES^ADD("ENEMY4");GENEMIES^ADD("ENEMY6");GENEMIES^ADD("ENEMY8");GENEMIES^ADD("ENEMY9");GENEMIES^ADD("ENEMY10");GENEMIES^ADD("ENEMY11");GENEMIES^ADD("ENEMY13");GENEMIES^ADD("ENEMY14");GBKG^ADD("ENEMY0");GBKG^ADD("ENEMY1");GBKG^ADD("ENEMY2");GBKG^ADD("ENEMY3");GBKG^ADD("ENEMY4");GBKG^ADD("ENEMY6");GBKG^ADD("ENEMY8");GBKG^ADD("ENEMY9");GBKG^ADD("ENEMY10");GBKG^ADD("ENEMY11");GBKG^ADD("ENEMY13");GBKG^ADD("ENEMY14");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^3","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^5","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^7","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^9","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^11","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^13","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^15","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^17","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^19","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^21","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("2_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("2_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("2_TELE0.ANN");ANNTELEPORT1^LOAD("2_TELE1.ANN");ANNTELEPORT2^LOAD("2_TELE2.ANN");ANNTELEPORT3^LOAD("2_TELE3.ANN");ANNTELEPORT4^LOAD("2_TELE4.ANN");ANNTELEPORT5^LOAD("2_TELE5.ANN");ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(20);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(35);ANNTELEPORT4^SETPRIORITY(35);ANNTELEPORT5^SETPRIORITY(35);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(3);CANVASOBSERVER^SETBACKGROUND("3_BKG.IMG");IMGPLAN^LOAD("_PUSTY.IMG");ANNBELKA^LOAD("1_BELKA.ANN");ANNKRET^LOAD("3_REX.ANN");ANNKRET^SETFPS(32);ANNNEMO^PLAY("IDLE");GBKG^ADD("ANNNEMO");IBKGSIZEPXX^SET(2400);IBKGSIZEPXY^SET(1800);IPLANSIZEPXX^SET(2400);IPLANSIZEPXY^SET(1800);I1PLANSIZEPXX^SET(2400);I1PLANSIZEPXY^SET(1800);IKRETPOSX^SET(260);IKRETPOSY^SET(900);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);ANNBELKA^HIDE();ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("3_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("3_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("3_TELE0.ANN");ANNTELEPORT1^LOAD("3_TELE1.ANN");ANNTELEPORT0^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(3);CANVASOBSERVER^SETBACKGROUND("3_BKG.IMG");IMGPLAN^LOAD("_PUSTY.IMG");ANNBELKA^LOAD("1_BELKA.ANN");ANNKRET^LOAD("3_REX.ANN");ANNKRET^SETFPS(32);ANNNEMO^PLAY("IDLE");GBKG^ADD("ANNNEMO");IBKGSIZEPXX^SET(2400);IBKGSIZEPXY^SET(1800);IPLANSIZEPXX^SET(2400);IPLANSIZEPXY^SET(1800);I1PLANSIZEPXX^SET(2400);I1PLANSIZEPXY^SET(1800);IKRETPOSX^SET(260);IKRETPOSY^SET(900);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);ANNBELKA^HIDE();IILOSCFLAM^SET(9);ANNFLAME^CLONE([IILOSCFLAM-1]);GFLAMES^ADDCLONES("ANNFLAME",0,[IILOSCFLAM-1]);GBKG^ADDCLONES("ANNFLAME",0,[IILOSCFLAM-1]);ARRFLAMESX^REMOVEALL();ARRFLAMESY^REMOVEALL();ARRFLAMESDIR^REMOVEALL();ARRFLAMESDELAY^REMOVEALL();ARRFLAMESX^ADD(6,16,15,13,27,27,22,19,20);ARRFLAMESY^ADD(20,18,20,6,8,10,16,18,20);ARRFLAMESDIR^ADD("R","R","R","L","L","L","L","L","L");ARRFLAMESDELAY^ADD(100,125,175,150,140,250,200,180,220);@LOOP("{S1^SET(["ANNFLAME_"+_I_]);@IF(ARRFLAMESDIR^GET(_I_),"_",""R"","BFITMP0","BFITMP1");}",0,IILOSCFLAM,1);CLSEIFELENEMYOBJ^NEW("ENEMY0","3_ENEMY0.ANN",3,19,5,4,0,14,17);CLSEIFELENEMYOBJ^NEW("ENEMY2","3_ENEMY0.ANN",2,16,13,4,0,8,3);CLSEIFELENEMYOBJ^NEW("ENEMY4","3_ENEMY0.ANN",2,16,17,6,0,16,21);CLSEIFELENEMYOBJ^NEW("ENEMY6","3_ENEMY0.ANN",2,6,23,8,0,10,17);CLSEIFELENEMYOBJ^NEW("ENEMY7","3_ENEMY0.ANN",4,15,23,8,0,16,21);GENEMIES^ADD("ENEMY0");GENEMIES^ADD("ENEMY2");GENEMIES^ADD("ENEMY4");GENEMIES^ADD("ENEMY6");GENEMIES^ADD("ENEMY7");GBKG^ADD("ENEMY0");GBKG^ADD("ENEMY2");GBKG^ADD("ENEMY4");GBKG^ADD("ENEMY6");GBKG^ADD("ENEMY7");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^5","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^13","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^17","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^23","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("3_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("3_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("3_TELE0.ANN");ANNTELEPORT1^LOAD("3_TELE1.ANN");ANNTELEPORT0^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(3);CANVASOBSERVER^SETBACKGROUND("3_BKG.IMG");IMGPLAN^LOAD("_PUSTY.IMG");ANNBELKA^LOAD("1_BELKA.ANN");ANNKRET^LOAD("3_REX.ANN");ANNKRET^SETFPS(32);ANNNEMO^PLAY("IDLE");GBKG^ADD("ANNNEMO");IBKGSIZEPXX^SET(2400);IBKGSIZEPXY^SET(1800);IPLANSIZEPXX^SET(2400);IPLANSIZEPXY^SET(1800);I1PLANSIZEPXX^SET(2400);I1PLANSIZEPXY^SET(1800);IKRETPOSX^SET(260);IKRETPOSY^SET(900);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);ANNBELKA^HIDE();IILOSCFLAM^SET(9);ANNFLAME^CLONE([IILOSCFLAM-1]);GFLAMES^ADDCLONES("ANNFLAME",0,[IILOSCFLAM-1]);GBKG^ADDCLONES("ANNFLAME",0,[IILOSCFLAM-1]);ARRFLAMESX^REMOVEALL();ARRFLAMESY^REMOVEALL();ARRFLAMESDIR^REMOVEALL();ARRFLAMESDELAY^REMOVEALL();ARRFLAMESX^ADD(6,16,15,13,27,27,22,19,20);ARRFLAMESY^ADD(20,18,20,6,8,10,16,18,20);ARRFLAMESDIR^ADD("R","R","R","L","L","L","L","L","L");ARRFLAMESDELAY^ADD(100,125,175,150,140,250,200,180,220);@LOOP("{S1^SET(["ANNFLAME_"+_I_]);@IF(ARRFLAMESDIR^GET(_I_),"_",""R"","BFITMP2","BFITMP3");}",0,IILOSCFLAM,1);CLSEIFELENEMYOBJ^NEW("ENEMY0","3_ENEMY0.ANN",3,19,5,4,0,14,17);CLSEIFELENEMYOBJ^NEW("ENEMY1","3_ENEMY0.ANN",2,6,11,4,0,4,15);CLSEIFELENEMYOBJ^NEW("ENEMY2","3_ENEMY0.ANN",2,16,13,4,0,8,3);CLSEIFELENEMYOBJ^NEW("ENEMY3","3_ENEMY0.ANN",3,7,15,5,0,4,15);CLSEIFELENEMYOBJ^NEW("ENEMY4","3_ENEMY0.ANN",2,16,17,6,0,16,21);CLSEIFELENEMYOBJ^NEW("ENEMY5","3_ENEMY0.ANN",3,3,19,5,0,10,17);CLSEIFELENEMYOBJ^NEW("ENEMY6","3_ENEMY0.ANN",2,6,23,8,0,10,17);CLSEIFELENEMYOBJ^NEW("ENEMY7","3_ENEMY0.ANN",4,15,23,8,0,16,21);GENEMIES^ADD("ENEMY0");GENEMIES^ADD("ENEMY1");GENEMIES^ADD("ENEMY2");GENEMIES^ADD("ENEMY3");GENEMIES^ADD("ENEMY4");GENEMIES^ADD("ENEMY5");GENEMIES^ADD("ENEMY6");GENEMIES^ADD("ENEMY7");GBKG^ADD("ENEMY0");GBKG^ADD("ENEMY1");GBKG^ADD("ENEMY2");GBKG^ADD("ENEMY3");GBKG^ADD("ENEMY4");GBKG^ADD("ENEMY5");GBKG^ADD("ENEMY6");GBKG^ADD("ENEMY7");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^5","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^11","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^13","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^15","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^17","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^19","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^23","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("3_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("3_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("3_TELE0.ANN");ANNTELEPORT1^LOAD("3_TELE1.ANN");ANNTELEPORT0^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{@INT("ICENTERX",[400-IPLANPOSX]);@INT("ICENTERY",[300-IPLANPOSY]);@INT("IDELTAX",[ICENTERX-IKRETPOSX]);@INT("IDELTAY",[ICENTERY-IKRETPOSY]);@IF("IDELTAX","!_","0","BFITMP164","");@IF("IDELTAY","!_","0","BFITMP167","");@IF("IDELTAX!'0||IDELTAY!'0","BFITMP168","");ANNKRET^MOVE([IDELTAX+IKRETMOVEX],IDELTAY);GENEMIES^NEXTSTEP();@LOOP("{S1^SET(["GBELKI"+_I_]);I1^SET(ARRBELKISPEED^GET(_I_));*S1^MOVE(I1,0);I2^SET(ARRBELKIMOVEDSOFAR^GET(_I_));I2^ADD(I1);I3^SET(ARRBELKIGESTOSC^GET(_I_));@IF("I3>0&&I2>'I3","BFITMP169","");@IF("I3<0&&I2<'I3","BFITMP170","");ARRBELKIMOVEDSOFAR^CHANGEAT(_I_,I2);}",0,IRZEDOWBELEK,1);@IF("BWLAZI","_","FALSE","BFITMP171","");ICOLLBELKASEL^SET(IKRETPOSMAPAY);ANNTELEPORT0^NEXTFRAME();@IF("BONTELE0","_","TRUE","BFITMP173","");ANNTELEPORT1^NEXTFRAME();@IF("BONTELE1","_","TRUE","BFITMP175","");ANNTELEPORT2^NEXTFRAME();@IF("BONTELE2","_","TRUE","BFITMP177","");ANNTELEPORT3^NEXTFRAME();@IF("BONTELE3","_","TRUE","BFITMP179","");ANNTELEPORT4^NEXTFRAME();@IF("BONTELE4","_","TRUE","BFITMP181","");ANNTELEPORT5^NEXTFRAME();@IF("BONTELE5","_","TRUE","BFITMP183","");@IF("IILOSCFLAM",">","0","BFITMP185","");}
{I1^SET([[IKRETPOSX-IKRETWIDTH]@ 75]);@IF(ARRMAPA^GET(I1,[IKRETPOSMAPAY-2]),"_","0","BFITMP122","");I1^SET([[IKRETPOSX+IKRETWIDTH]@ 75]);@IF(ARRMAPA^GET(I1,[IKRETPOSMAPAY-2]),"_","0","BFITMP123","");}
{I1^SET([[IKRETPOSX-IKRETWIDTH]@ 75]);@IF(ARRMAPA^GET(I1,[IKRETPOSMAPAY+1]),"_","0","BFITMP130","");I1^SET([[IKRETPOSX+IKRETWIDTH]@ 75]);@IF(ARRMAPA^GET(I1,[IKRETPOSMAPAY+1]),"_","0","BFITMP131","");}
{ITMPY^SET(0);@WHILE("ITMPY","<","IMAPASIZEY","{@LOOP("{ITMPX^SET(_I_);ITMP0^SET([[ITMPY*IMAPASIZEX]+ITMPX]);ARRMAPA^SET(ITMPX,ITMPY,ARRPATH^GET(ITMP0));}",0,IMAPASIZEX,1);ITMPY^INC();}");}
{ANNMINIMAPA^LOAD([""+ILEVEL+"_MINIMAPA.ANN"]);ITMPY^SET(0);@WHILE("ITMPY","<","IMAPASIZEY","{@LOOP("{ITMPX^SET(_I_);STMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(ITMPX,ITMPY,FALSE,13,13,FALSE));@IF("STMP0","_","NULL","BFITMP153","BFITMP154");}",0,IMAPASIZEX,1);ITMPY^INC();}");ANNMINIMAPA^HIDE();ARRPATH^SAVE(["MAPA"+ILEVEL+".ARR"]);}
{IPLANPOSX^ADD(IDELTAX);IPLANPOSY^ADD(IDELTAY);I1PLANPOSX^ADD(IDELTAX);I1PLANPOSY^ADD(IDELTAY);D1^SET(IPLANPOSX);D2^SET(IPLANPOSY);IBKGPOSX^SET([D1*DFACTORX]);IBKGPOSY^SET([D2*DFACTORY]);IBKGMOVEX^SET([IBKGPOSLASTX-IBKGPOSX]);IBKGMOVEY^SET([IBKGPOSLASTY-IBKGPOSY]);IBKGPOSLASTX^SET(IBKGPOSX);IBKGPOSLASTY^SET(IBKGPOSY);I1PLANPOSX^SET([D1*DFACTOR1PLANX]);I1PLANPOSY^SET([D2*DFACTOR1PLANY]);I1PLANMOVEX^SET([I1PLANPOSX-I1PLANPOSLASTX]);I1PLANMOVEY^SET([I1PLANPOSY-I1PLANPOSLASTY]);I1PLANPOSLASTX^SET(I1PLANPOSX);I1PLANPOSLASTY^SET(I1PLANPOSY);CANVASOBSERVER^MOVEBKG(IBKGMOVEX,IBKGMOVEY);GBKG^MOVE(IDELTAX,IDELTAY);G1PLAN^MOVE(I1PLANMOVEX,I1PLANMOVEY);ANNKRET^MOVE(IDELTAX,IDELTAY);}
{IPLANPOSX^ADD(IDELTAX);IPLANPOSY^ADD(IDELTAY);I1PLANPOSX^ADD(IDELTAX);I1PLANPOSY^ADD(IDELTAY);D1^SET(IPLANPOSX);D2^SET(IPLANPOSY);IBKGPOSX^SET([D1*DFACTORX]);IBKGPOSY^SET([D2*DFACTORY]);IBKGMOVEX^SET([IBKGPOSLASTX-IBKGPOSX]);IBKGMOVEY^SET([IBKGPOSLASTY-IBKGPOSY]);IBKGPOSLASTX^SET(IBKGPOSX);IBKGPOSLASTY^SET(IBKGPOSY);I1PLANPOSX^SET([D1*DFACTOR1PLANX]);I1PLANPOSY^SET([D2*DFACTOR1PLANY]);I1PLANMOVEX^SET([I1PLANPOSX-I1PLANPOSLASTX]);I1PLANMOVEY^SET([I1PLANPOSY-I1PLANPOSLASTY]);I1PLANPOSLASTX^SET(I1PLANPOSX);I1PLANPOSLASTY^SET(I1PLANPOSY);CANVASOBSERVER^MOVEBKG(IBKGMOVEX,IBKGMOVEY);GBKG^MOVE(IDELTAX,IDELTAY);G1PLAN^MOVE(I1PLANMOVEX,I1PLANMOVEY);}
{I2^SUB(I3);S2^SET(*S1^PREV());I4^SET(*S1^GETSIZE());*S2^MOVE([0-[I4*I3]],0);}
{I2^SUB(I3);S2^SET(*S1^PREV());I4^SET(*S1^GETSIZE());*S2^MOVE([0-[I4*I3]],0);}
{IFLAMETIMER^INC();@LOOP("{I1^SET(ARRFLAMESDELAY^GET(_I_));@IF([IFLAMETIMER%I1],"_","0","BFITMP184","");}",0,IILOSCFLAM,1);}
{I1^ADD([IKRETWIDTH*2]);S1^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,TRUE,10,10,TRUE));}
{I1^ADD([IKRETWIDTH*2]);S1^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,TRUE,22,22,TRUE));}
{ANNKEYBMOUSEHELP^PLAY("M");BEHMUSICSET^RUN("INDIE");BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");BUTNULLLOC^SETPRIORITY(1000);@INT("IX",0);@INT("IY",0);@INT("IDY",0);@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP44","BFITMP45");ANNNAKLADKI^CLONE(1);ANNNAKLADKI^SETFRAME("IDLE",0);ANNNAKLADKI_1^SETFRAME("IDLE",1);ARFROM^ADD("NULL","KRET_WH14","KRET_WH13","KRET_WH12","KRET_WH11","KRET_WH11","KRET_WH10","KRET_WH09");ARTO^ADD("REX_WH15","REX_WH21","KRET_WH20","REX_WH19","KRET_WH18","REX_WH17","REX_WH16");T^CLONE(2);K^CLONE(ILEVEL);K^HIDE();ARTX0^ADD(0);ARTY0^ADD(0);ARTX1^ADD(0);ARTY1^ADD(0);ARTX2^ADD(0);ARTY2^ADD(0);ART0^ADD(0);ART1^ADD(0);ART2^ADD(0);@LOOP("{ART0^ADD([ILEVEL+1-_I_]);}",1,ILEVEL,1);T_0^SETFRAME("0",0);T_1^SETFRAME("1",0);T_2^SETFRAME("2",0);IY^SET(550);@LOOP("{*["K_"+_I_]^SETFRAME("POS",[_I_-1]);*["K_"+_I_]^SETPRIORITY([8-_I_]);IX^SET(150);@IF("_I_","_","3","BFITMP46","BFITMP47");ARTX0^ADD(IX);ARTY0^ADD(IY);ARTX1^ADD([IX+250]);ARTY1^ADD(IY);ARTX2^ADD([IX+500]);ARTY2^ADD(IY);}",1,ILEVEL,1);@LOOP("{*["K_"+_I_]^SETFRAME([""+_I_],0);*["K_"+_I_]^SETPOSITION(ARTX0^GET([ILEVEL+1-_I_]),ARTY0^GET([ILEVEL+1-_I_]));}",1,ILEVEL,1);SK^SET("NULL");BEND^SET(FALSE);BINTRO^SET(TRUE);@IF(GSAVE^GET("HANOI_STATUS"),"_",""NIEODWIEDZONY"","BFITMP48","BFITMP49");}
{RCP^SET([1.0@60.0]);DT^ADD(RCP);DT^SET([DT*1.2]);DX^SET([IX1-IX0]);DY^SET([IY1-IY0]);X^SET([DX*DT]);Y^SET([DY*DT]);*SK^SETPOSITION([IX0+X],[IY0+Y]);*SK^INVALIDATE();@IF("DT",">","1.0","BFITMP0","");@BREAK();}
{BSUC2^SET(TRUE);@LOOP("{@IF("[ILEVEL+1-_I_]!'ART2^GET(_I_)&&BSUC2'TRUE","BFITMP20","");}",1,ILEVEL,1);}
{OBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(MOUSE^GETPOSX(),MOUSE^GETPOSY(),TRUE,2,7,TRUE));@LOOP("{*["K_"+_I_]^SETFRAME([""+_I_],0);}",1,ILEVEL,1);@IF(OBJ^FIND("K"),">","-1","BFITMP41","");}
{@INT("GX",0);@INT("GY",0);@STRING("SEV","");@STRING("SS","");@STRING("SEL","");@STRING("SOBJ","");@BOOL("BEL",FALSE);@IF("BEND","_","TRUE","BFITMP36","");GX^SET([[MOUSE^GETPOSX()+IACCLX]@IGRIDX]);GY^SET([MOUSE^GETPOSY()@IGRIDY]);@IF("BLOCK","_","TRUE","BFITMP43","");BLOCK^SET(FALSE);}
{ANNKEYBMOUSEHELP^PLAY("M");BEHMUSICSET^RUN("WIEZA");BEHAMBIENTSNDPLAY^RUN("SFX_KOLEJ_BGR");@INT("IX",0);@INT("IY",0);@INT("COL",0);@INT("DX",0);@INT("DY",0);@INT("INDEX",0);@INT("CNT",0);@STRING("STRACK","");@STRING("STMP","");IMAXETAP^SET(2);IOFFSETY^SET([2*IGRIDY]);ANFADE^PLAY("OPEN_BLACK");ANFADE^PAUSE();ANLOCO^LOAD("L0.ANN");@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP44","BFITMP45");IKOLEJETAP^SET(GSAVE^GET("KOLEJ_ETAP"));CANVASOBSERVER^SETBACKGROUND(["BKG"+IKOLEJETAP+".IMG"]);ANLPOS^CLONE(1);SLEVETAP^SET(["IMGMAPA"+IKOLEJLEVEL+IKOLEJETAP]);GRDYM^HIDE();ANDYM^CLONE(59);@LOOP("{GRDYM^ADD(["ANDYM_"+_I_]);}",0,59,1);ARSNDARR^ADD("KRET_I027","KRET_I028","KRET_I029","KRET_I032_E","KRET_I034_E","KRET_I035","KRET_I036","REX_I030","KMH_I031","KMH_I033");ARRANDOM^ADD("KRET_I041","REX_I042","KRET_I044","KMH_I045","KRET_I048","KRET_I049");@LOOP("{GRSND^ADD(["KRET_I0"+[_I_+22]]);GRSND^ADD(["KMH_I0"+[_I_+22]]);GRSND^ADD(["REX_I0"+[_I_+22]]);}",0,40,1);ANTRACK^HIDE();ARTYPES^ADD(0,-1,-463,-77,-14605,-22893,-31149,32377,28286,-2909,-128,-29145,15785,1322,1363,1405,-2048,10642,-3211,-29945);ARDESCR^ADD("NA","OK","RR","DD","RU","RD","DR","UR","HV","RR","DD","RU","RD","DR","UR","HV","ST","FN","X2","X3");ARAVAIL^ADD(0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0);ARNORM^ADD("RU","RD","DR","DL","LD","LU","UL","UR","RR","DD","LL","UU");ARINVRT^ADD("DL","UL","LU","RU","UR","DR","RD","LD","LL","UU","RR","DD");IWX^SET(4);IWY^SET(9);ILX^SET(5);ILY^SET(9);IX^SET(*SLEVETAP^GETWIDTH());IY^SET(*SLEVETAP^GETHEIGHT());DX^SET(IX);DY^SET(IY);IMAXX^SET([DX+5]);IMAXY^SET([DY+1+2]);ANTRACK^CLONE([DX*DY]);IY^SET(0);CNT^SET(0);@LOOP("{IX^SET(0);@LOOP("{ARMAP^SET(IX,IY,"NA");@IF("IY'9&&IX<6","BFITMP46","");@IF("IY'9&&IX>IMAXX","BFITMP47","");IX^INC();}",0,[IMAXX+5+5],1);IY^INC();}",0,IMAXY,1);IY^SET(0);@LOOP("{IX^SET(0);@LOOP("{COL^SET(*SLEVETAP^GETPIXEL(IX,IY));INDEX^SET(ARTYPES^FIND(COL));@IF("INDEX",">","0","BFITMP52","");IX^INC();}",0,DX,1);IY^INC();}",0,DY,1);ANLOCO^CLONE(1);ANPFW^CLONE(1);ICX^SET([ILX*IGRIDX]);ICY^SET([ILY*IGRIDY]);INX^SET([IWX*IGRIDX]);INY^SET([IWY*IGRIDY]);ANLOCO^SETPOSITION(ICX,ICY);ANLPOS^MOVE(ICX,ICY);ANPFW^SETPOSITION(INX,INY);CANVASOBSERVER^MOVEBKG(0,0);SCURTRACK^SET(ARMAP^GET(ILX,ILY));SLASTTRACK^SET(ARMAP^GET(IWX,IWY));ANLOCO^SETFRAME(SCURTRACK,0);ANPFW^SETFRAME(SLASTTRACK,0);ANBLANK8^SETFRAME("TIMER16",0);ANBLANK8^SETFRAME("TIMER16",7);GRDYM^HIDE();ILASTX^SET(ANLOCO^GETCURRFRAMEPOSX());ILASTY^SET(ANLOCO^GETCURRFRAMEPOSY());ILASTWX^SET(ANPFW^GETCURRFRAMEPOSX());ILASTWY^SET(ANPFW^GETCURRFRAMEPOSY());IFAKEX^SET(1);IFAKEWX^SET(0);ANLPOS_1^MOVE([IFAKEX*IGRIDX],[9*IGRIDY]);ANLOCO_1^SETPOSITION([IFAKEX*IGRIDX],[9*IGRIDY]);ANLOCO_1^SETFRAME("RR",0);ANPFW_1^SETPOSITION([IFAKEWX*IGRIDX],[9*IGRIDY]);ANPFW_1^SETFRAME("RR",0);BLANK5^PLAY("TIMER16");SFX_KOLEJ_START^PLAY();SFX_KOLEJ_STEAM^PLAY();ANPFW^SETPRIORITY(100);ANLOCO^SETPRIORITY(50);ANLOCO^HIDE();ANPFW^HIDE();KOLEJ^PAUSE();@IF(GSAVE^GET("KOLEJ_STATUS"),"_",""NIEODWIEDZONY"","BFITMP53","BFITMP54");GRDYM^HIDE();}
{ANBLANK8^STOP(FALSE);GRPOS_1^MOVE([IFAKEX*IGRIDX],[10*IGRIDY]);ANLOCO_1^SETPOSITION([IFAKEX*IGRIDX],[9*IGRIDY]);ANLOCO_1^SETFRAME("RR",0);ANPFW_1^SETPOSITION([IFAKEWX*IGRIDX],[9*IGRIDY]);ANPFW_1^SETFRAME("RR",0);ANLOCO^HIDE();ANPFW^HIDE();BLANK5^PLAY("TIMER16");BLANK5^SETFRAME("TIMER16",8);@BREAK();}
{ANBLANK8^STOP(FALSE);GRPOS_1^MOVE([ILX*IGRIDX],[10*IGRIDY]);ANLOCO_1^SETPOSITION(ANLOCO^GETPOSITIONX(TRUE),ANLOCO^GETPOSITIONY(TRUE));ANLOCO_1^SETFRAME(ANLOCO^GETEVENTNAME(),8);ANLOCO_1^SHOW();ANPFW_1^SETPOSITION(ANPFW^GETPOSITIONX(TRUE),ANPFW^GETPOSITIONY(TRUE));ANPFW_1^SETFRAME(ANPFW^GETEVENTNAME(),8);ANPFW_1^SHOW();ANLOCO^HIDE();ANPFW^HIDE();BRET^SET(TRUE);IFAKEX^SET(ILX);IFAKEWX^SET(IWX);BLANK5^PLAY("TIMER16");BLANK5^SETFRAME("TIMER16",8);}
{IFAKEX^INC();IFAKEWX^INC();ANLOCO_1^SETPOSITION([IFAKEX*IGRIDX],[ILY*IGRIDY]);ANLOCO_1^SETFRAME("RR",0);ANPFW_1^SETPOSITION([IFAKEWX*IGRIDX],[IWY*IGRIDY]);ANPFW_1^SETFRAME("RR",0);ANLPOS_1^SETFRAME("RR",0);ANLPOS_1^MOVE(IGRIDX,0);BLANK5^PLAY("TIMER16");BLANK5^SETFRAME("TIMER16",1);}
{IFAKEX^DEC();IFAKEWX^DEC();ANLOCO_1^SETPOSITION([IFAKEX*IGRIDX],[ILY*IGRIDY]);ANLOCO_1^SETFRAME("LL",0);ANPFW_1^SETPOSITION([IFAKEWX*IGRIDX],[IWY*IGRIDY]);ANPFW_1^SETFRAME("LL",0);ANLPOS_1^SETFRAME("LL",0);ANLPOS_1^MOVE(IGRIDX,0);BLANK5^PLAY("TIMER16");BLANK5^SETFRAME("TIMER16",1);@IF("IFAKEX","<","0","BFITMP24","");}
{IDRAGX^SET([[MOUSE^GETPOSX()+IACCLX]@IGRIDX]);IDRAGY^SET([MOUSE^GETPOSY()@IGRIDY]);@IF("IDRAGX<0||IDRAGX>[IMAXX+6]||IDRAGY<3||IDRAGY>IMAXY","BFITMP29","");@IF("IDRAGX'ILX&&IDRAGY'ILY","BFITMP30","");@IF("IDRAGX'IWX&&IDRAGY'IWY","BFITMP31","");@IF("BL'TRUE||BW'TRUE","BFITMP32","");@IF("IDRAGY>IMAXY||IDRAGY<3","BFITMP33","");ICI^SET(*OBJ^GETCLONEINDEX());SLOCKED^SET(["ANTRACK_"+ICI]);ARTRACK^REMOVE(SLOCKED);ARMAP^SET(IDRAGX,IDRAGY,"OK");*SLOCKED^SETPRIORITY(2);BLOCK^SET(TRUE);SFX_KOLEJ_PUT^PLAY();}
{GX^SET([[MOUSE^GETPOSX()+IACCLX]@IGRIDX]);GY^SET([MOUSE^GETPOSY()@IGRIDY]);PX^SET([MOUSE^GETPOSX()+IACCLX]);PY^SET([MOUSE^GETPOSY()]);DX2^SET(*SLOCKED^GETWIDTH());DY2^SET(*SLOCKED^GETHEIGHT());X2^SET([DX2@2]);Y2^SET([DY2@2]);*SLOCKED^SETPOSITION([PX-IACCLX-X2],[PY-Y2]);}
{SEL^SET(ARMAP^GET(GX,GY));SOBJ^SET(CANVASOBSERVER^GETGRAPHICSAT([GX*IGRIDX-IACCLX],[GY*IGRIDY],TRUE,1,1,TRUE));@IF("SOBJ^FIND("ANTRACK")>-1||SEL'"OK"","BFITMP37","");}
{ARTRACK^ADD(SLOCKED);SEV^SET(*SLOCKED^GETEVENTNAME());*SLOCKED^SETPOSITION([GX*IGRIDX-IACCLX],[GY*IGRIDY]);*SLOCKED^SETPRIORITY(1);ARMAP^SET(IDRAGX,IDRAGY,SEL);*SOBJ^SETPOSITION([IDRAGX*IGRIDX-IACCLX],[IDRAGY*IGRIDY]);ARMAP^SET(GX,GY,SEV);*SOBJ^SETPRIORITY(1);SLOCKED^SET(NULL);@IF("BFAILED","_","FALSE","BFITMP40","");}
{ARTRACK^ADD(SLOCKED);*SLOCKED^SETPOSITION([IDRAGX*IGRIDX-IACCLX],[IDRAGY*IGRIDY]);*SLOCKED^SETPRIORITY(1);SLOCKED^SET(NULL);}
{ARMAP^SET(IX,IY,"RR");ANTRSTAT^SETFRAME("RR",0);CANVASOBSERVER^PASTE("ANTRSTAT",[IX*IGRIDX],[IY*IGRIDY]);CNT^INC();}
{ARMAP^SET(IX,IY,"RR");ANTRSTAT^SETFRAME("RR",0);CANVASOBSERVER^PASTE("ANTRSTAT",[IX*IGRIDX],[IY*IGRIDY]);CNT^INC();}
{ARTRACK^ADD(["ANTRACK_"+CNT]);*["ANTRACK_"+CNT]^SETFRAME(STRACK,0);*["ANTRACK_"+CNT]^SETPOSITION([[IX+6]*IGRIDX],[[IY+2]*IGRIDY]);*["ANTRACK_"+CNT]^SHOW();CNT^INC();}
{ANTRSTAT^SETFRAME(STRACK,0);CANVASOBSERVER^PASTE("ANTRSTAT",[[IX+6]*IGRIDX],[[IY+2]*IGRIDY]);}
{VARTEST^SET(1);IILOSCSYLAB^SET(ANNSYLABY^GETNOE());@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^SETFRAME(["SYLABA"+_I_],0);*SNAZWA^PLAY(["SYLABA"+_I_]);}",VARTEST1,IILOSCSYLAB,1);TIMER2^ENABLE();}
{@INT("NREV",0);@STRING("SNAZWA2","");NREV^SET(ANNDYMKI^GETNOE());ANNDYMKI^CLONE([NREV-1]);@LOOP("{SNAZWA2^SET(["ANNDYMKI_"+_I_]);*SNAZWA2^SETFRAME(["CHMURA"+_I_],0);*SNAZWA2^SHOW();}",0,2,1);IILOSCSYLAB^SET(ANNSYLABY^GETNOE());ANNSYLABY^CLONE([IILOSCSYLAB-1]);@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^SETFRAME(["SYLABA"+_I_],0);*SNAZWA^SHOW();}",0,IILOSCSYLAB,1);}
{@INT("NREV",0);@STRING("SNAZWA2","");NREV^SET(ANNDYMKI^GETNOE());@LOOP("{SNAZWA2^SET(["ANNDYMKI_"+_I_]);*SNAZWA2^HIDE();}",0,NREV,1);@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^HIDE();}",0,IILOSCSYLAB,1);ANNREXSAYSOME^HIDE();ANNSYLSAYREX^PLAY("GADA_START",0);}
{@INT("NREV",0);@STRING("SNAZWA2","");NREV^SET(ANNDYMKI^GETNOE());ANNDYMKI^CLONE([NREV-1]);@LOOP("{SNAZWA2^SET(["ANNDYMKI_"+_I_]);*SNAZWA2^SETFRAME(["CHMURA"+_I_],0);*SNAZWA2^SHOW();}",0,2,1);IILOSCSYLAB^SET(ANNSYLABY^GETNOE());ANNSYLABY^CLONE([IILOSCSYLAB-1]);@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^SETFRAME(["SYLABA"+_I_],0);*SNAZWA^SHOW();}",0,IILOSCSYLAB,1);}
{@INT("NREV",0);@STRING("SNAZWA2","");@LOOP("{SNAZWA2^SET(["ANNDYMKI_"+_I_]);*SNAZWA2^SETFRAME(["CHMURA"+_I_],0);*SNAZWA2^SHOW();}",2,1,1);@LOOP("{SNAZWA2^SET(["ANNDYMKI_"+_I_]);*SNAZWA2^SETFRAME(["CHMURA"+_I_],0);*SNAZWA2^HIDE();}",1,1,1);VARTEST^SET(1);IILOSCSYLAB^SET(ANNSYLABY^GETNOE());@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^SETFRAME(["SYLABA"+_I_],0);*SNAZWA^PLAY(["SYLABA"+_I_]);}",VARTEST1,IILOSCSYLAB,1);TIMER2^ENABLE();VARNIEREAGUJ^SET(0);}
{@INT("NREV",0);@STRING("SNAZWA2","");NREV^SET(ANNDYMKI^GETNOE());@LOOP("{SNAZWA2^SET(["ANNDYMKI_"+_I_]);*SNAZWA2^HIDE();}",0,NREV,1);@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^HIDE();}",0,IILOSCSYLAB,1);}
{IILOSCSYLAB^SET(ANNSYLABY^GETNOE());@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^SETFRAME(["SYLABA"+_I_],0);*SNAZWA^PLAY(["SYLABA"+_I_]);}",VARTEST1,IILOSCSYLAB,1);}
{IILOSCSYLAB^SET(ANNSYLABY^GETNOE());@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^STOP();*SNAZWA^SETFRAME(["SYLABA"+_I_],0);}",0,IILOSCSYLAB,1);}
{ANNKEYBMOUSEHELP^PLAY("M");BEHMUSICSET^RUN("KONSTANTYNOPOL");BEHAMBIENTSNDPLAY^RUN("SFX_KONST_PORT");ANNKRETMYSLI^PLAY("MYSLI");ANNREXMYSLI^PLAY("MYSLI");ANNSWINKA^PLAY("IDLE");@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP20","BFITMP21");IILOSCSYLAB^SET(ANNSYLABY^GETNOE());ANNSYLABY^CLONE([IILOSCSYLAB-1]);@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^SETFRAME(["SYLABA"+_I_],0);}",0,IILOSCSYLAB,1);SEQGADAJA^PLAY("SEGADAJA");BHARDTRUE^SET(FALSE);}
{ANNKRET^PLAY("MYSLI");ANNSWINKA^PLAY("IDLE");IILOSCSYLAB^SET(ANNSYLABY^GETNOE());@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^STOP(["SYLABA"+_I_]);*SNAZWA^SETFRAME(["SYLABA"+_I_],0);}",0,IILOSCSYLAB,1);SEQGADAJA^PLAY("SEGADAJA");VARNIEREAGUJ^SET(0);}
{IILOSCSYLAB^SET(ANNSYLABY^GETNOE());@LOOP("{SNAZWA^SET(["ANNSYLABY_"+_I_]);*SNAZWA^STOP(["SYLABA"+_I_]);*SNAZWA^PLAY(["SYLABA"+_I_],0);}",0,IILOSCSYLAB,1);VARNIEREAGUJ^SET(0);VARTEST^SET(1);}
{)VARNIEREAGUJ^SET(1}
{@STRING("ST","");@INT("CF2",0);@INT("CF3",0);GRPLANS^MOVE(4,0);GGRT^MOVE(4,0);GGRE^MOVE(4,0);GRCHM^MOVE(5,0);IOFFX^ADD(4);@INT("BLNDMG",ANBALON^GETCFRAMEINEVENT());IAMFORY^SUB([1+BLNDMG]);@INT("ILE",0);@INT("REM",0);@INT("AMF",0);@INT("ATMP",0);REM^SET([IAMFORY%IADDAMFORA]);AMF^SET([IAMFORY@IADDAMFORA]);ATMP^SET([IADDAMFORA@10]);ILE^SET([REM@ATMP]);@IF("IAMFORY","<","1","BFITMP28","");@IF("ILE'0&&AMF'0","BFITMP29","BFITMP30");@LOOP("{ST^SET(ARFSCR^GET(_I_));*ST^MOVE(2,0);}",0,ARFSCR^GETSIZE(),1);IMGLINA^SETPOSITION([ANKRET^GETCENTERX()-IMGLINA^GETWIDTH()],[ANKRET^GETCENTERY()-IMGLINA^GETHEIGHT()]);ICURGRID^SET([IOFFX@200]);BEHBALONKOL^RUN();@IF("BFUEL'TRUE||BFAILED'TRUE","BFITMP31","");@IF("BKROK","_","FALSE","BFITMP32","BFITMP33");}
{ANNKEYBMOUSEHELP^PLAY("GD_SP");BEHMUSICSET^RUN("DOROZKA");BEHAMBIENTSNDPLAY^RUN("SFX_BALON_BGR");KEYBOARD^SETAUTOREPEAT(TRUE);@IF(GSAVE^GET("LOTB_STATUS"),"_",""NIEODWIEDZONY"","BFITMP52","");@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP53","BFITMP54");IETAP^SET(GSAVE^GET("LOTB_ETAP"));IOFFY^SET(300);@INT("ILEN",25);IGLOBPRIOR^SET(3);IAMFORY^SET(1250);IADDAMFORA^SET(1250);IMGPLAN1^CLONE([ILEN-1]);IMGPLAN2^CLONE([ILEN-1]);ANTERRA^CLONE([ILEN*4-1]);ANELEM^CLONE([ILEN*4-1]);IMGMK^CLONE([ILEN*4-1]);IMGML^CLONE([ILEN*4-1]);ANKOL^CLONE([ANKOL^GETNOFINEVENT(0)-1]);ANCHMURY^CLONE([ILEN@4]);ANBALON^SETPOSITION(500,10);ANBALON^CLONE(2);ANBALON^SETFRAME("CZASZA",0);ANBALON_1^SETFRAME("KOSZF",0);ANBALON_2^SETFRAME("KOSZB",0);ANPIES^SETPOSITION(500,10);ANKRET^SETPOSITION(500,10);@LOOP("{*["ANKOL_"+_I_]^SETFRAME("KOL0",_I_);GRKOL^ADD(["ANKOL_"+_I_]);}",0,ANKOL^GETNOFINEVENT(0),1);GRKOL^MOVE(500,10);IMGLINA^MOVE(500,10);IHEROY^SET([IOFFY+ANBALON^GETPOSITIONY()]);@INT("IW1",IMGPLAN1^GETWIDTH());@INT("IW2",IMGPLAN2^GETWIDTH());GRPLANS^ADD("IMGPLAN1","IMGPLAN2");@LOOP("{*["IMGPLAN1_"+_I_]^MOVE([0-[IW1*_I_]],[0-IOFFY]);*["IMGPLAN2_"+_I_]^MOVE([0-[IW2*_I_]],[0-IOFFY]);}",0,[ILEN+1],1);GRPLANS^ADDCLONES("IMGPLAN1",1,10);GRPLANS^ADDCLONES("IMGPLAN2",1,10);@INT("CHX",0);@INT("CHY",0);@LOOP("{CHX^SET([0-[_I_*950]]);CHY^SET([RANDOM^GET(100)-50]);*["ANCHMURY_"+_I_]^MOVE(CHX,CHY);*["ANCHMURY_"+_I_]^SETFRAME("CHMURY",RANDOM^GET(4));GRCHM^ADD(["ANCHMURY_"+_I_]);}",0,ILEN,1);@LOOP("{GRSND^ADD(["KRET_E"+[518+_I_]]);}",0,57,1);GRSND^ADD("REX_E512","REX_E516","REX_E563","REX_E564","REX_E569","REX_E570","REX_E571","REX_E571","REX_E571");@IF("ILEVEL","_","1","BFITMP58","");@IF("ILEVEL","_","2","BFITMP62","");@INT("ILEN2",0);@STRING("STER","");@STRING("SEL","");@STRING("STMP","");ILEN2^SET(ARTEREN^GETSIZE());@LOOP("{STER^SET(ARTEREN^GET([ILEN2-1-_I_]));*["ANTERRA_"+_I_]^SETFRAME(STER,0);*["ANTERRA_"+_I_]^MOVE([600-[IGRIDX*_I_]],[0-IOFFY]);@IF(STER^GET(0),"_",""G"","BFITMP63","");@IF(STER^GET(0),"_",""W"","BFITMP64","");GGRT^ADD(["ANTERRA_"+_I_]);SEL^SET(ARELEM^GET([ILEN2-1-_I_]));@IF(SEL^GET(0),"!_","""","BFITMP72","");GGRE^ADD(["ANELEM_"+_I_]);}",0,ILEN2,1);GGRT^SHOW();@LOOP("{*["IMGMK_"+_I_]^HIDE();*["IMGML_"+_I_]^HIDE();}",0,ILEN,1);IOFFX^SET([800-ANKRET^GETPOSITIONX()]);IMGLINA^SETPRIORITY(5);ANBALON_2^SETPRIORITY(5);ANPIES^SETPRIORITY(6);ANKRET^SETPRIORITY(6);GRHEROES^ADD("ANBALON");GRHEROES^ADD("ANBALON_1");GRHEROES^ADD("ANBALON_2");GRHEROES^ADD("ANPIES");GRHEROES^ADD("ANKRET");ANBLANK^PLAY("TIMER");ANPIES^PLAY("IDLE");ANKRET^PLAY("IDLE");}
{TX^SET([IMGPASEK^GETWIDTH()@3*2]);IX^SET([IMGPASEK^GETPOSITIONX()+TX]);}
{@IF("IETAP","_","1","BFITMP5","");@IF("IETAP","_","2","BFITMP6","");@IF("IETAP","_","3","BFITMP7","");IY^SET(IMGPASEK^GETPOSITIONY());WX^SET([DX2*ICURGRID@DT]);IMGKROPA^SETPOSITION([WX+IX],[IY+1]);}
{||SOBJ2^FIND("IMGM")>-1){SOBJT^SET(SOBJ2);}
{ANPIES^PLAY("PRZE");@IF(ANKRET^GETEVENTNAME(),"_",""IDLE"","BFITMP129","");BHIT^SET(TRUE);@IF(SEV^GET(0),"_",""F"","BFITMP130","");@IF("SEV^GET(0)'"Z"||SEV^GET(0)'"G"||SEV^GET(0)'"C"||SEV^GET(0)'"P"||SEV^GET(0)'"Q"","BFITMP131","");@IF("_I_","<","6","BFITMP133","BFITMP134");@IF("BKROK","_","TRUE","BFITMP135","BFITMP136");@IF("IWN","_","0","BFITMP137","");@IF("INIETOM","_","0","BFITMP140","");ANBLANK^PAUSE();ANHITMOVE^PLAY("MOVE");}
{ANNGLOWS^SETPOSITION(0,[0*ISLOTOFFSETY]);ANNGLOWS^PLAY("SZUFLADA");SFXMENUON^PLAY();@IF(GSAVE^GGET("SLOT0_STATUS"),"_",""EMPTY"","BFITMP5","BFITMP6");}
{ANNGLOWS^SETPOSITION(0,[1*ISLOTOFFSETY]);ANNGLOWS^PLAY("SZUFLADA");SFXMENUON^PLAY();@IF(GSAVE^GGET("SLOT1_STATUS"),"_",""EMPTY"","BFITMP12","BFITMP13");}
{ANNGLOWS^SETPOSITION(0,[2*ISLOTOFFSETY]);ANNGLOWS^PLAY("SZUFLADA");SFXMENUON^PLAY();@IF(GSAVE^GGET("SLOT2_STATUS"),"_",""EMPTY"","BFITMP19","BFITMP20");}
{ANNGLOWS^SETPOSITION(0,[3*ISLOTOFFSETY]);ANNGLOWS^PLAY("SZUFLADA");SFXMENUON^PLAY();@IF(GSAVE^GGET("SLOT3_STATUS"),"_",""EMPTY"","BFITMP26","BFITMP27");}
{ANNGLOWS^SETPOSITION(0,[0*ISLOTOFFSETY]);ANNGLOWS^PLAY("NORMAL");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_NORMAL");}
{ANNGLOWS^SETPOSITION(0,[0*ISLOTOFFSETY]);ANNGLOWS^PLAY("EASY");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_EASY");}
{ANNGLOWS^SETPOSITION(0,[1*ISLOTOFFSETY]);ANNGLOWS^PLAY("NORMAL");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_NORMAL");}
{ANNGLOWS^SETPOSITION(0,[1*ISLOTOFFSETY]);ANNGLOWS^PLAY("EASY");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_EASY");}
{ANNGLOWS^SETPOSITION(0,[2*ISLOTOFFSETY]);ANNGLOWS^PLAY("NORMAL");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_NORMAL");}
{ANNGLOWS^SETPOSITION(0,[2*ISLOTOFFSETY]);ANNGLOWS^PLAY("EASY");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_EASY");}
{ANNGLOWS^SETPOSITION(0,[3*ISLOTOFFSETY]);ANNGLOWS^PLAY("NORMAL");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_NORMAL");}
{ANNGLOWS^SETPOSITION(0,[3*ISLOTOFFSETY]);ANNGLOWS^PLAY("EASY");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_EASY");}
{ANNGLOWS^SETPOSITION(0,[0*ISLOTOFFSETY]);ANNGLOWS^PLAY("USUWANIE");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_KOSZ");}
{ANNGLOWS^SETPOSITION(0,[1*ISLOTOFFSETY]);ANNGLOWS^PLAY("USUWANIE");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_KOSZ");}
{ANNGLOWS^SETPOSITION(0,[2*ISLOTOFFSETY]);ANNGLOWS^PLAY("USUWANIE");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_KOSZ");}
{ANNGLOWS^SETPOSITION(0,[3*ISLOTOFFSETY]);ANNGLOWS^PLAY("USUWANIE");SFXMENUON^PLAY();BEHSEQPLAY^RUN("FOC_KOSZ");}
{ANNGLOWS^SETPOSITION(0,[0*ISLOTOFFSETY]);ANNGLOWS^PLAY("ZAJEZDNIA");SFXMENUON^PLAY();}
{ANNGLOWS^SETPOSITION(0,[1*ISLOTOFFSETY]);ANNGLOWS^PLAY("ZAJEZDNIA");SFXMENUON^PLAY();}
{ANNGLOWS^SETPOSITION(0,[2*ISLOTOFFSETY]);ANNGLOWS^PLAY("ZAJEZDNIA");SFXMENUON^PLAY();}
{ANNGLOWS^SETPOSITION(0,[3*ISLOTOFFSETY]);ANNGLOWS^PLAY("ZAJEZDNIA");SFXMENUON^PLAY();}
{IGMUSICVOLUMEFIX^SET(0);IGMUSICVOLUME^SET(700);BEHMUSICSET^RUN("INTRO");ANNKEYBMOUSEHELP^PLAY("NULL");I1^SET([1+RANDOM^GET(4)]);CANVASOBSERVER^SETBACKGROUND(["BKG"+I1+".IMG"]);ANNNAKLADKI^CLONE(1);ANNNAKLADKI^SETFRAME("IDLE",0);ANNNAKLADKI_1^SETFRAME("IDLE",1);IILOSCSLOTOW^SET(4);IWOLNYCHSLOTOW^SET(IILOSCSLOTOW);ANNSZUFLADA^CLONE([IILOSCSLOTOW-1]);ANNTRUDNOSC^CLONE([[IILOSCSLOTOW*2]-1]);ANNTRUDNOSCOUT^CLONE([IILOSCSLOTOW-1]);ANNUSUWANIE^CLONE([IILOSCSLOTOW-1]);ANNZAJEZDNIA^CLONE([IILOSCSLOTOW-1]);@STRING("STMPSS","");@STRING("STMPSD","");@LOOP("{I1^SET(_I_);I2^SET([_I_*2]);I3^SET([_I_*ISLOTOFFSETY]);STMPSS^SET(GSAVE^GGET(["SLOT"+I1+"_STATUS"]));STMPSD^SET(GSAVE^GGET(["SLOT"+I1+"_DIFFICULTY"]));S1^SET(["ANNSZUFLADA_"+I1]);*S1^SETPOSITION(0,I3);@IF("STMPSS","_",""EMPTY"","BFITMP30","BFITMP31");S2^SET(["BTNSZUFLADA"+I1]);*S2^SETSTD(S1);S1^SET(["ANNTRUDNOSC_"+I2]);S2^SET(["ANNTRUDNOSC_"+[I2+1]]);S3^SET(["ANNTRUDNOSCOUT_"+I1]);*S1^SETFRAME("IDLE",0);*S2^SETFRAME("IDLE",1);*S1^SETPOSITION(0,I3);*S2^SETPOSITION(0,I3);*S3^SETPOSITION(0,I3);@IF("STMPSS","_",""EMPTY"","BFITMP34","");S1^SET(["ANNUSUWANIE_"+I1]);*S1^SETPOSITION(0,I3);*S1^SETFRAME("IDLE",0);@IF("STMPSS","_",""FULL"","BFITMP35","");S1^SET(["ANNZAJEZDNIA_"+I1]);*S1^SETPOSITION(0,I3);@IF("STMPSS'"FULL"&&GSAVE^GGET(["SLOT"+I1+"_INTRO"])'"UKONCZONY"","BFITMP36","");}",0,IILOSCSLOTOW,1);@IF("IWOLNYCHSLOTOW","_","4","BFITMP37","");}
{GSAVE^GSET(["SLOT"+IGSLOTNO+"_STATUS"],"EMPTY");GSAVE^GSET(["SLOT"+IGSLOTNO+"_DIFFICULTY"],"NORMAL");GSAVE^GSET(["SLOT"+IGSLOTNO+"_MUSIC_VOLUME"],700);@IF(GSAVE^GGET(["SLOT"+IGSLOTNO+"_INTRO"]),"!_",""UKONCZONY"","BFITMP38","");S1^SET(["ANNSZUFLADA_"+IGSLOTNO]);*S1^SETFRAME("IDLE",0);I1^SET([IGSLOTNO*2]);S1^SET(["ITRUDNOSC"+IGSLOTNO]);S2^SET(["ANNTRUDNOSCOUT_"+IGSLOTNO]);S3^SET(["ANNTRUDNOSC_"+I1]);S4^SET(["ANNTRUDNOSC_"+[I1+1]]);*S1^SET(0);*S2^SETFRAME("IDLE",0);*S3^SETFRAME("IDLE",0);*S4^SETFRAME("IDLE",1);*S2^SHOW();*S3^SHOW();*S4^SHOW();S1^SET(["BTNTRUDNOSC"+IGSLOTNO+"N"]);S2^SET(["BTNTRUDNOSC"+IGSLOTNO+"E"]);*S1^SETSTD(S3);*S2^SETSTD(S4);S1^SET(["ANNUSUWANIE_"+IGSLOTNO]);S2^SET(["BTNUSUWANIE"+IGSLOTNO]);*S1^HIDE();*S2^SETSTD("");S1^SET(["ANNZAJEZDNIA_"+IGSLOTNO]);S2^SET(["BTNZAJEZDNIA"+IGSLOTNO]);*S1^HIDE();*S2^SETSTD("");}
{BSLOTFIRSTTIME^SET(TRUE);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);}
{BSLOTFIRSTTIME^SET(TRUE);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);}
{BSLOTFIRSTTIME^SET(TRUE);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);}
{BSLOTFIRSTTIME^SET(TRUE);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);}
{BEHCHECKGROUND^RUN();@IF("BPRZYSPIESZENIE","_","FALSE","BFITMP8","");IPASEKPOS^SET([[300*IKRETPOSX]@ILOKOPOSX]);}
{@IF([IKRETPOSX+IKRETMOVEX],"<","150","BFITMP9","");ISCROLLMOVEX^SET([ISCROLLSPEED+[IKRETMOVEX@7]]);CANVASOBSERVER^MOVEBKG(ISCROLLMOVEX,0);@IF("I5PLANPOSX","<","-1600","BFITMP10","");I1^SET([0-[ISCROLLMOVEX*5]]);I5PLANPOSX^ADD(I1);ANN5PLAN^MOVE(I1,0);@IF("I4PLANPOSX","<","-450","BFITMP11","");I1^SET([0-[ISCROLLMOVEX*6]]);I4PLANPOSX^ADD(I1);ANNPRZESZKODY^MOVE(I1,0);@IF("I4PLANPOSX_1","<","-450","BFITMP12","");I1^SET([0-[ISCROLLMOVEX*6]]);I4PLANPOSX_1^ADD(I1);ANNPRZESZKODY_1^MOVE(I1,0);@IF("I3PLANPOSX","<","-1600","BFITMP13","");I1^SET([0-[ISCROLLMOVEX*7]]);I3PLANPOSX^ADD(I1);G3PLAN^MOVE(I1,0);GPOCIAG^MOVE([0-IKRETMOVEX],0);IKRETPOSX^ADD(IKRETMOVEX);I1^SET([0-[ISCROLLMOVEX*6]-1]);GDYMKI^MOVE(I1,0);@IF("I1PLANPOSX","<","-800","BFITMP14","");I1^SET([0-[ISCROLLMOVEX*20]]);I1PLANPOSX^ADD(I1);ANN1PLAN^MOVE(I1,0);BEHCHECKCOLL^RUN();BEHCHECKCOLL_1^RUN();ITIMER^INC();}
{ANNKEYBMOUSEHELP^PLAY("LPGD");BEHMUSICSET^RUN("DOROZKA");BEHAMBIENTSNDPLAY^RUN("SFX_TRAIN_OUTSIDE");SLEVELSEL^SET(["1"+SGAMEDIFFICULTY]);ARRKRETCANDO^REMOVEALL();ARRKRETCANDO^ADD("ISC","SKOCZYC","SCHYLIC");@IF(GSAVE^GET("ONOEX_STATUS"),"_",""NIEODWIEDZONY"","BFITMP32","");IPASEKPOS^SET([[300*IKRETPOSX]@ILOKOPOSX]);ANNRUNNERGAME^PLAY("RUN");ANNKRET^PLAY("STOI");}
{ANNWAGON^CLONE([IILOSCWAGONOW-1]);@LOOP("{S1^SET(["ANNWAGON_"+_I_]);*S1^MOVE([_I_*1600],0);}",0,IILOSCWAGONOW,1);IMGLOKOMOTYWA^MOVE([[IILOSCWAGONOW*1600]-20],0);GPOCIAG^ADDCLONES("ANNWAGON",0,[IILOSCWAGONOW-1]);GPOCIAG^ADD("IMGLOKOMOTYWA");ILOKOPOSX^SET([[IILOSCWAGONOW*1600]+90]);ARRKRETCANDO^REMOVEALL();ARRKRETCANDO^ADD("ISC","SKOCZYC","SCHYLIC");ARRCHGREVENTS^REMOVEALL();ARRCHGREVENTS^ADD("STOI","IDZIE_L","IDZIE_R","SUNIE","PRZEWRACA_WSTAJE");ANNPRZESZKODY^CLONE(1);I4PLANPOSX_1^SET(2100);ANNPRZESZKODY_1^MOVE(850,0);IPRZESZKODAPOZIOM^SET(RANDOM^GET(3));IPRZESZKODAPOZIOM_1^SET(RANDOM^GET(3));ANN3PLAN^CLONE(2);ANN3PLAN_1^SETFRAME("IDLE",1);ANN3PLAN_2^SETFRAME("IDLE",2);G3PLAN^ADD("ANN3PLAN","ANN3PLAN_1","ANN3PLAN_2");GDYMKI^ADD("ANNDYMKI");}
{IKRETMOVEX^SET([0-[ISCROLLSPEED*7]]);ANNKRET^PLAY("SPADA_Z_0");}
{BKRETLOCKED^SET(TRUE);IKRETMOVEX^SET([0-[ISCROLLSPEED*6]]);ANNKRET^PLAY("PRZEWRACA_WSTAJE");SEQKRET^PLAY("DUSI_SIE");}
{IKRETMOVEX^SET([0-[ISCROLLSPEED*7]]);ANNKRET^PLAY("SPADA_Z_1");}
{BKRETLOCKED^SET(TRUE);IKRETMOVEX^SET([0-[ISCROLLSPEED*6]]);ANNKRET^PLAY("SUNIE");SEQKRET^PLAY("DUSI_SIE");}
{IKRETMOVEX^SET([0-[ISCROLLSPEED*7]]);ANNKRET^PLAY("SPADA_Z_0");}
{BKRETLOCKED^SET(TRUE);IKRETMOVEX^SET([0-[ISCROLLSPEED*6]]);ANNKRET^PLAY("PRZEWRACA_WSTAJE");SEQKRET^PLAY("DUSI_SIE");}
{IKRETMOVEX^SET([0-[ISCROLLSPEED*7]]);ANNKRET^PLAY("SPADA_Z_1");}
{BKRETLOCKED^SET(TRUE);IKRETMOVEX^SET([0-[ISCROLLSPEED*6]]);ANNKRET^PLAY("SUNIE");SEQKRET^PLAY("DUSI_SIE");}
{*SGSCENENAME^STARTMUSIC([$1+".WAV"]);IGMUSICVOLUME^SET(IGMUSICVOLUME);}
{ANNKEYBMOUSEHELP^PLAY("M");BEHMUSICSET^RUN("INDIE");BEHAMBIENTSNDPLAY^RUN("SFX_MU_BGR");@INT("INOTI",0);@INT("SX",0);@INT("SY",0);@INT("ICLONEINDEX",0);@STRING("SNAME","");IMOVE^SET(3);BWAGANOTRUN^SET(TRUE);BDAJSPOKOJ^SET(TRUE);@IF(GSAVE^GET("ROWNOWAGA_KTO"),"_",""KRET"","BFITMP187","BFITMP188");ANNDROPSZALKAL^CLONE(0);ANNDROPSZALKAR^CLONE(0);ANNDROPDOL^CLONE(0);ANNDROPSZALKAL^SETPOSITION(42,71);ANNDROPSZALKAR^SETPOSITION(457,71);ANNDROPDOL^SETPOSITION(0,520);GRKULKIL^ADD("ANNDROPSZALKAL");GRKULKIR^ADD("ANNDROPSZALKAR");@IF("IASPEKT","_","6","BFITMP189","");@IF("IASPEKT","_","10","BFITMP190","");NREV^SET(ANNKULKIGL^GETNOE());ANNKULKIGL^CLONE([NREV-1]);@LOOP("{SNAZWAGL^SET(["ANNKULKIGL_"+_I_]);*SNAZWAGL^SETFRAME(["KULA"+_I_],0);*SNAZWAGL^HIDE();GRKULKIL^ADD(["ANNKULKIGL_"+_I_]);}",0,NREV,1);NREV^SET(ANNKULKIGR^GETNOE());ANNKULKIGR^CLONE([NREV-1]);@LOOP("{SNAZWAGR^SET(["ANNKULKIGR_"+_I_]);*SNAZWAGR^SETFRAME(["KULA"+_I_],0);*SNAZWAGR^HIDE();GRKULKIR^ADD(["ANNKULKIGR_"+_I_]);}",0,NREV,1);@IF("IASPEKT","_","10","BFITMP191","");@IF("IASPEKT","_","6","BFITMP192","");@IF("IASPEKT","_","10","BFITMP193","");@IF("IASPEKT","_","6","BFITMP194","");NREV^SET(ANNWAGA^GETNOE());ANNWAGA^CLONE([NREV-1]);ANNWAGA^SHOW();@LOOP("{SNAZWA^SET(["ANNWAGA_"+_I_]);*SNAZWA^SETFRAME(["WAGA"+_I_],0);*SNAZWA^HIDE();}",0,NREV,1);*SNAZWA^SETFRAME(["WAGA"+3],0);*SNAZWA^SHOW();@IF("IASPEKT","_","6","BFITMP195","");@IF("IASPEKT","_","10","BFITMP196","");@IF(GSAVE^GET("ROWNOWAGA_STATUS"),"_",""NIEODWIEDZONY"","BFITMP197","");}
{GRKULKIL^REMOVE(SGOBJ);@IF("IASPEKT","_","10","BFITMP89","");@IF("IASPEKT","_","6","BFITMP92","");ISUML^SET([ISUML-IAN-ININE]);IFINDVARINDEX^SET(ARSZALKAL^FIND(IAN));ARSZALKAL^REMOVEAT(IFINDVARINDEX);IARSIZE^SET(ARSZALKAL^GETSIZE());@LOOP("{IPOSSETX^SET(*["ANNKULKIGL_"+_I_]^GETPOSITIONX());IPOSSETY^SET(*["ANNKULKIGL_"+_I_]^GETPOSITIONY());IARGETVAR^SET(ARSZALKAL^GET(_I_));@IF("IASPEKT","_","10","BFITMP93","");@IF("IASPEKT","_","6","BFITMP94","");}",0,IARSIZE,1);}
{GRKULKIR^REMOVE(SGOBJ);@IF("IASPEKT","_","10","BFITMP99","");@IF("IASPEKT","_","6","BFITMP102","");ISUMR^SET([ISUMR-IAN-ININE]);IFINDVARINDEX^SET(ARSZALKAR^FIND(IAN));ARSZALKAR^REMOVEAT(IFINDVARINDEX);IARSIZE^SET(ARSZALKAR^GETSIZE());@LOOP("{IPOSSETX^SET(*["ANNKULKIGR_"+_I_]^GETPOSITIONX());IPOSSETY^SET(*["ANNKULKIGR_"+_I_]^GETPOSITIONY());IARGETVAR^SET(ARSZALKAR^GET(_I_));@IF("IASPEKT","_","10","BFITMP103","");@IF("IASPEKT","_","6","BFITMP104","");}",0,IARSIZE,1);}
{@IF("IASPEKT","_","10","BFITMP112","");@IF("IASPEKT","_","6","BFITMP115","");ISUMR^SET([ISUMR-IAN-ININE]);IFINDVARINDEX^SET(ARSZALKAR^FIND(IAN));ARSZALKAR^REMOVEAT(IFINDVARINDEX);IARSIZE^SET(ARSZALKAR^GETSIZE());@LOOP("{IPOSSETX^SET(*["ANNKULKIGR_"+_I_]^GETPOSITIONX());IPOSSETY^SET(*["ANNKULKIGR_"+_I_]^GETPOSITIONY());IARGETVAR^SET(ARSZALKAR^GET(_I_));@IF("IASPEKT","_","10","BFITMP116","");@IF("IASPEKT","_","6","BFITMP117","");}",0,IARSIZE,1);@IF("IASPEKT","_","10","BFITMP120","");@IF("IASPEKT","_","6","BFITMP123","");ISUML^SET([ISUML+IAN+ININE]);ARSZALKAL^ADD(IAN);IARSIZE^SET(ARSZALKAL^GETSIZE());@LOOP("{IPOSSETX^SET(*["ANNKULKIGL_"+[IARSIZE-1]]^GETPOSITIONX());IPOSSETY^SET(*["ANNKULKIGL_"+[IARSIZE-1]]^GETPOSITIONY());@IF("IASPEKT","_","10","BFITMP124","");@IF("IASPEKT","_","6","BFITMP125","");}",0,IARSIZE,1);}
{@IF("IASPEKT","_","10","BFITMP129","");@IF("IASPEKT","_","6","BFITMP132","");ISUML^SET([ISUML+IAN+ININE]);ARSZALKAL^ADD(IAN);IARSIZE^SET(ARSZALKAL^GETSIZE());@LOOP("{IPOSSETX^SET(*["ANNKULKIGL_"+[IARSIZE-1]]^GETPOSITIONX());IPOSSETY^SET(*["ANNKULKIGL_"+[IARSIZE-1]]^GETPOSITIONY());@IF("IASPEKT","_","10","BFITMP133","");@IF("IASPEKT","_","6","BFITMP134","");}",0,IARSIZE,1);}
{@IF("IASPEKT","_","10","BFITMP142","");@IF("IASPEKT","_","6","BFITMP145","");ISUML^SET([ISUML-IAN-ININE]);IFINDVARINDEX^SET(ARSZALKAL^FIND(IAN));ARSZALKAL^REMOVEAT(IFINDVARINDEX);IARSIZE^SET(ARSZALKAL^GETSIZE());@LOOP("{IPOSSETX^SET(*["ANNKULKIGL_"+_I_]^GETPOSITIONX());IPOSSETY^SET(*["ANNKULKIGL_"+_I_]^GETPOSITIONY());IARGETVAR^SET(ARSZALKAL^GET(_I_));@IF("IASPEKT","_","10","BFITMP146","");@IF("IASPEKT","_","6","BFITMP147","");}",0,IARSIZE,1);@IF("IASPEKT","_","10","BFITMP150","");@IF("IASPEKT","_","6","BFITMP153","");ISUMR^SET([ISUMR+IAN+ININE]);ARSZALKAR^ADD(IAN);IARSIZE^SET(ARSZALKAR^GETSIZE());@LOOP("{IPOSSETX^SET(*["ANNKULKIGR_"+[IARSIZE-1]]^GETPOSITIONX());IPOSSETY^SET(*["ANNKULKIGR_"+[IARSIZE-1]]^GETPOSITIONY());@IF("IASPEKT","_","10","BFITMP154","");@IF("IASPEKT","_","6","BFITMP155","");}",0,IARSIZE,1);}
{@IF("IASPEKT","_","10","BFITMP159","");@IF("IASPEKT","_","6","BFITMP162","");ISUMR^SET([ISUMR+IAN+ININE]);ARSZALKAR^ADD(IAN);IARSIZE^SET(ARSZALKAR^GETSIZE());@LOOP("{IPOSSETX^SET(*["ANNKULKIGR_"+[IARSIZE-1]]^GETPOSITIONX());IPOSSETY^SET(*["ANNKULKIGR_"+[IARSIZE-1]]^GETPOSITIONY());@IF("IASPEKT","_","10","BFITMP163","");@IF("IASPEKT","_","6","BFITMP164","");}",0,IARSIZE,1);}
{ITEMPA^SET(*["ANNKULKIABC_"+IAN]^GETPOSITIONX(FALSE));ITEMPB^SET(*["ANNKULKIABC_"+IAN]^GETPOSITIONX());ITEMPX^SET(ITEMPA-ITEMPB);ITEMPA^SET(*["ANNKULKIABC_"+IAN]^GETPOSITIONY(FALSE));ITEMPB^SET(*["ANNKULKIABC_"+IAN]^GETPOSITIONY());ITEMPY^SET(ITEMPA-ITEMPB);MIDA^SET(*["ANNKULKIABC_"+IAN]^GETWIDTH());MIDB^SET(*["ANNKULKIABC_"+IAN]^GETHEIGHT());MIDX^SET([MIDA@2]);MIDY^SET([MIDB@2]);*["ANNKULKIABC_"+IAN]^SETPOSITION([MOUSE^GETPOSX()+ITEMPX-MIDX],[MOUSE^GETPOSY()+ITEMPY-MIDY]);}
{ITEMPA^SET(*["ANNKULKIABCREX_"+IAN]^GETPOSITIONX(FALSE));ITEMPB^SET(*["ANNKULKIABCREX_"+IAN]^GETPOSITIONX());ITEMPX^SET(ITEMPA-ITEMPB);ITEMPA^SET(*["ANNKULKIABCREX_"+IAN]^GETPOSITIONY(FALSE));ITEMPB^SET(*["ANNKULKIABCREX_"+IAN]^GETPOSITIONY());ITEMPY^SET(ITEMPA-ITEMPB);MIDA^SET(*["ANNKULKIABCREX_"+IAN]^GETWIDTH());MIDB^SET(*["ANNKULKIABCREX_"+IAN]^GETHEIGHT());MIDX^SET([MIDA@2]);MIDY^SET([MIDB@2]);*["ANNKULKIABCREX_"+IAN]^SETPOSITION([MOUSE^GETPOSX()+ITEMPX-MIDX],[MOUSE^GETPOSY()+ITEMPY-MIDY]);}
{NREV^SET(ANNKULKIABC^GETNOE());ANNKULKID^CLONE([NREV-1]);ANNKULKIABC^CLONE([NREV-1]);@LOOP("{SKULED^SET(["ANNKULKID_"+_I_]);*SKULED^SETFRAME(["KULKID"+_I_],0);*SKULED^HIDE();SX^SET(*SKULED^GETPOSITIONX());SY^SET(*SKULED^GETPOSITIONY());SABC^SET(["ANNKULKIABC_"+ARROWNOWAGA^GET(_I_)]);*SABC^PLAY(["KULKIABC"+_I_]);*SABC^SETFRAME(["KULKIABC"+ARROWNOWAGA^GET(_I_)],0);*SABC^SETPOSITION(SX,SY);}",0,NREV,1);NREV^SET(ANNKULKIABC^GETNOE());@LOOP("{SKULED^SET(["ANNKULKID_"+ARROWNOWAGA^GET(_I_)]);*SKULED^SETFRAME(["KULKID"+_I_],0);}",0,NREV,1);}
{NREV^SET(ANNKULKIABCREX^GETNOE());ANNKULKID^CLONE([NREV-1]);ANNKULKIABCREX^CLONE([NREV-1]);@LOOP("{SKULED^SET(["ANNKULKID_"+_I_]);*SKULED^SETFRAME(["KULKID"+_I_],0);*SKULED^HIDE();SX^SET(*SKULED^GETPOSITIONX());SY^SET(*SKULED^GETPOSITIONY());SABC^SET(["ANNKULKIABCREX_"+ARROWNOWAGA^GET(_I_)]);*SABC^PLAY(["KULKIABC"+_I_]);*SABC^SETFRAME(["KULKIABC"+ARROWNOWAGA^GET(_I_)],0);*SABC^SETPOSITION(SX,SY);}",0,NREV,1);NREV^SET(ANNKULKIABCREX^GETNOE());@LOOP("{SKULED^SET(["ANNKULKID_"+ARROWNOWAGA^GET(_I_)]);*SKULED^SETFRAME(["KULKID"+_I_],0);}",0,NREV,1);}
{@STRING("S","");@INT("TX",0);@INT("TY",0);@INT("SS",0);@INT("MAXT",0);@INT("CT",0);@INT("TT",0);@INT("IKW",0);CANVASOBSERVER^MOVEBKG([IMOVE-1],0);ILICZ^ADD([IMOVE-1]);MAXT^SET([INUMEKR*800]);CT^SET([ISLONEKR*800+ILICZ]);IKW^SET(IMGK^GETWIDTH());TT^SET([[PASEK^GETWIDTH()-IKW]*CT@MAXT]);GR1^MOVE([0-IMOVE-1],0);GRFAKE^MOVE([0-IMOVE],0);IMGK^SETPOSITION([PASEK^GETPOSITIONX()+TT],IMGK^GETPOSITIONY());@IF("ILICZ",">","800","BFITMP26","");S^SET(ANONI^GETEVENTNAME());SS^SET(S);@IF("S'"SCARED"||S'"HIT"||SS>20","BFITMP27","BFITMP28");@IF("TX>145&&TX<147&&S'"RUN"","BFITMP29","");TX^SET(ANONI^GETENDX());@IF("TX>500&&BGOTTHEM'FALSE","BFITMP30","");@IF("ISLONEKR",">_","ISLONEKRTEMP","BFITMP31","");}
{ANNKEYBMOUSEHELP^PLAY("M_SP");BEHMUSICSET^RUN("DOROZKA");BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@INT("TX",0);@INT("TY",0);@INT("LEN",0);@STRING("OBJ","");@INT("CLA",0);@INT("CLB",0);@INT("CLC",0);ANFADE^SETFRAME("OPEN",0);ANONI^MOVE(-400,0);@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP76","BFITMP77");ISLONEKR^SET(GSAVE^GET("SLON_EKRANY"));ISLONETAP^SET(GSAVE^GET("SLON_ETAP"));ISTARTEKR^SET(ISLONEKR);IEKRANY^SET(AREKR^GET(ISLONETAP));ISLONEKRTEMP^SET(GSAVE^GET("SLON_EKRANY_TMP"));ISLONEKRTEMP^ADD(IEKRANY);@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP78","BFITMP79");CANVASOBSERVER^PASTE("IMG1",0,0);CANVASOBSERVER^PASTE("IMG2",800,0);CANVASOBSERVER^PASTE("IMG3",1600,0);IMG1A^HIDE();IMG1B^HIDE();IMG1C^HIDE();IMG1A^CLONE([IEKRANY*3]);IMG1B^CLONE([IEKRANY*3]);IMG1C^CLONE([IEKRANY*3]);@LOOP("{LEN^SET(RANDOM^GET(1));@IF("LEN","_","0","BFITMP80","");@IF("LEN","_","1","BFITMP81","");*OBJ^MOVE([_I_*800],0);*OBJ^SHOW();GR1^ADD(OBJ);}",0,[IEKRANY*3],1);KEYBOARD^SETAUTOREPEAT(FALSE);MOUSE^SETPOSITION(400,300);ANFAZA2^CLONE(1);ANFAZA2^SETPOSITION(800,400);ANFAZA2_1^HIDE();IONIX^SET(ANONI^GETPOSITIONX());DONIX^SET(IONIX);@IF("ILEVEL","_","1","BFITMP88","BFITMP89");ANFAZA1^CLONE(ARFRUG^GETSIZE());ANFAZA1C^CLONE(ARFRUG^GETSIZE());IMGFAKE^CLONE(ARFRUG^GETSIZE());BEKIPASND^SET(FALSE);@IF(GSAVE^GET("SLON_STATUS"),"_",""NIEODWIEDZONY"","BFITMP90","BFITMP91");}
{*SOBJ^STOP(FALSE);*SOBJ^SETPOSITION(800,80);ARAG^REMOVE(SOBJ]);GRAG^REMOVE(SOBJ);ANEKIPA^PLAY(["HIT"+IRIDE2]);}
{BCOLL^SET(TRUE);BFD^SET(FALSE);ANFAZA2^HIDE();ANFAZA2^STOP(FALSE);ANFAZA2^SETPOSITION(800,380);IMOVE^SET(2);DONISPEED^SET([DONISPEEDCONS+0.27]);ANSLONHEAD^PLAY("PANIC");ANSLONKORP^PLAY("KOL");ZWH_I314^PLAY();*SCATCH^HIDE();}
{ILEVEL^SET(1);IMIECZMAX^SET(20);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH_EASY_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH_EASY_POLA.ARR"]);I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);}
{ILEVEL^SET(1);IMIECZMAX^SET(20);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH_EASY_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH_EASY_POLA.ARR"]);I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);}
{ILEVEL^SET(1);IMIECZMAX^SET(20);ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);ARRMAPABKG^LOAD(["CH_NORMAL_BKG.ARR"]);ARRMAPAPOLA^LOAD(["CH_NORMAL_POLA.ARR"]);I1^SET(ANNNAKLADKI^GETNOFINEVENT("IDLE"));ANNNAKLADKI^CLONE([I1-1]);@LOOP("{S1^SET(["ANNNAKLADKI_"+_I_]);*S1^SETFRAME("IDLE",_I_);}",0,I1,1);GENEMIES^ADDCLONES("ANNNAKLADKI",0,[I1-1]);ANNNAKLADKI^SETPRIORITY(0);}
{S1^SET(["ENEMY"+IENEMYNO]);CLSCHASZCZEENEMYOBJ^NEW(S1,0,IX,IY);GENEMIES^ADD(S1);SPLAYERGOON^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+S1],"BEHGOONENEMY");IENEMYNO^INC();ARRMAPA^SET(IX,IY,S1);SPOLE^SET("");}
{ANNPOLA^CLONE(1);ICLONENO^INC();S1^SET(["ANNPOLA_"+ICLONENO]);ARRCLONES^ADD(1);I1^SET(RANDOM^GET(20));*S1^PLAY([SPOLE+I1]);*S1^SETPOSITION([IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);ARRMAPAOBJ^SET(IX,IY,S1);SPOLE^SET("");}
{ANNPOLA^CLONE(1);ICLONENO^INC();S1^SET(["ANNPOLA_"+ICLONENO]);ARRCLONES^ADD(1);*S1^PLAY(SPOLE);*S1^SETPOSITION([IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);ARRMAPAOBJ^SET(IX,IY,S1);ARRSERCAK^ADD(IX,IY);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));ANNPOLA^SETFRAME(SPOLE,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);SPOLE^SET("");}
{ANNPANMIECZ^SHOW();ANNLICZBY^SHOW();IMIECZ^SET(IMIECZMAX);S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));}
{@IF(ARRINVENTORY^FIND("KLUCZ_RED"),"_","-1","BFITMP43","");S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));BEHSEQPLAY^RUN("SEQPLAYER","TAKE_GAZETA",6);}
{@IF(ARRINVENTORY^FIND("KLUCZ_YELLOW"),"_","-1","BFITMP44","");S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));BEHSEQPLAY^RUN("SEQPLAYER","TAKE_TRAP",6);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP71","BFITMP72");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP73","BFITMP74");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP75","BFITMP76");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP77","BFITMP78");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP79","BFITMP80");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP81","BFITMP82");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP83","BFITMP84");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP85","BFITMP86");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{I1^SET(ARRMAPABKG^GETSIZE());ISIZEX^SET(ARRMAPABKG^GET([I1-4]));ISIZEY^SET(ARRMAPABKG^GET([I1-3]));IPLAYERX^SET(ARRMAPABKG^GET([I1-2]));IPLAYERY^SET(ARRMAPABKG^GET([I1-1]));IY^SET(0);@WHILE("IY","<","ISIZEY","{@LOOP("{IX^SET(_I_);S1^SET(ARRMAPABKG^GET([[IY*ISIZEX]+IX]));I1^SET(ANNPOLA^GETNOFINEVENT(S1));ANNPOLA^SETFRAME(S1,RANDOM^GET(I1));CANVASOBSERVER^PASTE("ANNPOLA",[IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,S1);}",0,ISIZEX,1);IY^INC();}");ARRSERCAK^REMOVEALL();ARRCLONES^REMOVEALL();ARRCLONES^ADD(1);IY^SET(0);IENEMYNO^SET(0);ICLONENO^SET(0);ICLONENOSEL^SET(0);@WHILE("IY","<","ISIZEY","{@LOOP("{IX^SET(_I_);SPOLE^SET(ARRMAPAPOLA^GET([[IY*ISIZEX]+IX]));@IF("SPOLE","!_","""","BFITMP128","");}",0,ISIZEX,1);IY^INC();}");ANNPOLA^HIDE();ANNPLAYER^SETPOSITION([IPLAYERX*IGRID],[IPLAYERY*IGRID]);SPLAYERCAMEFROM^SET(ARRMAPABKG^GET([[IPLAYERY*ISIZEX]+IPLAYERX]));I1^SET([IPLAYERX-ICENTERX]);I2^SET([IPLAYERY-ICENTERY]);I1^CLAMP(0,[ISIZEX-16]);I2^CLAMP(0,[ISIZEY-12]);IBKGSTARTX^SET([0-I1]);IBKGSTARTY^SET([0-I2]);CANVASOBSERVER^MOVEBKG([I1*IGRID],[I2*IGRID]);GALL^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL1^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL2^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL3^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL4^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL5^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL6^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GALL7^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);GENEMIES^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);ANNPLAYER^MOVE([0-[I1*IGRID]],[0-[I2*IGRID]]);@IF(ARRSERCAK^GETSIZE(),">","0","BFITMP129","");}
{@INT("ITMP1",ARRCLONES^FIND(-1));@STRING("STMP1","");@INT("ITMP2",0);@IF("ITMP1",">","-1","BFITMP137","BFITMP138");ARRMAPA^SET(IX,IY,"KRZAK");ARRMAPAOBJ^SET(IX,IY,STMP1);ARRCLONES^CHANGEAT(ITMP1,1);ITMP1^SET([[IX+IBKGSTARTX]*IGRID]);ITMP2^SET([[IY+IBKGSTARTY]*IGRID]);ITMP1^ADD(IBKGDELTAX);ITMP2^ADD(IBKGDELTAY);*STMP1^SETPOSITION(ITMP1,ITMP2);ITMP1^SET(RANDOM^GET(20));*STMP1^PLAY(["KRZAK_ROSNIE"+ITMP1]);}
{IMIECZ^DEC();S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));BEHSEQPLAY^RUN("SEQPLAYER","HANDEL",5);SFX_KONTS_HANDEL^PLAY();}
{IMIECZ^ADD(10);S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));BEHSEQPLAY^RUN("SEQPLAYER","TAKE_NIVEA",6);BWALIZKATAKEN^SET(TRUE);}
{IMIECZ^ADD(10);S1^SET(ARRMAPAOBJ^GET(IPLAYERGOONX,IPLAYERGOONY));*S1^HIDE();I1^SET(*S1^GETCLONEINDEX());ARRCLONES^CHANGEAT(I1,-1);SPLAYERGOON^SET(ARRMAPABKG^GET([[IPLAYERGOONY*ISIZEX]+IPLAYERGOONX]));BEHSEQPLAY^RUN("SEQPLAYER","TAKE_NIVEA",6);BWALIZKATAKEN^SET(TRUE);}
{ANNPOLA^CLONE(1);ICLONENO^INC();S1^SET(["ANNPOLA_"+ICLONENO]);ARRCLONES^ADD(1);I1^SET(ANNPOLA^GETNOFINEVENT(SPOLE));*S1^SETFRAME(SPOLE,RANDOM^GET(I1));*S1^SETPOSITION([IX*IGRID],[IY*IGRID]);ARRMAPA^SET(IX,IY,SPOLE);ARRMAPAOBJ^SET(IX,IY,S1);}
{ANNKEYBMOUSEHELP^PLAY("G");BEHMUSICSET^RUN("INTRO");BEHAMBIENTSNDPLAY^RUN("SFX_NAUTILUS_BGR");@INT("IX",0);@INT("TEMP",0);@INT("ITEMP",0);@INT("ISIZE",0);@INT("ITEMP2",0);@INT("ITEMP3",0);@INT("ITOR1",0);@INT("ITOR2",0);@INT("ITOR3",0);@INT("POS2",0);@INT("POSNAUT",0);@INT("IT",0);@INT("IPLAY",0);@INT("ZERORAND",0);@INT("IINCRWSK",0);@STRING("OBJ","");IKTORY^SET(4);ILEVELNAUT^SET(GSAVE^GET("TUNEL_LEVEL"));IZMIENNA^SET(22);@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP3","BFITMP4");@IF("IEASYHARDNAUT","_","0","BFITMP8","");@IF("IEASYHARDNAUT","_","1","BFITMP12","");ART0^ADD(0,1,3,4,5,6);ART1^ADD(0,1,4,5,6);ART3^ADD(0,3,4,5,6);ART4^ADD(0,1,3,4,5);ART5^ADD(1,0,3,4,5,6);ART6^ADD(0,1,3,5,6);ANNNAUTILUS^SETPOSITION(200,300);ANNNAUTILUS^PLAY("NAUT");ANNNAUTILUS^PAUSE();@LOOP("{ARRTOR1^ADD(0);ARRTOR2^ADD(0);ARPRZESZKG^ADD(0,0);ARPRZESZKD^ADD(0,0);}",0,[IZMIENNA+4],1);ARRTOR^ADD("00","00");IT^SET(1);@LOOP("{TEMP^SET(ARRTOR2^GET([_I_-1]));ARRTOR1^CHANGEAT(_I_,TEMP);ISIZE^SET(*["ART"+TEMP]^GETSIZE());ITEMP2^SET(RANDOM^GET(ISIZE));ITEMP3^SET(*["ART"+TEMP]^GET(ITEMP2));@IF("ILEVELNAUT'1&&IEASYHARDNAUT'0","BFITMP13","");@IF("ILEVELNAUT>'2&&IEASYHARDNAUT'0","BFITMP14","");@IF("ILEVELNAUT'1&&IEASYHARDNAUT'1","BFITMP15","");@IF("ILEVELNAUT'2&&IEASYHARDNAUT'1","BFITMP16","");@IF("ILEVELNAUT'3&&IEASYHARDNAUT'1","BFITMP17","");ARRTOR2^CHANGEAT(_I_,ITEMP3);ARRTOR^ADD([""+ARRTOR1^GET(_I_)+ARRTOR2^GET(_I_)]);IT^INC();}",1,[IZMIENNA-1],1);@IF("ILEVELNAUT","!_","3","BFITMP18","");@IF("ILEVELNAUT","_","3","BFITMP19","");IZMIENNA^ADD(4);ANNMASKA^CLONE([IZMIENNA-1]);ANNTOR^CLONE([IZMIENNA-1]);ANNPRZESZK^CLONE([IZMIENNA*2-5]);ANNPRZESZKM^CLONE([IZMIENNA*2-5]);ANNBABELKIB^CLONE(20);ANNBABELKIW^CLONE(20);@LOOP("{GRBABELKIB^ADD(["ANNBABELKIB_"+_I_]);}",0,19,1);@LOOP("{GRBABELKIW^ADD(["ANNBABELKIW_"+_I_]);}",0,19,1);@LOOP("{STEMP^SET(ARRTOR^GET(_I_));*["ANNTOR_"+_I_]^SETFRAME(STEMP,0);*["ANNTOR_"+_I_]^SETPOSITION([_I_*400],0);CANVASOBSERVER^PASTE(["ANNTOR_"+_I_],[_I_*400],0);*["ANNMASKA_"+_I_]^SETFRAME(STEMP,0);*["ANNMASKA_"+_I_]^SETPOSITION([_I_*400],0);*["ANNMASKA_"+_I_]^SETPRIORITY([10+_I_]);@IF("STEMP'"11"||STEMP'"33"||STEMP'"30"||STEMP'"63"||STEMP'"60"||STEMP'"10"||STEMP'"04"||STEMP'"01"||STEMP'"40"||STEMP'"50"||STEMP'"16"||STEMP'"11"||STEMP'"05"","BFITMP25","");@IF("STEMP","_",""00"","BFITMP28","");GRTUNEL^ADD(["ANNTOR_"+_I_]);GRTUNEL^ADD(["ANNMASKA_"+_I_]);}",0,IZMIENNA,1);@LOOP("{GRPIX^ADD(["PIX_"+_I_]);}",1,14,1);GRPIX^SETPRIORITY(200);GRPIX^SETPOSITION(200,292);@IF(GSAVE^GET("TUNEL_STATUS"),"_",""NIEODWIEDZONY"","BFITMP29","");ANNBLANK^PLAY("TIMER");}
{@INT("X",0);@INT("Y",0);@INT("ICI1",0);@INT("ICI2",0);@INT("ICI1D",0);@INT("ICI2D",0);@STRING("OBJ","");@STRING("OBJ2","");@BOOL("Z1",FALSE);@BOOL("Z2",FALSE);@BOOL("TEST1",FALSE);@BOOL("TEST2",FALSE);@INT("IDY2",0);@INT("POS2",0);@INT("POS3",0);@INT("POS4",0);@INT("POSY",0);@INT("ICL",0);@INT("IFPS",0);@STRING("SOBJ","");@INT("POSBW",0);@INT("IB",0);@INT("IZMIENNA2",0);@INT("INRILELOK1",0);@INT("INRILELOK2",0);@INT("ZXC",0);IWSKAZNIK^SET([INRILE*4]);IMGWSKAZNIK^SETPOSITION([IMGBELKA^GETPOSITIONX()+IWSKAZNIK+IWSKAZNIKLEVEL],IMGWSKAZNIK^GETPOSITIONY());OBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(135,300,FALSE,9,9,TRUE));OBJ2^SET(CANVASOBSERVER^GETGRAPHICSAT(265,300,FALSE,9,9,TRUE));ICI1^SET(*OBJ^GETCLONEINDEX());ICI2^SET(*OBJ2^GETCLONEINDEX());@LOOP("{X^SET(*["PIX_"+_I_]^GETPOSITIONX());Y^SET(*["PIX_"+_I_]^GETPOSITIONY());OBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(X,Y,FALSE,[10+ICI1],[10+ICI2],FALSE));@IF(OBJ^FIND("ANNMASK"),">","-1","BFITMP30","");@IF(OBJ^FIND("ANNPRZESZKM"),">","-1","BFITMP31","");}",1,14,1);@IF("IKEYSTOP","!_","TRUE","BFITMP48","");GRTUNEL^MOVE([0-IMOVEFAST],0);CANVASOBSERVER^MOVEBKG(IMOVEFAST,0);@LOOP("{*["ANNBABELKIW_"+_I_]^MOVE([0-IMOVEFAST],0);POSBW^SET(*["ANNBABELKIW_"+_I_]^GETPOSITIONX());@IF("POSBW","<","-10","BFITMP49","");}",0,19,1);GRBABELKIB^MOVE([0-IMOVEFAST],0);IOFFSET^ADD(IMOVEFAST);INRILELOK1^SET([[1+INRILE]*400]);INRILELOK2^SET([7+INRILELOK1]);@IF("IOFFSET>INRILELOK1&&IOFFSET<INRILELOK2","BFITMP53","");@IF("INRILE","_",[IZMIENNA-3],"BFITMP56","");@IF("INRILE","_",[IZMIENNA-2],"BFITMP60","");@IF("TEMPO_W","_","0","BFITMP61","");TEMPO_W^INC();@IF("IKEY","_","1","BFITMP63","");}
{*["ANNPRZESZKM_"+[_I_*2]]^SETFRAME(STEMP,ZERORAND);}
{*["ANNPRZESZKM_"+[_I_*2]]^SETFRAME(STEMP,ILEVELNAUT);}
{OBJ^SET(["ANNPRZESZK_"+[_I_*2]]);@IF("ILEVELNAUT","_","2","BFITMP20","BFITMP21");ARPRZESZKD^CHANGEAT(_I_,1);CANVASOBSERVER^PASTE(OBJ,[_I_*400],0);@IF("ILEVELNAUT","_","2","BFITMP22","BFITMP23");*["ANNPRZESZKM_"+[_I_*2]]^SETPOSITION([_I_*400],0);*["ANNPRZESZKM_"+[_I_*2]]^SETPRIORITY([10+_I_]);*["ANNPRZESZKM_"+[_I_*2]]^HIDE();}
{@IF("_I_",">_","1","BFITMP24","");GRTUNEL^ADD(["ANNPRZESZKM_"+[_I_*2]]);}
{@IF("_I_'0||_I_'1","BFITMP26","BFITMP27");GRTUNEL^ADD(["ANNPRZESZKM_"+[_I_*2+1]]);}
{SOBJ^SET(["ANNPRZESZK_"+[IKTORY*2]]);@IF(ARPRZESZKD^GET(IKTORY),"_","1","BFITMP50","");SOBJ^SET(["ANNPRZESZK_"+[IKTORY*2+1]]);@IF(ARPRZESZKG^GET(IKTORY),"_","1","BFITMP51","");}
{ZXC^SET([INRILE%4]);CANVASOBSERVER^REMOVE(["ANNTOR_"+INRILE]);CANVASOBSERVER^PASTE(["ANNTOR_"+IKTORY],[ZXC*400],0);CANVASOBSERVER^REMOVE(["ANNPRZESZK_"+INRILE]);CANVASOBSERVER^REMOVE(["ANNPRZESZK_"+[INRILE*2+1]]);@IF("IKTORY",">",IZMIENNA],"BFITMP52","");INRILE^INC();IKTORY^INC();}
{ANNKEYBMOUSEHELP^PLAY("LPGD_SP");BEHMUSICSET^RUN("INTRO");BEHAMBIENTSNDPLAY^RUN("SFX_NAUTILUS_BGR");KEYBOARD^SETAUTOREPEAT(FALSE);@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP23","BFITMP24");IPOSTEP^SET(1);ANNPOSTEP^SHOW();BCANPRESSKEY^SET(TRUE);@IF(GSAVE^GET("WEGORZE_STATUS"),"_",""NIEODWIEDZONY"","BFITMP25","BFITMP26");GRSEQ^ADD("SEQWSTEP");GRSEQ^ADD("SEQKALKOLIZJA");GRSEQ^ADD("SEQWEGZLAPANY");GRSEQ^ADD("SEQODRZUT");GRSEQ^ADD("SEQRESTART");ANNNAUT^SETFRAME("NAUT5",0);IFRAMENRN^SET(5);IMASKWIDTH^SET(ANNMASKWEGR^GETWIDTH());IXUP^SET(ANNKALUP^GETPOSITIONX(TRUE));IYUP^SET(ANNKALUP^GETPOSITIONY(TRUE));ANNKALUP^CLONE(3);ANNBABELKIB^CLONE(20);ANNBABELKIW^CLONE(20);ANNBABELKIWODRZUT^CLONE(20);@LOOP("{GRBABLEB^ADD(["ANNBABELKIB_"+_I_]);}",0,21,1);@LOOP("{GRBABLEW^ADD(["ANNBABELKIW_"+_I_]);}",0,21,1);@LOOP("{GRBABWODRZUT^ADD(["ANNBABELKIWODRZUT_"+_I_]);}",0,21,1);ICLONEWEG^SET(3);IFROMCLONEWEG^SET(ICLONEWEG);RANDOM^GETPLENTY("ARRRANDOMWEG",ICLONEWEG,0,ICLONEWEG,TRUE);IWEGPOSY^SET(60);ANNWEGL^CLONE(ICLONEWEG);@LOOP("{IWEGPOSY^ADD(120);*["ANNWEGL_"+_I_]^SETPOSITION(-65,IWEGPOSY);*["ANNWEGL_"+_I_]^PLAY("WEG");}",0,ICLONEWEG,1);IWEGPOSY^SET(100);ANNWEGR^CLONE(ICLONEWEG);@LOOP("{IWEGPOSY^ADD(120);*["ANNWEGR_"+_I_]^SETPOSITION(865,IWEGPOSY);*["ANNWEGR_"+_I_]^PLAY("WEG");}",0,ICLONEWEG,1);@IF("IVOLKAL","_","1","BFITMP27","");@IF("IVOLKAL","_","2","BFITMP28","");@IF("IVOLKAL","_","3","BFITMP29","");TWEGGEN^ENABLE();TKALGEN^ENABLE();ANNBLANK^PLAY("TIMER");}
{@IF("IFRAMENRN>'4&&IFRAMENRN<'6","BFITMP42","BFITMP43");@IF("IFRAMENRN","_","5","BFITMP44","");@IF("IFRAMENRN","_","4","BFITMP45","");@IF("IFRAMENRN","_","6","BFITMP46","");@IF("IFRAMENRN","<","4","BFITMP47","");@IF("IFRAMENRN",">","6","BFITMP48","");GRSTWORYL^MOVE([2+IMOVEX],IMOVEY);GRSTWORYR^MOVE([IMOVEX-2],IMOVEY);@LOOP("{IWEGPOSBACKX^SET(*["ANNWEGL_"+_I_]^GETPOSITIONX());IWEGPOSBACKY^SET(*["ANNWEGL_"+_I_]^GETPOSITIONY());ICLONEINDEXWEG^SET(*["ANNWEGL_"+_I_]^GETPRIORITY());@IF("IWEGPOSBACKX",">","865","BFITMP50","");@IF("IWEGPOSBACKY","<","-15","BFITMP52","");@IF("IWEGPOSBACKY",">","600","BFITMP54","");}",0,ICLONEWEG,1);@LOOP("{IKALPOSBACKX^SET(*["ANNKALL_"+_I_]^GETPOSITIONX());IKALPOSBACKY^SET(*["ANNKALL_"+_I_]^GETPOSITIONY());@IF("IKALPOSBACKX",">","800","BFITMP55","");@IF("IKALPOSBACKY","<","-200","BFITMP56","");IKALPOSBACKY^SET(*["ANNKALL_"+_I_]^GETPOSITIONY());@IF("IKALPOSBACKY",">","750","BFITMP57","");}",0,ICLONEKAL,1);@LOOP("{IWEGPOSBACKX^SET(*["ANNWEGR_"+_I_]^GETPOSITIONX());IWEGPOSBACKY^SET(*["ANNWEGR_"+_I_]^GETPOSITIONY());ICLONEINDEXWEG^SET(*["ANNWEGR_"+_I_]^GETPRIORITY());@IF("IWEGPOSBACKX","<","-60","BFITMP59","");@IF("IWEGPOSBACKY","<","-15","BFITMP61","");@IF("IWEGPOSBACKY",">","600","BFITMP63","");}",0,ICLONEWEG,1);@LOOP("{IKALPOSBACKX^SET(*["ANNKALR_"+_I_]^GETPOSITIONX());IKALPOSBACKY^SET(*["ANNKALR_"+_I_]^GETPOSITIONY());@IF("IKALPOSBACKX","<","-200","BFITMP64","");@IF("IKALPOSBACKY","<","-200","BFITMP65","");IKALPOSBACKY^SET(*["ANNKALR_"+_I_]^GETPOSITIONY());@IF("IKALPOSBACKY",">","750","BFITMP66","");}",0,ICLONEKAL,1);@IF("IFRAMENRN","_","3","BFITMP70","");@IF("IFRAMENRN","_","7","BFITMP74","");@IF("IFRAMENRN'3||IFRAMENRN'7","BFITMP85","");*["ANNKALUP_"+0]^MOVE(0,IMOVEKALUP1);*["ANNKALUP_"+1]^MOVE(0,IMOVEKALUP2);*["ANNKALUP_"+2]^MOVE(0,IMOVEKALUP3);IPOSYKALUP^SET(*["ANNKALUP_"+0]^GETPOSITIONY());@IF("IPOSYKALUP","<","-250","BFITMP86","");IPOSYKALUP^SET(*["ANNKALUP_"+1]^GETPOSITIONY());@IF("IPOSYKALUP","<","-250","BFITMP87","");IPOSYKALUP^SET(*["ANNKALUP_"+2]^GETPOSITIONY());@IF("IPOSYKALUP","<","-250","BFITMP88","");}}
{BCANPRESSKEY^SET(FALSE);ANNBLANK^STOP();@LOOP("{*["ANNWEGL_"+_I_]^STOP();}",0,ICLONEWEG,1);@LOOP("{*["ANNWEGR_"+_I_]^STOP();}",0,ICLONEWEG,1);@LOOP("{*["ANNKALL_"+_I_]^STOP();}",0,ICLONEKAL,1);@LOOP("{*["ANNKALR_"+_I_]^STOP();}",0,ICLONEKAL,1);@LOOP("{*["ANNKALUP_"+_I_]^STOP();}",0,3,1);TBABLEB^DISABLE();SNAUTPLYNIE^SET("NIE");@IF(ANNFADELOC^GETCFRAMEINEVENT("CLOSE"),"_","0","BFITMP97","");}
{ICLONEKAL^SET(2);IFROMCLONEKAL^SET(ICLONEKAL);RANDOM^GETPLENTY("ARRRANDOMKAL",ICLONEKAL,0,ICLONEKAL,TRUE);ANNKALL^CLONE(ICLONEKAL);IWEGPOSY^SET(100);@LOOP("{IWEGPOSY^ADD(100);*["ANNKALL_"+_I_]^SETPOSITION(-250,IWEGPOSY);*["ANNKALL_"+_I_]^PLAY("KAL");}",0,ICLONEKAL,1);IWEGPOSY^SET(150);ANNKALR^CLONE(ICLONEKAL);@LOOP("{IWEGPOSY^ADD(100);*["ANNKALR_"+_I_]^SETPOSITION(800,IWEGPOSY);*["ANNKALR_"+_I_]^PLAY("KAL");}",0,ICLONEKAL,1);}
{ICLONEKAL^SET(3);IFROMCLONEKAL^SET(ICLONEKAL);RANDOM^GETPLENTY("ARRRANDOMKAL",ICLONEKAL,0,ICLONEKAL,TRUE);ANNKALL^CLONE(ICLONEKAL);IWEGPOSY^SET(60);@LOOP("{IWEGPOSY^ADD(100);*["ANNKALL_"+_I_]^SETPOSITION(-250,IWEGPOSY);*["ANNKALL_"+_I_]^PLAY("KAL");}",0,ICLONEKAL,1);IWEGPOSY^SET(110);ANNKALR^CLONE(ICLONEKAL);@LOOP("{IWEGPOSY^ADD(100);*["ANNKALR_"+_I_]^SETPOSITION(800,IWEGPOSY);*["ANNKALR_"+_I_]^PLAY("KAL");}",0,ICLONEKAL,1);}
{ICLONEKAL^SET(4);IFROMCLONEKAL^SET(ICLONEKAL);RANDOM^GETPLENTY("ARRRANDOMKAL",ICLONEKAL,0,ICLONEKAL,TRUE);ANNKALL^CLONE(ICLONEKAL);IWEGPOSY^SET(30);@LOOP("{IWEGPOSY^ADD(90);*["ANNKALL_"+_I_]^SETPOSITION(-250,IWEGPOSY);*["ANNKALL_"+_I_]^PLAY("KAL");}",0,ICLONEKAL,1);IWEGPOSY^SET(80);ANNKALR^CLONE(ICLONEKAL);@LOOP("{IWEGPOSY^ADD(90);*["ANNKALR_"+_I_]^SETPOSITION(800,IWEGPOSY);*["ANNKALR_"+_I_]^PLAY("KAL");}",0,ICLONEKAL,1);}
{@LOOP("{IXWEG^SET(*["ANNWEGL_"+_I_]^GETPOSITIONX());IYWEG^SET(*["ANNWEGL_"+_I_]^GETPOSITIONY());IWEGWIDTH^SET(*["ANNWEGL_"+_I_]^GETWIDTH());IWEGHEIGHT^SET(*["ANNWEGL_"+_I_]^GETHEIGHT());IWEGHEIGHT^SET([IWEGHEIGHT@2]);SOBJWEG^SET(CANVASOBSERVER^GETGRAPHICSAT([IXWEG+IWEGWIDTH],[IYWEG+IWEGHEIGHT],FALSE,4,4,TRUE));IWEGPRIORITY^SET(*["ANNWEGL_"+_I_]^GETPRIORITY());@IF("IWEGPRIORITY","_","5","BFITMP69","");}",0,ICLONEWEG,1);}
{@LOOP("{IXWEG^SET(*["ANNWEGR_"+_I_]^GETPOSITIONX());IYWEG^SET(*["ANNWEGR_"+_I_]^GETPOSITIONY());IWEGHEIGHT^SET(*["ANNWEGR_"+_I_]^GETHEIGHT());IWEGHEIGHT^SET([IWEGHEIGHT@2]);SOBJWEG^SET(CANVASOBSERVER^GETGRAPHICSAT(IXWEG,[IYWEG+IWEGHEIGHT],FALSE,4,4,TRUE));IWEGPRIORITY^SET(*["ANNWEGR_"+_I_]^GETPRIORITY());@IF("IWEGPRIORITY","_","7","BFITMP73","");}",0,ICLONEWEG,1);}
{@LOOP("{IXKAL^SET(*["ANNKALL_"+_I_]^GETPOSITIONX());IYKAL^SET(*["ANNKALL_"+_I_]^GETPOSITIONY());IKALWIDTH^SET(*["ANNKALL_"+_I_]^GETWIDTH());IKALHEIGHT^SET(*["ANNKALL_"+_I_]^GETHEIGHT());IKALHEIGHT^SET([IKALHEIGHT@2]);SOBJKAL^SET(CANVASOBSERVER^GETGRAPHICSAT([IXKAL+IKALWIDTH],[IYKAL+IKALHEIGHT],FALSE,20,20,TRUE));IKALPRIORITY^SET(*["ANNKALL_"+_I_]^GETPRIORITY());@IF("IKALPRIORITY","_","30","BFITMP79","");}",0,ICLONEKAL,1);@LOOP("{IXKAL^SET(*["ANNKALR_"+_I_]^GETPOSITIONX());IYKAL^SET(*["ANNKALR_"+_I_]^GETPOSITIONY());IKALHEIGHT^SET(*["ANNKALR_"+_I_]^GETHEIGHT());IKALHEIGHT^SET([IKALHEIGHT@2]);SOBJKAL^SET(CANVASOBSERVER^GETGRAPHICSAT(IXKAL,[IYKAL+IKALHEIGHT],FALSE,25,25,TRUE));IKALPRIORITY^SET(*["ANNKALR_"+_I_]^GETPRIORITY());@IF("IKALPRIORITY","_","40","BFITMP84","");}",0,ICLONEKAL,1);}
{ITNTSGATHERED^DEC();ITNTRX^SET(IPLAYERPOSX);ITNTRY^SET(IPLAYERPOSY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);I1^SUB(IBKGSTARTX);I2^SUB(IBKGSTARTY);GOBJ^ADD("ANNTNTR");ANNTNTR^SETPOSITION(I1,I2);ANNTNTR^PLAY("IDLE");ANNRUNNERTNTEXP^PLAY("RUN");}
{ANNPOLA^HIDE();ANNPOLACOPY^HIDE();DBLEVEL^REMOVEALL();DBLEVEL^LOAD(["LEV"+IBDLEVEL+"_"+SGAMEDIFFICULTY+".FLD"]);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));ISIZEX^SET(S1^GET(0,3));ISIZEY^SET(S1^GET(4,3));DBLEVEL^NEXT();STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));IPLAYERPOSX^SET(S1^GET(0,3));IPLAYERPOSY^SET(S1^GET(4,3));DBLEVEL^NEXT();I1^SET(0);@WHILE("I1","<","ISIZEY","{STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));@LOOP("{I2^SET(S1^GET([_I_*4],3));ARRMAPA^SET(_I_,I1,I2);}",0,ISIZEX,1);DBLEVEL^NEXT();I1^INC();}");ICENTERX^SET(6);ICENTERY^SET(5);ISCROLLMAXX^SET([[ISIZEX*IGRID]-[14*IGRID]]);ISCROLLMAXY^SET([[ISIZEY*IGRID]-[10*IGRID]]);IBKGSTARTX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);IBKGSTARTY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);IBKGSTARTX^CLAMP(0,ISCROLLMAXX);IBKGSTARTY^CLAMP(0,ISCROLLMAXY);ISCREENPOSX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);ISCREENPOSY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);ISLOWNIKSELECTOR^SET(IBDLEVEL);I1^SET(0);I2^SET(0);@WHILE("I1","<","ISIZEY","{@LOOP("{I3^SET(ARRMAPA^GET(_I_,I1));@IF("I3","_","5","BFITMP56","");@IF("I3>IINFO_OD&&I3<IINFO_DO","BFITMP57","");}",0,ISIZEX,1);I1^INC();}");ANNPLAYER^SETFPS(40);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPLAYER^SETPOSITION(I1,I2);CANVASOBSERVER^MOVEBKG(IBKGSTARTX,IBKGSTARTY);GOBJ^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);ANNPLAYER^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);IMGMASKCUT^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);BEHINITBKG^RUN();}
{I1^SET(0);@WHILE("I1","<","ISIZEX","{@LOOP("{ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[_I_*IGRID]);IPOLESEL^SET(ARRMAPA^GET(I1,_I_));I2^SET(RANDOM^GET(ANNPOLA^GETNOFINEVENT(SPOLE)));ANNPOLA^SETFRAME(SPOLE,I2);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[_I_*IGRID]);}",0,ISIZEY,1);I1^INC();}");}
{ISCREENPOSX^ADD([ILASTDIRX*IGRID]);ISCREENPOSY^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET(IPLAYERPOSX,IPLAYERPOSY,IEMPTY);ISPADX^SET(IPLAYERPOSX);ISPADY^SET(IPLAYERPOSY);SSPADANAME^SET(NULL);SSPADANIESELECTOR^SET(SPLAYEREVENT);IPLAYERLASTPOSX^SET(IPLAYERPOSX);IPLAYERLASTPOSY^SET(IPLAYERPOSY);IPLAYERPOSX^ADD(ILASTDIRX);IPLAYERPOSY^ADD(ILASTDIRY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",I1,I2);CANVASOBSERVER^REFRESH();@IF("IPCHANY",">","-1","BFITMP67","");ARRMAPA^SET(IPLAYERPOSX,IPLAYERPOSY,IPLAYER);}
{I2^SET([IPLAYERPOSX+[2*ILASTDIRX]]);I3^SET([IPLAYERPOSY+[2*ILASTDIRY]]);I1^SET(ARRMAPA^GET(I2,I3));@IF("I1","_","IEMPTY","BFITMP95","BFITMP96");}
{I1^SET($1);I2^SET($2);I3^SET($3);ARRMAPA^SET(I1,I2,IEMPTY);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[I2*IGRID]);CANVASOBSERVER^REFRESH();ARREXPLOX^CHANGEAT(I3,-1);ISPADX^SET(I1);ISPADY^SET(I2);SSPADANIESELECTOR^SET("D");}
{ITNTSGATHERED^DEC();ITNTRX^SET(IPLAYERPOSX);ITNTRY^SET(IPLAYERPOSY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);I1^SUB(IBKGSTARTX);I2^SUB(IBKGSTARTY);GOBJ^ADD("ANNTNTR");ANNTNTR^SETPOSITION(I1,I2);ANNTNTR^PLAY("IDLE");ANNRUNNERTNTEXP^PLAY("RUN");BEHSEQPLAY^RUN("SEQGADA","POSTAWIENIE_BOMBY",5);SFX_WYKOP_LONT^PLAY();}
{ANNPOLACOPY^HIDE();I1^ADD([ILASTDIRX*IGRID]);I2^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET([IPLAYERPOSX+ILASTDIRX],[IPLAYERPOSY+ILASTDIRY],IPCHANY);CANVASOBSERVER^PASTE("ANNPOLACOPY",I1,I2);IPCHANY^SET(-1);ISPADX^SET([I1 @ IGRID]);ISPADY^SET([[I2 @ IGRID]+1]);ISPADREMX^SET(ISPADX);ISPADREMY^SET([ISPADY-1]);SSPADANIESELECTOR^SET("D");@IF("BSPADA","_","FALSE","BFITMP65","");@IF("BSPADA","_","FALSE","BFITMP66","");}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);@IF("ISPADAID","_","17","BFITMP86","BFITMP87");BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);SFX_WYKOP_GLAZ^PLAY();BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);SFX_WYKOP_GLAZ^PLAY();BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{I4^SET(ANNPLAYER^GETCENTERX());I5^SET(ANNPLAYER^GETCENTERY());I4^DIV(IGRID);I5^DIV(IGRID);I4^MUL(IGRID);I5^MUL(IGRID);I4^ADD([IGRID*ILASTDIRX]);I5^ADD([IGRID*ILASTDIRY]);IPCHANY^SET(ICOLLISIONSELECTOR);ARRMAPA^SET(I2,I3,IFALLINGSTONE);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I4+IBKGSTARTX],[I5+IBKGSTARTY]);CANVASOBSERVER^REFRESH();IPOLESEL^SET(ICOLLISIONSELECTOR);ANNPOLACOPY^SETFRAME(SPOLE,0);ANNPOLACOPY^SHOW();ANNPOLACOPY^SETPOSITION(I4,I5);}
{I4^SET(S1^LENGTH());ILITERKAFIRST^ADD(I3);@LOOP("{ARRMAPA^SET(_I_,I2,IWALL2);}",ILITERKAFIRST,I4,1);B1^SET(TRUE);I5^SET(ARRWYRAZY^GETSIZE());}
{SBUTTONSSELECTOR^REMOVEBEHAVIOUR("ONBRUTALCHANGED$UKONCZONY");}
{SGZAJEZDNIASCENECODELAST^SET(GSAVE^GET("SCENE_CODE"));@IF("SGZAJEZDNIASCENECODELAST","_",""CCRE"","BFITMP0","");SGSLOTNAME^SET([""+IGSLOTNO+"FREE"]);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);GSAVE^DBLOAD();IGMUSICVOLUME^SET(GSAVE^GGET(["SLOT"+IGSLOTNO+"_MUSIC_VOLUME"]));SFXMENUCLICK^PLAY();}
{ITNTSGATHERED^DEC();ITNTRX^SET(IPLAYERPOSX);ITNTRY^SET(IPLAYERPOSY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);I1^SUB(IBKGSTARTX);I2^SUB(IBKGSTARTY);GOBJ^ADD("ANNTNTR");ANNTNTR^SETPOSITION([I1+VARIPRZESUNIECIEX],I2);ANNTNTR^PLAY("IDLE");ANNRUNNERTNTEXP^PLAY("RUN");}
{DBLEVEL^REMOVEALL();DBLEVEL^LOAD(VARSPATHNAME);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));ISIZEX^SET(S1^GET(0,3));ISIZEY^SET(S1^GET(4,3));IBDKRAINA^SET(S1^GET(8,3));DBLEVEL^NEXT();ANNPOLA^LOAD(["POLA"+IBDKRAINA+".ANN"]);ANNPOLA^HIDE();ANNPOLACOPY^LOAD(["POLA"+IBDKRAINA+"_COPY.ANN"]);ANNPOLACOPY^HIDE();ANNEXPLOSION^LOAD(["EXPLO"+IBDKRAINA+".ANN"]);ANNEXPLOSION^HIDE();ANNEXPLOSION^SETFPS(40);ANNTNTR^LOAD(["TNTR"+IBDKRAINA+".ANN"]);ANNTNTR^HIDE();ANNSTONE17^LOAD(["STONE"+IBDKRAINA+"_TNTO.ANN"]);ANNSTONE17^SETFPS(40);ANNSTONE20^LOAD(["STONE"+IBDKRAINA+"_20.ANN"]);ANNSTONE20^SETFPS(40);ANNSTONE22^LOAD(["STONE"+IBDKRAINA+"_22.ANN"]);ANNSTONE22^SETFPS(40);ANNSTONE23^LOAD(["STONE"+IBDKRAINA+"_23.ANN"]);ANNSTONE23^SETFPS(40);ANNSTONE24^LOAD(["STONE"+IBDKRAINA+"_24.ANN"]);ANNSTONE24^SETFPS(40);ANNPANELBKG^SETFRAME("IDLE",IBDKRAINA);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));IPLAYERPOSX^SET(S1^GET(0,3));IPLAYERPOSY^SET(S1^GET(4,3));DBLEVEL^NEXT();I1^SET(0);@WHILE("I1","<","ISIZEY","{STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));@LOOP("{I2^SET(S1^GET([_I_*4],3));ARRMAPA^SET(_I_,I1,I2);}",0,ISIZEX,1);DBLEVEL^NEXT();I1^INC();}");ICENTERX^SET(6);ICENTERY^SET(5);ISCROLLMAXX^SET([[ISIZEX*IGRID]-[14*IGRID]]);ISCROLLMAXY^SET([[ISIZEY*IGRID]-[10*IGRID]]);IBKGSTARTX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);IBKGSTARTY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);IBKGSTARTX^CLAMP(0,ISCROLLMAXX);IBKGSTARTY^CLAMP(0,ISCROLLMAXY);ISCREENPOSX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);ISCREENPOSY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);ISLOWNIKSELECTOR^SET(IBDLEVEL);I1^SET(0);I2^SET(0);@WHILE("I1","<","ISIZEY","{@LOOP("{I3^SET(ARRMAPA^GET(_I_,I1));@IF("I3","_","5","BFITMP66","");@IF("I3>IINFO_OD&&I3<IINFO_DO","BFITMP67","");}",0,ISIZEX,1);I1^INC();}");ANNPLAYER^SETFPS(40);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPLAYER^SETPOSITION(I1,I2);GOBJ^ADD("ANNPASEK");ANNPASEK^MOVE(20,0);CANVASOBSERVER^MOVEBKG([IBKGSTARTX-VARIPRZESUNIECIEX],IBKGSTARTY);GOBJ^MOVE([0-IBKGSTARTX+VARIPRZESUNIECIEX],[0-IBKGSTARTY]);ANNPLAYER^MOVE([0-IBKGSTARTX+VARIPRZESUNIECIEX],[0-IBKGSTARTY]);}
{I1^SET(0);@WHILE("I1","<","ISIZEX","{@LOOP("{ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[_I_*IGRID]);IPOLESEL^SET(ARRMAPA^GET(I1,_I_));I2^SET(RANDOM^GET(ANNPOLA^GETNOFINEVENT(SPOLE)));ANNPOLA^SETFRAME(SPOLE,I2);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[_I_*IGRID]);}",0,ISIZEY,1);I1^INC();}");}
{ISCREENPOSX^ADD([ILASTDIRX*IGRID]);ISCREENPOSY^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET(IPLAYERPOSX,IPLAYERPOSY,IEMPTY);ISPADX^SET(IPLAYERPOSX);ISPADY^SET(IPLAYERPOSY);SSPADANAME^SET(NULL);SSPADANIESELECTOR^SET(SPLAYEREVENT);IPLAYERLASTPOSX^SET(IPLAYERPOSX);IPLAYERLASTPOSY^SET(IPLAYERPOSY);IPLAYERPOSX^ADD(ILASTDIRX);IPLAYERPOSY^ADD(ILASTDIRY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",I1,I2);CANVASOBSERVER^REFRESH();@IF("IPCHANY",">","-1","BFITMP81","");ARRMAPA^SET(IPLAYERPOSX,IPLAYERPOSY,IPLAYER);}
{I2^SET([IPLAYERPOSX+[2*ILASTDIRX]]);I3^SET([IPLAYERPOSY+[2*ILASTDIRY]]);I1^SET(ARRMAPA^GET(I2,I3));@IF("I1","_","IEMPTY","BFITMP107","BFITMP108");}
{I1^SET($1);I2^SET($2);I3^SET($3);ARRMAPA^SET(I1,I2,IEMPTY);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[I2*IGRID]);CANVASOBSERVER^REFRESH();ARREXPLOX^CHANGEAT(I3,-1);ISPADX^SET(I1);ISPADY^SET(I2);SSPADANIESELECTOR^SET("D");}
{ITNTSGATHERED^DEC();ITNTRX^SET(IPLAYERPOSX);ITNTRY^SET(IPLAYERPOSY);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);I1^SUB(IBKGSTARTX);I2^SUB(IBKGSTARTY);GOBJ^ADD("ANNTNTR");ANNTNTR^SETPOSITION([I1+VARIPRZESUNIECIEX],I2);ANNTNTR^PLAY("IDLE");ANNRUNNERTNTEXP^PLAY("RUN");BEHSEQPLAY^RUN("SEQGADKA","PUT_BOMB");}
{IBDLEVEL^SET(GSAVE^GET("EDITOR_SLOT_NO"));VARSPATHNAME^SET(["$COMMON\SAVE_BD\BD_CLEV"+IBDLEVEL+".FLD"]);}
{ANNPOLACOPY^HIDE();I1^ADD([ILASTDIRX*IGRID]);I2^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET([IPLAYERPOSX+ILASTDIRX],[IPLAYERPOSY+ILASTDIRY],IPCHANY);CANVASOBSERVER^PASTE("ANNPOLACOPY",I1,I2);IPCHANY^SET(-1);ISPADX^SET([I1 @ IGRID]);ISPADY^SET([[I2 @ IGRID]+1]);ISPADREMX^SET(ISPADX);ISPADREMY^SET([ISPADY-1]);SSPADANIESELECTOR^SET("D");@IF("BSPADA","_","FALSE","BFITMP79","");@IF("BSPADA","_","FALSE","BFITMP80","");}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);@IF("ISPADAID","_","17","BFITMP98","BFITMP99");BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);SFX_LABIRYNT_GAME_GLAZSPADA^PLAY();BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{*SSPADANAME^SETFRAME("D",0);CANVASOBSERVER^PASTE(SSPADANAME,[ISPADREMX*IGRID],[ISPADREMY*IGRID]);CANVASOBSERVER^REFRESH();GOBJ^REMOVE(SSPADANAME);CANVASOBSERVER^REMOVE(SSPADANAME);SFX_LABIRYNT_GAME_GLAZSPADA^PLAY();BEHWYRAZ^RUN(ISPADREMX,ISPADREMY);}
{I4^SET(ANNPLAYER^GETCENTERX());I5^SET(ANNPLAYER^GETCENTERY());I4^DIV(IGRID);I5^DIV(IGRID);I4^MUL(IGRID);I5^MUL(IGRID);I4^ADD([IGRID*ILASTDIRX]);I5^ADD([IGRID*ILASTDIRY]);IPCHANY^SET(ICOLLISIONSELECTOR);ARRMAPA^SET(I2,I3,IFALLINGSTONE);ANNPOLA^SETFRAME("EMPTY",0);CANVASOBSERVER^PASTE("ANNPOLA",[I4+IBKGSTARTX],[I5+IBKGSTARTY]);CANVASOBSERVER^REFRESH();IPOLESEL^SET(ICOLLISIONSELECTOR);ANNPOLACOPY^SETFRAME(SPOLE,0);ANNPOLACOPY^SHOW();ANNPOLACOPY^SETPOSITION([I4+VARIPRZESUNIECIEX],I5);SFX_LABIRYNT_GAME_PRZESUWA^PLAY();}
{I4^SET(S1^LENGTH());ILITERKAFIRST^ADD(I3);@LOOP("{ARRMAPA^SET(_I_,I2,IWALL2);}",ILITERKAFIRST,I4,1);B1^SET(TRUE);I5^SET(ARRWYRAZY^GETSIZE());}
{@IF("IBKGPOSY","<",[[ISIZEY*IGRID]-600],"BFITMP6","");@IF("IBKGPOSX",">","0","BFITMP7","");}
{@IF("IBKGPOSY",">","0","BFITMP12","");@IF("IBKGPOSX","<",[[ISIZEX*IGRID]-800-IGRID],"BFITMP13","");}
{@IF("IBKGPOSX","<",[[ISIZEX*IGRID]-800-IGRID],"BFITMP14","");}
{@IF("IBKGPOSY","<",[[ISIZEY*IGRID]-600],"BFITMP15","");@IF("IBKGPOSX","<",[[ISIZEX*IGRID]-800-IGRID],"BFITMP16","");}
{@IF("IBKGPOSY","<",[[ISIZEY*IGRID]-600],"BFITMP17","");}
{CANVASOBSERVER^SAVE(["$COMMON\SAVE_BD\BD_SCR"+VARISLOTNO+".IMG"],0.5,0.5);CURSOR^SHOW();}
{KEYBOARD^SETAUTOREPEAT(FALSE);ANNSCROLLMASK^CLONE(7);@LOOP("{*["ANNSCROLLMASK_"+_I_]^SETFRAME("IDLE",_I_);}",0,8,1);VARISLOTNO^SET(GSAVE^GET("EDITOR_SLOT_NO"));VARSPATHNAME^SET(["$COMMON\SAVE_BD\BD_CLEV"+VARISLOTNO+".FLD"]);BEHLOAD^RUN();I1^SET(ANNBUTTONS^GETNOFINEVENT(0));ANNBUTTONS^CLONE([I1-1]);@LOOP("{S1^SET(["ANNBUTTONS_"+_I_]);*S1^SETFRAME("IDLE",_I_);GBUTTONS^ADD(S1);}",0,I1,1);GBUTTONS^ADD("ANNMENU");ANNRUNNER^PLAY("RUN");}
{DBLEVEL^REMOVEALL();DBLEVEL^LOAD(VARSPATHNAME);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));ISIZEX^SET(S1^GET(0,3));ISIZEY^SET(S1^GET(4,3));VARIKRAINANO^SET(S1^GET(8,3));DBLEVEL^NEXT();ANNPOLA^LOAD(["POLA"+VARIKRAINANO+".ANN"]);ANNPOLA^HIDE();ANNCURSOR^LOAD(["CURSOR"+VARIKRAINANO+".ANN"]);ANNBUTTONS^LOAD(["BUTTONS"+VARIKRAINANO+".ANN"]);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));IPLAYERPOSX^SET(S1^GET(0,3));IPLAYERPOSY^SET(S1^GET(4,3));DBLEVEL^NEXT();I1^SET(0);@WHILE("I1","<","ISIZEY","{STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));@LOOP("{I2^SET(S1^GET([_I_*4],3));ARRMAPA^SET(_I_,I1,I2);}",0,ISIZEX,1);DBLEVEL^NEXT();I1^INC();}");I1^SET(0);@WHILE("I1","<","ISIZEX","{@LOOP("{ANNPOLA^SETFRAME("POLA",ARRMAPA^GET(I1,_I_));CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[_I_*IGRID]);}",0,ISIZEY,1);I1^INC();}");ANNPOLA^SETFRAME("POLA",121);CANVASOBSERVER^REFRESH();}
{DBLEVEL^SELECT([IPLAYERPOSY+2]);STLEVEL^SET("DBLEVEL_CURSOR");S3^SET(STLEVEL|S0);S3^REPLACEAT([IPLAYERPOSX*4],"121");STLEVEL|S0^SET(S3);DBLEVEL_CURSOR^SET("STLEVEL");CANVASOBSERVER^PASTE("ANNPOLA",[IPLAYERPOSX*IGRID],[IPLAYERPOSY*IGRID]);DBLEVEL^SELECT(1);STLEVEL^SET("DBLEVEL_CURSOR");S3^SET(STLEVEL|S0);S1^SET(I1);S2^SET(I2);IPLAYERPOSX^SET(I1);IPLAYERPOSY^SET(I2);@LOOP("{S1^SET(["0"+S1]);}",0,[3-S1^LENGTH()],1);@LOOP("{S2^SET(["0"+S2]);}",0,[3-S2^LENGTH()],1);S3^REPLACEAT(0,S1);S3^REPLACEAT(4,S2);STLEVEL|S0^SET(S3);DBLEVEL_CURSOR^SET("STLEVEL");}
{CANVASOBSERVER^PASTE("ANNCURSOR",I1,I2);I1^DIV(IGRID);I2^DIV(IGRID);DBLEVEL^SELECT([I2+2]);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL|S0);S1^REPLACEAT([I1*4],SFIELD);STLEVEL|S0^SET(S1);DBLEVEL_CURSOR^SET("STLEVEL");@IF("SFIELD","_",""015"","BFITMP3","");DBLEVEL^SAVE(VARSPATHNAME);CANVASOBSERVER^REFRESH();SFX_LABIRYNT_PROJEKT_ELEMENT_PUT^PLAY();}
{I1^SET([IMOUSEX%IGRID]);I2^SET([IMOUSEY%IGRID]);I1^SET([IMOUSEX-I1+30+IBKGPOSX]);I2^SET([IMOUSEY-I2+30+IBKGPOSY]);B1^SET(TRUE);@IF("[I1@IGRID]'IPLAYERPOSX&&[I2@IGRID]'IPLAYERPOSY","BFITMP0","");@IF("I1<'IGRID||I1>'[[ISIZEX-1]*IGRID]","BFITMP1","");@IF("I2<'IGRID||I2>'[[ISIZEY-1]*IGRID]","BFITMP2","");@IF("B1","_","TRUE","BFITMP4","");}
{GSIZE^ADD("BTNXM","BTNXP","BTNYM","BTNYP");GSIZE^ADD("BTNKRAINA0","BTNKRAINA1","BTNKRAINA2","BTNKRAINA3","BTNKRAINA4");ARRSL^LOAD("$COMMON\SAVE_BD\INFOSL.ARR");@IF(ARRSL^GETSIZE(),"_","0","BFITMP4","");ARRKR^LOAD("$COMMON\SAVE_BD\INFOKR.ARR");@IF(ARRKR^GETSIZE(),"_","0","BFITMP5","");B_SLOT^CLONE(19);@LOOP("{VARSTMP0^SET(["BTNSLOT"+_I_]);VARSTMP1^SET(["B_SLOT_"+_I_]);VARSTMP2^SET(ARRSL^GET(_I_));@IF("VARSTMP2","_",""F"","BFITMP6","");VARITMP0^SET([[_I_@5]*190]);VARITMP1^SET([[_I_%5]*50]);*VARSTMP1^SETPOSITION(VARITMP0,VARITMP1);*VARSTMP1^SETFRAME(VARSTMP2,0);*VARSTMP0^SETSTD(VARSTMP1);}",0,20,1);ANNLICZBY^CLONE(1);ANNLICZBY^SETFRAME("X",[VARISIZEX-10]);ANNLICZBY_1^SETFRAME("Y",[VARISIZEY-10]);VARIACTIVESLOT^SET(GSAVE^GET("EDITOR_SLOT_NO"));}
{DBLEVEL^REMOVEALL();DBLEVEL^LOAD(["$COMMON\SAVE_BD\BD_CLEV"+VARIACTIVESLOT+".FLD"]);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");VARSTMP0^SET(["0"+VARISIZEX]);VARSTMP1^SET(["0"+VARISIZEY]);VARSTMP2^SET(STLEVEL|S0);VARSTMP2^REPLACEAT(0,VARSTMP0);VARSTMP2^REPLACEAT(4,VARSTMP1);VARSTMP2^REPLACEAT(8,["00"+VARIKRAINANO]);STLEVEL|S0^SET(VARSTMP2);DBLEVEL_CURSOR^SET("STLEVEL");VARSTMP0^SET("001");DBLEVEL^SELECT(2);STLEVEL^SET("DBLEVEL_CURSOR");VARSTMP2^SET(STLEVEL|S0);@LOOP("{VARSTMP2^REPLACEAT([_I_*4],VARSTMP0);}",0,VARISIZEX,1);STLEVEL|S0^SET(VARSTMP2);DBLEVEL_CURSOR^SET("STLEVEL");DBLEVEL^SELECT([VARISIZEY+1]);STLEVEL^SET("DBLEVEL_CURSOR");VARSTMP2^SET(STLEVEL|S0);@LOOP("{VARSTMP2^REPLACEAT([_I_*4],VARSTMP0);}",0,VARISIZEX,1);STLEVEL|S0^SET(VARSTMP2);DBLEVEL_CURSOR^SET("STLEVEL");VARITMP0^SET([[VARISIZEX-1]*4]);DBLEVEL^SELECT(3);@LOOP("{STLEVEL^SET("DBLEVEL_CURSOR");VARSTMP2^SET(STLEVEL|S0);VARSTMP2^REPLACEAT(0,VARSTMP0);VARSTMP2^REPLACEAT(VARITMP0,VARSTMP0);STLEVEL|S0^SET(VARSTMP2);DBLEVEL_CURSOR^SET("STLEVEL");DBLEVEL^NEXT();}",0,[VARISIZEY-2],1);DBLEVEL^SAVE(["$COMMON\SAVE_BD\BD_CLEV"+VARIACTIVESLOT+".FLD"]);}
{ARRSL^CHANGEAT(VARIACTIVESLOT,"E");ARRSL^SAVE("$COMMON\SAVE_BD\INFOSL.ARR");VARSTMP0^SET("$COMMON\BD_PUSTY.IMG");VARSTMP1^SET(["$COMMON\SAVE_BD\BD_SCR"+VARIACTIVESLOT+".IMG"]);VARSTMP1^COPYFILE(VARSTMP0,VARSTMP1);VARSTMP1^SET(["B_SLOT_"+VARIACTIVESLOT]);*VARSTMP1^SETFRAME("E",0);GSIZE^ENABLE();ANNLICZBY^SHOW();ANNLICZBY_1^SHOW();ANNSYMBOLUKLADU^SHOW();ANNKRAINAACTIVE^SHOW();BTNPLAY^DISABLE();BTNDELETE^DISABLE();IMGSCR^LOAD("$COMMON\BD_PUSTY.IMG");}
{GSIZE^DISABLE();ANNLICZBY^HIDE();ANNLICZBY_1^HIDE();ANNSYMBOLUKLADU^HIDE();ANNKRAINAACTIVE^HIDE();BTNPLAY^ENABLE();BTNDELETE^ENABLE();IMGSCR^LOAD(["$COMMON\SAVE_BD\BD_SCR"+VARIACTIVESLOT+".IMG"]);IMGSCR^SETPOSITION(391,281);IMGSCR^SHOW();}
{VARSTMP0^SET("$COMMON\BD_LEVDEF.FLD");VARSTMP1^SET(["$COMMON\SAVE_BD\BD_CLEV"+VARIACTIVESLOT+".FLD"]);VARSTMP1^COPYFILE(VARSTMP0,VARSTMP1);BEHSETMAP^RUN();ARRSL^CHANGEAT(VARIACTIVESLOT,"F");ARRKR^CHANGEAT(VARIACTIVESLOT,VARIKRAINANO);ARRSL^SAVE("$COMMON\SAVE_BD\INFOSL.ARR");ARRKR^SAVE("$COMMON\SAVE_BD\INFOKR.ARR");GSAVE^SET("EDITOR_SLOT_NO",VARIACTIVESLOT);BEHGOTOSCENE^RUN("BDASHEDITOR");}
{ARRSL^ADD("E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E");ARRSL^SAVE("$COMMON\SAVE_BD\INFOSL.ARR");}
{ARRKR^ADD(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);ARRKR^SAVE("$COMMON\SAVE_BD\INFOKR.ARR");}
{SOBJACTION^REMOVEBEHAVIOUR("ONBRUTALCHANGED$__END__");}
{CANVASOBSERVER^SETBACKGROUND(["GFX\"+SOBJNAME]);}
{I1^SET(ARRANNS^FIND(""));SANN^SET(["ANN"+I1]);*SANN^LOAD(["GFX\"+SOBJNAME]);I2^SET(*SANN^GETNOE());@IF("SOBJARG","!_","""","BFITMP84","");@IF("B1'TRUE&&I2>1","BFITMP85","");ARRANNS^CHANGEAT(I1,SOBJNAME);ARRANNSCLONES^CHANGEAT(I1,I2);*SANN^ADDBEHAVIOUR("ONFINISHED","BEHFINISHEDANN");}
{I1^SET(ARRIMGS^FIND(""));SIMG^SET(["IMG"+I1]);*SIMG^LOAD(["GFX\"+SOBJNAME]);@IF("SOBJARG","!_","""","BFITMP87","");ARRIMGS^CHANGEAT(I1,SOBJNAME);}
{SBUTTONOFF^SET(ARRLASTLOCKOBJECT^GET([IOBJECTNR*2]));SBUTTONOFF^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX],[IPPOSY+IPDEY],FALSE,100,100,FALSE));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX+IPDEX],[IPPOSY+IPDEY+IPDEY],FALSE,100,100,FALSE));SFX_BDASH_GAME_PRZESUWANIE^STOP(FALSE);}
{KEYBOARD^SETAUTOREPEAT(FALSE);GPAUSE^ENABLE();@IF(GSAVE^GET("LABIRYNTY_ODWIEDZONY"),"_","FALSE","BFITMP330","");ILEVEL^SET(GSAVE^GET("LABIRYNTY_LEVEL"));CANVASOBSERVER^SETBACKGROUND(["LEVEL"+ILEVEL+"\BKG.IMG"]);ANPANEL^CLONE(3);ANPANEL^SETFRAME("PANEL",0);ANPANEL_1^SETFRAME("PANEL",1);ANPANEL_2^SETFRAME("PANEL",2);ANPANEL_3^SETFRAME("PANEL",3);ARWAVES^REMOVEALL();ARWAVES^ADD(0,0,0,0,0,0,0,0,0,0,0,0,0);CNVLOADER^LOAD(["LEVEL_"+ILEVEL+".CNV"]);BEHINITLEVEL^RUN();}
{I1^SET(ANNBUTTON^GETNOE());ANNBUTTON^CLONE(I1);ANNBUTTONL^CLONE(I1);ANNBUTTONM^CLONE(I1);ANNBUTTONG^CLONE(I1);CANVASOBSERVER^REMOVE("ANNBUTTON");CANVASOBSERVER^REMOVE("ANNBUTTONL");CANVASOBSERVER^REMOVE("ANNBUTTONM");CANVASOBSERVER^REMOVE("ANNBUTTONG");ARRBUTTONPRESSED^REMOVEALL();ARRBUTTONPRESSED^ADD(0);@LOOP("{*["ANNBUTTON_"+_I_]^SETFRAME(["B"+_I_],0);*["ANNBUTTONL_"+_I_]^SETFRAME(["B"+_I_],0);*["ANNBUTTONM_"+_I_]^SETFRAME(["B"+_I_],0);*["ANNBUTTONG_"+_I_]^SETFRAME(["B"+_I_],0);ARRBUTTONPRESSED^ADD(0);}",1,I1,1);}
{I1^SET(ANNOBJECT^GETNOE());ANNOBJECT^CLONE(I1);ANNOBJECTMASK^CLONE(I1);CANVASOBSERVER^REMOVE("ANNOBJECT");CANVASOBSERVER^REMOVE("ANNOBJECTMASK");ARRLASTLOCKOBJECT^ADD("NULL","NULL");@LOOP("{*["ANNOBJECT_"+_I_]^SETFRAME(["O"+_I_],0);*["ANNOBJECTMASK_"+_I_]^SETFRAME(["O"+_I_],0);ARRLASTLOCKOBJECT^ADD("NULL","NULL");}",1,I1,1);}
{I1^SET(ANNITEM^GETNOE());ANNITEM^CLONE(I1);ANNITEMMASK^CLONE(I1);CANVASOBSERVER^REMOVE("ANNITEM");CANVASOBSERVER^REMOVE("ANNITEMMASK");@LOOP("{*["ANNITEM_"+_I_]^SETFRAME(["P"+_I_],_I_);*["ANNITEMMASK_"+_I_]^SETFRAME(["P"+_I_],_I_);}",1,I1,1);I1^SET(ANNITEMONBTN^GETNOE());ANNITEMONBTN^CLONE(I1);CANVASOBSERVER^REMOVE("ANNITEMONBTN");@LOOP("{*["ANNITEMONBTN_"+_I_]^SETFRAME(["P"+_I_],0);}",1,I1,1);}
{I1^SET(ANNEARTH^GETNOE());ANNEARTH^CLONE(I1);ANNEARTHMASK^CLONE(I1);CANVASOBSERVER^REMOVE("ANNEARTH");CANVASOBSERVER^REMOVE("ANNEARTHMASK");@LOOP("{*["ANNEARTH_"+_I_]^SETFRAME(["Z"+_I_],0);*["ANNEARTHMASK_"+_I_]^SETFRAME(["Z"+_I_],0);}",1,I1,1);}
{I1^SET(ANNFOG^GETNOE());ANNFOG^CLONE(I1);ANNFOGMASK^CLONE(I1);CANVASOBSERVER^REMOVE("ANNFOG");CANVASOBSERVER^REMOVE("ANNFOGMASK");ARRFOGPRESSED^REMOVEALL();ARRFOGPRESSED^ADD(0);@LOOP("{*["ANNFOG_"+_I_]^SETFRAME(["F"+_I_],0);*["ANNFOGMASK_"+_I_]^SETFRAME(["F"+_I_],0);ARRFOGPRESSED^ADD(0);}",1,I1,1);}
{I1^SET($1);IPC^SET([I1-1]);ARRLASTBUTTONPLAYER^REMOVEALL();ARRLASTLOCKPLAYER^REMOVEALL();@LOOP("{ARRLASTBUTTONPLAYER^ADD("NULL");ARRLASTLOCKPLAYER^ADD("NULL","NULL");ARRLASTFOG^ADD("NULL","NULL");}",1,I1,1);}
{I1^SET($1);ARRLASTBUTTONENEMY1^REMOVEALL();ARRLASTBUTTONENEMY6^REMOVEALL();ARRLASTBUTTONENEMY2^REMOVEALL();ARRLASTBUTTONENEMY3^REMOVEALL();ARRLASTBUTTONENEMY4^REMOVEALL();ARRLASTBUTTONENEMY5^REMOVEALL();ARRLASTBUTTONENEMY7^REMOVEALL();ARRLASTLOCKENEMY1^REMOVEALL();ARRLASTLOCKENEMY6^REMOVEALL();ARRLASTLOCKENEMY2^REMOVEALL();ARRLASTLOCKENEMY3^REMOVEALL();ARRLASTLOCKENEMY4^REMOVEALL();ARRLASTLOCKENEMY5^REMOVEALL();ARRLASTLOCKENEMY7^REMOVEALL();@LOOP("{ARRLASTBUTTONENEMY1^ADD("NULL");ARRLASTBUTTONENEMY6^ADD("NULL");ARRLASTBUTTONENEMY2^ADD("NULL");ARRLASTBUTTONENEMY3^ADD("NULL");ARRLASTBUTTONENEMY4^ADD("NULL");ARRLASTBUTTONENEMY5^ADD("NULL");ARRLASTBUTTONENEMY7^ADD("NULL");ARRLASTLOCKENEMY1^ADD("NULL","NULL");ARRLASTLOCKENEMY6^ADD("NULL","NULL");ARRLASTLOCKENEMY2^ADD("NULL","NULL");ARRLASTLOCKENEMY3^ADD("NULL","NULL");ARRLASTLOCKENEMY4^ADD("NULL","NULL");ARRLASTLOCKENEMY5^ADD("NULL","NULL");ARRLASTLOCKENEMY7^ADD("NULL","NULL");}",1,I1,1);CANVASOBSERVER^REMOVE("ANNENEMY1");CANVASOBSERVER^REMOVE("ANNENEMY1MASK");CANVASOBSERVER^REMOVE("ANNENEMY6");CANVASOBSERVER^REMOVE("ANNENEMY6MASK");CANVASOBSERVER^REMOVE("ANNENEMY2");CANVASOBSERVER^REMOVE("ANNENEMY2MASK");CANVASOBSERVER^REMOVE("ANNENEMY3");CANVASOBSERVER^REMOVE("ANNENEMY3MASK");CANVASOBSERVER^REMOVE("ANNENEMY3MASKMOVE");CANVASOBSERVER^REMOVE("ANNENEMY4");CANVASOBSERVER^REMOVE("ANNENEMY4MASK");CANVASOBSERVER^REMOVE("ANNENEMY4MASKMOVE");CANVASOBSERVER^REMOVE("ANNENEMY5");CANVASOBSERVER^REMOVE("ANNENEMY5MASK");CANVASOBSERVER^REMOVE("ANNENEMY5MASKMOVE");CANVASOBSERVER^REMOVE("ANNENEMY7");CANVASOBSERVER^REMOVE("ANNENEMY7MASK");CANVASOBSERVER^REMOVE("ANNENEMY7MASKMOVE");}
{SPUSHED^SET(SOBJECTNAME);IOBJECTNR^SET(*SPLAYERCOLL^GETCLONEINDEX());*SPLAYERCOLL^MOVE(IPDEX,IPDEY);SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX+IPDEX],[IPPOSY+IPDEY+IPDEY],FALSE,110,110,FALSE));I1^SET([IOBJECTNR*2]);ARRLASTLOCKOBJECT^CHANGEAT(I1,ARRLASTLOCKOBJECT^GET([I1+1]));ARRLASTLOCKOBJECT^CHANGEAT([I1+1],SBUTTONON);ANNOBJECTRUNNER^PLAY("RUN");}
{INEWPLAYER^SET($1);S1^SET(*SNEWPLAYERNAME^GETEVENTNAME());@IF(S1^GET(0,8),"!_",""PRISONER"","BFITMP381","");7;}
{SBUTTONOFF^SET(ARRLASTLOCKPLAYER^GET([IPLAYERNR*2]));SBUTTONOFF^SET(ARRLASTBUTTONPLAYER^GET(IPLAYERNR));IPPOSX^SET(*SACTIVEPLAYERNAME^GETCENTERX());IPPOSY^SET(*SACTIVEPLAYERNAME^GETCENTERY());SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPPOSX,IPPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONPLAYER^CHANGEAT(IPLAYERNR,SBUTTONON);SFOGOFF^SET(ARRLASTFOG^GET([IPLAYERNR*2]));}
{SACTIVEPLAYERDIR^SET(S1);*SACTIVEPLAYERNAME^PLAY(S1);*SACTIVEPLAYERMNAME^SETFRAME(S1,0);*SACTIVEPLAYERMNAME^MOVE(IPDEX,IPDEY);BACPLAYERISMOVING^SET(TRUE);SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX],[IPPOSY+IPDEY],FALSE,110,110,FALSE));I1^SET([IPLAYERNR*2]);ARRLASTLOCKPLAYER^CHANGEAT(I1,ARRLASTLOCKPLAYER^GET([I1+1]));ARRLASTLOCKPLAYER^CHANGEAT([I1+1],SBUTTONON);SFOGON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX],[IPPOSY+IPDEY],FALSE,30,30,FALSE));ARRLASTFOG^CHANGEAT(I1,ARRLASTFOG^GET([I1+1]));ARRLASTFOG^CHANGEAT([I1+1],SFOGON);}
{SFX_BDASH_GAME_TELEPORTTUNEL^PLAY();*SPRESSER^SETPOSITION(I1,I2);*SACTIVEPLAYERMNAME^SETPOSITION(I1,I2);SFOGOFF^SET(ARRLASTFOG^GET([IACTIVEPLAYER*2]));I3^SET([IACTIVEPLAYER*2]);SFOGON^SET(CANVASOBSERVER^GETGRAPHICSAT([I1+20],[I2+20],FALSE,30,30,FALSE));ARRLASTFOG^CHANGEAT(I3,ARRLASTFOG^GET([I3+1]));ARRLASTFOG^CHANGEAT([I3+1],SFOGON);}
{SFX_BDASH_GAME_TELEPORTTUNEL^PLAY();*SPRESSER^SETPOSITION(I1,I2);*SACTIVEPLAYERMNAME^SETPOSITION(I1,I2);SFOGOFF^SET(ARRLASTFOG^GET([IACTIVEPLAYER*2]));I3^SET([IACTIVEPLAYER*2]);SFOGON^SET(CANVASOBSERVER^GETGRAPHICSAT([I1+20],[I2+20],FALSE,30,30,FALSE));ARRLASTFOG^CHANGEAT(I3,ARRLASTFOG^GET([I3+1]));ARRLASTFOG^CHANGEAT([I3+1],SFOGON);@BREAK();}
{SFX_BDASH_GAME_TELEPORTTUNEL^PLAY();*SPRESSER^SETPOSITION(I1,I2);*SACTIVEPLAYERMNAME^SETPOSITION(I1,I2);SFOGOFF^SET(ARRLASTFOG^GET([IACTIVEPLAYER*2]));I3^SET([IACTIVEPLAYER*2]);SFOGON^SET(CANVASOBSERVER^GETGRAPHICSAT([I1+20],[I2+20],FALSE,30,30,FALSE));ARRLASTFOG^CHANGEAT(I3,ARRLASTFOG^GET([I3+1]));ARRLASTFOG^CHANGEAT([I3+1],SFOGON);@BREAK();}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY1^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY1^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY1^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY1^CHANGEAT(I1,ARRLASTLOCKENEMY1^GET([I1+1]));ARRLASTLOCKENEMY1^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY6^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY6^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY6^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY6^CHANGEAT(I1,ARRLASTLOCKENEMY6^GET([I1+1]));ARRLASTLOCKENEMY6^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY2^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY2^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY2^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY2^CHANGEAT(I1,ARRLASTLOCKENEMY2^GET([I1+1]));ARRLASTLOCKENEMY2^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY3^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY3^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY3^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY3^CHANGEAT(I1,ARRLASTLOCKENEMY3^GET([I1+1]));ARRLASTLOCKENEMY3^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY4^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY4^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY4^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY4^CHANGEAT(I1,ARRLASTLOCKENEMY4^GET([I1+1]));ARRLASTLOCKENEMY4^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY5^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY5^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY5^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY5^CHANGEAT(I1,ARRLASTLOCKENEMY5^GET([I1+1]));ARRLASTLOCKENEMY5^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY7^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY7^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY7^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY7^CHANGEAT(I1,ARRLASTLOCKENEMY7^GET([I1+1]));ARRLASTLOCKENEMY7^CHANGEAT([I1+1],SBUTTONON);}
{ANNOBJECT^LOAD("LEVEL1\OBJECT_GRAPH.ANN");ANNOBJECT^SHOW();ANNOBJECTMASK^LOAD("LEVEL1\OBJECT_MASK.ANN");ANNOBJECTMASK^HIDE();ANNOBJECTRUNNER^LOAD("LEVEL1\OBJECT_RUNNER.ANN");ANNOBJECTRUNNER^SETFPS(40);BEHINITOBJECTS^RUN();}
{ANNITEM^LOAD("LEVEL1\ITEM_GRAPH.ANN");ANNITEM^SHOW();ANNITEMMASK^LOAD("LEVEL1\ITEM_MASK.ANN");ANNITEMMASK^HIDE();ANNITEMONBTN^LOAD("LEVEL1\ITEM_ONBTN.ANN");ANNITEMONBTN^SHOW();ANNINVENTORY^LOAD("LEVEL1\INVENTORY.ANN");ANNINVENTORY^SHOW();BEHINITITEMS^RUN();}
{ANNEARTH^LOAD("LEVEL1\EARTH_GRAPH.ANN");ANNEARTH^SHOW();ANNEARTHMASK^LOAD("LEVEL1\EARTH_MASK.ANN");ANNEARTHMASK^HIDE();BEHINITEARTH^RUN();}
{ANNFOG^LOAD("LEVEL1\FOG_GRAPH.ANN");ANNFOG^SHOW();ANNFOGMASK^LOAD("LEVEL1\FOG_MASK.ANN");ANNFOGMASK^HIDE();BEHINITFOG^RUN();}
{ANNENEMY1^LOAD("E_PAJAK.ANN");ANNENEMY1^SHOW();ANNENEMY1^CLONE(1);ANNENEMY1MASK^CLONE(1);ANNENEMY3^LOAD("E_WEGORZ.ANN");ANNENEMY3^SHOW();ANNENEMY3MASKMOVE^LOAD("LEVEL1\MASK_MOVE_E3.ANN");ANNENEMY3MASKMOVE^HIDE();ANNENEMY3^SETFPS(24);ANNENEMY3^CLONE(4);ANNENEMY3MASK^CLONE(4);ANNENEMY3MASKMOVE^CLONE(4);BEHINITENEMIES^RUN(5);ANNENEMY1_1^SETPOSITION(80,520);ANNENEMY1_1^PLAY("IDLE");ANNENEMY1MASK_1^SETPOSITION(80,520);ANNENEMY3_1^SETPOSITION(560,440);ANNENEMY3_1^PLAY("IDLE");ANNENEMY3MASK_1^SETPOSITION(560,440);ANNENEMY3MASKMOVE_1^SETFRAME("E1",0);ANNENEMY3_2^SETPOSITION(600,320);ANNENEMY3_2^PLAY("IDLE");ANNENEMY3MASK_2^SETPOSITION(600,320);ANNENEMY3MASKMOVE_2^SETFRAME("E2",0);ANNENEMY3_3^SETPOSITION(680,280);ANNENEMY3_3^PLAY("IDLE");ANNENEMY3MASK_3^SETPOSITION(680,280);ANNENEMY3MASKMOVE_3^SETFRAME("E3",0);ANNENEMY3_4^SETPOSITION(600,200);ANNENEMY3_4^PLAY("IDLE");ANNENEMY3MASK_4^SETPOSITION(600,200);ANNENEMY3MASKMOVE_4^SETFRAME("E4",0);}
{ANNOBJECT^LOAD("LEVEL2\OBJECT_GRAPH.ANN");ANNOBJECT^SHOW();ANNOBJECTMASK^LOAD("LEVEL2\OBJECT_MASK.ANN");ANNOBJECTMASK^HIDE();ANNOBJECTRUNNER^LOAD("LEVEL2\OBJECT_RUNNER.ANN");ANNOBJECTRUNNER^SETFPS(40);BEHINITOBJECTS^RUN();}
{ANNITEM^LOAD("LEVEL2\ITEM_GRAPH.ANN");ANNITEM^SHOW();ANNITEMMASK^LOAD("LEVEL2\ITEM_MASK.ANN");ANNITEMMASK^HIDE();ANNITEMONBTN^LOAD("LEVEL2\ITEM_ONBTN.ANN");ANNITEMONBTN^SHOW();ANNINVENTORY^LOAD("LEVEL2\INVENTORY.ANN");ANNINVENTORY^SHOW();BEHINITITEMS^RUN();}
{ANNEARTH^LOAD("LEVEL2\EARTH_GRAPH.ANN");ANNEARTH^SHOW();ANNEARTHMASK^LOAD("LEVEL2\EARTH_MASK.ANN");ANNEARTHMASK^HIDE();BEHINITEARTH^RUN();}
{ANNFOG^LOAD("LEVEL2\FOG_GRAPH.ANN");ANNFOG^SHOW();ANNFOGMASK^LOAD("LEVEL2\FOG_MASK.ANN");ANNFOGMASK^HIDE();BEHINITFOG^RUN();}
{ANNENEMY6^LOAD("E_DINO4.ANN");ANNENEMY6^SHOW();ANNENEMY6^CLONE(1);ANNENEMY6MASK^CLONE(1);ANNENEMY2^LOAD("E_FIRE.ANN");ANNENEMY2^SHOW();ANNENEMY2^CLONE(1);ANNENEMY2MASK^CLONE(1);ANNENEMY3^LOAD("E_SROKA.ANN");ANNENEMY3^SHOW();ANNENEMY3MASKMOVE^LOAD("LEVEL2\MASK_MOVE_E3.ANN");ANNENEMY3MASKMOVE^HIDE();ANNENEMY3^SETFPS(24);ANNENEMY3^CLONE(1);ANNENEMY3MASK^CLONE(1);ANNENEMY3MASKMOVE^CLONE(1);ANNENEMY4^LOAD("E_DINO1.ANN");ANNENEMY4^SHOW();ANNENEMY4MASKMOVE^LOAD("LEVEL2\MASK_MOVE_E4.ANN");ANNENEMY4MASKMOVE^HIDE();ANNENEMY4^SETFPS(24);ANNENEMY4^CLONE(1);ANNENEMY4MASK^CLONE(1);ANNENEMY4MASKMOVE^CLONE(1);ANNENEMY5^LOAD("E_DINO2.ANN");ANNENEMY5^SHOW();ANNENEMY5MASKMOVE^LOAD("LEVEL2\MASK_MOVE_E5.ANN");ANNENEMY5MASKMOVE^HIDE();ANNENEMY5^SETFPS(24);ANNENEMY5^CLONE(1);ANNENEMY5MASK^CLONE(1);ANNENEMY5MASKMOVE^CLONE(1);ANNENEMY7^LOAD("E_DINO3.ANN");ANNENEMY7^SHOW();ANNENEMY7MASKMOVE^LOAD("LEVEL2\MASK_MOVE_E7.ANN");ANNENEMY7MASKMOVE^HIDE();ANNENEMY7^SETFPS(24);ANNENEMY7^CLONE(1);ANNENEMY7MASK^CLONE(1);ANNENEMY7MASKMOVE^CLONE(1);BEHINITENEMIES^RUN(2);ANNENEMY6_1^SETPOSITION(720,80);ANNENEMY6_1^PLAY("IDLE");ANNENEMY6MASK_1^SETPOSITION(720,80);ANNENEMY2_1^SETPOSITION(40,400);ANNENEMY2_1^PLAY("IDLE");ANNENEMY2MASK_1^SETPOSITION(40,400);ANNENEMY3_1^SETPOSITION(200,280);ANNENEMY3_1^PLAY("IDLE");ANNENEMY3MASK_1^SETPOSITION(200,280);ANNENEMY3MASKMOVE_1^SETFRAME("E1",0);ANNENEMY4_1^SETPOSITION(640,80);ANNENEMY4_1^PLAY("IDLE");ANNENEMY4MASK_1^SETPOSITION(640,80);ANNENEMY4MASKMOVE_1^SETFRAME("E1",0);ANNENEMY5_1^SETPOSITION(680,280);ANNENEMY5_1^PLAY("IDLE");ANNENEMY5MASK_1^SETPOSITION(680,280);ANNENEMY5MASKMOVE_1^SETFRAME("E1",0);ANNENEMY7_1^SETPOSITION(400,280);ANNENEMY7_1^PLAY("IDLE");ANNENEMY7MASK_1^SETPOSITION(400,280);ANNENEMY7MASKMOVE_1^SETFRAME("E1",0);}
{ANNOBJECT^LOAD("LEVEL3\OBJECT_GRAPH.ANN");ANNOBJECT^SHOW();ANNOBJECTMASK^LOAD("LEVEL3\OBJECT_MASK.ANN");ANNOBJECTMASK^HIDE();ANNOBJECTRUNNER^LOAD("LEVEL3\OBJECT_RUNNER.ANN");ANNOBJECTRUNNER^SETFPS(40);BEHINITOBJECTS^RUN();}
{ANNITEM^LOAD("LEVEL3\ITEM_GRAPH.ANN");ANNITEM^SHOW();ANNITEMMASK^LOAD("LEVEL3\ITEM_MASK.ANN");ANNITEMMASK^HIDE();ANNITEMONBTN^LOAD("LEVEL3\ITEM_ONBTN.ANN");ANNITEMONBTN^SHOW();ANNINVENTORY^LOAD("LEVEL3\INVENTORY.ANN");ANNINVENTORY^SHOW();BEHINITITEMS^RUN();}
{ANNEARTH^LOAD("LEVEL3\EARTH_GRAPH.ANN");ANNEARTH^SHOW();ANNEARTHMASK^LOAD("LEVEL3\EARTH_MASK.ANN");ANNEARTHMASK^HIDE();BEHINITEARTH^RUN();}
{ANNFOG^LOAD("LEVEL3\FOG_GRAPH.ANN");ANNFOG^SHOW();ANNFOGMASK^LOAD("LEVEL3\FOG_MASK.ANN");ANNFOGMASK^HIDE();BEHINITFOG^RUN();}
{ANNENEMY1^LOAD("E_PAJAK.ANN");ANNENEMY1^SHOW();ANNENEMY1^CLONE(1);ANNENEMY1MASK^CLONE(1);ANNENEMY3^LOAD("E_ROZOKIT.ANN");ANNENEMY3^SHOW();ANNENEMY3MASKMOVE^LOAD("LEVEL3\MASK_MOVE_E3.ANN");ANNENEMY3MASKMOVE^HIDE();ANNENEMY3^SETFPS(24);ANNENEMY3^CLONE(5);ANNENEMY3MASK^CLONE(5);ANNENEMY3MASKMOVE^CLONE(5);ANNENEMY4^LOAD("E_KON.ANN");ANNENEMY4^SHOW();ANNENEMY4MASKMOVE^LOAD("LEVEL3\MASK_MOVE_E4.ANN");ANNENEMY4MASKMOVE^HIDE();ANNENEMY4^SETFPS(16);ANNENEMY4^CLONE(3);ANNENEMY4MASK^CLONE(3);ANNENEMY4MASKMOVE^CLONE(3);BEHINITENEMIES^RUN(6);ANNENEMY1_1^SETPOSITION(520,360);ANNENEMY1_1^PLAY("IDLE");ANNENEMY1MASK_1^SETPOSITION(520,360);ANNENEMY3_1^SETPOSITION(280,200);ANNENEMY3_1^PLAY("IDLE");ANNENEMY3MASK_1^SETPOSITION(280,200);ANNENEMY3MASKMOVE_1^SETFRAME("E1",0);ANNENEMY3_2^SETPOSITION(360,280);ANNENEMY3_2^PLAY("IDLE");ANNENEMY3MASK_2^SETPOSITION(360,280);ANNENEMY3MASKMOVE_2^SETFRAME("E2",0);ANNENEMY3_3^SETPOSITION(40,400);ANNENEMY3_3^PLAY("IDLE");ANNENEMY3MASK_3^SETPOSITION(40,400);ANNENEMY3MASKMOVE_3^SETFRAME("E3",0);ANNENEMY3_4^SETPOSITION(160,320);ANNENEMY3_4^PLAY("IDLE");ANNENEMY3MASK_4^SETPOSITION(160,320);ANNENEMY3MASKMOVE_4^SETFRAME("E4",0);ANNENEMY3_5^SETPOSITION(360,320);ANNENEMY3_5^PLAY("IDLE");ANNENEMY3MASK_5^SETPOSITION(360,320);ANNENEMY3MASKMOVE_5^SETFRAME("E5",0);ANNENEMY4_1^SETPOSITION(480,480);ANNENEMY4_1^PLAY("IDLE");ANNENEMY4MASK_1^SETPOSITION(480,480);ANNENEMY4MASKMOVE_1^SETFRAME("E1",0);ANNENEMY4_2^SETPOSITION(240,520);ANNENEMY4_2^PLAY("IDLE");ANNENEMY4MASK_2^SETPOSITION(240,520);ANNENEMY4MASKMOVE_2^SETFRAME("E2",0);ANNENEMY4_3^SETPOSITION(640,520);ANNENEMY4_3^PLAY("IDLE");ANNENEMY4MASK_3^SETPOSITION(640,520);ANNENEMY4MASKMOVE_3^SETFRAME("E3",0);}
{ANNOBJECT^LOAD("LEVEL4\OBJECT_GRAPH.ANN");ANNOBJECT^SHOW();ANNOBJECTMASK^LOAD("LEVEL4\OBJECT_MASK.ANN");ANNOBJECTMASK^HIDE();ANNOBJECTRUNNER^LOAD("LEVEL4\OBJECT_RUNNER.ANN");ANNOBJECTRUNNER^SETFPS(40);BEHINITOBJECTS^RUN();}
{ANNITEM^LOAD("LEVEL4\ITEM_GRAPH.ANN");ANNITEM^SHOW();ANNITEMMASK^LOAD("LEVEL4\ITEM_MASK.ANN");ANNITEMMASK^HIDE();ANNITEMONBTN^LOAD("LEVEL4\ITEM_ONBTN.ANN");ANNITEMONBTN^SHOW();ANNINVENTORY^LOAD("LEVEL4\INVENTORY.ANN");ANNINVENTORY^SHOW();BEHINITITEMS^RUN();}
{ANNEARTH^LOAD("LEVEL4\EARTH_GRAPH.ANN");ANNEARTH^SHOW();ANNEARTHMASK^LOAD("LEVEL4\EARTH_MASK.ANN");ANNEARTHMASK^HIDE();BEHINITEARTH^RUN();}
{ANNFOG^LOAD("LEVEL4\FOG_GRAPH.ANN");ANNFOG^SHOW();ANNFOGMASK^LOAD("LEVEL4\FOG_MASK.ANN");ANNFOGMASK^HIDE();BEHINITFOG^RUN();}
{ANNENEMY1^LOAD("E_ROZOKIT.ANN");ANNENEMY1^SHOW();ANNENEMY1^CLONE(2);ANNENEMY1MASK^CLONE(2);ANNENEMY3^LOAD("E_PATROL.ANN");ANNENEMY3^SHOW();ANNENEMY3MASKMOVE^LOAD("LEVEL4\MASK_MOVE_E3.ANN");ANNENEMY3MASKMOVE^HIDE();ANNENEMY3^SETFPS(32);ANNENEMY3^CLONE(4);ANNENEMY3MASK^CLONE(4);ANNENEMY3MASKMOVE^CLONE(4);ANNENEMY4^LOAD("E_ROZOKIT.ANN");ANNENEMY4^SHOW();ANNENEMY4MASKMOVE^LOAD("LEVEL4\MASK_MOVE_E4.ANN");ANNENEMY4MASKMOVE^HIDE();ANNENEMY4^SETFPS(24);ANNENEMY4^CLONE(4);ANNENEMY4MASK^CLONE(4);ANNENEMY4MASKMOVE^CLONE(4);BEHINITENEMIES^RUN(5);ANNENEMY1_1^SETPOSITION(600,240);ANNENEMY1_1^PLAY("IDLE");ANNENEMY1MASK_1^SETPOSITION(600,240);ANNENEMY1_2^SETPOSITION(520,320);ANNENEMY1_2^PLAY("IDLE");ANNENEMY1MASK_2^SETPOSITION(520,320);ANNENEMY3_1^SETPOSITION(160,80);ANNENEMY3_1^PLAY("IDLE");ANNENEMY3MASK_1^SETPOSITION(160,80);ANNENEMY3MASKMOVE_1^SETFRAME("E1",0);ANNENEMY3_2^SETPOSITION(600,80);ANNENEMY3_2^PLAY("IDLE");ANNENEMY3MASK_2^SETPOSITION(600,80);ANNENEMY3MASKMOVE_2^SETFRAME("E2",0);ANNENEMY3_3^SETPOSITION(120,120);ANNENEMY3_3^PLAY("IDLE");ANNENEMY3MASK_3^SETPOSITION(120,120);ANNENEMY3MASKMOVE_3^SETFRAME("E3",0);ANNENEMY3_4^SETPOSITION(480,160);ANNENEMY3_4^PLAY("IDLE");ANNENEMY3MASK_4^SETPOSITION(480,160);ANNENEMY3MASKMOVE_4^SETFRAME("E4",0);ANNENEMY4_1^SETPOSITION(160,280);ANNENEMY4_1^PLAY("IDLE");ANNENEMY4MASK_1^SETPOSITION(160,280);ANNENEMY4MASKMOVE_1^SETFRAME("E1",0);ANNENEMY4_2^SETPOSITION(280,400);ANNENEMY4_2^PLAY("IDLE");ANNENEMY4MASK_2^SETPOSITION(280,400);ANNENEMY4MASKMOVE_2^SETFRAME("E2",0);ANNENEMY4_3^SETPOSITION(440,400);ANNENEMY4_3^PLAY("IDLE");ANNENEMY4MASK_3^SETPOSITION(440,400);ANNENEMY4MASKMOVE_3^SETFRAME("E3",0);ANNENEMY4_4^SETPOSITION(200,440);ANNENEMY4_4^PLAY("IDLE");ANNENEMY4MASK_4^SETPOSITION(200,440);ANNENEMY4MASKMOVE_4^SETFRAME("E4",0);}
{ANNOBJECT^LOAD("LEVEL5\OBJECT_GRAPH.ANN");ANNOBJECT^SHOW();ANNOBJECTMASK^LOAD("LEVEL5\OBJECT_MASK.ANN");ANNOBJECTMASK^HIDE();ANNOBJECTRUNNER^LOAD("LEVEL5\OBJECT_RUNNER.ANN");ANNOBJECTRUNNER^SETFPS(40);BEHINITOBJECTS^RUN();}
{ANNITEM^LOAD("LEVEL5\ITEM_GRAPH.ANN");ANNITEM^SHOW();ANNITEMMASK^LOAD("LEVEL5\ITEM_MASK.ANN");ANNITEMMASK^HIDE();ANNITEMONBTN^LOAD("LEVEL5\ITEM_ONBTN.ANN");ANNITEMONBTN^SHOW();ANNINVENTORY^LOAD("LEVEL5\INVENTORY.ANN");ANNINVENTORY^SHOW();BEHINITITEMS^RUN();}
{ANNEARTH^LOAD("LEVEL5\EARTH_GRAPH.ANN");ANNEARTH^SHOW();ANNEARTHMASK^LOAD("LEVEL5\EARTH_MASK.ANN");ANNEARTHMASK^HIDE();BEHINITEARTH^RUN();}
{ANNFOG^LOAD("LEVEL5\FOG_GRAPH.ANN");ANNFOG^SHOW();ANNFOGMASK^LOAD("LEVEL5\FOG_MASK.ANN");ANNFOGMASK^HIDE();BEHINITFOG^RUN();}
{ANNENEMY3^LOAD("E_ROZOKIT.ANN");ANNENEMY3^SHOW();ANNENEMY3MASKMOVE^LOAD("LEVEL5\MASK_MOVE_E3.ANN");ANNENEMY3MASKMOVE^HIDE();ANNENEMY3^SETFPS(24);ANNENEMY3^CLONE(9);ANNENEMY3MASK^CLONE(9);ANNENEMY3MASKMOVE^CLONE(9);BEHINITENEMIES^RUN(10);ANNENEMY3_1^SETPOSITION(280,80);ANNENEMY3_1^PLAY("IDLE");ANNENEMY3MASK_1^SETPOSITION(280,80);ANNENEMY3MASKMOVE_1^SETFRAME("E1",0);ANNENEMY3_2^SETPOSITION(560,120);ANNENEMY3_2^PLAY("IDLE");ANNENEMY3MASK_2^SETPOSITION(560,120);ANNENEMY3MASKMOVE_2^SETFRAME("E2",0);ANNENEMY3_3^SETPOSITION(120,280);ANNENEMY3_3^PLAY("IDLE");ANNENEMY3MASK_3^SETPOSITION(120,280);ANNENEMY3MASKMOVE_3^SETFRAME("E3",0);ANNENEMY3_4^SETPOSITION(120,320);ANNENEMY3_4^PLAY("IDLE");ANNENEMY3MASK_4^SETPOSITION(120,320);ANNENEMY3MASKMOVE_4^SETFRAME("E4",0);ANNENEMY3_5^SETPOSITION(640,240);ANNENEMY3_5^PLAY("IDLE");ANNENEMY3MASK_5^SETPOSITION(640,240);ANNENEMY3MASKMOVE_5^SETFRAME("E5",0);ANNENEMY3_6^SETPOSITION(560,400);ANNENEMY3_6^PLAY("IDLE");ANNENEMY3MASK_6^SETPOSITION(560,400);ANNENEMY3MASKMOVE_6^SETFRAME("E6",0);ANNENEMY3_7^SETPOSITION(680,520);ANNENEMY3_7^PLAY("IDLE");ANNENEMY3MASK_7^SETPOSITION(680,520);ANNENEMY3MASKMOVE_7^SETFRAME("E7",0);ANNENEMY3_8^SETPOSITION(320,280);ANNENEMY3_8^PLAY("IDLE");ANNENEMY3MASK_8^SETPOSITION(320,280);ANNENEMY3MASKMOVE_8^SETFRAME("E8",0);ANNENEMY3_9^SETPOSITION(320,320);ANNENEMY3_9^PLAY("IDLE");ANNENEMY3MASK_9^SETPOSITION(320,320);ANNENEMY3MASKMOVE_9^SETFRAME("E9",0);}
{ANNOBJECT^LOAD("LEVEL6\OBJECT_GRAPH.ANN");ANNOBJECT^SHOW();ANNOBJECTMASK^LOAD("LEVEL6\OBJECT_MASK.ANN");ANNOBJECTMASK^HIDE();ANNOBJECTRUNNER^LOAD("LEVEL6\OBJECT_RUNNER.ANN");ANNOBJECTRUNNER^SETFPS(40);BEHINITOBJECTS^RUN();}
{ANNITEM^LOAD("LEVEL6\ITEM_GRAPH.ANN");ANNITEM^SHOW();ANNITEMMASK^LOAD("LEVEL6\ITEM_MASK.ANN");ANNITEMMASK^HIDE();ANNITEMONBTN^LOAD("LEVEL6\ITEM_ONBTN.ANN");ANNITEMONBTN^SHOW();ANNINVENTORY^LOAD("LEVEL6\INVENTORY.ANN");ANNINVENTORY^SHOW();BEHINITITEMS^RUN();}
{ANNEARTH^LOAD("LEVEL6\EARTH_GRAPH.ANN");ANNEARTH^SHOW();ANNEARTHMASK^LOAD("LEVEL6\EARTH_MASK.ANN");ANNEARTHMASK^HIDE();BEHINITEARTH^RUN();}
{ANNFOG^LOAD("LEVEL6\FOG_GRAPH.ANN");ANNFOG^SHOW();ANNFOGMASK^LOAD("LEVEL6\FOG_MASK.ANN");ANNFOGMASK^HIDE();BEHINITFOG^RUN();}
{ANNENEMY1^LOAD("E_PAJAK.ANN");ANNENEMY1^SHOW();ANNENEMY1^CLONE(6);ANNENEMY1MASK^CLONE(6);ANNENEMY3^LOAD("E_ROZOKIT.ANN");ANNENEMY3^SHOW();ANNENEMY3MASKMOVE^LOAD("LEVEL6\MASK_MOVE_E3.ANN");ANNENEMY3MASKMOVE^HIDE();ANNENEMY3^SETFPS(24);ANNENEMY3^CLONE(1);ANNENEMY3MASK^CLONE(1);ANNENEMY3MASKMOVE^CLONE(1);ANNENEMY4^LOAD("E_MUMIA.ANN");ANNENEMY4^SHOW();ANNENEMY4MASKMOVE^LOAD("LEVEL6\MASK_MOVE_E4.ANN");ANNENEMY4MASKMOVE^HIDE();ANNENEMY4^SETFPS(24);ANNENEMY4^CLONE(3);ANNENEMY4MASK^CLONE(3);ANNENEMY4MASKMOVE^CLONE(3);BEHINITENEMIES^RUN(7);ANNENEMY1_1^SETPOSITION(400,280);ANNENEMY1_1^PLAY("IDLE");ANNENEMY1MASK_1^SETPOSITION(400,280);ANNENEMY1_2^SETPOSITION(440,120);ANNENEMY1_2^PLAY("IDLE");ANNENEMY1MASK_2^SETPOSITION(440,120);ANNENEMY1_3^SETPOSITION(520,80);ANNENEMY1_3^PLAY("IDLE");ANNENEMY1MASK_3^SETPOSITION(520,80);ANNENEMY1_4^SETPOSITION(600,280);ANNENEMY1_4^PLAY("IDLE");ANNENEMY1MASK_4^SETPOSITION(600,280);ANNENEMY1_5^SETPOSITION(280,320);ANNENEMY1_5^PLAY("IDLE");ANNENEMY1MASK_5^SETPOSITION(280,320);ANNENEMY1_6^SETPOSITION(360,480);ANNENEMY1_6^PLAY("IDLE");ANNENEMY1MASK_6^SETPOSITION(360,480);ANNENEMY3_1^SETPOSITION(40,280);ANNENEMY3_1^PLAY("IDLE");ANNENEMY3MASK_1^SETPOSITION(40,280);ANNENEMY3MASKMOVE_1^SETFRAME("E1",0);ANNENEMY4_1^SETPOSITION(600,360);ANNENEMY4_1^PLAY("IDLE");ANNENEMY4MASK_1^SETPOSITION(600,360);ANNENEMY4MASKMOVE_1^SETFRAME("E1",0);ANNENEMY4_2^SETPOSITION(560,440);ANNENEMY4_2^PLAY("IDLE");ANNENEMY4MASK_2^SETPOSITION(560,440);ANNENEMY4MASKMOVE_2^SETFRAME("E2",0);ANNENEMY4_3^SETPOSITION(640,520);ANNENEMY4_3^PLAY("IDLE");ANNENEMY4MASK_3^SETPOSITION(640,520);ANNENEMY4MASKMOVE_3^SETFRAME("E3",0);}
{ANNOBJECT^LOAD("LEVEL7\OBJECT_GRAPH.ANN");ANNOBJECT^SHOW();ANNOBJECTMASK^LOAD("LEVEL7\OBJECT_MASK.ANN");ANNOBJECTMASK^HIDE();ANNOBJECTRUNNER^LOAD("LEVEL7\OBJECT_RUNNER.ANN");ANNOBJECTRUNNER^SETFPS(40);BEHINITOBJECTS^RUN();}
{ANNITEM^LOAD("LEVEL7\ITEM_GRAPH.ANN");ANNITEM^SHOW();ANNITEMMASK^LOAD("LEVEL7\ITEM_MASK.ANN");ANNITEMMASK^HIDE();ANNITEMONBTN^LOAD("LEVEL7\ITEM_ONBTN.ANN");ANNITEMONBTN^SHOW();ANNINVENTORY^LOAD("LEVEL7\INVENTORY.ANN");ANNINVENTORY^SHOW();BEHINITITEMS^RUN();}
{ANNEARTH^LOAD("LEVEL7\EARTH_GRAPH.ANN");ANNEARTH^SHOW();ANNEARTHMASK^LOAD("LEVEL7\EARTH_MASK.ANN");ANNEARTHMASK^HIDE();BEHINITEARTH^RUN();}
{ANNFOG^LOAD("LEVEL7\FOG_GRAPH.ANN");ANNFOG^SHOW();ANNFOGMASK^LOAD("LEVEL7\FOG_MASK.ANN");ANNFOGMASK^HIDE();BEHINITFOG^RUN();}
{ANNENEMY1^LOAD("E_FIRE.ANN");ANNENEMY1^SHOW();ANNENEMY1^CLONE(1);ANNENEMY1MASK^CLONE(1);ANNENEMY3^LOAD("E_FLASH.ANN");ANNENEMY3^SHOW();ANNENEMY3MASKMOVE^LOAD("LEVEL7\MASK_MOVE_E3.ANN");ANNENEMY3MASKMOVE^HIDE();ANNENEMY3^SETFPS(24);ANNENEMY3^CLONE(5);ANNENEMY3MASK^CLONE(5);ANNENEMY3MASKMOVE^CLONE(5);BEHINITENEMIES^RUN(6);ANNENEMY1_1^SETPOSITION(480,440);ANNENEMY1_1^PLAY("IDLE");ANNENEMY1MASK_1^SETPOSITION(480,440);ANNENEMY3_1^SETPOSITION(40,400);ANNENEMY3_1^PLAY("IDLE");ANNENEMY3MASK_1^SETPOSITION(40,400);ANNENEMY3MASKMOVE_1^SETFRAME("E1",0);ANNENEMY3_2^SETPOSITION(160,320);ANNENEMY3_2^PLAY("IDLE");ANNENEMY3MASK_2^SETPOSITION(160,320);ANNENEMY3MASKMOVE_2^SETFRAME("E2",0);ANNENEMY3_3^SETPOSITION(160,480);ANNENEMY3_3^PLAY("IDLE");ANNENEMY3MASK_3^SETPOSITION(160,480);ANNENEMY3MASKMOVE_3^SETFRAME("E3",0);ANNENEMY3_4^SETPOSITION(320,160);ANNENEMY3_4^PLAY("IDLE");ANNENEMY3MASK_4^SETPOSITION(320,160);ANNENEMY3MASKMOVE_4^SETFRAME("E4",0);ANNENEMY3_5^SETPOSITION(280,400);ANNENEMY3_5^PLAY("IDLE");ANNENEMY3MASK_5^SETPOSITION(280,400);ANNENEMY3MASKMOVE_5^SETFRAME("E5",0);}
{@IF("STBKG|IPOSY","<","VARITRASALEN","BFITMP0","");}
{*VARSTMPNAME^MOVE(0,VARIBKGMOVEY);*["ANNENEMYCIEN_"+VARITMPINDEX]^MOVE(0,VARIBKGMOVEY);ANNMOCBOSA^MOVE(0,VARIBKGMOVEY);ANNMASKBOS^MOVE(0,VARIBKGMOVEY);VARITMPY^SET(*VARSTMPNAME^GETCENTERY());@IF("VARITMPY",">","300","BFITMP40","BFITMP41");@IF("STVBALL|READY","_","TRUE","BFITMP44","");}
{VARITMPY^SET([ARRENEMYY^GET(VARITMPINDEX)-STBKG|IPOSY]);@IF("VARITMPY<250||VARITMPY>290","BFITMP45","");@IF("VARITMP1","<","0","BFITMP48","BFITMP49");@IF("STYBALL|READY","_","TRUE","BFITMP52","");}
{VARITMPX^SET(ARRENEMYX^GET(VARITMPINDEX));@IF("VARITMPX","!_",[STREX|IPOSX-30],"BFITMP53","BFITMP54");VARITMPY^SET([ARRENEMYY^GET(VARITMPINDEX)-STBKG|IPOSY]);@IF("VARITMPY","!_","270","BFITMP55","BFITMP56");@IF("VARITMP1","<","0","BFITMP59","BFITMP60");*VARSTMPNAME^MOVE(VARITMP0,[VARITMP1+VARIBKGMOVEY]);*["ANNENEMYCIEN_"+VARITMPINDEX]^MOVE(VARITMP0,[VARITMP1+VARIBKGMOVEY]);@IF("STZBALL|READY","_","TRUE","BFITMP63","");}
{VARBCHEATUSED^SET(TRUE);@IF("STREX|BACK","_","-170.0","BFITMP64","BFITMP65");SFXCHEATON^PLAY();VARSCHEATSEL^SET("");}
{VARBCHEATUSED^SET(TRUE);@IF("STKRET|DEFIANCE","_","0.7","BFITMP68","BFITMP69");SFXCHEATON^PLAY();VARSCHEATSEL^SET("");}
{VARBCHEATUSED^SET(TRUE);@IF("STREX|ACCELERATION","_","2.5","BFITMP72","BFITMP73");SFXCHEATON^PLAY();VARSCHEATSEL^SET("");}
{@IF("STREXBALL|ACTIVE","_","FALSE","BFITMP81","");}
{STREX|DIR^SET(0);STREX|DPOSX^SET(400.0);STREX|DPOSY^SET(300.0);STREX|FORCEX^SET(0.0);STREX|FORCEY^SET(0.0);STREX|ACCELERATION^SET(0.3);STREX|DEFIANCE^SET(0.965);STREX|BOUNCE^SET(-0.7);STREX|BACK^SET(-100.0);STREX|BACKWARD^SET(0.0);STREXBALL|READY^SET(TRUE);STREXBALL|ACTIVE^SET(FALSE);VARICHREXBALLPOWER^SET(1);STREX|IPOSX^SET(STREX|DPOSX);STREX|IPOSY^SET(STREX|DPOSY);ANNREX^SETPOSITION(STREX|IPOSX,STREX|IPOSY);ANNREXMASK^SETPOSITION(STREX|IPOSX,STREX|IPOSY);ANNREX^PLAY("IDLE");}
{STKRET|DPOSX^SET(400.0);STKRET|DPOSY^SET(300.0);STKRET|FORCEX^SET(0.0);STKRET|FORCEY^SET(0.0);STKRET|DEFIANCE^SET(0.92);STKRET|BOUNCE^SET(-0.7);STKRET|IPOSX^SET(STKRET|DPOSX);STKRET|IPOSY^SET(STKRET|DPOSY);ANNKRET^SETPOSITION(STKRET|IPOSX,STKRET|IPOSY);ANNKRET^PLAY("IDLE");}
{VARICHAINLEN^SET(11);ANNLINK^CLONE([VARICHAINLEN-1]);@LOOP("{VARITMP0^SET(_I_);VARSTMP0^SET(["ANNLINK_"+VARITMP0]);*VARSTMP0^SETPOSITION(400,300);*VARSTMP0^PLAY("IDLE");*VARSTMP0^SETFRAME("IDLE",[VARITMP0%3]);}",0,VARICHAINLEN,1);ARRCHAINFS^REMOVEALL();VARITMP0^SET([VARICHAINLEN@2]);VARITMP1^SET([VARITMP0*VARITMP0]);@LOOP("{VARDTMP0^SET([VARITMP0-_I_]);VARDTMP0^MUL(VARDTMP0);VARDTMP0^SET([VARITMP1-VARDTMP0]);VARDTMP0^DIV(VARITMP1);ARRCHAINFS^ADD(VARDTMP0);}",0,VARICHAINLEN,1);}
{VARILEVELNO^SET(GSAVE^GET("MIOTLY_LEVEL"));VARIKRAINANO^SET([[VARILEVELNO-1]@4]);@IF("VARIKRAINANO","!_","0","BFITMP83","");@IF("VARILEVELNO",">","0","BFITMP84","");GELEM^ADD("ANNKRISQ");GELEM^ADD("ANNWILQ");GELEM^ADD("ANNPALECBOZY");ARRENERGYADD^REMOVEALL();ARRENERGYADD^ADD(0);STVBALL|ACTIVE^SET(FALSE);STVBALL|READY^SET(TRUE);STVBALL|OWNER^SET("");STWBALL|ACTIVE^SET(FALSE);STWBALL|READY^SET(TRUE);STWBALL|OWNER^SET("");STYBALL|ACTIVE^SET(FALSE);STYBALL|READY^SET(TRUE);STYBALL|OWNER^SET("");STZBALL|ACTIVE^SET(FALSE);STZBALL|READY^SET(TRUE);STZBALL|OWNER^SET("");VARIELEMCLONENO^SET(0);VARIENEMYCLONENO^SET(0);VARIENDTYPE^SET(0);VARITMPNOF^SET(ANNUKLAD^GETNOFINEVENT("IDLE"));@LOOP("{VARSELEMEVNAME^SET(ANNUKLAD^GETFRAMENAME());VARSELEMEVNAME^SET(VARSELEMEVNAME^GET(0,2));VARITMPX^SET(ANNUKLAD^GETPOSITIONX());VARITMPY^SET(ANNUKLAD^GETPOSITIONY());VARITMPX^MUL(10);VARITMPY^MUL(10);@IF("VARITMPY","<","VARITRASALEN","BFITMP85","");VARSELEMINITSEL^SET(VARSELEMEVNAME^GET(0,1));ANNUKLAD^NEXTFRAME();}",0,VARITMPNOF,1);VARITRASALEN^SUB(600);}
{VARIREXANGLE^ADD(STREX|DIR);VARDDELTAX^SINUS(VARIREXANGLE);VARDDELTAY^COSINUS(VARIREXANGLE);VARDDELTAY^MUL(-1.0);STREX|FORCEX^ADD([VARDDELTAX*STREX|ACCELERATION]);STREX|FORCEY^ADD([VARDDELTAY*STREX|ACCELERATION]);STREX|FORCEX^MUL(STREX|DEFIANCE);STREX|FORCEY^MUL(STREX|DEFIANCE);@IF("STREX|FORCEX<0.0&&[STREX|DPOSX+STREX|FORCEX]<60.0","BFITMP89","");@IF("STREX|FORCEX>0.0&&[STREX|DPOSX+STREX|FORCEX]>740.0","BFITMP90","");VARSREXCOLLSEL^SET(CANVASOBSERVER^GETGRAPHICSAT([STREX|DPOSX+STREX|FORCEX],STREX|DPOSY,FALSE,69,70,FALSE));STREX|DPOSX^ADD(STREX|FORCEX);STBKG|DPOSY^ADD(STREX|FORCEY);VARIMOVEX^SET([STREX|DPOSX-STREX|IPOSX]);VARIBKGMOVEY^SET([STBKG|IPOSY-STBKG|DPOSY]);CANVASOBSERVER^MOVEBKG(0,[0-VARIBKGMOVEY]);GELEM^MOVE(0,VARIBKGMOVEY);GMASKR^MOVE(0,VARIBKGMOVEY);GMASKK^MOVE(0,VARIBKGMOVEY);ANNREX^MOVE(VARIMOVEX,0);ANNREXMASK^MOVE(VARIMOVEX,0);STREX|IPOSX^SET(STREX|DPOSX);STBKG|IPOSY^SET(STBKG|DPOSY);STREX|TAILX^SET([[STREX|BACK+STREX|BACKWARD]*VARDDELTAX]);STREX|TAILY^SET([[STREX|BACK+STREX|BACKWARD]*VARDDELTAY]);STREX|TAILX^ADD(STREX|DPOSX);STREX|TAILY^ADD([STREX|DPOSY+STREX|FORCEY]);STKRET|FORCEX^ADD([[STREX|TAILX-STKRET|DPOSX]@40.0]);STKRET|FORCEY^ADD([[STREX|TAILY-STKRET|DPOSY]@40.0]);STKRET|FORCEX^MUL(STKRET|DEFIANCE);STKRET|FORCEY^MUL(STKRET|DEFIANCE);@IF("STKRET|FORCEX<0.0&&[STKRET|DPOSX+STKRET|FORCEX]<60.0","BFITMP91","");@IF("STKRET|FORCEX>0.0&&[STKRET|DPOSX+STKRET|FORCEX]>740.0","BFITMP92","");VARSKRETCOLLSEL^SET(CANVASOBSERVER^GETGRAPHICSAT([STKRET|DPOSX+STKRET|FORCEX],[STKRET|DPOSY+STKRET|FORCEY],FALSE,65,65,FALSE));STKRET|DPOSX^ADD(STKRET|FORCEX);STKRET|DPOSY^ADD([STKRET|FORCEY-STREX|FORCEY]);VARIMOVEX^SET([STKRET|DPOSX-STKRET|IPOSX]);VARIMOVEY^SET([STKRET|DPOSY-STKRET|IPOSY]);ANNKRET^MOVE(VARIMOVEX,VARIMOVEY);STKRET|IPOSX^SET(STKRET|DPOSX);STKRET|IPOSY^SET(STKRET|DPOSY);BEHKRETANGLE^RUN();BEHCHAINMOVE^RUN();VARIEKRANNO^SET([[STBKG|IPOSY-300]@600]);VARIEKRANACTIVATE^SET([STBKG|IPOSY@600]);@IF("STREXBALL|ACTIVE","_","TRUE","BFITMP93","");BEHENEMIES^RUN();BEHWIEZE^RUN();@IF("STVBALL|ACTIVE","_","TRUE","BFITMP94","");@IF("STWBALL|ACTIVE","_","TRUE","BFITMP95","");@IF("STYBALL|ACTIVE","_","TRUE","BFITMP96","");@IF("STZBALL|ACTIVE","_","TRUE","BFITMP97","");VARIENDTYPESEL^SET(VARIENDTYPE);}
{VARSTMPWOWNER^SET("");VARITMPWMINDIST^SET(100000000);GWIEZE^RESETMARKER();@LOOP("{VARSTMPNAME^SET(GWIEZE^NEXT());VARITMPINDEX^SET(*VARSTMPNAME^GETCLONEINDEX());@IF("STWBALL|READY","_","TRUE","BFITMP119","");}",0,GWIEZE^GETSIZE(),1);@IF("VARSTMPWOWNER","!_","""","BFITMP120","");}
{VARDTMP1^SET([STREX|DPOSX-STKRET|DPOSX]);VARDTMP2^SET([STREX|DPOSY-STKRET|DPOSY]);VARDODLEGLOSC^SET([[VARDTMP1*VARDTMP1]+[VARDTMP2*VARDTMP2]]);VARDODLEGLOSC^SQRT(VARDODLEGLOSC);VARDTMP1^SET([VARDTMP1@VARDTMP2]);VARDTMP1^ARCTAN(VARDTMP1);@IF("VARDTMP2",">","0","BFITMP121","BFITMP122");VARITMP0^DIV(10);VARITMP0^MUL(10);@IF("VARITMP0",">","359","BFITMP123","");VARIKRETANGLE^SET(VARITMP0);@IF("VARDODLEGLOSC",">",[100.0-STREX|BACK-STREX|BACKWARD],"BFITMP124","");}
{VARDTMP0^SET([[STKRET|DPOSX-STREX|TAILX]*[STKRET|DPOSX-STREX|TAILX]]);VARDTMP0^ADD([[STKRET|DPOSY-STREX|TAILY]*[STKRET|DPOSY-STREX|TAILY]]);VARDTMP0^SQRT(VARSTMP0);VARDTMP0^DIV(300.0);VARDTMP1^SET([STKRET|DPOSX-STREX|DPOSX]);VARDTMP2^SET([STKRET|DPOSY-STREX|DPOSY]);VARDTMP1^DIV(VARICHAINLEN);VARDTMP2^DIV(VARICHAINLEN);VARDTMP3^SET(STREX|DPOSX);VARDTMP4^SET(STREX|DPOSY);VARITMP1^SET([STKRET|DPOSX-STREX|DPOSX]);VARITMP2^SET([STKRET|DPOSY-STREX|DPOSY]);VARITMP1^DIV(2);VARITMP2^DIV(2);VARITMP1^ADD(STREX|DPOSX);VARITMP2^ADD(STREX|DPOSY);VARITMP3^SET([STKRET|DPOSX-STREX|TAILX]);VARITMP4^SET([STKRET|DPOSY-STREX|TAILY]);VARITMP3^DIV(2);VARITMP4^DIV(2);VARITMP3^ADD(STREX|TAILX);VARITMP4^ADD(STREX|TAILY);VARITMP1^SET([VARITMP3-VARITMP1]);VARITMP2^SET([VARITMP4-VARITMP2]);@LOOP("{VARITMP0^SET(_I_);VARSTMP0^SET(["ANNLINK_"+VARITMP0]);VARDTMP3^ADD(VARDTMP1);VARDTMP4^ADD(VARDTMP2);VARDTMP7^SET(ARRCHAINFS^GET(VARITMP0));VARDTMP7^MUL(VARDTMP0);VARDTMP5^SET(VARITMP1);VARDTMP6^SET(VARITMP2);VARDTMP5^MUL(VARDTMP7);VARDTMP6^MUL(VARDTMP7);VARDTMP5^ADD(VARDTMP3);VARDTMP6^ADD(VARDTMP4);*VARSTMP0^SETPOSITION(VARDTMP5,VARDTMP6);}",0,VARICHAINLEN,1);}
{STREXBALL|PX^ADD(STREXBALL|VX);STREXBALL|PY^ADD([STREXBALL|VY+VARIBKGMOVEY]);ANNREXBALL^MOVE([STREXBALL|PX-STREXBALL|IPX],[STREXBALL|PY-STREXBALL|IPY]);STREXBALL|IPX^SET(STREXBALL|PX);STREXBALL|IPY^SET(STREXBALL|PY);STREXBALL|DURATION^DEC();@IF("STREXBALL|DURATION","_","0","BFITMP129","BFITMP130");}
{STVBALL|PX^ADD(STVBALL|VX);STVBALL|PY^ADD([STVBALL|VY+VARIBKGMOVEY]);ANNVBALL^MOVE([STVBALL|PX-STVBALL|IPX],[STVBALL|PY-STVBALL|IPY]);STVBALL|IPX^SET(STVBALL|PX);STVBALL|IPY^SET(STVBALL|PY);STVBALL|DURATION^DEC();@IF("STVBALL|DURATION","_","0","BFITMP153","BFITMP154");}
{STWBALL|VX^SET([STREX|DPOSX-STWBALL|PX]);STWBALL|VY^SET([STREX|DPOSY-STWBALL|PY]);VARDTMP0^SET([[STWBALL|VX*STWBALL|VX]+[STWBALL|VY*STWBALL|VY]]);VARDTMP0^SQRT(VARDTMP0);VARDTMP0^DIV(5.5);STWBALL|VX^DIV(VARDTMP0);STWBALL|VY^DIV(VARDTMP0);STWBALL|PX^ADD(STWBALL|VX);STWBALL|PY^ADD([STWBALL|VY+VARIBKGMOVEY]);ANNWBALL^MOVE([STWBALL|PX-STWBALL|IPX],[STWBALL|PY-STWBALL|IPY]);STWBALL|IPX^SET(STWBALL|PX);STWBALL|IPY^SET(STWBALL|PY);STWBALL|DURATION^DEC();@IF("STWBALL|DURATION","_","0","BFITMP158","BFITMP159");}
{STYBALL|PX^ADD(STYBALL|VX);STYBALL|PY^ADD([STYBALL|VY+VARIBKGMOVEY]);ANNYBALL^MOVE([STYBALL|PX-STYBALL|IPX],[STYBALL|PY-STYBALL|IPY]);STYBALL|IPX^SET(STYBALL|PX);STYBALL|IPY^SET(STYBALL|PY);STYBALL|DURATION^DEC();@IF("STYBALL|DURATION","_","0","BFITMP163","BFITMP164");}
{STZBALL|PX^ADD(STZBALL|VX);STZBALL|PY^ADD([STZBALL|VY+VARIBKGMOVEY]);ANNZBALL^MOVE([STZBALL|PX-STZBALL|IPX],[STZBALL|PY-STZBALL|IPY]);STZBALL|IPX^SET(STZBALL|PX);STZBALL|IPY^SET(STZBALL|PY);STZBALL|DURATION^DEC();@IF("STZBALL|DURATION","_","0","BFITMP168","BFITMP169");}
{STREX|BACK^SET(-100.0);}
{STREX|BACK^SET(-170.0);}
{STREXBALL|PX^SET(STREX|IPOSX);STREXBALL|PY^SET(STREX|IPOSY);STREXBALL|IPX^SET(STREXBALL|PX);STREXBALL|IPY^SET(STREXBALL|PY);STREXBALL|VX^SET([VARDDELTAX*40.0]);STREXBALL|VY^SET([VARDDELTAY*40.0]);STREXBALL|DURATION^SET(12);STREXBALL|ACTIVE^SET(TRUE);ANNREXBALL^SETPOSITION(STREXBALL|PX,STREXBALL|PY);ANNREXBALL^PLAY("LECI");SFX_CZARO_GAME_STRZAL_BOHATERA^PLAY();}
{STVBALL|OWNER^SET(VARSTMPVOWNER);STVBALL|IPX^SET(STVBALL|PX);STVBALL|IPY^SET(STVBALL|PY);STVBALL|VX^SET([STREX|DPOSX-STVBALL|PX]);STVBALL|VY^SET([STREX|DPOSY-STVBALL|PY]);VARDTMP0^SET([[STVBALL|VX*STVBALL|VX]+[STVBALL|VY*STVBALL|VY]]);VARDTMP0^SQRT(VARDTMP0);VARDTMP0^DIV(15);STVBALL|VX^DIV(VARDTMP0);STVBALL|VY^DIV(VARDTMP0);STVBALL|DURATION^SET(30);STVBALL|ACTIVE^SET(TRUE);STVBALL|READY^SET(FALSE);ANNVBALL^SETPOSITION(STVBALL|PX,STVBALL|PY);ANNVBALL^PLAY("LECI");ANNWILQ^SETPOSITION(STVBALL|PX,STVBALL|PY);ANNWILQ^PLAY("IDLE");SFX_CZARO_GAME_STRZAL_WROGAPTAK^PLAY();}
{STYBALL|OWNER^SET(VARSTMPYOWNER);STYBALL|IPX^SET(STYBALL|PX);STYBALL|IPY^SET(STYBALL|PY);STYBALL|VX^SET([STREX|DPOSX-STYBALL|PX]);STYBALL|VY^SET([STREX|DPOSY-STYBALL|PY]);VARDTMP0^SET([50-RANDOM^GET(100)]);VARDTMP1^SET([50-RANDOM^GET(100)]);STYBALL|VX^ADD(VARDTMP0);STYBALL|VY^ADD(VARDTMP1);VARDTMP0^SET([[STYBALL|VX*STYBALL|VX]+[STYBALL|VY*STYBALL|VY]]);VARDTMP0^SQRT(VARDTMP0);VARDTMP0^DIV(15);STYBALL|VX^DIV(VARDTMP0);STYBALL|VY^DIV(VARDTMP0);STYBALL|DURATION^SET(30);STYBALL|ACTIVE^SET(TRUE);STYBALL|READY^SET(FALSE);ANNYBALL^SETPOSITION(STYBALL|PX,STYBALL|PY);ANNYBALL^PLAY("LECI");SFX_CZARO_GAME_STRZAL_WROGAPTAK^PLAY();}
{STZBALL|OWNER^SET(VARSTMPZOWNER);STZBALL|IPX^SET(STZBALL|PX);STZBALL|IPY^SET(STZBALL|PY);STZBALL|VX^SET([STREX|DPOSX-STZBALL|PX]);STZBALL|VY^SET([STREX|DPOSY-STZBALL|PY]);VARDTMP0^SET([50-RANDOM^GET(100)]);VARDTMP1^SET([50-RANDOM^GET(100)]);STZBALL|VX^ADD(VARDTMP0);STZBALL|VY^ADD(VARDTMP1);VARDTMP0^SET([[STZBALL|VX*STZBALL|VX]+[STZBALL|VY*STZBALL|VY]]);VARDTMP0^SQRT(VARDTMP0);VARDTMP0^DIV(15);STZBALL|VX^DIV(VARDTMP0);STZBALL|VY^DIV(VARDTMP0);STZBALL|DURATION^SET(30);STZBALL|ACTIVE^SET(TRUE);STZBALL|READY^SET(FALSE);ANNZBALL^SETPOSITION(STZBALL|PX,STZBALL|PY);ANNZBALL^PLAY("LECI");SFX_CZARO_GAME_STRZAL_WROGAPTAK^PLAY();}
{STREX|FORCEX^SUB([[STREX|DPOSX-STKRET|DPOSX]@ VARDODLEGLOSC]);STREX|FORCEY^SUB([[STREX|DPOSY-STKRET|DPOSY]@ VARDODLEGLOSC]);}
{@IF("STREX|ENERGY","<",[VARIREXENERGYMAX@5],"BFITMP145","");@IF("STREX|ENERGY","<",[VARIREXENERGYMAX@10],"BFITMP146","");@IF("VARITMP1'10||VARITMP1'20","BFITMP147","");}
{@IF([STREX|ENERGY+VARITMP0],"<","0","BFITMP143","");@IF([STREX|ENERGY+VARITMP0],">","VARIREXENERGYMAX","BFITMP144","");STREX|ENERGY^ADD(VARITMP0);ANNENERGY^MOVE([0-VARITMP0],0);@IF("STREX|ENERGY","_","0","BFITMP149","BFITMP150");}
{@IF("STPLAYER|ACTIVE","_","TRUE","BFITMP33","");}
{@IF("STPLAYER|ACTIVE","_","TRUE","BFITMP38","");}
{VARBCHEATUSED^SET(TRUE);@IF("STPLAYER|GRAVITY","_","0.5","BFITMP73","BFITMP74");SFXCHEATON^PLAY();VARSCHEATSEL^SET("");}
{VARBCHEATUSED^SET(TRUE);@IF("STPLAYER|MORTAL","_","FALSE","BFITMP75","BFITMP76");SFXCHEATON^PLAY();VARSCHEATSEL^SET("");}
{@IF("STPLAYER|ACTIVE","_","TRUE","BFITMP83","");}
{@IF("STPLAYER|ACTIVE","_","TRUE","BFITMP84","");}
{@IF("STPLAYER|ACTIVE","_","TRUE","BFITMP87","");}
{@IF("STPLAYER|ACTIVE","_","TRUE","BFITMP90","");}
{@IF("STPLAYER|ACTIVE'TRUE&&VARIDYNACOUNT>0","BFITMP95","BFITMP96");}
{VARITMP0^SET(ANNWINDA^GETNOE());ANNWINDA^CLONE([VARITMP0-1]);GWINDY^ADDCLONES("ANNWINDA",0,[VARITMP0-1]);@LOOP("{*["ANNWINDA_"+_I_]^SETFRAME(["W"+_I_],0);}",0,VARITMP0,1);}
{VARITMP0^SET(ANNBKGB^GETNOFINEVENT("IDLE"));ANNBKGB^CLONE([VARITMP0-1]);GBKGB^ADDCLONES("ANNBKGB",0,[VARITMP0-1]);@LOOP("{*["ANNBKGB_"+_I_]^SETFRAME("IDLE",_I_);}",0,VARITMP0,1);VARITMP0^SET(ANNUKLAD^GETNOFINEVENT("IDLE"));ANNUKLAD^CLONE([VARITMP0-1]);GUKLAD^ADDCLONES("ANNUKLAD",0,[VARITMP0-1]);@LOOP("{*["ANNUKLAD_"+_I_]^SETFRAME("IDLE",_I_);}",0,VARITMP0,1);}
{@IF("STPLAYER|ACTIVE'TRUE&&STPLAYER|MORTAL'TRUE","BFITMP98","");}
{VARIDELTAX^SET([VARICENTERX-STPLAYER|POSX-STUKLAD|POSX]);VARIDELTAY^SET([VARICENTERY-STPLAYER|POSY-STUKLAD|POSY]);VARIDELTAX^DIV(10);@IF([STUKLAD|POSX+VARIDELTAX],">","0","BFITMP104","");@IF([STUKLAD|POSX+VARIDELTAX],"<",[800-STUKLAD|SIZEX],"BFITMP105","");VARIDELTAY^DIV(10);@IF([STUKLAD|POSY+VARIDELTAY],">","0","BFITMP106","");@IF([STUKLAD|POSY+VARIDELTAY],"<",[600-STUKLAD|SIZEY],"BFITMP107","");STUKLAD|POSX^ADD(VARIDELTAX);STUKLAD|POSY^ADD(VARIDELTAY);VARDTMP0^SET(STUKLAD|POSX);VARDTMP1^SET(STUKLAD|POSY);STBKG|POSX^SET([VARDTMP0*STBKG|FACTORX]);STBKG|POSY^SET([VARDTMP1*STBKG|FACTORY]);GBKGB^MOVE([STBKG|POSX-STBKG|PPOSX],[STBKG|POSY-STBKG|PPOSY]);STBKG|PPOSX^SET(STBKG|POSX);STBKG|PPOSY^SET(STBKG|POSY);GUKLAD^MOVE(VARIDELTAX,VARIDELTAY);GMASKI^MOVE(VARIDELTAX,VARIDELTAY);GWINDY^MOVE(VARIDELTAX,VARIDELTAY);GBONUSY^MOVE(VARIDELTAX,VARIDELTAY);@IF("VARBDYNA","_","TRUE","BFITMP108","");@IF("STPLAYER|MOVEY",">",[VARDCHMAXFORCEY-4.0],"BFITMP110","");STPLAYER|FORCEX^ADD([VARIPLAYERDIR*3.0]);STPLAYER|FORCEX^MUL(0.75);STPLAYER|MOVEX^SET(STPLAYER|FORCEX);STPLAYER|FORCEY^ADD(STPLAYER|GRAVITY);@IF("STPLAYER|FORCEY",">","VARDCHMAXFORCEY","BFITMP111","");STPLAYER|MOVEY^SET(STPLAYER|FORCEY);VARITMPX^SET([STPLAYER|POSX+STPLAYER|MOVEX+STUKLAD|POSX]);VARITMPY^SET([STPLAYER|POSY+STPLAYER|MOVEY+STUKLAD|POSY]);@IF("STPLAYER|MOVEY",">","0","BFITMP112","");GWINDY^NEXTFRAME();@IF("STPLAYER|MOVEY",">","0","BFITMP113","");VARSWALLOBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITMPX,VARITMPY,FALSE,4,4,FALSE));VARSWALLSEL^SET(VARSWALLOBJ^GET(0,6));VARSWALLOBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITMPX,VARITMPY,FALSE,3,3,FALSE));VARSWALLSEL^SET(VARSWALLOBJ^GET(0,6));STPLAYER|POSX^ADD(STPLAYER|MOVEX);STPLAYER|POSY^ADD(STPLAYER|MOVEY);ANNPLAYER^MOVE([VARIDELTAX+STPLAYER|MOVEX],[VARIDELTAY+STPLAYER|MOVEY]);VARSELEMOBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITMPX,[VARITMPY-20],TRUE,15,15,TRUE));@IF("VARSELEMOBJ","_","NULL","BFITMP116","");VARSELEMSEL^SET(VARSELEMOBJ^GET(0,6));BEHROJE^RUN();BEHBAZUKOWCY^RUN();BEHKRABY^RUN();}
{STDYNA|DURATION^SUB(1);@IF("STDYNA|DURATION",">","0","BFITMP132","BFITMP133");}
{VARDTMP0^SET([STPLAYER|FORCEX-10.0]);}
{VARDTMP0^SET([STPLAYER|FORCEX+10.0]);}
{@IF("VARSPLAYERDIR","_",""L"","BFITMP91","BFITMP92");VARDTMP2^SET(STPLAYER|FORCEX);VARDTMP2^SET(VARDTMP2^ABS(VARDTMP2));VARDTMP2^CLAMP(2.0,10.0);VARDTMP1^SET([STPLAYER|FORCEY-VARDTMP2]);VARDTMP1^CLAMP(-15.0,15.0);STDYNA|FORCEX^SET(VARDTMP0);STDYNA|FORCEY^SET(VARDTMP1);STDYNA|POSX^SET([STPLAYER|POSX+STUKLAD|POSX]);STDYNA|POSY^SET([STPLAYER|POSY+STUKLAD|POSY]);STDYNA|POSY^SUB(50);STDYNA|DURATION^SET(70);ANNDYNA^SETPOSITION(STDYNA|POSX,STDYNA|POSY);ANNDYNA^PLAY("IDLE");GUKLAD^ADD("ANNDYNA");VARIDYNACOUNT^DEC();VARBDYNA^SET(TRUE);}
{STUKLAD|POSX^ADD(VARIDELTAX);STUKLAD|POSY^ADD(VARIDELTAY);VARDTMP0^SET(STUKLAD|POSX);VARDTMP1^SET(STUKLAD|POSY);STBKG|POSX^SET([VARDTMP0*STBKG|FACTORX]);STBKG|POSY^SET([VARDTMP1*STBKG|FACTORY]);GBKGB^MOVE([STBKG|POSX-STBKG|PPOSX],[STBKG|POSY-STBKG|PPOSY]);STBKG|PPOSX^SET(STBKG|POSX);STBKG|PPOSY^SET(STBKG|POSY);GUKLAD^MOVE(VARIDELTAX,VARIDELTAY);GMASKI^MOVE(VARIDELTAX,VARIDELTAY);GWINDY^MOVE(VARIDELTAX,VARIDELTAY);GBONUSY^MOVE(VARIDELTAX,VARIDELTAY);ANNPLAYER^MOVE(VARIDELTAX,VARIDELTAY);}
{VARDTMP0^SET(VARITMP0);VARDTMP1^SET(VARITMP1);VARDTMP0^DIV(VARDTMP2);VARDTMP1^DIV(VARDTMP2);VARITMP0^SET([VARDTMP0*3]);VARITMP1^SET([VARDTMP1*3]);*VARSTMP0^MOVE(VARITMP0,VARITMP1);@IF(SFX_PIRAT_GAME_OSY^ISPLAYING(),"_","FALSE","BFITMP117","");}
{VARITMP0^SET([STPLAYER|POSX+STUKLAD|POSX]);VARITMP1^SET([STPLAYER|POSY+STUKLAD|POSY]);VARITMP1^SUB(45);VARITMP0^SUB(VARITMP2);VARITMP1^SUB(VARITMP3);VARDTMP2^SET([[VARITMP0*VARITMP0]+[VARITMP1*VARITMP1]]);VARDTMP2^SQRT(VARDTMP0);@IF("VARDTMP2","<","250.0","BFITMP118","");}
{STDYNA|FORCEX^MUL(0.99);STDYNA|FORCEY^ADD(0.7);@IF("STDYNA|FORCEY",">","14.0","BFITMP130","");STDYNA|MOVEX^SET(STDYNA|FORCEX);STDYNA|MOVEY^SET(STDYNA|FORCEY);ANNDYNA^MOVE(STDYNA|MOVEX,STDYNA|MOVEY);STDYNA|POSX^ADD([STDYNA|MOVEX+VARIDELTAX]);STDYNA|POSY^ADD([STDYNA|MOVEY+VARIDELTAY]);VARSTMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(STDYNA|POSX,STDYNA|POSY,FALSE,4,5,FALSE));@IF("VARSTMP0","_","NULL","BFITMP131","");VARSDYNACOLLOBJ^SET(VARSTMP0);VARSDYNACOLLSEL^SET(VARSDYNACOLLOBJ^GET(0,6));}
{*GSSCENENAME^STARTMUSIC([$1+".WAV"]);GIMUSICVOLUME^SET(GIMUSICVOLUME);}
{@MSGBOX("ZABILESBOSA");}
{@MSGBOX("ZABILESBOSA");}
{@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]>290&&ANNBOSSRUCH^GETPOSITIONY()<100","BFITMP157","");@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]<290&&ANNBOSSRUCH^GETPOSITIONY()>0","BFITMP158","");}
{@IF("[EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()]>0&&ANNBOSSRUCH^GETPOSITIONX()<150","BFITMP159","");@IF([EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()],"<","0","BFITMP160","");}
{SNDSTRZALDUZEUFO^PLAY();ANNJAJOSTART_1^SETPRIORITY(119);ANNJAJOSTART_1^SETPOSITION(ANNBOSS1_3^GETPOSITIONX(),ANNBOSS1_3^GETPOSITIONY());;ANNJAJOSTART_1^PLAY("JAJOF1ST");}
{SNDSTRZALDUZEUFO^PLAY();ANNJAJOSTART_2^SETPRIORITY(119);ANNJAJOSTART_2^SETPOSITION(ANNBOSS1_3^GETPOSITIONX(),ANNBOSS1_3^GETPOSITIONY());;ANNJAJOSTART_2^PLAY("JAJOF2ST");}
{SNDSTRZALDUZEUFO^PLAY();ANNJAJOSTART_3^SETPRIORITY(119);ANNJAJOSTART_3^SETPOSITION(ANNBOSS1_3^GETPOSITIONX(),ANNBOSS1_3^GETPOSITIONY());;ANNJAJOSTART_3^PLAY("JAJOF3ST");}
{SNDSTRZALDUZEUFO^PLAY();ANNJAJOSTART_4^SETPRIORITY(119);ANNJAJOSTART_4^SETPOSITION(ANNBOSS1_3^GETPOSITIONX(),ANNBOSS1_3^GETPOSITIONY());;ANNJAJOSTART_4^PLAY("JAJOF4ST");}
{@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]>270&&ANNBOSSRUCH^GETPOSITIONY()]<130","BFITMP189","");@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]<270&&ANNBOSSRUCH^GETPOSITIONY()>-70","BFITMP190","");}
{@IF("[EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()]>150&&ANNBOSSRUCH^GETPOSITIONX()<180","BFITMP191","");@IF([EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()],"<","150","BFITMP192","");}
{@IF([EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()],"<","300","BFITMP204","");@IF([EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()],">","380","BFITMP205","");@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]>'300&&[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]<'380","BFITMP206","");}
{@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]>316&&ANNBOSSRUCH^GETPOSITIONY()]<50","BFITMP220","");@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]<316&&ANNBOSSRUCH^GETPOSITIONY()>-70","BFITMP221","");}
{@IF("[EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()]>150&&ANNBOSSRUCH^GETPOSITIONX()<95","BFITMP222","");@IF("[EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()]<150&&[ANNBOSSRUCH^GETPOSITIONX()-2]<180","BFITMP223","");}
{DTANGENS^SET([DKIERUNEKX @ DKIERUNEKY]);DALFA^SET(DTANGENS^ARCTANEX(DKIERUNEKY,DKIERUNEKX));DALFA^MUL(0.178);}
{ITABSIZE^SET(ADELBODY^GETSIZE());@LOOP("{IHANDLEDEL^SET(ADELBODY^GET(_I_));EXTWORLD^DELETEBODY(IHANDLEDEL);}",0,ITABSIZE,1);ADELBODY^REMOVEALL();ITABSIZE^SET(ADELBODYWROG^GETSIZE());@LOOP("{IHANDLEDEL^SET(ADELBODYWROG^GET(_I_));EXTWORLD^DELETEBODY(IHANDLEDEL);}",0,ITABSIZE,1);ADELBODYWROG^REMOVEALL();}
{ANNPRZESZKODY^HIDE();ANNPRZESZKODY^CLONE(700);IILOSCWIERSZY^SET(DBDANEGRY^GETROWSNO());@LOOP("{APOZ0^ADD("1");APOZ1^ADD("1");APOZ2^ADD("0");APOZ3^ADD("0");APOZ4^ADD("0");APOZ5^ADD("0");APOZ6^ADD("0");APOZ7^ADD("0");APOZ8^ADD("0");APOZ9^ADD("0");APOZ10^ADD("0");APOZ11^ADD("1");}",0,IILOSCWIERSZY,1);@LOOP("{DBDANEGRY^SELECT(_I_);STCBAZA^SET("DBDANEGRY_CURSOR");ITEMP^SET(STCBAZA|SRODEK);IRODZAJPOTW^SET([ITEMP@10]);@IF("ITEMP","!_","0","BFITMP462","");STEMP^SET(["ANNPRZESZKODY_"+[_I_+1]]);*STEMP^SETFRAME(["DOL_"+STCBAZA|DOL],RANDOM^GET(*STEMP^GETNOFINEVENT(["DOL_"+STCBAZA|DOL])));*STEMP^SHOW();*STEMP^SETPOSITION([_I_*150],550);GRPRZESZKODY^ADD(STEMP);IPRZECHI^SET(_I_);ITEMP10^SET(STCBAZA|DOL);@LOOP("{ITEMP9^SET([10-_I_]);*["APOZ"+ITEMP9]^ADDAT(IPRZECHI,1);}",0,[ITEMP10@50-1],1);STEMP^SET(["ANNPRZESZKODY_"+[_I_+250]]);*STEMP^SETFRAME(["GORA_"+STCBAZA|GORA],RANDOM^GET(*STEMP^GETNOFINEVENT(["GORA_"+STCBAZA|GORA])));*STEMP^SHOW();*STEMP^SETPOSITION([_I_*150],50);GRPRZESZKODY^ADD(STEMP);ITEMP10^SET(STCBAZA|GORA);@LOOP("{ITEMP9^SET([2+_I_]);*["APOZ"+ITEMP9]^ADDAT(IPRZECHI,1);}",0,[ITEMP10@50-1],1);BBYLAWYSPA^SET(FALSE);@IF("STCBAZA|WYSPA","_","1","BFITMP463","");@IF("STCBAZA|WYSPA","_","2","BFITMP464","");_I_^SET(IPRZECHI);}",0,IILOSCWIERSZY,1);}
{IETAPTEMP^SET([[INRETAPURAT-1]@4]);IETAPTEMP^ADD(1);DBDANEGRY^LOAD(["BAZY\BAZA"+INRETAPURAT+".TXT"]);CNVLOADER^LOAD(["CNVLEVEL"+IETAPTEMP+".CNV"]);}
{IILOSCKLONOW^SET([IPROGGORA-IPROGDOL+1]);IILOSCKLONOW^DIV(2);@IF("ITEMP",">","IILOSCKLONOW","BFITMP465","");IMOZLIWEPOZ^SET(IPROGDOL);@LOOP("{AWYKPOZYCJE^ADD(IMOZLIWEPOZ);IMOZLIWEPOZ^ADD(2);}",0,IILOSCKLONOW,1);@IF("BBYLAWYSPA'TRUE||STCBAZA|WYSPA!'0","BFITMP466","");@LOOP("{@IF(AWYKPOZYCJE^GETSIZE(),"!_","0","BFITMP467","");}",0,ITEMP,1);}
{ITEMP5^SET(*SSPRAWDZANAK^GETCENTERX());DKIERUNEKX^SET([EXTWORLD^GETPOSITIONX(IRAKIETAOBJ)-ITEMP5]);ITEMP5^SET(*SSPRAWDZANAK^GETCENTERY());DKIERUNEKY^SET([EXTWORLD^GETPOSITIONY(IRAKIETAOBJ)-ITEMP5]);@IF("DKIERUNEKX>0&&DKIERUNEKY>0","BFITMP87","");@IF("DKIERUNEKX<0&&DKIERUNEKY>0","BFITMP88","");@IF("DKIERUNEKX>0&&DKIERUNEKY<0","BFITMP89","");@IF("DKIERUNEKX<0&&DKIERUNEKY<0","BFITMP90","");@IF("DKIERUNEKX'0&&DKIERUNEKY'0","BFITMP91","");@IF("DKIERUNEKX'0&&DKIERUNEKY<0","BFITMP92","");@IF("DKIERUNEKX'0&&DKIERUNEKY>0","BFITMP93","");@IF("DKIERUNEKX<0&&DKIERUNEKY'0","BFITMP94","");@IF("DKIERUNEKX>0&&DKIERUNEKY'0","BFITMP95","");DTANGENS^SET([DKIERUNEKX @ DKIERUNEKY]);DALFA^SET(DTANGENS^ARCTANEX(DKIERUNEKY,DKIERUNEKX));FLTROT^UNLINK("ANNRAKIETA");DALFA^ADD(180);FLTROT^SETPROPERTY("ANGLE",DALFA);FLTROT^LINK("ANNRAKIETA");STRAFIONY^SET(CANVASOBSERVER^GETGRAPHICSAT(EXTWORLD^GETPOSITIONX(IRAKIETAOBJ),EXTWORLD^GETPOSITIONY(IRAKIETAOBJ),TRUE,120,120,TRUE));@IF("STRAFIONY","!_",""NULL"","BFITMP104","");}
{DTANGENS^SET([DKIERUNEKX @ DKIERUNEKY]);DALFA^SET(DTANGENS^ARCTANEX(DKIERUNEKY,DKIERUNEKX));DALFA^MUL(0.178);}
{BNALADOWANA^SET(FALSE);ANNNALADOWANIE^PLAY("NALADOWANIE");ANNNALADOWANIE^SETFRAME("NALADOWANIE",[[IRAKIETA-1]*8]);ANNDODATKI_7^PLAY("RAKIETA");SNDREXSTRZALRAKIETA^PLAY();@IF("BJESTBOSS","_","FALSE","BFITMP255","BFITMP256");}
{IPOZY^SET(EXTWORLD^GETPOSITIONY(1));IPOZXRZE^SET(EXTWORLD^GETPOSITIONX(1));IPOZX^SET([IPOZXRZE+IPOSTEP]);IRZUTX^SET([IPOZX+55]);IRZUTX^SET([IRZUTX @ 150]);IRZUTY^SET([IPOZY @ 50]);IPOROWNANIE^SET(*["APOZ"+IRZUTY]^GET(IRZUTX));@IF("IPOROWNANIE","_","1","BFITMP310","BFITMP311");IRZUTY^SET([IPOZY-16]);IRZUTX^SET([IPOZX @ 150]);IRZUTY^SET([IRZUTY @ 50]);IPOROWNANIE^SET(*["APOZ"+IRZUTY]^GET(IRZUTX));@IF("IPOROWNANIE","_","1","BFITMP335","BFITMP336");IRZUTX^SET([IPOZX-23]);IRZUTX^SET([IRZUTX @ 150]);IRZUTY^SET([IPOZY @ 50]);IPOROWNANIE^SET(*["APOZ"+IRZUTY]^GET(IRZUTX));@IF("IPOROWNANIE","_","1","BFITMP360","BFITMP361");IRZUTY^SET([IPOZY+16]);IRZUTX^SET([IPOZX @ 150]);IRZUTY^SET([IRZUTY @ 50]);IPOROWNANIE^SET(*["APOZ"+IRZUTY]^GET(IRZUTX));@IF("IPOROWNANIE","_","1","BFITMP385","BFITMP386");}
{@IF("STCBAZA|GORA","_","200","BFITMP436","BFITMP437");}
{@IF("STCBAZA|GORA","_","150","BFITMP438","BFITMP439");}
{@IF("STCBAZA|GORA","_","100","BFITMP440","BFITMP441");}
{@IF("STCBAZA|DOL","_","250","BFITMP444","BFITMP445");}
{@IF("STCBAZA|DOL","_","200","BFITMP446","BFITMP447");}
{@IF("STCBAZA|DOL","_","150","BFITMP448","BFITMP449");}
{@IF("STCBAZA|DOL","_","100","BFITMP450","BFITMP451");}
{AWYKPOZYCJE^REMOVEALL();IPRZECHI^SET(_I_);BEHWCZYTAJKLONY^RUN();_I_^SET(IPRZECHI);AWYKPOZYCJE^REMOVEALL();}
{AWYKPOZYCJE^REMOVEALL();IPRZECHI^SET(_I_);@LOOP("{AWYKPOZYCJE^ADD(_I_);}",IPROGDOL,[IPROGGORA-IPROGDOL],1);@IF("BBYLAWYSPA'TRUE||STCBAZA|WYSPA!'0","BFITMP454","");IINDEKS^SET(RANDOM^GET(0,AWYKPOZYCJE^GETSIZE()));IPOZKLON^SET(AWYKPOZYCJE^GET(IINDEKS));_I_^SET(IPRZECHI);*["ANNKALAREPA_"+INRKLONU]^SETPOSITION([_I_*150],[IPOZKLON*50]);GRPOTWORKI^ADD(["ANNKALAREPA_"+INRKLONU]);*["APOZ"+IPOZKLON]^INSERTAT(_I_,["ANNKALAREPA_"+INRKLONU]);*["ANNKALAREPA_"+INRKLONU]^PLAY(IRODZAJPOTW);*["ANNKALAREPA_"+INRKLONU]^SETFRAME(IRODZAJPOTW,RANDOM^GET(*["ANNKALAREPA_"+INRKLONU]^GETNOFINEVENT(IRODZAJPOTW)));AWYKPOZYCJE^REMOVEALL();INRKLONU^INC();}
{@IF("STCBAZA|GORA","_","50","BFITMP442","BFITMP443");@IF("STCBAZA|DOL","_","50","BFITMP452","BFITMP453");@IF("IRODZAJPOTW","<","12","BFITMP457","");@IF("IRODZAJPOTW","_","12","BFITMP458","");@IF("IRODZAJPOTW","_","13","BFITMP459","");@IF("IRODZAJPOTW","_","15","BFITMP460","");@IF("IRODZAJPOTW","_","16","BFITMP461","");}
{@MSGBOX(["ZLA ILOSC PRZECIWNIKOW_"+IPRZECHI+"KOLUMNA"]);GAME^EXIT();@BREAK();}
{{REKSIO_BUTTON^ENABLE();PLAZA^ENABLE();}
{RATUNEK^GOTO("MAPAPUSTA");
{GESIZLAPANE^SET(1);GES1_BUTTON^DISABLE();GES2_BUTTON^DISABLE();GES3_BUTTON^DISABLE();GES4_BUTTON^DISABLE();GES5_BUTTON^DISABLE();GES6_BUTTON^DISABLE();ROBSEQ^PLAY("KLUCZSUCCESS");{REKSIO^PLAY("ZADOWOLO");}
{ANIMOPOLE$1^SETASBUTTON(TRUE,FALSE);}
{ANIMOPOLE$1^SETASBUTTON(FALSE,FALSE);}
{ANIMOPOLE$1^HIDE();}
{ANIMOREKSIOGRA^SETPOSITION(VARDESTX,VARDESTY);BEHENABLEBUTTONS^RUN();BEHRUCHKROKODYLA7-5^RUNC();BEHENDGAME^RUNC();}
{BUTTONZOLW7-1^ENABLE();BUTTONKAMIEN7-2^ENABLE();BUTTONKAMIEN7-3^ENABLE();BUTTONZOLW7-4^ENABLE();BUTTONKROKODYL7-5^ENABLE();BUTTONZOLW7-6^ENABLE();BUTTONZOLW7-7^ENABLE();BUTTONKAMIEN7-END^ENABLE();BUTTONMAPA^ENABLE();BUTTONEXIT^ENABLE();}
{BUTTONZOLW7-1^DISABLEBUTVISIBLE();BUTTONKAMIEN7-2^DISABLEBUTVISIBLE();BUTTONKAMIEN7-3^DISABLEBUTVISIBLE();BUTTONZOLW7-4^DISABLEBUTVISIBLE();BUTTONKROKODYL7-5^DISABLEBUTVISIBLE();BUTTONZOLW7-6^DISABLEBUTVISIBLE();BUTTONZOLW7-7^DISABLEBUTVISIBLE();BUTTONKAMIEN7-END^DISABLEBUTVISIBLE();BUTTONMAPA^DISABLEBUTVISIBLE();BUTTONEXIT^DISABLEBUTVISIBLE();}
{BEHDISABLEBUTTONS^RUN();ANIMOREKSIOGRA^SHOW();ANIMOREKSIOSTART^HIDE();VARSTANREKSIA^SET(1;VARDX^SET(-10);VARDY^SET(-10);VARDESTX^SET(287);VARDESTY^SET(281);ANIMOREKSIOGRA^PLAY("NW");RZEKATIMER1^SET(2000);}
{BEHZANURZENIEZOLWIA7-1^RUNC();BEHZANURZENIEZOLWIA7-4^RUNC();BEHZANURZENIEZOLWIA7-6^RUNC();BEHZANURZENIEZOLWIA7-7^RUNC();}
{VARDESTX^SET(185);VARDESTY^SET(249);ANIMOZOLW7-1^PLAY("ZATAPIA");BEHREKSIOSPADA^RUN();}
{VARDESTX^SET(363);VARDESTY^SET(249);ANIMOZOLW7-4^PLAY("ZATAPIA");BEHREKSIOSPADA^RUN();}
{VARDESTX^SET(452);VARDESTY^SET(334);ANIMOZOLW7-6^PLAY("ZATAPIA");BEHREKSIOSPADA^RUN();}
{VARDESTX^SET(541);VARDESTY^SET(249);ANIMOZOLW7-7^PLAY("ZATAPIA");BEHREKSIOSPADA^RUN();}
{VARMELODIA^SET(1);;}
{REKSIO15^PLAY("OGLADAMAPE);}
{INT_TMP^SET(ARRAY1^GET(INT_AKTUALNA_ZAGADKA));!SCENETEXT1^SETTEXT(INT_TMP);!SCENETEXT2^SETTEXT(INT_AKTUALNA_ZAGADKA);COND_CZY_ZLA^CHECK(TRUE);;;}
{INT_TMP2^SET(ARRAY2^GET(INT_AKTUALNA_ZAGADKA));!SCENETEXT1^SETTEXT(INT_AKTUALNA_ZAGADKA);!SCENETEXT2^SETTEXT(INT_TMP2);;COND_CZY_DOBRA^CHECK(TRUE);}
{INT_POSX^SET([$1^GETPOSITIONX()-50]);INT_POSY^SET([$1^GETPOSITIONY()-50]);BKGCIEMNO^MERGEALPHA(INT_POSX,INT_POSY,"POCHODNIA");}
{COND_CZY_Z_18^CHECK(TRUE);;}
{STRZAL^SETPRIORITY(25);KAMIENROZWALANY^SET(CANVAS_OBSERVER^GETGRAPHICSAT(STRZAL^GETPOSITIONX(),STRZAL^GETPOSITIONY()));MOUSE^SHOW();;KONDNAKLADKI^CHECK(TRUE);}
{WGLAB^SET(SPADANIEKAMIENI^GET(N));!!!24LASER^RUN("KAMIENBADANYCZYPOW","SET",KAMIENBADANYSKLAD);!!!N^INC();SETTEXT^RUN();ZRZUCAKAMIEN^RUNC();}
{{THIS^PLAY();};}
{THIS^SETPRIORITY(100)
{STATEK1^MOVE(-1,1);STATEK2^MOVE(-1,1);PIRACIANIMO^MOVE(-1,1);UZURPATOR^MOVE(-1,1);;;;;;}
{STATEK1^MOVE(-1,1);STATEK2^MOVE(-1,1);PIRACI^MOVE(-1,1);UZURPATOR^MOVE(-1,1);;;;;;}
{STATEK1^MOVE(-1,1);STATEK2^MOVE(-1,1);PIRACI^MOVE(-1,1);UZURPATOR^MOVE(-1,1);;;;;;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET( ["ANIMO" + $1] );UFO^RUN( ["ANIMO" + $1], "SETASBUTTON", FALSE, FALSE );UFO^RUN( ["ANIMO" + $1], "HIDE" );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( "PATRZY_NA_LAMPE" );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(  ["ANIMO"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", TRUE, TRUE );UFO^RUN( VARSTRINGTEMP, "SHOW" );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND( $1) );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( "PATRZY_NA_LAMPE" );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET( ["ANIMO" + $1] );UFO^RUN( ["ANIMO" + $1], "SETASBUTTON", FALSE, FALSE );UFO^RUN( ["ANIMO" + $1], "HIDE" );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(  ["ANIMO"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", TRUE, TRUE );UFO^RUN( VARSTRINGTEMP, "SHOW" );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "STOP", FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND( $1) );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET( ["ANIMO" + $1] );UFO^RUN( ["ANIMO" + $1], "SETASBUTTON", FALSE, FALSE );UFO^RUN( ["ANIMO" + $1], "HIDE" );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(  ["ANIMO"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", TRUE, TRUE );UFO^RUN( VARSTRINGTEMP, "SHOW" );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND( $1) );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{$1^SETPRIORITY(201);$1^ADDBEHAVIOUR( "ONFRAMECHANGED$H0", "BEHUFOFIRE");$1^ADDBEHAVIOUR( "ONFRAMECHANGED$H1", "BEHUFOFIRE");$1^ADDBEHAVIOUR( "ONFINISHED$TRAFIONY", "BEHHIDE" );$1^ADDBEHAVIOUR( "ONFINISHED$H0", "BEHUFOGOTOKURNIKP" );$1^ADDBEHAVIOUR( "ONFINISHED$H1", "BEHUFOGOTOKURNIKL" );$1^ADDBEHAVIOUR( "ONFINISHED$P0", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$P1", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$P2", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$L0", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$L1", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$L2", "BEHUFOATAKKURNIK" );}
{$1^SETPRIORITY(250);$1^ADDBEHAVIOUR( "ONFINISHED$PEKA", "BEHHIDE");$1^ADDBEHAVIOUR( "ONFRAMECHANGED$PLAY", "BEHUFOFIREMOVE" );}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET( ["ANIMO" + $1] );UFO^RUN( ["ANIMO" + $1], "SETASBUTTON", FALSE, FALSE );UFO^RUN( ["ANIMO" + $1], "HIDE" );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP1^SET( $1 );CONDPLAYERROR^CHECK(TRUE);CONDREMOVEMENUITEM^BREAK( TRUE );VARSTRINGTEMP^SET(  ["ANIMO"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", TRUE, TRUE );UFO^RUN( VARSTRINGTEMP, "SHOW" );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND( $1) );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( "SPRAWDZA" );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{SEQKOGUT^STOP(FALSE);VARINTTEMP^SET( 0 );VARSTRINGTEMP^SET( $1 );BEHCOUNTITEMS^RUNLOOPED( 0, ARRAYTEMP^GETSIZE() );CONDADDITEMTOSHIP^BREAK( TRUE );ARRAYWARSZTATPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "STOP", FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT( ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1) );BEHSHOWSHIP^RUNLOOPED( 0, ARRAYWARSZTATPRZEDMIOTY^GETSIZE() );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();ANIMOREKSIO^PLAY("ZADOWOLONY");VARSTRINGTEMP^SET( $1 );CONDPLAYSUCCESS^CHECK(TRUE);}
{;}
{SEQKOT^PLAY("1NAKLIK");
{ARRAYFRAMEROBAKI^CHANGEAT( VARNR, 59;}
{VARINTTEMP^SET(  UFO^RUN( ["ANIMOROBAL" + $1], "ISPLAYING") );VARINTLOOP^ADD( VARINTTEMP );}
{VARNR^SET( UFO^RUN( ["ANIMOLEBIODKA" + $1], "GETEVENTNAME" ) );VARNR^INC();UFO^RUN( ["ANIMOLEBIODKA" + $1], "PLAY",  VARNR );VARINTTEMP^SET( $1 );CONDONFINISHED_JE^CHECK( TRUE );VARINTTEMP^SET( 0 );BEHGAMEOVER^RUNLOOPED( 0, 7 );CONDGAMEOVER^CHECK( TRUE );}
{VARINTTEMP^ADD( UFO^RUN( ["ANIMOLEBIODKA" + $1 ], "GETEVENTNAME" );}
{;}
{;}
{;}
{$1^ADDBEHAVIOUR("ONFINISHED$CCW", "BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFINISHED$CW", "BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CW", "BEHCOLLISION");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CCW", "BEHCOLLISION");$1^SETPRIORITY(5);}
{VARITEMP1^SET([ANNREKSIO^GETPOSITIONX()+$1]);VARITEMP2^SET([ANNREKSIO^GETPOSITIONY()+$2]);VARITEMP3^SET($1);VARITEMP3^MUL(-1);VARITEMP4^SET($2);VARITEMP4^MUL(-1);CONDALPHA^BREAK(TRUE);ANNREKSIO^MOVE($1, $2);}
{VARSTEMP1^SET(THIS^GETNAME());VARITEMP1^SET(UFO^RUN(VARSTEMP1, "GETPOSITIONX");VARITEMP2^SET(UFO^RUN(VARSTEMP1, "GETPOSITIONY");VARSTEMP1^SET(THIS^GETNAME());CONDDETECT^CHECK( TRUE );}
{VARPLAYER^SET($1);UFO^RUN(ARRCARS^GET(VARPLAYER), "SETPRIORITY", ARRPRIORITY^GET(VARPLAYER));UFO^RUN(ARRCARS^GET(VARPLAYER), "SETPOSITION", ARRSTARTPOSX^GET(VARPLAYER),ARRSTARTPOSY^GET(VARPLAYER));ARRPOSX^CHANGEAT(VARPLAYER, ARRSTARTPOSX^GET(VARPLAYER));ARRDIRX^CHANGEAT(VARPLAYER, 1.0);ARRDIRY^CHANGEAT(VARPLAYER, 0.0);ARRPOSY^CHANGEAT(VARPLAYER, ARRSTARTPOSY^GET(VARPLAYER));UFO^RUN(ARRCARS^GET(VARPLAYER), "SETFPS", [30-[VARPLAYER*3]]);}
{$1^SETPOSITION(ARRCHICKENX^GET(VARINUMCHICKEN), ARRCHICKENY^GET(VARINUMCHICKEN));ARRCHICKEN^ADD($1^GETNAME());VARINUMCHICKEN^INC();}
{VARITEMP1^SET($1);VARITEMP1^INC();VARITEMP2^SET([$1+6]);ARRPOSX^CHANGEAT(VARITEMP2, ARRPOSX^GET(VARITEMP1));ARRPOSY^CHANGEAT(VARITEMP2, ARRPOSY^GET(VARITEMP1));UFO^RUN(["ANNTORPEDO"+$1], "SETPOSITION", ARRPOSX^GET(VARITEMP1), ARRPOSY^GET(VARITEMP1));UFO^RUN(["ANNTORPEDO"+$1], "SHOW");UFO^RUN(["ANNTORPEDO"+$1], "PLAY", "FLY");}
{CONDEXPLINDEX^BREAK( TRUE );UFO^RUN(["ANNTORPEDO"+VARITEMP1], "PAUSE");UFO^RUN(["ANNTORPEDO"+VARITEMP1], "HIDE");UFO^RUN(["VARITORPEDO"+VARITEMP1], "SET", 0);VARITEMP2^SET([VARITEMP1+6]);VTEMP1^ASSIGN(ARRPOSX^GET(VARITEMP2), ARRPOSY^GET(VARITEMP2));VTEMP2^ASSIGN(-10.0, -10.0);VTEMP1^ADD("VTEMP2");UFO^RUN(["ANNEXPL"+VARITEMP1], "SETPOSITION",VTEMP1^GET(0), VTEMP1^GET(1));UFO^RUN(["ANNEXPL"+VARITEMP1], "PLAY", "EXPL");CONDWHOGOTHIT^CHECK( TRUE );}
{;}
{VARITEMP1^SET(ARRCURRENTMOVE^GET(VARENEMY);BEHDONEXTMOVE^RUN();}
{VARITEMP1^SET([$1^GETCLONEINDEX()-1]);VARITEMP2^SET([ARRENEMYPOSY^GET(VARITEMP1)-1]);$1^SETPOSITION([ARRENEMYPOSX^GET(VARITEMP1)*32], [VARITEMP2*32]);$1^ADDBEHAVIOUR("ONFINISHED$INIT", "BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK0", "BEHEMOVEUP");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK1", "BEHEMOVERIGHT");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK2", "BEHEMOVEDOWN");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK3", "BEHEMOVELEFT");$1^ADDBEHAVIOUR("ONFINISHED$WALK0", "BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK1", "BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK2", "BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK3", "BEHNEXTMOVE");$1^SETFPS(RANDOM^GET(13,7));$1^PLAY("INIT");$1^SHOW();}
{VARITEMP1^SET([ARRPLAYERPOSY^GET(VARPLAYER)-1]);VARITEMP1^CLAMP(1,18);ARRNEXTPOSX^CHANGEAT(VARPLAYER, ARRPLAYERPOSX^GET(VARPLAYER));ARRNEXTPOSY^CHANGEAT(VARPLAYER, VARITEMP1);CONDNOMOVEY^BREAK( TRUE );VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)], "GET", ARRNEXTPOSX^GET(VARPLAYER));ARRCURRENTFIELD^CHANGEAT(VARPLAYER, VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^BREAK( TRUE );UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER, VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER, ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER, ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), 0);UFO^RUN(["ANNPLAYER"+VARPLAYER], "PLAY", "UP");}
{VARITEMP1^SET([ARRPLAYERPOSX^GET(VARPLAYER)+1]);VARITEMP1^CLAMP(0,24);ARRNEXTPOSX^CHANGEAT(VARPLAYER, VARITEMP1);ARRNEXTPOSY^CHANGEAT(VARPLAYER, ARRPLAYERPOSY^GET(VARPLAYER));CONDNOMOVEX^BREAK( TRUE );VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)], "GET", ARRNEXTPOSX^GET(VARPLAYER));ARRCURRENTFIELD^CHANGEAT(VARPLAYER, VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^BREAK( TRUE );UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER, VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER, ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER, ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), 0);UFO^RUN(["ANNPLAYER"+VARPLAYER], "PLAY", "RIGHT");}
{VARITEMP1^SET([ARRPLAYERPOSY^GET(VARPLAYER)+1]);VARITEMP1^CLAMP(1,18);ARRNEXTPOSX^CHANGEAT(VARPLAYER, ARRPLAYERPOSX^GET(VARPLAYER));ARRNEXTPOSY^CHANGEAT(VARPLAYER, VARITEMP1);CONDNOMOVEY^BREAK( TRUE );VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)], "GET", ARRNEXTPOSX^GET(VARPLAYER));ARRCURRENTFIELD^CHANGEAT(VARPLAYER, VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^BREAK( TRUE );UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER, VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER, ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER, ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), 0);UFO^RUN(["ANNPLAYER"+VARPLAYER], "PLAY", "DOWN");}
{VARITEMP1^SET([ARRPLAYERPOSX^GET(VARPLAYER)-1]);VARITEMP1^CLAMP(0,24);ARRNEXTPOSX^CHANGEAT(VARPLAYER, VARITEMP1);ARRNEXTPOSY^CHANGEAT(VARPLAYER, ARRPLAYERPOSY^GET(VARPLAYER));CONDNOMOVEX^BREAK( TRUE );VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)], "GET", ARRNEXTPOSX^GET(VARPLAYER));ARRCURRENTFIELD^CHANGEAT(VARPLAYER, VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^BREAK( TRUE );UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER, VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER, ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER, ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), 0);UFO^RUN(["ANNPLAYER"+VARPLAYER], "PLAY", "LEFT");}
{VARPLAYER^SET($1);VARENDFIELD^SET(VARFIELD);VARITEMP1^SET([ARRPLAYERPOSX^GET($1)*32]);VARITEMP2^SET([ARRPLAYERPOSY^GET($1)-1]);VARITEMP2^MUL(32);UFO^RUN(["ANNPLAYER"+$1], "PLAY", "IDLE");}
{VARSTEMP1^SET(ANNDOOR0^GETFRAMENAME());@IF("VARSTEMP1", "<>", ""OPEN"", "BEHOPEN", "");}
{VARITEMP1^SET(23);VARITEMP2^SET(4);VARITEMP3^SET(ARRPLAYERPOSX^GET(0));VARITEMP4^SET(ARRPLAYERPOSY^GET(0));CCONDISATPOS^BREAK( TRUE );VARITEMP3^SET(ARRPLAYERPOSX^GET(1));VARITEMP4^SET(ARRPLAYERPOSY^GET(1));CCONDISATPOS^BREAK( TRUE );VARITEMP1^SET(21);VARITEMP2^SET(2);VARITEMP3^SET(ARRPLAYERPOSX^GET(0));VARITEMP4^SET(ARRPLAYERPOSY^GET(0));CCONDISATPOS^BREAK( TRUE );VARITEMP3^SET(ARRPLAYERPOSX^GET(1));VARITEMP4^SET(ARRPLAYERPOSY^GET(1));CCONDISATPOS^BREAK( TRUE );VARSTEMP1^SET(ANNDOOR0^GETFRAMENAME());@IF("VARSTEMP1", "<>", ""CLOSED"", "BEHCLOSE", "");}
{VARITEMP1^SET(UFO^RUN($1, "GETCENTERX");VARITEMP2^SET(UFO^RUN($1, "GETCENTERY");VARSTEMP1^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITEMP1, VARITEMP2, TRUE, 5, 5, TRUE));CONDCOLLISION^BREAK( TRUE );VARITEMP1^SET(ARRPLAYERS^FIND(VARSTEMP1));ANNPLAYER0^PAUSE();ANNPLAYER1^PAUSE();UFO^RUN(["ANNPLAYER"+VARITEMP1], "PLAY", "DIE");UFO^RUN(["ANNPLAYER"+VARITEMP1], "SETPRIORITY", 10);UFO^RUN(["SNDPLAYERWORM"+VARITEMP1], "PLAY");}
{;}
{;}
{;}
{;}
{;}
{;}
{I_X^SET([ AOBJ8^GETPOSITIONX() + $2 ]);I_Y^SET([ AOBJ8^GETPOSITIONY() + $3 ]);UFO^RUN( $4, "SET" , I_Y );UFO^RUN( $1, "SETPOSITION" , I_X , I_Y );UFO^RUN( $1, "SETFPS" , 48 );UFO^RUN( $1, "PLAY" , "PLAY" );}
{GROUPSOUND^ADD( "SNDENTRE", "SNDKRABIK", "SNDSTARTCHOMIK, "SNDKRABIKKABLE", "SNDSUCCESS", "SNDKRETENTRE1", "SNDKRETENTRE2" );VARLEVEL4^SET( "S42_0_SKLADZIK" );VARROZDZIAL4^SET( 1 );}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{I0^SET([ I_LEVEL_WIDTH*I_LEVEL_HEIGHT ]);IMG_EMPTY^CLONE( I0 );IMGTILEEXIT^CLONE( MAT^GETCELLSNO( IC_FIELD_CODE_EXIT ) );IMG_WALL_WEAK^CLONE( MAT^GETCELLSNO( IC_FIELD_CODE_WALL_WEAK ) );IMG_DYNAMITE^CLONE( MAT^GETCELLSNO( IC_FIELD_CODE_DYNAMITE ) );IMG_STONE^CLONE( MAT^GETCELLSNO( IC_FIELD_CODE_STONE ) );ANN_ENEMY^CLONE( MAT^GETCELLSNO( IC_FIELD_CODE_ENEMY ) );I0^SET( MAT^GETCELLSNO( IC_FIELD_CODE_DYNAMITE ) );I0^ADD( MAT^GETCELLSNO( IC_FIELD_CODE_ENEMY ) );I0^MUL( 9 );ANN_EXPLOSION^CLONE( I0 );S44_511_PODKOP^RUNCLONES( "ANN_ENEMY", -1,-1, "BEHENINITCLONES" );S44_511_PODKOP^RUNCLONES( "ANN_EXPLOSION", -1,-1, "BEH_EXP_INIT_CLONES" );}
{ITICK^INC();I_FIELD_INDEX^SET( I_MOLE_FIELD_CURR );IOUT^SET( MAT^GET( I_MOLE_FIELD_CURR ) );I_FIELD_CODE^SET( MAT^GET( I_FIELD_INDEX );BEH_MOLE_FINISHED_EMPTY^RUNC();I_MOLE_FIELD_CURR^SET( I_MOLE_FIELD_NEXT );BEH_MOLE_KILL^RUNC();BEH_KEYB^RUN();IEXIT^INC();}
{$1^ADDBEHAVIOUR( "ONFRAMECHANGED$LEWO" , "BEHENTICKL" );$1^ADDBEHAVIOUR( "ONFRAMECHANGED$PRAWO" , "BEHENTICKR" );$1^ADDBEHAVIOUR( "ONFRAMECHANGED$GORA" , "BEHENTICKUP" );$1^ADDBEHAVIOUR( "ONFRAMECHANGED$DOL" , "BEHENTICKDN" );$1^ADDBEHAVIOUR( "ONFINISHED$LEWO" , "BEHENFIN" );$1^ADDBEHAVIOUR( "ONFINISHED$PRAWO" , "BEHENFIN" );$1^ADDBEHAVIOUR( "ONFINISHED$GORA" , "BEHENFIN" );$1^ADDBEHAVIOUR( "ONFINISHED$DOL" , "BEHENFIN" );}
{I_0^SET( $1^GETCLONEINDEX() );BEHENDEFINEMOVE^RUN();}
{$1^STOP( FALSE );}
{S_2^SET([ SC_CLONE_EMPTY + [I_FIELD_INDEX+1] ]);UFO^RUN( S_2, "SHOW" );MAT^SET( [I_FIELD_INDEX%I_LEVEL_WIDTH], [I_FIELD_INDEX@I_LEVEL_WIDTH], IC_FIELD_CODE_EMPTY );ARRFLDCLONES^CHANGEAT( I_FIELD_INDEX , [I_FIELD_INDEX+1] );}
{$1^ADDBEHAVIOUR( "ONFINISHED$PLAY" , "BEH_EXP_FINISHED" );ARR_EXP^ADD(0);}
{VAR_1^INC();BUTTON$1^SETPRIORITY(VAR_1);}
{B$1^SETPRIORITY(100);}
{B$1^SETPRIORITY(1);}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ SEQKRET^PLAY( "GEN2" );
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{BEHINITZASLONAX^RUNLOOPED( 0, 7, 1, "[80*$1]" );}
{VARTEMP^INC();VARDY^SET( $3 );VARSTRING^SET(  ["ANIMOZASLONA_"+VARTEMP] );UFO^RUN( VARSTRING, "SHOW" );UFO^RUN( VARSTRING, "SETPOSITION", 0, 0);UFO^RUN( VARSTRING, "SETFRAME", "PLAY", 0);UFO^RUN( VARSTRING, "SETPRIORITY", 50 );UFO^RUN( VARSTRING, "MOVE",  [120*$1 ], VARDY );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFINISHED$PLAY", "BEHZASLONAHIDE" );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFRAMECHANGED$PLAY", "BEHZASLONAMOVE" );CONDZASLONAHIDE^CHECK(TRUE);}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{BEHINITZASLONAX^RUNLOOPED( 0, 7,1, "[80*$1 ]" );}
{VARTEMP^INC();VARDY^SET( $3 );VARSTRING^SET(  ["ANIMOZASLONA_"+VARTEMP] );UFO^RUN( VARSTRING, "SHOW" );UFO^RUN( VARSTRING, "SETPOSITION", 0, 0);UFO^RUN( VARSTRING, "SETFRAME", "PLAY", 0);UFO^RUN( VARSTRING, "SETPRIORITY", 50 );UFO^RUN( VARSTRING, "MOVE",  [120*$1 ], VARDY );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFINISHED$PLAY", "BEHZASLONAHIDE" );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFRAMECHANGED$PLAY", "BEHZASLONAMOVE" );CONDZASLONAHIDE^CHECK(TRUE);}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{BEHINITZASLONAX^RUNLOOPED( 0, 7,1, "[80*$1 ]" );}
{VARTEMP^INC();VARDY^SET( $3 );VARSTRING^SET(  ["ANIMOZASLONA_"+VARTEMP] );UFO^RUN( VARSTRING, "SHOW" );UFO^RUN( VARSTRING, "SETPOSITION", 0, 0);UFO^RUN( VARSTRING, "SETFRAME", "PLAY", 0);UFO^RUN( VARSTRING, "SETPRIORITY", 50 );UFO^RUN( VARSTRING, "MOVE",  [120*$1 ], VARDY );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFINISHED$PLAY", "BEHZASLONAHIDE" );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFRAMECHANGED$PLAY", "BEHZASLONAMOVE" );CONDZASLONAHIDE^CHECK(TRUE);}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{BEHINITZASLONAX^RUNLOOPED( 0, 7, 1, "[80*$1 ]" );}
{VARTEMP^INC();VARDY^SET( $3 );VARSTRING^SET(  ["ANIMOZASLONA_"+VARTEMP] );UFO^RUN( VARSTRING, "SHOW" );UFO^RUN( VARSTRING, "SETPOSITION", 0, 0);UFO^RUN( VARSTRING, "SETFRAME", "PLAY", 0);UFO^RUN( VARSTRING, "SETPRIORITY", 50 );UFO^RUN( VARSTRING, "MOVE",  [120*$1 ], VARDY );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFINISHED$PLAY", "BEHZASLONAHIDE" );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFRAMECHANGED$PLAY", "BEHZASLONAMOVE" );CONDZASLONAHIDE^CHECK(TRUE);}
{;}
{VARICOUNT^INC();BEHDISABLEBUTTONS^RUN();VARSTEMP1^SET( ["WAJHA"+$1] );UFO^RUN( VARSTEMP1, "PLAY", "PLAY" );}
{;}
{;}
{ANNST^PLAY("ELAPSE");;ANNKRET^PLAY("IDZIE_START");ANNREKSIO^PLAY("IDZIE_START");SEQZABBA^PLAY("0GADA5");}
{S_0^SET( ["BUT_"+I_HERO_CURR_BRIDGE] );I_0^SET( [I_HERO_CURR_BRIDGE*IC_JNT_DATA_PER_BRIDGE] );I_1^SET( ARR_JOINTS^GET(1) );S_1^SET( [S_0+"A"] );BEH_HERO_BUT_ENABLE_1^RUNC();I_1^SET( ARR_JOINTS^GET(3) );S_1^SET( [S_0+"B"] );BEH_HERO_BUT_ENABLE_1^RUNC();}
{S_0^SET( ["BUT_"+I_HERO_CURR_BRIDGE] );I_0^SET( [I_HERO_CURR_BRIDGE*IC_JNT_DATA_PER_BRIDGE] );I_1^SET( ARR_JOINTS^GET(1) );S_1^SET( [S_0+"A"] );BEH_HERO_BUT_DISABLE_1^RUNC();I_1^SET( ARR_JOINTS^GET(3) );S_1^SET( [S_0+"B"] );BEH_HERO_BUT_DISABLE_1^RUNC();}
{KOM84_1_1^PLAY();ISKRY^PLAY(START");}
{VARLEVEL8^SET("S85_SLONCE");ARRCARS^ADD("ANNEGG", "ANNLARGE", "ANNMID", "ANNSMALL");BEHINITFILTER^RUN();ARRDIRX^ADD(0.0, 0.0, 0.0, 0..0);ARRDIRY^ADD(0.0, 0.0, 0.0, 0..0);ARRSPEED^ADD(0.0, 0.0, 0.0, 0.0);ARRPOSX^ADD(0.0, 0.0, 0.0, 0.0);ARRPOSY^ADD(0.0, 0.0, 0.0, 0.0);ARRLASTPOSX^ADD(0.0,0.0,0.0,0.0);ARRLASTPOSY^ADD(0.0,0.0,0.0,0.0);ARRSTARTPOSX^ADD(150.0,290.0,530.0,470.0);ARRSTARTPOSY^ADD(400.0,280.0,360.0,400.0);ARRANGLE^ADD(0.0, 0.0, 0.0, 0.0);ARRTOANGLE^ADD(0.0, 0.0, 0.0, 0.0);ARRASTDIRX^ADD(0.73, 0.5, -0.5);ARRASTDIRY^ADD(-0.73, -0.2, 0.2);ARRHWIDTH^ADD(15.0, 41.5, 29.0, 20.0);ARRHHEIGHT^ADD(23.0, 41.5, 29.5, 20.0);VARPLAYABLE^SET(1);BEHINITPLAYER^RUN("0");BEHINITPLAYER^RUN("1");BEHINITPLAYER^RUN("2");BEHINITPLAYER^RUN("3");ANNPOWER^SETPOSITION(ARRSTARTPOSX^GET(0), ARRSTARTPOSY^GET(0));SNDNARR1^PLAY();}
{CONDSUN^BREAK( TRUE );VARITEMP1^SET(ARRCARS^FIND(VARSTEMP1));VNORMAL^ASSIGN([ARRPOSX^GET(VARPLAYER)+ARRHWIDTH^GET(VARPLAYER)], [ARRPOSY^GET(VARPLAYER)+ARRHHEIGHT^GET(VARPLAYER)]);VTEMP1^ASSIGN([ARRPOSX^GET(VARITEMP1)+ARRHWIDTH^GET(VARITEMP1)], [ARRPOSY^GET(VARITEMP1)+ARRHHEIGHT^GET(VARITEMP1)]);VTEMP1^MUL(-1.0);VNORMAL^ADD("VTEMP1");VNORMAL^NORMALIZE();VINCIDENT^ASSIGN(ARRDIRX^GET(VARPLAYER), ARRDIRY^GET(VARPLAYER));VINCIDENT^MUL(-1.0);VINCIDENT^REFLECT("VNORMAL", "VREFLECT");ARRDIRX^CHANGEAT(VARITEMP1, ARRDIRX^GET(VARPLAYER));ARRDIRY^CHANGEAT(VARITEMP1, ARRDIRY^GET(VARPLAYER));ARRPOSX^CHANGEAT(VARITEMP1, ARRLASTPOSX^GET(VARITEMP1));ARRPOSY^CHANGEAT(VARITEMP1, ARRLASTPOSY^GET(VARITEMP1));ARRSPEED^CHANGEAT(VARITEMP1, 2.0);VARDTEMP2^ARCTANEX(VREFLECT^GET(1), VREFLECT^GET(0));ARRDIRX^CHANGEAT(VARPLAYER, VREFLECT^GET(0));ARRDIRY^CHANGEAT(VARPLAYER, VREFLECT^GET(1));ARRTOANGLE^CHANGEAT(VARPLAYER, VARDTEMP2);ARRANGLE^CHANGEAT(VARPLAYER, VARDTEMP2);BEHPLAYPONG^RUN();}
{ARRDIRY^MULAT(VARPLAYER, -1.0);ARRPOSX^CHANGEAT(VARPLAYER, ARRLASTPOSX^GET(VARPLAYER));ARRPOSY^CHANGEAT(VARPLAYER, ARRLASTPOSY^GET(VARPLAYER));BEHPLAYPONG^RUN();}
{ARRDIRX^MULAT(VARPLAYER, -1.0);ARRPOSX^CHANGEAT(VARPLAYER, ARRLASTPOSX^GET(VARPLAYER));ARRPOSY^CHANGEAT(VARPLAYER, ARRLASTPOSY^GET(VARPLAYER));BEHPLAYPONG^RUN();}
{VARLEVEL6^SET("S66_WYBOR");BTNRED^DISABLEBUTVISIBLE();BTNGREEN^DISABLEBUTVISIBLE();BTNYELLOW^DISABLEBUTVISIBLE();BTNBLUE^DISABLEBUTVISIBLE();ARRLOCALNAMES^ADD("ANNCAR0, "ANNCAR1", "ANNCAR2", "ANNCAR3");ARRCARNAMES^REMOVEALL();ARRCARNAMES^ADD("1", "2", "3", "4");ARRCARINDICES^REMOVEALL();ARRCARINDICES^ADD(0, 1, 2, 3);BTNZAMEK^DISABLE();UFO^RUN(["BEHINITSCHEME"+VARLEVEL6XX], "RUN");}
{ARRCARS^ADD(ARRCARNAMES^GET(0),ARRCARNAMES^GET(1),ARRCARNAMES^GET(2),ARRCARNAMES^GET(3));BEHINITFILTER^RUN();ARRKEYSACCEL^ADD("UP", "S", "J", "8");ARRKEYSRIGHT^ADD("RIGHT", "X", "M", "6");ARRKEYSLEFT^ADD("LEFT", "Z", "N", "4");ARRDIRX^ADD(0.0, 0.0, 0.0, 0..0);ARRDIRY^ADD(0.0, 0.0, 0.0, 0..0);ARRSPEED^ADD(0.0, 0.0, 0.0, 0.0);ARRPOSX^ADD(0.0, 0.0, 0.0, 0.0);ARRPOSY^ADD(0.0, 0.0, 0.0, 0.0);ARRLASTPOSX^ADD(0.0, 0.0, 0.0, 0.0);ARRLASTPOSY^ADD(0.0, 0.0, 0.0, 0.0);ARRDISPX^ADD(0.0, 0.0, 0.0, 0.0);ARRDISPY^ADD(0.0, 0.0, 0.0, 0.0);ARRSTARTPOSX^ADD(200,200,150, 150);ARRSTARTPOSY^ADD(30,65,30,65);ARRREVERSE^ADD(0,0,0,0);ARRPRENEXTLAP^ADD(0,0,0,0);ARRANGLE^ADD(0.0, 0.0, 0.0, 0.0);ARRTOANGLE^ADD(0.0, 0.0, 0.0, 0.0);ARRSLOWDOWN^ADD(0,0,0,0);ARRPRIORITY^ADD(5,5,5,5);ARRNUMPATH^ADD(0,0,0,0);ARRLAP^ADD(0,0,0,0);ARRLAPTIME^ADD(0,0,0,0);ARRROUTE^ADD(0,0,0,0);ARRPATHX0^ADD(253,377,491,617,701,744,762,761,742,716,679,652,633,592,561,526,474,409,362,326,302,309,340,390,446,529,631,683,693,654,455,260,152,114,94,127,146,146,120,113,167,216);ARRPATHY0^ADD(59,75,59,54,63,85,135,200,285,323,321,280,214,197,259,294,343,401,401,373,258,208,181,182,247,343,394,444,492,526,533,518,503,473,397,342,284,226,166,102,60,57);ARRPATHX1^ADD(264,424,548,616,678,733,755,766,754,738,704,680,659,639,607,579,563,505,462,418,385,346,316,297,290,304,323,362,397,434,462,545,628,672,689,665,582,448,307,175,107,97,119,138,138,136,139,170,223);ARRPATHY1^ADD(63,75,52,47,71,94,138,214,272,293,306,303,279,229,210,224,256,302,356,394,399,382,344,293,246,204,187,179,192,228,284,351,395,444,486,515,543,528,544,493,440,386,337,281,216,134,72,49,53);ARRPATHX2^ADD(270,379,517,636,708,740,754,758,759,757,745,729,708,679,659,631,612,584,564,541,507,481,455,432,400,349,319,308,303,326,364,408,447,489,563,652,696,697,682,646,573,286,195,139,105,93,95,117,135,136,120,120,134,163,207;ARRPATHY2^ADD(64,73,56,52,68,89,110,144,206,251,291,314,326,317,287,236,227,228,251,284,306,336,370,388,391,386,359,310,253,210,205,226,267,309,355,416,460,483,510,524,534,520,494,476,454,426,386,356,317,256,208,157,101,71,59;ARRPATHX3^ADD(264,424,548,616,678,733,755,766,754,738,704,680,659,639,607,579,563,505,462,418,385,346,316,297,290,304,323,362,397,434,462,545,628,672,689,665,582,448,307,175,107,97,119,138,138,136,139,170,223);ARRPATHY3^ADD(63,75,52,47,71,94,138,214,272,293,306,303,279,229,210,224,256,302,356,394,399,382,344,293,246,204,187,179,192,228,284,351,395,444,486,515,543,528,544,493,440,386,337,281,216,134,72,49,53);IMGBRIDGE^SETOPACITY(200);IMGOVERLAY^SETOPACITY(200);VARPLAYER^SET(ARRCARINDICES^GET(0));BEHINITPLAYER^RUN();VARPLAYER^SET(ARRCARINDICES^GET(1));BEHINITPLAYER^RUN();VARPLAYER^SET(ARRCARINDICES^GET(2));BEHINITPLAYER^RUN();VARPLAYER^SET(ARRCARINDICES^GET(3));BEHINITPLAYER^RUN();SNDINTRO^PLAY();}
{VARITEMP1^SET(ARRSPEED^GET(VARPLAYER);VARITEMP1^MUL(2000);VARITEMP1^ADD(10025);UFO^RUN(["SNDENGINE"+VARPLAYER], "SETFREQ", VARITEMP1);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(["ANIMO"+$1],"SETASBUTTON",FALSE,FALSE);UFO^RUN(["ANIMO"+$1],"HIDE");BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY("PATRZY_NA_LAMPE");ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",TRUE,TRUE);UFO^RUN(VARSTRINGTEMP,"SHOW");VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY("PATRZY_NA_LAMPE");ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(["ANIMO"+$1],"SETASBUTTON",FALSE,FALSE);UFO^RUN(["ANIMO"+$1],"HIDE");BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",TRUE,TRUE);UFO^RUN(VARSTRINGTEMP,"SHOW");VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"STOP",FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(["ANIMO"+$1],"SETASBUTTON",FALSE,FALSE);UFO^RUN(["ANIMO"+$1],"HIDE");BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",TRUE,TRUE);UFO^RUN(VARSTRINGTEMP,"SHOW");VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{$1^SETPRIORITY(201);$1^ADDBEHAVIOUR("ONFRAMECHANGED$H0","BEHUFOFIRE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$H1","BEHUFOFIRE");$1^ADDBEHAVIOUR("ONFINISHED$TRAFIONY","BEHHIDE");$1^ADDBEHAVIOUR("ONFINISHED$H0","BEHUFOGOTOKURNIKP");$1^ADDBEHAVIOUR("ONFINISHED$H1","BEHUFOGOTOKURNIKL");$1^ADDBEHAVIOUR("ONFINISHED$P0","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$P1","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$P2","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$L0","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$L1","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$L2","BEHUFOATAKKURNIK");}
{$1^SETPRIORITY(250);$1^ADDBEHAVIOUR("ONFINISHED$PEKA","BEHHIDE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$PLAY","BEHUFOFIREMOVE");}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(["ANIMO"+$1],"SETASBUTTON",FALSE,FALSE);UFO^RUN(["ANIMO"+$1],"HIDE");BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP1^SET($1);CONDPLAYERROR^CHECK(TRUE);CONDREMOVEMENUITEM^ONE_BREAK(TRUE);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",TRUE,TRUE);UFO^RUN(VARSTRINGTEMP,"SHOW");VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY("SPRAWDZA");ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{SEQKOGUT^STOP(FALSE);VARINTTEMP^SET(0);VARSTRINGTEMP^SET($1);BEHCOUNTITEMS^RUNLOOPED(0,ARRAYTEMP^GETSIZE());CONDADDITEMTOSHIP^ONE_BREAK(TRUE);ARRAYWARSZTATPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"STOP",FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWSHIP^RUNLOOPED(0,ARRAYWARSZTATPRZEDMIOTY^GETSIZE());BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();ANIMOREKSIO^PLAY("ZADOWOLONY");VARSTRINGTEMP^SET($1);CONDPLAYSUCCESS^CHECK(TRUE);}
{PRZYGODA^GOTO("S62_PAKMAN");]
[VARLEVEL6^SET("S61?LADOWANIE0");}
{B_NULL;}
{VARINTTEMP^SET(UFO^RUN(["ANIMOROBAL"+$1],"ISPLAYING"));VARINTLOOP^ADD(VARINTTEMP);}
{VARNR^SET(UFO^RUN(["ANIMOLEBIODKA"+$1],"GETEVENTNAME"));VARNR^INC();UFO^RUN(["ANIMOLEBIODKA"+$1],"PLAY",VARNR);VARINTTEMP^SET($1);CONDONFINISHED_JE^CHECK(TRUE);VARINTTEMP^SET(0);BEHGAMEOVER^RUNLOOPED(0,7);CONDGAMEOVER^CHECK(TRUE);}
{VARINTTEMP^ADD(UFO^RUN(["ANIMOLEBIODKA"+$1],"GETEVENTNAME"));}
{B_NULL;}
{$1^ADDBEHAVIOUR("ONFINISHED$CCW","BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFINISHED$CW","BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CW","BEHCOLLISION");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CCW","BEHCOLLISION");$1^SETPRIORITY(5);}
{VARITEMP1^SET([ANNREKSIO^GETPOSITIONX()+$1]);VARITEMP2^SET([ANNREKSIO^GETPOSITIONY()+$2]);VARITEMP3^SET($1);VARITEMP3^MUL(-1);VARITEMP4^SET($2);VARITEMP4^MUL(-1);CONDALPHA^ONE_BREAK(TRUE);ANNREKSIO^MOVE($1,$2);}
{VARPLAYER^SET($1);UFO^RUN(ARRCARS^GET(VARPLAYER),"SETPRIORITY",ARRPRIORITY^GET(VARPLAYER));UFO^RUN(ARRCARS^GET(VARPLAYER),"SETPOSITION",ARRSTARTPOSX^GET(VARPLAYER),ARRSTARTPOSY^GET(VARPLAYER));ARRPOSX^CHANGEAT(VARPLAYER,ARRSTARTPOSX^GET(VARPLAYER));ARRDIRX^CHANGEAT(VARPLAYER,1.0);ARRDIRY^CHANGEAT(VARPLAYER,0.0);ARRPOSY^CHANGEAT(VARPLAYER,ARRSTARTPOSY^GET(VARPLAYER));UFO^RUN(ARRCARS^GET(VARPLAYER),"SETFPS",[30-[VARPLAYER*3]]);}
{$1^SETPOSITION(ARRCHICKENX^GET(VARINUMCHICKEN),ARRCHICKENY^GET(VARINUMCHICKEN));ARRCHICKEN^ADD($1^GETNAME());VARINUMCHICKEN^INC();}
{VARITEMP1^SET($1);VARITEMP1^INC();VARITEMP2^SET([$1+6]);ARRPOSX^CHANGEAT(VARITEMP2,ARRPOSX^GET(VARITEMP1));ARRPOSY^CHANGEAT(VARITEMP2,ARRPOSY^GET(VARITEMP1));UFO^RUN(["ANNTORPEDO"+$1],"SETPOSITION",ARRPOSX^GET(VARITEMP1),ARRPOSY^GET(VARITEMP1));UFO^RUN(["ANNTORPEDO"+$1],"SHOW");UFO^RUN(["ANNTORPEDO"+$1],"PLAY","FLY");}
{CONDEXPLINDEX^ONE_BREAK(TRUE);UFO^RUN(["ANNTORPEDO"+VARITEMP1],"PAUSE");UFO^RUN(["ANNTORPEDO"+VARITEMP1],"HIDE");UFO^RUN(["VARITORPEDO"+VARITEMP1],"SET",0);VARITEMP2^SET([VARITEMP1+6]);VTEMP1^ASSIGN(ARRPOSX^GET(VARITEMP2),ARRPOSY^GET(VARITEMP2));VTEMP2^ASSIGN(-10.0,-10.0);VTEMP1^ADD(VTEMP2);UFO^RUN(["ANNEXPL"+VARITEMP1],"SETPOSITION",VTEMP1^GET(0),VTEMP1^GET(1));UFO^RUN(["ANNEXPL"+VARITEMP1],"PLAY","EXPL");CONDWHOGOTHIT^CHECK(TRUE);}
[THIS>HIDE();}
[THIS>PLAY("PLAY");}
[GLINA^PLAY("ENTRE");}
[EKRAN^SHOW();GLINA^PLAY("GADA1");}
{GLINA>PLAY("GADA2");}
{GLINA^PLAY("GADA3");]
{GLINA>PLAY("GADA5");}
{GLINA^PLAY("GADA6");]
{EKRAN^HIDE();ZNACZKI1>HIDE();ZNACZKI2^HIDE();ZNACZKI3^HIDE();ZNACZKI4>HIDE();BUT1>DISABLE();BUT2^DISABLE();BUT3>DISABLE();BUT4^DISABLE();BUT5>DISABLE();BUT6^DISABLE();ENTERBUT^DISABLE();GLINABUT^DISABLE();GLINA^PLAY("EXIT");}
{GLINA>PLAY("OK");}
[BUT1^ENABLE();BUT2>ENABLE();BUT3^ENABLE();BUT4^ENABLE();BUT5>ENABLE();BUT6^ENABLE();ENTERBUT^ENABLE();GLINABUT^ENABLE();}
[CON1^CHECK(RUN);CON2^CHECK(RUN);CON3>CHECK(RUN);CON4^CHECK(RUN);}
[GLINAGADA7^RUN();KONTROLAVAR^SET(1);DISABLEALL^RUN();}
{BUT1^DISABLEBUTVISIBLE();BUT2>DISABLEBUTVISIBLE();BUT3^DISABLEBUTVISIBLE();BUT4^DISABLEBUTVISIBLE();BUT5^DISABLEBUTVISIBLE();BUT6^DISABLEBUTVISIBLE();ENTERBUT^DISABLEBUTVISIBLE();GLINABUT^DISABLEBUTVISIBLE();}
{PRZYGODA^GOTO("S31_0_ZIEMIA");]
{DIDISABLE>RUN();KTORAPROBA^RUN();ENABLEALL^RUN();PROBA^INC();ZNACZKI1>HIDE();ZNACZKI2^HIDE();ZNACZKI3^HIDE();ZNACZKI4>HIDE();}
[CONPR1^CHECK(TRUE);CONPR2^CHECK(TRUE);CONPR3>CHECK(TRUE);]
{GLINA>PLAY("GADA3B");}
[PRZYGODA>GOTO("DECR");}
[GLINAENTRE>RUN();]
{ZNACZKI1^SHOW();ZNACZKI1^SETFRAME("PLAY",ZNACZKI2>GETFRAMENAME());ZNACZKI2^SHOW();ZNACZKI2^SETFRAME("PLAY",ZNACZKI3>GETFRAMENAME());ZNACZKI3^SHOW();ZNACZKI3^SETFRAME("PLAY",ZNACZKI4>GETFRAMENAME());}
{ZNACZKI3^SHOW();ZNACZKI3^SETFRAME("PLAY",ZNACZKI4^GETFRAMENAME());]
[DISABLEALL^RUN();KTORAPROBA^RUN();PROBA^INC();}
[DISABLEALL>RUN();HASLOOKIEJ^RUN();}
[VAR_KOD^SET([ZNACZKI1^GETFRAMENAME()+ZNACZKI2^GETFRAMENAME()]);VAR_KOD>ADD([ZNACZKI3^GETFRAMENAME()+ZNACZKI4^GETFRAMENAME()]);@IF("VAR_KOD","!_","6234","B_LOST","B_WIN");}
[ZNACZKI1^HIDE();ZNACZKI2>HIDE();ZNACZKI3^HIDE();ZNACZKI4^HIDE();ZNACZKI4>SETFRAME("PLAY",0);ZNACZKI3^SETFRAME("PLAY",0);ZNACZKI2^SETFRAME("PLAY",0);ZNACZKI1>SETFRAME("PLAY",0);VAR_CYFRA^SET(0);ENABLEALL^RUN();}
{B_NULL;}
{MENUGLOWNE^SETMINHSPRIORITY(0);POPBKGJEZ^HIDE();BUTHUN^DISABLE();BUTCZE^DISABLE();MENUGLOWNE^RESUME();UFO^SETLANGUAGE("040E");SNDROZDZIAL1^LOAD("$WAVS\HUN\NARRMENU_1.WAV");SNDROZDZIAL2^LOAD("$WAVS\HUN\NARRMENU_2.WAV");SNDROZDZIAL3^LOAD("$WAVS\HUN\NARRMENU_3.WAV");SNDROZDZIAL4^LOAD("$WAVS\HUN\NARRMENU_4.WAV");SNDROZDZIAL5^LOAD("$WAVS\HUN\NARRMENU_5.WAV");SNDROZDZIAL6^LOAD("$WAVS\HUN\NARRMENU_6.WAV");SNDROZDZIAL7^LOAD("$WAVS\HUN\NARRMENU_7.WAV");SNDROZDZIAL8^LOAD("$WAVS\HUN\NARRMENU_8.WAV");SNDKONTYNUACJA^LOAD("$WAVS\HUN\NARRNOWE_4.WAV");SNDRESTART^LOAD("$WAVS\HUN\NARREXTRA_1.WAV");SNDONRESTART^LOAD("$WAVS\HUN\NARREXTRA_2.WAV");SNDTAK^LOAD("$WAVS\HUN\NARREXTRA_3.WAV");SNDNIE^LOAD("$WAVS\HUN\NARREXTRA_4.WAV");SNDNIEWIEM^LOAD("$WAVS\HUN\NARREXTRA_5.WAV");SNDKRET^LOAD("$WAVS\HUN\KRE14_1_1.WAV");SNDHUN^LOAD("$WAVS\HUN\JEZ4.WAV");SNDCZE^LOAD("$WAVS\HUN\JEZ2.WAV");}
{VARITEMP1^SET([$1^GETCLONEINDEX()-1]);VARITEMP2^SET([ARRENEMYPOSY^GET(VARITEMP1)-1]);$1^SETPOSITION([ARRENEMYPOSX^GET(VARITEMP1)*32],[VARITEMP2*32]);$1^ADDBEHAVIOUR("ONFINISHED$INIT","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK0","BEHEMOVEUP");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK1","BEHEMOVERIGHT");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK2","BEHEMOVEDOWN");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK3","BEHEMOVELEFT");$1^ADDBEHAVIOUR("ONFINISHED$WALK0","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK1","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK2","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK3","BEHNEXTMOVE");$1^SETFPS(RANDOM^GET(13,7));$1^PLAY("INIT");$1^SHOW();}
{VARPLAYER^SET($1);VARENDFIELD^SET(VARFIELD);VARITEMP1^SET([ARRPLAYERPOSX^GET($1)*32]);VARITEMP2^SET([ARRPLAYERPOSY^GET($1)-1]);VARITEMP2^MUL(32);UFO^RUN(["ANNPLAYER"+$1],"PLAY","IDLE");}
[THIS^PLAY("PLAY");}
{KRE31_0_1>PLAY();}
[VARROZDZIAL3^SET(1);BEHRESETROZDZIAL3^RUN();PRZYGODA^GOTO( "S31_0_ZIEMIA" );}
{BEH_ASK_PLAY_AGAIN;}
{BEH_SHIP_REPEAT_GAZ;}
{I_X^SET([AOBJ8^GETPOSITIONX()+$2]);I_Y^SET([AOBJ8^GETPOSITIONY()+$3]);UFO^RUN($4,"SET",I_Y);UFO^RUN($1,"SETPOSITION",I_X,I_Y);UFO^RUN($1,"SETFPS",48);UFO^RUN($1,"PLAY","PLAY");}
{GROUPSOUND^ADD("SNDENTRE","SNDKRABIK","SNDSTARTCHOMIK,"SNDKRABIKKABLE","SNDSUCCESS","SNDKRETENTRE1","SNDKRETENTRE2");VARLEVEL4^SET("S42_0_SKLADZIK");VARROZDZIAL4^SET(1);}
{BEHMOLECHFLD;}
{I0^SET([I_LEVEL_WIDTH*I_LEVEL_HEIGHT]);IMG_EMPTY^CLONE(I0);IMGTILEEXIT^CLONE(MAT^GETCELLSNO(IC_FIELD_CODE_EXIT));IMG_WALL_WEAK^CLONE(MAT^GETCELLSNO(IC_FIELD_CODE_WALL_WEAK));IMG_DYNAMITE^CLONE(MAT^GETCELLSNO(IC_FIELD_CODE_DYNAMITE));IMG_STONE^CLONE(MAT^GETCELLSNO(IC_FIELD_CODE_STONE));ANN_ENEMY^CLONE(MAT^GETCELLSNO(IC_FIELD_CODE_ENEMY));I0^SET(MAT^GETCELLSNO(IC_FIELD_CODE_DYNAMITE));I0^ADD(MAT^GETCELLSNO(IC_FIELD_CODE_ENEMY));I0^MUL(9);ANN_EXPLOSION^CLONE(I0);S44_511_PODKOP^RUNCLONES("ANN_ENEMY",-1,-1,"BEHENINITCLONES");S44_511_PODKOP^RUNCLONES("ANN_EXPLOSION",-1,-1,"BEH_EXP_INIT_CLONES");}
{I_LEVEL_WIDTH^SET(20);I_LEVEL_HEIGHT^SET(11);I_LEVEL_FIELDS_NO^SET([I_LEVEL_WIDTH*I_LEVEL_HEIGHT]);I_FIELD_WIDTH^SET(40);I_FIELD_HEIGHT^SET(40);BEH_LEVEL_RESTART_0^RUNC();BEH_LEVEL_RESTART_1^RUNC();BEH_LEVEL_RESTART_2^RUNC();BEH_CLONE^RUNC();BEH_LEVEL_FIELDS_RESTART^RUN();}
{$1^ADDBEHAVIOUR("ONFRAMECHANGED$LEWO","BEHENTICKL");$1^ADDBEHAVIOUR("ONFRAMECHANGED$PRAWO","BEHENTICKR");$1^ADDBEHAVIOUR("ONFRAMECHANGED$GORA","BEHENTICKUP");$1^ADDBEHAVIOUR("ONFRAMECHANGED$DOL","BEHENTICKDN");$1^ADDBEHAVIOUR("ONFINISHED$LEWO","BEHENFIN");$1^ADDBEHAVIOUR("ONFINISHED$PRAWO","BEHENFIN");$1^ADDBEHAVIOUR("ONFINISHED$GORA","BEHENFIN");$1^ADDBEHAVIOUR("ONFINISHED$DOL","BEHENFIN");}
{I_0^SET($1^GETCLONEINDEX());BEHENDEFINEMOVE^RUN();}
{$1^STOP(FALSE);}
{I_FIELD_TEMP^SET([I_FIELD_INDEX*IC_DATA_PER_FIELD]);I_FIELD_CODE^SET(ALF^GET(I_FIELD_TEMP));}
{I_FIELD_TEMP^SET([I_FIELD_INDEX*IC_DATA_PER_FIELD]);I_FIELD_TEMP^ADD(4);I_X^SET(ALF^GET(I_FIELD_TEMP));I_FIELD_TEMP^INC();I_Y^SET(ALF^GET(I_FIELD_TEMP));}
{I_FIELD_TEMP^SET([I_FIELD_INDEX*IC_DATA_PER_FIELD]);I_FIELD_TEMP^ADD(1);I_CLONE_INDEX^SET(ALF^GET(I_FIELD_TEMP));}
{I_FIELD_TEMP^SET([I_FIELD_INDEX*IC_DATA_PER_FIELD]);I_FIELD_TEMP^ADD(3);I_ROW^SET(ALF^GET(I_FIELD_TEMP));}
{S_2^SET([SC_CLONE_EMPTY+[I_FIELD_INDEX+1]]);UFO^RUN(S_2,"SHOW");MAT^SET([I_FIELD_INDEX%I_LEVEL_WIDTH],[I_FIELD_INDEX@I_LEVEL_WIDTH],IC_FIELD_CODE_EMPTY);ARRFLDCLONES^CHANGEAT(I_FIELD_INDEX,[I_FIELD_INDEX+1]);}
{I_0^SET([I_ITERATOR*IC_DATA_PER_DYNAMITES_BURN]);I_1^SET([I_0+1]);I_2^SET(ARR_DYNAMITES_BURN^GET(I_0));I_3^SET(ARR_DYNAMITES_BURN^GET(I_1));ARR_DYNAMITES_BURN_CNT^REMOVEAT(I_ITERATOR);ARR_DYNAMITES_BURN^REMOVEAT(I_0);ARR_DYNAMITES_BURN^REMOVEAT(I_0);I_CLONE_INDEX^SET(ARRFLDCLONES^GET(I_3));S_0^SET([SC_CLONE_DYNAMITE+I_CLONE_INDEX]);UFO^RUN(S_0,"HIDE");MAT^SET(I_3,IC_FIELD_CODE_EMPTY);BEHDYNEXP^RUN();I_ITERATOR^DEC();I_BOUND^DEC();}
{$1^ADDBEHAVIOUR("ONFINISHED$PLAY","BEH_EXP_FINISHED");ARR_EXP^ADD(0);}
{VAR_1^INC();BUTTON$1^SETPRIORITY(VAR_1);}
{B$1^SETPRIORITY(100);}
{B$1^SETPRIORITY(1);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{BEHINITZASLONAX^RUNLOOPED(0,7,1,"[80*$1]");}
{VARTEMP^INC();VARDY^SET($3);VARSTRING^SET(["ANIMOZASLONA_"+VARTEMP]);UFO^RUN(VARSTRING,"SHOW");UFO^RUN(VARSTRING,"SETPOSITION",0,0);UFO^RUN(VARSTRING,"SETFRAME","PLAY",0);UFO^RUN(VARSTRING,"SETPRIORITY",50);UFO^RUN(VARSTRING,"MOVE",[120*$1],VARDY);UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFINISHED$PLAY","BEHZASLONAHIDE");UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFRAMECHANGED$PLAY","BEHZASLONAMOVE");CONDZASLONAHIDE^CHECK(TRUE);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{BEHINITZASLONAX^RUNLOOPED(0,7,1,"[80*$1]");}
{VARTEMP^INC();VARDY^SET($3);VARSTRING^SET(["ANIMOZASLONA_"+VARTEMP]);UFO^RUN(VARSTRING,"SHOW");UFO^RUN(VARSTRING,"SETPOSITION",0,0);UFO^RUN(VARSTRING,"SETFRAME","PLAY",0);UFO^RUN(VARSTRING,"SETPRIORITY",50);UFO^RUN(VARSTRING,"MOVE",[120*$1],VARDY);UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFINISHED$PLAY","BEHZASLONAHIDE");UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFRAMECHANGED$PLAY","BEHZASLONAMOVE");CONDZASLONAHIDE^CHECK(TRUE);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{BEHINITZASLONAX^RUNLOOPED(0,7,1,"[80*$1]");}
{VARTEMP^INC();VARDY^SET($3);VARSTRING^SET(["ANIMOZASLONA_"+VARTEMP]);UFO^RUN(VARSTRING,"SHOW");UFO^RUN(VARSTRING,"SETPOSITION",0,0);UFO^RUN(VARSTRING,"SETFRAME","PLAY",0);UFO^RUN(VARSTRING,"SETPRIORITY",50);UFO^RUN(VARSTRING,"MOVE",[120*$1],VARDY);UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFINISHED$PLAY","BEHZASLONAHIDE");UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFRAMECHANGED$PLAY","BEHZASLONAMOVE");CONDZASLONAHIDE^CHECK(TRUE);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{BEHINITZASLONAX^RUNLOOPED(0,7,1,"[80*$1]");}
{VARTEMP^INC();VARDY^SET($3);VARSTRING^SET(["ANIMOZASLONA_"+VARTEMP]);UFO^RUN(VARSTRING,"SHOW");UFO^RUN(VARSTRING,"SETPOSITION",0,0);UFO^RUN(VARSTRING,"SETFRAME","PLAY",0);UFO^RUN(VARSTRING,"SETPRIORITY",50);UFO^RUN(VARSTRING,"MOVE",[120*$1],VARDY);UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFINISHED$PLAY","BEHZASLONAHIDE");UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFRAMECHANGED$PLAY","BEHZASLONAMOVE");CONDZASLONAHIDE^CHECK(TRUE);}
{I_CONTROL^SET(-1);]
[SND_PYT^STOP();SND_TAK>STOP();SND_NIE^PLAY();}
[I_CONTROL^SET(1);}
[I_CONTROL^SET(1);}
{BUT_TAK>DISABLE();BUT_NIE>DISABLE();IMG_POPUP_BKG>HIDE();BUT_EXIT^ENABLE();BUT_PAUSE^ENABLE();BUT_ENTRY_BREAKER^DISABLE();SEQ_ENTRY^STOP(FALSE);MOUSE^SET( "ACTIVE" );MOUSE^SET( "ARROW" );}
[BUT_EXIT>DISABLEBUTVISIBLE();BUT_PAUSE>DISABLEBUTVISIBLE();IMG_POPUP_BKG^SHOW();BUT_TAK^ENABLE();BUT_NIE>ENABLE();SND_PYT^PLAY();]
{]
[CON_POINTS_LESS_0^CHECK(TRUE);CON_POINTS_GREATER_9999^CHECK(TRUE);I_3^SET( I_POINTS );I_3^DIV( 1000 );ANN_POINTS_1000^SETFRAME( "PLAY", I_3 );I_3^SET( I_POINTS );I_3^MOD( 1000 );I_3^DIV( 100 );ANN_POINTS_0100^SETFRAME( "PLAY", I_3 );I_3>SET( I_POINTS );I_3^MOD( 100 );I_3^DIV( 10 );ANN_POINTS_0010^SETFRAME( "PLAY", I_3 );I_3^SET( I_POINTS );I_3^MOD( 10 );ANN_POINTS_0001^SETFRAME( "PLAY", I_3 );}
[B_0^SET( TRUE );I_1^SET( RANDOM^GET( 100 ) );CON_I1_L_I0>BREAK( TRUE );B_0>SET( FALSE );}
{VARICOUNT^INC();BEHDISABLEBUTTONS^RUN();VARSTEMP1^SET(["WAJHA"+$1]);UFO^RUN(VARSTEMP1,"PLAY","PLAY");}
{B_NULL;}
{B_NULL;}
{S_0^SET(["BUT_"+I_HERO_CURR_BRIDGE]);I_0^SET([I_HERO_CURR_BRIDGE*IC_JNT_DATA_PER_BRIDGE]);I_1^SET(ARR_JOINTS^GET(1));S_1^SET([S_0+"A"]);BEH_HERO_BUT_ENABLE_1^RUNC();I_1^SET(ARR_JOINTS^GET(3));S_1^SET([S_0+"B"]);BEH_HERO_BUT_ENABLE_1^RUNC();}
{S_0^SET(["BUT_"+I_HERO_CURR_BRIDGE]);I_0^SET([I_HERO_CURR_BRIDGE*IC_JNT_DATA_PER_BRIDGE]);I_1^SET(ARR_JOINTS^GET(1));S_1^SET([S_0+"A"]);BEH_HERO_BUT_DISABLE_1^RUNC();I_1^SET(ARR_JOINTS^GET(3));S_1^SET([S_0+"B"]);BEH_HERO_BUT_DISABLE_1^RUNC();}
{VARLEVEL8^SET("S85_SLONCE");ARRCARS^ADD("ANNEGG","ANNLARGE","ANNMID","ANNSMALL");BEHINITFILTER^RUN();ARRDIRX^ADD(0.0,0.0,0.0,0.0);ARRDIRY^ADD(0.0,0.0,0.0,0.0);ARRSPEED^ADD(0.0,0.0,0.0,0.0);ARRPOSX^ADD(0.0,0.0,0.0,0.0);ARRPOSY^ADD(0.0,0.0,0.0,0.0);ARRLASTPOSX^ADD(0.0,0.0,0.0,0.0);ARRLASTPOSY^ADD(0.0,0.0,0.0,0.0);ARRSTARTPOSX^ADD(150.0,290.0,530.0,470.0);ARRSTARTPOSY^ADD(400.0,280.0,360.0,400.0);ARRANGLE^ADD(0.0,0.0,0.0,0.0);ARRTOANGLE^ADD(0.0,0.0,0.0,0.0);ARRASTDIRX^ADD(0.73,0.5,-0.5);ARRASTDIRY^ADD(-0.73,-0.2,0.2);ARRHWIDTH^ADD(15.0,41.5,29.0,20.0);ARRHHEIGHT^ADD(23.0,41.5,29.5,20.0);VARPLAYABLE^SET(1);BEHINITPLAYER^RUN("0");BEHINITPLAYER^RUN("1");BEHINITPLAYER^RUN("2");BEHINITPLAYER^RUN("3");ANNPOWER^SETPOSITION(ARRSTARTPOSX^GET(0),ARRSTARTPOSY^GET(0));SNDNARR1^PLAY();}
{CONDSUN^ONE_BREAK(TRUE);VARITEMP1^SET(ARRCARS^FIND(VARSTEMP1));VNORMAL^ASSIGN([ARRPOSX^GET(VARPLAYER)+ARRHWIDTH^GET(VARPLAYER)],[ARRPOSY^GET(VARPLAYER)+ARRHHEIGHT^GET(VARPLAYER)]);VTEMP1^ASSIGN([ARRPOSX^GET(VARITEMP1)+ARRHWIDTH^GET(VARITEMP1)],[ARRPOSY^GET(VARITEMP1)+ARRHHEIGHT^GET(VARITEMP1)]);VTEMP1^MUL(-1.0);VNORMAL^ADD(VTEMP1);VNORMAL^NORMALIZE();VINCIDENT^ASSIGN(ARRDIRX^GET(VARPLAYER),ARRDIRY^GET(VARPLAYER));VINCIDENT^MUL(-1.0);VINCIDENT^REFLECT(VNORMAL,VREFLECT);ARRDIRX^CHANGEAT(VARITEMP1,ARRDIRX^GET(VARPLAYER));ARRDIRY^CHANGEAT(VARITEMP1,ARRDIRY^GET(VARPLAYER));ARRPOSX^CHANGEAT(VARITEMP1,ARRLASTPOSX^GET(VARITEMP1));ARRPOSY^CHANGEAT(VARITEMP1,ARRLASTPOSY^GET(VARITEMP1));ARRSPEED^CHANGEAT(VARITEMP1,2.0);VARDTEMP2^ARCTANEX(VREFLECT^GET(1),VREFLECT^GET(0));ARRDIRX^CHANGEAT(VARPLAYER,VREFLECT^GET(0));ARRDIRY^CHANGEAT(VARPLAYER,VREFLECT^GET(1));ARRTOANGLE^CHANGEAT(VARPLAYER,VARDTEMP2);ARRANGLE^CHANGEAT(VARPLAYER,VARDTEMP2);BEHPLAYPONG^RUN();}
{ARRDIRY^MULAT(VARPLAYER,-1.0);ARRPOSX^CHANGEAT(VARPLAYER,ARRLASTPOSX^GET(VARPLAYER));ARRPOSY^CHANGEAT(VARPLAYER,ARRLASTPOSY^GET(VARPLAYER));BEHPLAYPONG^RUN();}
{ARRDIRX^MULAT(VARPLAYER,-1.0);ARRPOSX^CHANGEAT(VARPLAYER,ARRLASTPOSX^GET(VARPLAYER));ARRPOSY^CHANGEAT(VARPLAYER,ARRLASTPOSY^GET(VARPLAYER));BEHPLAYPONG^RUN();}
{VARLEVEL6^SET("S66_WYBOR");BTNRED^DISABLEBUTVISIBLE();BTNGREEN^DISABLEBUTVISIBLE();BTNYELLOW^DISABLEBUTVISIBLE();BTNBLUE^DISABLEBUTVISIBLE();ARRLOCALNAMES^ADD("ANNCAR0,"ANNCAR1","ANNCAR2","ANNCAR3");ARRCARNAMES^REMOVEALL();ARRCARNAMES^ADD("1","2","3","4");ARRCARINDICES^REMOVEALL();ARRCARINDICES^ADD(0,1,2,3);BTNZAMEK^DISABLE();UFO^RUN(["BEHINITSCHEME"+VARLEVEL6XX],"RUN");}
{BEHCLICKKRET^RUN();*["BEHCLICKKRET_"+SOBJECT|IDNAME]^RUN();@IF("VARS_GOALREX","_","SOBJECT|IDNAME","BFITMP2","BFITMP3");}
{@IF("SOBJECT|SPARAM1","!_",""NULL"","BFITMP13","");G_SARCADESCENEEXIT^SET(SOBJECT|IDNAME);@IF("SOBJECT|IPARAM2","_","0","BFITMP15","BFITMP16");}
{VARS_REXNAME^SET(SOBJECT|NAME);ANNREX^LOAD(SOBJECT|NAME);BEHREXINIT^RUN();VARD_REXSPEED^SET(SOBJECT|IPARAM0);@IF("VARD_REXSPEED","_","0.0","BFITMP20","");@IF("SOBJECT|SPARAM1","_",""NULL"","BFITMP21","BFITMP22");@IF("SOBJECT|IPARAM1","_","0","BFITMP25","BFITMP26");}
{VARS_KRETNAME^SET(SOBJECT|NAME);ANNKRET^LOAD(SOBJECT|NAME);BEHKRETINIT^RUN();VARD_KRETSPEED^SET(SOBJECT|IPARAM0);@IF("VARD_KRETSPEED","_","0.0","BFITMP27","");VARI_KRETDISTANCEX^SET([VARD_KRETSPEED@5]);VARI_KRETDISTANCEY^SET(VARI_KRETDISTANCEX);@IF("SOBJECT|SPARAM1","_",""NULL"","BFITMP28","BFITMP29");VARB_KRETACTIVE^SET(TRUE);@IF("SOBJECT|IPARAM1","_","0","BFITMP32","BFITMP33");}
{CANVASOBSERVER^SETBACKGROUND(SOBJECT|NAME);VARI_SCENEMAXPRIORITY^SET([SOBJECT|IPARAM1+1]);VARITEMP0INSIDE^SET(SOBJECT|IPARAM0);VARITEMP1INSIDE^SET(SOBJECT|IPARAM1);@IF("VARITEMP0INSIDE'0||VARITEMP1INSIDE'0","BFITMP34","");@IF("SOBJECT|IPARAM2","_","1","BFITMP35","");VARITEMP0INSIDE^SUB(800);VARITEMP1INSIDE^SUB(600);VARITEMP0INSIDE^DIV(2);VARITEMP1INSIDE^DIV(2);VARI_BKGXOFFSET^SET([0-VARITEMP0INSIDE]);VARI_BKGYOFFSET^SET([0-VARITEMP1INSIDE]);VARITEMP0INSIDE^ADD(800);VARITEMP1INSIDE^ADD(600);WPATH^SETBKGSIZE(VARI_BKGXOFFSET,VARITEMP0INSIDE,VARI_BKGYOFFSET,VARITEMP1INSIDE);WPATH^SETREFOBJECT(100);VARITEMP0INSIDE^SUB(800);VARITEMP1INSIDE^SUB(600);WPATH^SETMOVEFLAGS(VARITEMP0INSIDE,VARITEMP1INSIDE);}
{VARSTEMP0INSIDE^SET(["ANNOBJECT"+VARI_TEMPNO]);*VARSTEMP0INSIDE^LOAD(SOBJECT|NAME);*VARSTEMP0INSIDE^PLAY("PLAY");GRPMOVE^ADD(VARSTEMP0INSIDE);@IF("SOBJECT|TYPE","_","2","BFITMP38","BFITMP39");VARSTEMP2INSIDE^SET(*VARSTEMP0INSIDE^GETEVENTNAME(0));VARSTEMP1INSIDE^SET(VARSTEMP2INSIDE);VARITEMP0INSIDE^SET(VARSTEMP1INSIDE^FIND("-"));VARSTEMP1INSIDE^SUB(VARITEMP0INSIDE,[VARSTEMP2INSIDE^LENGTH()-VARITEMP0INSIDE]);VARSTEMP2INSIDE^SUB(0,[VARITEMP0INSIDE+1]);VARITEMP0INSIDE^SET(VARSTEMP1INSIDE);ARRGOTOX^ADD(VARITEMP0INSIDE);VARSTEMP1INSIDE^SET(VARSTEMP2INSIDE);VARITEMP0INSIDE^SET(VARSTEMP1INSIDE^FIND("-"));@IF("VARITEMP0INSIDE",">","-1","BFITMP40","BFITMP41");VARI_TEMPNO^INC();}
{VARSTEMP0INSIDE^SET(VARS_CLICKINVENTORYSELECTOR);ANNSELECT^HIDE();VARS_CURRENTITEMOBJECT^SET([VARSTEMP0INSIDE+"_1"]);*VARSTEMP0INSIDE^SETFRAME("PLAY",1);*VARSTEMP0INSIDE^CLONE(1);*VARS_CURRENTITEMOBJECT^SETPRIORITY(2901);VARSTEMP0INSIDE^SUB(0,7);VARITEMP0INSIDE^SET(VARSTEMP0INSIDE);VARITEMP1INSIDE^SET(0);@LOOP("{VARI_TEMPITER^SET(_I_);DBITEMS^SELECT(VARI_TEMPITER);SITEM^SET("DBITEMS_CURSOR");@IF("SITEM|EMPTY","_","1","BFITMP43","");}",0,10,1);DBITEMS^SELECT(VARITEMP2INSIDE);SITEM^SET("DBITEMS_CURSOR");VARS_CURRENTITEM^SET(SITEM|NAME);@LOOP("{VARI_TEMPITER^SET(_I_);VARSTEMP2INSIDE^SET(["ANNITEM"+VARI_TEMPITER]);*VARSTEMP2INSIDE^SETPRIORITY(2999);}",0,VARI_INVENTORYCOUNT,1);VARI_INVMENUVISIBLE^SET(-1);STL_INVENTORY^PLAY("ELAPSE");ANNSELECT^HIDE();*["BEHUSE_"+VARS_CURRENTITEM]^RUN();}
{@IF("VARI_INVMAINRADIUS'96&&VARI_INVMENUVISIBLE'1","BFITMP83","");BEHINVPLACEITEMS^RUN();VARI_INVMAINRADIUS^ADD([VARI_INVMENUVISIBLE*16]);VARD_INVMENUOPACITY^ADD([42.5*VARI_INVMENUVISIBLE]);@IF("VARI_INVMAINRADIUS","_","0","BFITMP84","");}
{FCOLOR^SETPROPERTY("CANUNDO","TRUE");FCOLOR^SETPROPERTY("CHANNELS","B");__GAME_INIT__^RUN();BEHSETSCENE^RUN();BEHSAVESCENE^RUN();ARRIDLETIME^ADD(0,0);VARI_3DPATHID^SET(9000);VARI_NEXTTRIGGER^SET(-1);VARI_NEXTTRIGGERKRET^SET(-1);VARS_CLICKPLACE^SET(NULL);VARS_CLICKBOTHPLACE^SET(NULL);VARSCURRARCADE^SET(["$COMMON\"+G_SARCADESCENE+"0.DTA"]);VARSCURRITEMS^SET("$COMMON\ITEMS0.DTA");__LOAD_DB__^RUN();__LOAD_ITEMS__^RUN();ANNSELECT^SETANCHOR("CENTER");WPATH^SETGRAVITY(0,0,0);WPATH^SETACTIVE(100,FALSE);WPATH^SETACTIVE(101,FALSE);WPATH^SETVELOCITY(100,0,0,0);WPATH^SETVELOCITY(101,0,0,0);WPATH^SETLIMIT(100,-3000,-3000,0,3000,3000,0);WPATH^SETLIMIT(101,-3000,-3000,0,3000,3000,0);ANNREX^SETPOSITION(400,300);ANNKRET^SETPOSITION(400,300);WPATH^LINK(100,"ANNREX");@IF("VARB_KRETACTIVE","_","TRUE","BFITMP1126","");VARS_ARCADESCENELAST^SET(G_SARCADESCENELAST);G_SARCADESCENELAST^SET(G_SARCADESCENE);BEHINITSCRIPT^RUN();BEHPREINIT^RUN();STL_ARCADE^PLAY("ELAPSE");STL_IDLE^PLAY("ELAPSE");WPATH^START();VARI_TEMPITER^SET(DBOBJECTS^FIND("TYPE",102,0));BEHDBSELECTOBJ^RUN(VARI_TEMPITER);@IF("SOBJECT|IPARAM0","_","0","BFITMP1127","BFITMP1128");BEHPOSTINIT^RUN();}
{VARSTEMP0INSIDE^SET([G_SARCADESCENE+".CNV"]);CNVLOADER^LOAD(VARSTEMP0INSIDE);DBOBJECTS^LOAD(VARSCURRARCADE);VARI_TEMPITER^SET(DBOBJECTS^GETROWSNO());VARI_TEMPNO^SET(0);VARITEMP2INSIDE^SET(0);@LOOP("{VARI_TEMPITER^SET(_I_);DBOBJECTS^SELECT(VARI_TEMPITER);SOBJECT^SET("DBOBJECTS_CURSOR");VARI_OBJECTTYPESELECTOR^SET(SOBJECT|TYPE);}",0,DBOBJECTS^GETROWSNO(),1);VARBTEMP0^SET(FALSE);VARITEMP0INSIDE^SET(ARRSTARTNAME0^FIND(G_SARCADESCENELAST));@IF("VARITEMP0INSIDE","_","-1","BFITMP1130","");VARI_POSREXX^SET(ARRSTART0X^GET(VARITEMP0INSIDE));VARI_POSREXY^SET(ARRSTART0Y^GET(VARITEMP0INSIDE));VARI_POSREXXGOTO^SET(ARRGO0X^GET(VARITEMP0INSIDE));VARI_POSREXYGOTO^SET(ARRGO0Y^GET(VARITEMP0INSIDE));VARI_POSREXXSAVE^SET(VARI_POSREXX);VARI_POSREXYSAVE^SET(VARI_POSREXY);@IF("VARBTEMP0","_","TRUE","BFITMP1131","");VARDTEMP0^SET([VARI_POSREXX+VARI_BKGXOFFSET]);VARDTEMP1^SET([VARI_POSREXY+VARI_BKGYOFFSET]);VARDTEMP0^ADD(0.2);VARDTEMP1^ADD(0.2);WPATH^SETPOSITION(100,VARDTEMP0,VARDTEMP1,0.0);WPATH^FINDPATH(100,VARI_3DPATHID,[VARI_POSREXXGOTO+VARI_BKGXOFFSET],[VARI_POSREXYGOTO+VARI_BKGYOFFSET],0,FALSE);VARBTEMP0^SET(FALSE);@IF("VARB_KRETACTIVE","_","TRUE","BFITMP1135","");DBITEMS^LOAD(VARSCURRITEMS);BEHDBSELECTOBJT^RUN(102);@IF("SOBJECT|IPARAM0","_","0","BFITMP1136","");}
{VARI_INVENTORYCOUNT^SET(0);@LOOP("{VARSTEMP0INSIDE^SET(["ANNITEM"+_I_]);*VARSTEMP0INSIDE^LOAD("TEMPLATE.ANN");*VARSTEMP0INSIDE^HIDE();}",0,10,1);@LOOP("{VARI_TEMPITER^SET(_I_);DBITEMS^SELECT(VARI_TEMPITER);SITEM^SET("DBITEMS_CURSOR");@IF("SITEM|EMPTY","_","1","BFITMP1137","");}",0,10,1);}
{BEHSAVEONMENU^RUN();VARI_TEMPSELECTOR^SET(DBOBJECTS^FIND("TYPE",105,0));DBOBJECTS^SELECT(VARI_TEMPSELECTOR);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("SOBJECT|IDNAME","_",""SAVE"","BFITMP1138","BFITMP1139");VARI_TEMPSELECTOR^SET(DBOBJECTS^FIND("TYPE",106,0));DBOBJECTS^SELECT(VARI_TEMPSELECTOR);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("SOBJECT|IDNAME","_",""SAVE"","BFITMP1140","BFITMP1141");VARI_TEMPSELECTOR^SET(DBOBJECTS^FIND("TYPE",145,0));DBOBJECTS^SELECT(VARI_TEMPSELECTOR);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("SOBJECT|IDNAME","_",""SAVE"","BFITMP1142","BFITMP1143");VARI_TEMPSELECTOR^SET(DBOBJECTS^FIND("TYPE",146,0));DBOBJECTS^SELECT(VARI_TEMPSELECTOR);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("SOBJECT|IDNAME","_",""SAVE"","BFITMP1144","BFITMP1145");}
{@RETURN(VARS_ARCADESCENELAST);}
{@RETURN(VARB_SCENEFIRSTENTER);}
{@RETURN(SOBJECT|IDNAME);}
{@RETURN(SOBJECT|IPARAM0);}
{@RETURN(SOBJECT|IPARAM1);}
{@RETURN(SOBJECT|IPARAM2);}
{@RETURN(DBOBJECTS^GETROWSNO());}
{@RETURN(STEMPOBJ|IPARAM0);}
{@RETURN(STEMPOBJ|IPARAM1);}
{@RETURN(STEMPOBJ|IPARAM2);}
{@RETURN(SOBJECT|TYPE);}
{VARI_TEMPSELECTOR^SET(DBOBJECTS^FIND("IDNAME",$1,0));@IF("VARI_TEMPSELECTOR",">","-1","BFITMP1172","BFITMP1173");@RETURN(VARBTEMP0INSIDE);}
{VARI_TEMPSELECTOR^SET(DBOBJECTS^FIND("TYPE",$1,0));@IF("VARI_TEMPSELECTOR",">","-1","BFITMP1174","BFITMP1175");@RETURN(VARBTEMP0INSIDE);}
{VARI_TEMPSELECTOR^SET(DBTEMPOBJ^FIND("IDNAME",$1,0));@IF("VARI_TEMPSELECTOR",">","-1","BFITMP1176","BFITMP1177");@RETURN(VARBTEMP0INSIDE);}
{VARI_TEMPSELECTOR^SET(DBTEMPOBJ^FIND("TYPE",$1,0));@IF("VARI_TEMPSELECTOR",">","-1","BFITMP1178","BFITMP1179");@RETURN(VARBTEMP0INSIDE);}
{VARITEMP0INSIDE^SET(DBITEMS^FIND("EMPTY",0,0));@IF("VARITEMP0INSIDE",">","-1","BFITMP1184","BFITMP1185");@RETURN(VARBTEMP0INSIDE);}
{VARITEMP0INSIDE^SET(DBITEMS^FIND("NAME",$1,0));@IF("VARITEMP0INSIDE",">","-1","BFITMP1186","BFITMP1187");@RETURN(VARBTEMP0INSIDE);}
{VARITEMP1INSIDE^SET([VARI_INVENTORYCOUNT%2]);VARITEMP0INSIDE^SET([VARI_INVENTORYCOUNT@2]);VARDTEMP2INSIDE^SET(VARITEMP0INSIDE);@IF("VARITEMP1INSIDE","_","0","BFITMP1189","");VARDTEMP2INSIDE^MUL(VARD_INVMENUANGLE);VARDTEMP2INSIDE^ADD(90);@LOOP("{VARI_TEMPITER^SET(_I_);VARD_TEMPANGLE^SET([VARD_INVMENUANGLE*VARI_TEMPITER]);VARD_TEMPANGLE^SUB(VARDTEMP2INSIDE);VARDTEMP0INSIDE^COSINUS(VARD_TEMPANGLE);VARDTEMP1INSIDE^SINUS(VARD_TEMPANGLE);VARITEMP0INSIDE^SET([_I_@10]);VARITEMP0INSIDE^MUL(34);VARITEMP0INSIDE^ADD(VARI_INVMAINRADIUS);VARDTEMP0INSIDE^MUL(VARITEMP0INSIDE);VARDTEMP1INSIDE^MUL(VARITEMP0INSIDE);VARDTEMP0INSIDE^ADD(VARI_INVMENUX);VARDTEMP1INSIDE^ADD(VARI_INVMENUY);VARSTEMP0INSIDE^SET(["ANNITEM"+_I_]);*VARSTEMP0INSIDE^SETPOSITION(VARDTEMP0INSIDE,VARDTEMP1INSIDE);*VARSTEMP0INSIDE^SETOPACITY(VARD_INVMENUOPACITY);*VARSTEMP0INSIDE^SHOW();}",0,VARI_INVENTORYCOUNT,1);}
{VARSTEMP0INSIDE^SET($1);VARITEMP0INSIDE^SET(DBOBJECTS^FIND("IDNAME",VARSTEMP0INSIDE,0));@IF("VARITEMP0INSIDE",">","-1","BFITMP1195","BFITMP1196");@RETURN(VARBTEMP0INSIDE);}
{VARSTEMP0INSIDE^SET($1);VARITEMP0INSIDE^SET(DBOBJECTS^FIND("IDNAME",VARSTEMP0INSIDE,0));@IF("VARITEMP0INSIDE",">","-1","BFITMP1197","BFITMP1198");@RETURN(VARSTEMP0INSIDE);}
{VARSTEMP0INSIDE^SET($1);VARITEMP0INSIDE^SET(DBOBJECTS^FIND("IDNAME",VARSTEMP0INSIDE,0));@IF("VARITEMP0INSIDE",">","-1","BFITMP1199","BFITMP1200");@RETURN(VARSTEMP1INSIDE);}
{VARSTEMP0INSIDE^SET($1);VARITEMP0INSIDE^SET(DBOBJECTS^FIND("IDNAME",VARSTEMP0INSIDE,0));@IF("VARITEMP0INSIDE",">","-1","BFITMP1201","BFITMP1202");@RETURN(VARSTEMP1INSIDE);}
{@IF("VARB_SEQARRPLAYING","_","TRUE","BFITMP1225","BFITMP1226");@RETURN(VARSTEMP0INSIDE);}
{@IF("VARB_SEQARRPLAYING","_","TRUE","BFITMP1227","BFITMP1228");@RETURN(VARBTEMP0INSIDE);}
{VARSTEMP1INSIDE^SET($1);VARBTEMP1INSIDE^SET($2);@IF(VARSTEMP1INSIDE^FIND(".ARR"),"_","-1","BFITMP1236","BFITMP1237");ARRTEMP^REMOVEALL();ARRTEMP^LOAD(VARSTEMP0INSIDE);@IF(ARRTEMP^GETSIZE(),">","0","BFITMP1241","BFITMP1242");@RETURN(VARBTEMP0INSIDE);}
{VARSTEMP1INSIDE^SET($1);VARBTEMP1INSIDE^SET(TRUE);@IF(VARSTEMP1INSIDE^FIND(".ARR"),"_","-1","BFITMP1243","BFITMP1244");ARRTEMP^REMOVEALL();ARRTEMP^LOAD(VARSTEMP0INSIDE);@IF(ARRTEMP^GETSIZE(),">","0","BFITMP1247","BFITMP1248");@RETURN(VARBTEMP0INSIDE);}
{DBITEMS^SELECT(VARITEMP0INSIDE);SITEM^SET("DBITEMS_CURSOR");@IF("SITEM|BASE'G_SARCADESCENE&&SITEM|PARENT>0","BFITMP17","");};
{@IF("SOBJECT|IPARAM1","_","1","BFITMP23","BFITMP24");};
{@IF("SOBJECT|IPARAM1","_","1","BFITMP30","BFITMP31");};
{@IF("SOBJECT|IPARAM0","_","1","BFITMP36","BFITMP37");};
{@LOOP("{VARSTEMP2INSIDE^SET(["ANNITEM"+_I_]);*VARSTEMP2INSIDE^SETPRIORITY(2999);}",0,VARI_INVENTORYCOUNT,1);VARI_INVMENUVISIBLE^SET(-1);STL_INVENTORY^PLAY("ELAPSE");};
{DBITEMS^SELECT(VARITEMP0INSIDE);SITEM^SET("DBITEMS_CURSOR");@IF("SITEM|BASE'G_SARCADESCENE&&SITEM|PARENT>0&&VARB_INVLOCK'FALSE","BFITMP52","BFITMP53");};
{DBOBJECTS^SELECT(VARI_NEXTTRIGGERKRET);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("SOBJECT|TYPE","!_","2","BFITMP69","");};
{DBOBJECTS^SELECT(VARI_NEXTTRIGGER);SOBJECT^SET("DBOBJECTS_CURSOR");@IF("VARS_CURRENTITEM'"NULL"||SOBJECT|TYPE<2","BFITMP72","");};
{@LOOP("{VARSTEMP0INSIDE^SET(["ANNITEM"+_I_]);*VARSTEMP0INSIDE^SETPRIORITY(2998);}",0,VARI_INVENTORYCOUNT,1);STL_INVENTORY^STOP(FALSE);};
{@LOOP("{VARSTEMP0INSIDE^SET(["ANNITEM"+_I_]);*VARSTEMP0INSIDE^HIDE();}",0,VARI_INVENTORYCOUNT,1);STL_INVENTORY^STOP(FALSE);};
{VARITEMP0INSIDE^SET(ARRSTARTNAME0^FIND("NULL"));@MSGBOX("GONZO__SAVELOAD_FAILED");}
{VARITEMP0INSIDE^SET(ARRSTARTNAME1^FIND("NULL"));@MSGBOX("GONZO__SAVELOAD_FAILED");}
{VARSTEMP0INSIDE^SET(["ANNITEM"+VARI_INVENTORYCOUNT]);VARSTEMP1INSIDE^SET(["ITEMS\"+SITEM|NAME+".ANN"]);*VARSTEMP0INSIDE^SETPOSITION(0,0);*VARSTEMP0INSIDE^LOAD(VARSTEMP1INSIDE);*VARSTEMP0INSIDE^SETFRAME("PLAY",0);*VARSTEMP0INSIDE^SETPOSITION(0,0);*VARSTEMP0INSIDE^SETANCHOR("CENTER");*VARSTEMP0INSIDE^SETPRIORITY(2999);*VARSTEMP0INSIDE^HIDE();VARI_INVENTORYCOUNT^INC();}
{@MSGBOX("GONZO__SAVEPOINT_FAILED");}
{@MSGBOX("GONZO__SAVEPOINT_FAILED");}
{@MSGBOX("GONZO__SAVEPOINT_FAILED");}
{@MSGBOX("GONZO__SAVEPOINT_FAILED");}
{VARBTEMP0INSIDE^SET(FALSE);@MSGBOX("GONZO_BEHDBSELECTOBJS__FALSE");}
{VARBTEMP0INSIDE^SET(FALSE);@MSGBOX("GONZO_BEHDBSELECTOBJT__FALSE");}
{VARBTEMP0INSIDE^SET(FALSE);@MSGBOX("GONZO_BEHDBSELECTTEMPOBJS__FALSE");}
{VARBTEMP0INSIDE^SET(FALSE);@MSGBOX("GONZO_BEHDBSELECTTEMPOBJT__FALSE");}
{VARSTEMP0INSIDE^SET("NULL");@MSGBOX("GONZO_BEHOBJGET__FALSE");}
{@MSGBOX("GONZO_BEHOBJGETEVENT__FALSE");VARSTEMP1INSIDE^SET(NULL);}
{@MSGBOX("GONZO_BEHOBJGETFRAME__FALSE");VARSTEMP1INSIDE^SET(NULL);}
{@MSGBOX("GONZO_BEHOBJPLAY__FALSE");VARSTEMP0INSIDE^MSGBOX();}
{@MSGBOX("GONZO_BEHOBJSETBKGMOVE__FALSE");}
{@MSGBOX("GONZO_BEHOBJSETFPS__FALSE");}
{@MSGBOX("GONZO_BEHOBJSETFRAME__FALSE");}
{@MSGBOX("GONZO_BEHOBJSETPOSITION__FALSE");}
{@MSGBOX("GONZO_BEHOBJSETPRIORITY__FALSE");}
{@MSGBOX("GONZO_BEHOBJSHOW__FALSE");}
{VARSTEMP0INSIDE^SET([G_SARCADESCENE+"\"+VARSTEMP1INSIDE+".ARR"]);}
{VARSTEMP0INSIDE^SET([G_SARCADESCENE+"\"+VARSTEMP1INSIDE+".ARR"]);}
{@IF("SOBJECT|IPARAM1","_","0","BFITMP1271","BFITMP1272");};
{WPATH^UNLINK(100);ANNREX^LOAD("REX10.ANN");WPATH^LINK(100,"ANNREX");VARB_MAMPOCHODNIE^SET(FALSE);BEHPATHSETACTIVE^RUN(10,FALSE);BEHOBJSHOW^RUN("T_DZIURA",FALSE);VARITEMP0^SET(BEHDBGETSIZE^RUN());@LOOP("{BEHDBSELECTOBJ^RUN(_I_);VARSTEMP0^SET(BEHDBGETNAME^RUN());@IF(VARSTEMP0^FIND("T_WEJSCIE"),">","-1","BFITMP329","");}",0,VARITEMP0,1);*VARS_KRETCIEMNY^HIDE();};
{BEHDBSELECTOBJS^RUN("GOTO_PRACHOMIK");@IF(BEHDBGETPARAM0^RUN(),"_","0","BFITMP273","");VARITEMP0^SET(BEHDBGETSIZE^RUN());@LOOP("{BEHDBSELECTOBJ^RUN(_I_);VARSTEMP0^SET(BEHDBGETNAME^RUN());@IF(VARSTEMP0^FIND("GOTO_SAMOCHODZIK"),">","-1","BFITMP276","");}",0,VARITEMP0,1);}
{BEHDBSELECTOBJS^RUN("O_KAMYCZEK");BEHDBSETPARAM0^RUN(0);BEHOBJSHOW^RUN("O_KAMYCZEK",FALSE);@IF("VARITEMP0","_","0","BFITMP261","");ARRAYSAVE^ADDAT(28,1);VARITEMP1^SET(0);@LOOP("{@IF(ARRAYSAVE^GET(_I_),"_","4","BFITMP262","");}",29,VARITEMP0,1);@IF("VARITEMP1","<","2","BFITMP265","BFITMP266");ARRAYSAVE^SAVE("$COMMON\KRZEMIENIE0.ARR");BEHSEQARRPLAY^RUN("KAMYCZEK",TRUE);SNDTAKE^PLAY();};
{VARINUMASSEMBLED^SET(0);VARITEMP0^SET(BEHDBGETSIZE^RUN());@LOOP("{BEHDBSELECTOBJ^RUN(_I_);VARSTEMP0^SET(BEHDBGETNAME^RUN());@IF(VARSTEMP0^FIND("GOTO_"),">","-1","BFITMP980","");}",0,VARITEMP0,1);@IF(BEHARCADEISFIRSTENTER^RUN(),"_","TRUE","BFITMP981","");}
{BEHDBSELECTOBJS^RUN("O_KAMYCZEK");BEHDBSETPARAM0^RUN(0);BEHOBJSHOW^RUN("O_KAMYCZEK",FALSE);@IF("VARITEMP0","_","0","BFITMP389","");ARRAYSAVE^ADDAT(28,1);VARITEMP1^SET(0);@LOOP("{@IF(ARRAYSAVE^GET(_I_),"_","4","BFITMP390","");}",29,VARITEMP0,1);@IF("VARITEMP1","<","2","BFITMP393","BFITMP394");ARRAYSAVE^SAVE("$COMMON\KRZEMIENIE0.ARR");BEHSEQARRPLAY^RUN("KAMYCZEK",TRUE);SNDTAKE^PLAY();};
{VARI_TRABASTATERUNNER^SET(6);BEHARCADELOCKSCENE^RUN(TRUE);VARI_TMPPOSREXX^SET(VARI_POSREXX);VARI_TMPPOSREXY^SET(VARI_POSREXY);VARI_TMPPOSKRETX^SET(VARI_POSKRETX);VARI_TMPPOSKRETY^SET(VARI_POSKRETY);BEHLOCKMOVE^RUN(TRUE);WPATH^UNLINK(100);WPATH^UNLINK(101);WPATH^ADDBODY(201,0.4,0.01,0.01,0.6,0.6,2000,1,2,14,14,14);WPATH^SETLIMIT(201,-400,-400,0,1200,800,0);WPATH^LINK(201,VARS_KOKOS);WPATH^SETPOSITION(201,[1420+VARI_BKGXOFFSET],[340+VARI_BKGYOFFSET],0);VARDTEMP0^SET(VARDTEMP0^COSINUS(VARI_TRABAANGLE));VARDTEMP1^SET(VARDTEMP1^SINUS(VARI_TRABAANGLE));VARITEMP0^SET([VARDTEMP0*VARI_TRABAFORCE]);VARITEMP0^SET([0-VARITEMP0]);VARITEMP1^SET([VARDTEMP1*VARI_TRABAFORCE]);WPATH^ADDFORCE(201,VARITEMP0,VARITEMP1,0);WPATH^SETPOSITION(201,[1420+VARI_BKGXOFFSET],[340+VARI_BKGYOFFSET],0);*VARS_KOKOS^SETPOSITION(1000,1000);*VARS_KOKOS^SHOW();WPATH^SETGRAVITY(0,-1000,0);WPATH^SETREFOBJECT(201);STL_ARCADE^SEFFPS(60);FROTATE^UNLINK(VARS_TRABA);*VARS_TRABA^PLAY("POSTRZALE");VARI_TRABASTATESELECTOR^SET(7);}
{BEHDBSELECTOBJS^RUN("O_KAMYCZEK");BEHDBSETPARAM0^RUN(0);BEHOBJSHOW^RUN("O_KAMYCZEK",FALSE);@IF("VARITEMP0","_","0","BFITMP510","");ARRAYSAVE^ADDAT(28,1);VARITEMP1^SET(0);@LOOP("{@IF(ARRAYSAVE^GET(_I_),"_","4","BFITMP511","");}",29,VARITEMP0,1);@IF("VARITEMP1","<","2","BFITMP514","BFITMP515");ARRAYSAVE^SAVE("$COMMON\KRZEMIENIE0.ARR");BEHSEQARRPLAY^RUN("KAMYCZEK",TRUE);SNDTAKE^PLAY();};
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARINUMASSEMBLED^SET(1);VARITEMP0^SET(BEHDBGETSIZE^RUN());@LOOP("{BEHDBSELECTOBJ^RUN(_I_);VARSTEMP0^SET(BEHDBGETNAME^RUN());@IF(VARSTEMP0^FIND("GOTO_"),">","-1","BFITMP141","");}",0,VARITEMP0,1);BEHDBLOADTEMPOBJ^RUN("WARSZTAT");BEHDBSELECTTEMPOBJS^RUN("PROJEKT_CZASOFA");@IF(BEHDBGETTEMPPARAM0^RUN(),"_","3","BFITMP142","");BEHDBSELECTOBJS^RUN("KOGUT");@IF(BEHDBGETPARAM0^RUN(),"_","0","BFITMP143","");BEHDBSELECTOBJS^RUN("M_SOFA");@IF(BEHDBGETPARAM0^RUN(),"_","0","BFITMP144","");@IF(BEHARCADEGETLASTSCENE^RUN(),"_",""CS_DEMONSTRACJA"","BFITMP145","");}
{VARITEMP0^SET(BEHDBGETSIZE^RUN());@LOOP("{BEHDBSELECTOBJ^RUN(_I_);VARSTEMP0^SET(BEHDBGETNAME^RUN());@IF(VARSTEMP0^FIND("GOTO_"),">","-1","BFITMP150","");}",0,VARITEMP0,1);BEHDBSELECTOBJS^RUN("M_SOFA");BEHDBSETPARAM0^RUN(0);BEHDBSELECTOBJS^RUN("O_SOFA");BEHDBSETPARAM0^RUN(1);BEHARCADELOCKSCENE^RUN(FALSE);PRZYGODA^GOTO("CS_DEMONSTRACJA");@BREAK();}
{BEHDBSELECTOBJS^RUN("GOTO_PRACHOMIK");@IF(BEHDBGETPARAM0^RUN(),"_","0","BFITMP531","");VARI_STOS^SET(0);VARITEMP0^SET(BEHDBGETSIZE^RUN());@LOOP("{BEHDBSELECTOBJ^RUN(_I_);VARSTEMP0^SET(BEHDBGETNAME^RUN());@IF(VARSTEMP0^FIND("GOTO_SAMOCHODZIK"),">","-1","BFITMP534","");}",0,VARITEMP0,1);BEHOBJPLAY^RUN("I_STOS",["STATE"+VARI_STOS]);BEHDBSELECTOBJS^RUN("O_KAMYCZEK");@IF(BEHDBGETPARAM0^RUN(),"_","0","BFITMP535","");}
{BEHDBSELECTOBJS^RUN("O_KAMYCZEK");BEHDBSETPARAM0^RUN(0);BEHOBJSHOW^RUN("O_KAMYCZEK",FALSE);@IF("VARITEMP0","_","0","BFITMP557","");ARRAYSAVE^ADDAT(28,1);VARITEMP1^SET(0);@LOOP("{@IF(ARRAYSAVE^GET(_I_),"_","4","BFITMP558","");}",29,VARITEMP0,1);@IF("VARITEMP1","<","2","BFITMP561","BFITMP562");ARRAYSAVE^SAVE("$COMMON\KRZEMIENIE0.ARR");BEHSEQARRPLAY^RUN("KAMYCZEK",TRUE);SNDTAKE^PLAY();};
{VARITEMP0^SET($1);VARBTEMP0^SET(TRUE);@LOOP("{@IF("ARROBRUSSTATE^GET(_I_)!'ARRZASTAWASTATE^GET(VARITEMP0)&&ARROBRUSSTOL^GET(_I_)'VARITEMP0","BFITMP647","");}",0,3,1);@IF("VARBTEMP0","_","TRUE","BFITMP648","");@RETURN(VARBTEMP0);}
{VARITEMP0^SET($1);VARSTEMP0^SET(["I_OBRUS"+VARITEMP0]);BEHDBSELECTOBJS^RUN(VARSTEMP0);VARITEMP1^SET(BEHDBGETPARAM0^RUN());VARITEMP2^SET(BEHDBGETPARAM1^RUN());VARITEMP3^SET(BEHDBGETPARAM2^RUN());ARROBRUSSTATE^CHANGEAT(VARITEMP0,VARITEMP1);ARROBRUSSTOL^CHANGEAT(VARITEMP0,VARITEMP2);ARROBRUSDIR^CHANGEAT(VARITEMP0,VARITEMP3);VARITEMP3^SET([10*VARITEMP2+511]);BEHOBJSETPRIORITY^RUN(VARS_OBRUSACTMOVE,VARITEMP3);VARSTEMP1^SET("STATE");VARSTEMP1^ADD(VARITEMP2);VARSTEMP1^ADD(ARRSTOLSTATE^GET(VARITEMP2));VARSTEMP1^ADD(VARITEMP1);BEHOBJPLAY^RUN(VARSTEMP0,VARSTEMP1);}
{VARITEMP1^SET(ARRZASTAWASTATE^GET(VARITEMP0));VARITEMP1^INC();VARITEMP1^MOD(2);ARROBRUSSTOL^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP0);ARROBRUSSTATE^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP1);BEHDBSELECTOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETPARAM0^RUN(VARITEMP1);BEHDBSETPARAM1^RUN(VARITEMP0);BEHDBLOADTEMPOBJ^RUN("NADROZA");BEHDBSELECTTEMPOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETTEMPPARAM0^RUN(VARITEMP1);BEHDBSETTEMPPARAM1^RUN(VARITEMP0);VARSTEMP1^SET("STATE");VARSTEMP1^ADD(VARITEMP0);VARSTEMP1^ADD(ARRSTOLSTATE^GET(VARITEMP0));VARSTEMP1^ADD(VARITEMP1);VARITEMP2^SET([10*VARITEMP0+511]);BEHOBJSETPRIORITY^RUN(VARS_OBRUSACTMOVE,VARITEMP2);BEHOBJPLAY^RUN(VARS_OBRUSACTMOVE,VARSTEMP1);}
{VARITEMP1^SET(ARRZASTAWASTATE^GET(VARITEMP0));VARITEMP1^INC();VARITEMP1^MOD(2);ARROBRUSSTOL^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP0);ARROBRUSSTATE^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP1);BEHDBSELECTOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETPARAM0^RUN(VARITEMP1);BEHDBSETPARAM1^RUN(VARITEMP0);BEHDBLOADTEMPOBJ^RUN("NADROZA");BEHDBSELECTTEMPOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETTEMPPARAM0^RUN(VARITEMP1);BEHDBSETTEMPPARAM1^RUN(VARITEMP0);VARSTEMP1^SET("STATE");VARSTEMP1^ADD(VARITEMP0);VARSTEMP1^ADD(ARRSTOLSTATE^GET(VARITEMP0));VARSTEMP1^ADD(VARITEMP1);VARITEMP2^SET([10*VARITEMP0+511]);BEHOBJSETPRIORITY^RUN(VARS_OBRUSACTMOVE,VARITEMP2);BEHOBJPLAY^RUN(VARS_OBRUSACTMOVE,VARSTEMP1);}
{VARITEMP1^SET(ARRZASTAWASTATE^GET(VARITEMP0));VARITEMP1^INC();VARITEMP1^MOD(2);ARROBRUSSTOL^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP0);ARROBRUSSTATE^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP1);BEHDBSELECTOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETPARAM0^RUN(VARITEMP1);BEHDBSETPARAM1^RUN(VARITEMP0);BEHDBLOADTEMPOBJ^RUN("NADROZA");BEHDBSELECTTEMPOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETTEMPPARAM0^RUN(VARITEMP1);BEHDBSETTEMPPARAM1^RUN(VARITEMP0);VARSTEMP1^SET("STATE");VARSTEMP1^ADD(VARITEMP0);VARSTEMP1^ADD(ARRSTOLSTATE^GET(VARITEMP0));VARSTEMP1^ADD(VARITEMP1);VARITEMP2^SET([10*VARITEMP0+511]);BEHOBJSETPRIORITY^RUN(VARS_OBRUSACTMOVE,VARITEMP2);BEHOBJPLAY^RUN(VARS_OBRUSACTMOVE,VARSTEMP1);}
{VARITEMP1^SET(ARRZASTAWASTATE^GET(VARITEMP0));VARITEMP1^INC();VARITEMP1^MOD(2);ARROBRUSSTOL^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP0);ARROBRUSSTATE^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP1);BEHDBSELECTOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETPARAM0^RUN(VARITEMP1);BEHDBSETPARAM1^RUN(VARITEMP0);BEHDBLOADTEMPOBJ^RUN("NADROZA");BEHDBSELECTTEMPOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETTEMPPARAM0^RUN(VARITEMP1);BEHDBSETTEMPPARAM1^RUN(VARITEMP0);VARSTEMP1^SET("STATE");VARSTEMP1^ADD(VARITEMP0);VARSTEMP1^ADD(ARRSTOLSTATE^GET(VARITEMP0));VARSTEMP1^ADD(VARITEMP1);VARITEMP2^SET([10*VARITEMP0+511]);BEHOBJSETPRIORITY^RUN(VARS_OBRUSACTMOVE,VARITEMP2);BEHOBJPLAY^RUN(VARS_OBRUSACTMOVE,VARSTEMP1);}
{VARITEMP0^SET($1);VARBTEMP0^SET(TRUE);@LOOP("{@IF("ARROBRUSSTATE^GET(_I_)!'ARRZASTAWASTATE^GET(VARITEMP0)&&ARROBRUSSTOL^GET(_I_)'VARITEMP0","BFITMP664","");}",0,3,1);@IF("VARBTEMP0","_","TRUE","BFITMP665","");@RETURN(VARBTEMP0);}
{VARITEMP0^SET($1);VARSTEMP0^SET(["I_OBRUS"+VARITEMP0]);BEHDBSELECTOBJS^RUN(VARSTEMP0);VARITEMP1^SET(BEHDBGETPARAM0^RUN());VARITEMP2^SET(BEHDBGETPARAM1^RUN());VARITEMP3^SET(BEHDBGETPARAM2^RUN());ARROBRUSSTATE^CHANGEAT(VARITEMP0,VARITEMP1);ARROBRUSSTOL^CHANGEAT(VARITEMP0,VARITEMP2);ARROBRUSDIR^CHANGEAT(VARITEMP0,VARITEMP3);VARITEMP3^SET([10*VARITEMP2+511]);BEHOBJSETPRIORITY^RUN(VARSTEMP0,VARITEMP3);VARSTEMP1^SET("STATE");VARSTEMP1^ADD(VARITEMP2);VARSTEMP1^ADD(ARRSTOLSTATE^GET(VARITEMP2));VARSTEMP1^ADD(VARITEMP1);BEHOBJPLAY^RUN(VARSTEMP0,VARSTEMP1);}
{VARB_OBRUSCHANGED^SET(TRUE);VARITEMP1^SET(ARRZASTAWASTATE^GET(VARITEMP0));VARITEMP1^INC();VARITEMP1^MOD(2);ARROBRUSSTOL^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP0);ARROBRUSSTATE^CHANGEAT(VARI_OBRUSACTMOVE,VARITEMP1);BEHDBSELECTOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETPARAM0^RUN(VARITEMP1);BEHDBSETPARAM1^RUN(VARITEMP0);BEHDBLOADTEMPOBJ^RUN("NADROZA");BEHDBSELECTTEMPOBJS^RUN(VARS_OBRUSACTMOVE);BEHDBSETTEMPPARAM0^RUN(VARITEMP1);BEHDBSETTEMPPARAM1^RUN(VARITEMP0);VARSTEMP1^SET("STATE");VARSTEMP1^ADD(VARITEMP0);VARSTEMP1^ADD(ARRSTOLSTATE^GET(VARITEMP0));VARSTEMP1^ADD(VARITEMP1);VARITEMP2^SET([10*VARITEMP0+511]);BEHOBJSETPRIORITY^RUN(VARS_OBRUSACTMOVE,VARITEMP2);BEHOBJPLAY^RUN(VARS_OBRUSACTMOVE,VARSTEMP1);}
{@MSGBOX("POM");}
{@MSGBOX("OK");@IF("VARB_POMINKOTWARTY","_","TRUE","BFITMP743","");}
{@MSGBOX("OK");BEHSEQARRSETDIR^RUN("LU");BEHSEQARRPLAY^RUN("POSTAC4_HERB",TRUE);}
{BEHDBSELECTOBJS^RUN("M_TARGET");@IF(BEHDBGETPARAM0^RUN(),"_","0","BFITMP183","");@IF(BEHARCADEGETLASTSCENE^RUN(),"_",""CS_ODKRYCIELEJA"","BFITMP185","");BEHDBSELECTOBJS^RUN("M_WODA");@IF(BEHDBGETPARAM0^RUN(),"_","0","BFITMP186","BFITMP187");VARINUMASSEMBLED^SET(0);VARITEMP0^SET(BEHDBGETSIZE^RUN());@LOOP("{BEHDBSELECTOBJ^RUN(_I_);VARSTEMP0^SET(BEHDBGETNAME^RUN());@IF(VARSTEMP0^FIND("GOTO_"),">","-1","BFITMP190","");@IF(VARSTEMP0^FIND("_IS_"),">","-1","BFITMP191","");}",0,VARITEMP0,1);VARSAVENAME^SET("$COMMON\NUREK0.ARR");ARRAYSAVE^LOAD(VARSAVENAME);@IF(ARRAYSAVE^GETSIZE(),"_","0","BFITMP192","");@LOOP("{VARSTEMP0^SET(ARRAYSAVE^GET(_I_));BEHDBSELECTOBJS^RUN(VARSTEMP0);@IF(BEHDBGETPARAM0^RUN(),"_","1","BFITMP194","");}",0,14,1);}
{@IF("VARITEMP0","_","0","BFITMP319","");ARRAYSAVE^ADDAT(28,1);VARITEMP1^SET(0);@LOOP("{@IF(ARRAYSAVE^GET(_I_),"_","4","BFITMP320","");}",29,VARITEMP0,1);@IF("VARITEMP1","<","2","BFITMP323","BFITMP324");};
{G_SARCADESCENE^SET("FUTUMAIN");@MSGBOX("HANGAR_ROZNY_ZWROT_PUSTA");G_SARCADESCENELAST^SET("LABIRYNTY");G_SARCADESCENE^MSGBOX();G_SARCADESCENELAST^MSGBOX();PRZYGODA^GOTO("ARCADE");@BREAK();}
{G_SARCADESCENE^SET("FUTUMAIN");@MSGBOX("HANGAR_ROZNY_ZWROT");G_SARCADESCENELAST^SET("LABIRYNTY");G_SARCADESCENE^MSGBOX();G_SARCADESCENELAST^MSGBOX();PRZYGODA^GOTO("ARCADE");@BREAK();}
{G_SARCADESCENE^SET("FUTUMAIN");@MSGBOX("HANGAR_ROZNY_ZWROT_WROTKA");G_SARCADESCENELAST^SET("LABIRYNTY_WROTKA");G_SARCADESCENE^MSGBOX();G_SARCADESCENELAST^MSGBOX();PRZYGODA^GOTO("ARCADE");@BREAK();}
{G_SARCADESCENE^SET("FUTUMAIN");@MSGBOX("HANGAR_ROZNY_ZWROT_PUSTA");G_SARCADESCENELAST^SET("LABIRYNTY");G_SARCADESCENE^MSGBOX();G_SARCADESCENELAST^MSGBOX();PRZYGODA^GOTO("ARCADE");@BREAK();}
{G_SARCADESCENE^SET("FUTUMAIN");@MSGBOX("HANGAR_ROZNY_ZWROT");G_SARCADESCENELAST^SET("LABIRYNTY");G_SARCADESCENE^MSGBOX();G_SARCADESCENELAST^MSGBOX();PRZYGODA^GOTO("ARCADE");@BREAK();}
{G_SARCADESCENE^SET("FUTUMAIN");@MSGBOX("HANGAR_ROZNY_ZWROT_WROTKA");G_SARCADESCENELAST^SET("LABIRYNTY_WROTKA");G_SARCADESCENE^MSGBOX();G_SARCADESCENELAST^MSGBOX();PRZYGODA^GOTO("ARCADE");@BREAK();}
{IMOVEDIR^SET([[3*IDELTAX]-IDELTAY-7]);I1^SET([IPOSX+IDELTAX]);I2^SET([IPOSY+IDELTAY]);SMOVEMASKOBS^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,1,1,FALSE));@IF("SMOVEMASKOBS","_","NULL","BFITMP35","");@IF("I1'IPRVX&&I2'IPRVY","BFITMP36","");@IF("SMOVEMASKOBS!'NULL&&BCANMOVE'TRUE","BFITMP37","");IPRVX^SET(IPOSX);IPRVY^SET(IPOSY);}
{@MSGBOX("EXIT");}
{@MSGBOX("SUKCES!");}
{IMOVEDIR^SET([[3*IDELTAX]-IDELTAY-7]);I1^SET([IPOSX+IDELTAX]);I2^SET([IPOSY+IDELTAY]);SMOVEMASKOBS^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,1,1,FALSE));@IF("SMOVEMASKOBS","_","NULL","BFITMP39","");@IF("I1'IPRVX&&I2'IPRVY","BFITMP40","");@IF("SMOVEMASKOBS!'NULL&&BCANMOVE'TRUE","BFITMP41","");IPRVX^SET(IPOSX);IPRVY^SET(IPOSY);}
{IMOVEDIR^SET([[3*IDELTAX]-IDELTAY-7]);I1^SET([IPOSX+IDELTAX]);I2^SET([IPOSY+IDELTAY]);SMOVEMASKOBS^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,1,1,FALSE));@IF("SMOVEMASKOBS","_","NULL","BFITMP38","");@IF("I1'IPRVX&&I2'IPRVY","BFITMP39","");@IF("SMOVEMASKOBS!'NULL&&BCANMOVE'TRUE","BFITMP40","");IPRVX^SET(IPOSX);IPRVY^SET(IPOSY);}
{BEHSETSCENE^RUN();BEHSAVESCENE^RUN();@IF("G_SARCADESCENE","!_",""KRZEMIENIE"","BFITMP13","");G_SARCADESCENE^SET("KRZEMIENIE");VARSAVENAME^SET("$COMMON\KRZEMIENIE0.ARR");ARRKRZEMIENIE^LOAD(VARSAVENAME);@IF(ARRKRZEMIENIE^GETSIZE(),"_","0","BFITMP14","");@LOOP("{ARRKAMGRAFA^ADD(ARRKRZEMIENIE^GET(_I_));}",0,12,1);@LOOP("{ARRKAMWSP^ADD(ARRKRZEMIENIE^GET(_I_));}",12,16,1);IILOSCKAMIENI^SET(ARRKRZEMIENIE^GET(28));ISTONECONTER^SET(IILOSCKAMIENI);@LOOP("{ARRKAMSTAN^ADD(ARRKRZEMIENIE^GET(_I_));}",29,IILOSCKAMIENI,1);I3^SET(1);ANNKAMIENIE^CLONE(IILOSCKAMIENI);@LOOP("{S1^SET(["ANNKAMIENIE_"+[_I_+1]]);*S1^SETFRAME(ARRKAMGRAFA^GET(_I_),[ARRKAMSTAN^GET(_I_)@2]);@IF("ARRKAMWSP^GET([2*_I_])'0&&ARRKAMWSP^GET([[2*_I_]+1])'0","BFITMP15","BFITMP16");*S1^SHOW();@IF([ARRKAMSTAN^GET(_I_)%2],"_","0","BFITMP17","");}",0,IILOSCKAMIENI,1);@IF("IILOSCKAMIENI","_","0","BFITMP18","BFITMP19");}
{@LOOP("{S1^SET(["ANNKAMIENIE_"+[_I_+1]]);@IF(ARRKAMSTAN^GET(_I_),">","-1","BFITMP37","");}",0,IILOSCKAMIENI,1);I1^SET(0);I2^SET(ARRKAMSTAN^GETSIZE());@WHILE("I1","<","I2","{@IF(ARRKAMSTAN^GET(I1),"<","0","BFITMP38","BFITMP39");}");ARRKRZEMIENIE^REMOVEALL();@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMGRAFA^GET(_I_));}",0,12,1);@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMWSP^GET(_I_));}",0,16,1);ARRKRZEMIENIE^ADD(IILOSCKAMIENI);@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMSTAN^GET(_I_));}",0,IILOSCKAMIENI,1);G_SARCADESCENE^SET(G_SARCADESCENELAST);@IF("VARB_SUKCES","_","TRUE","BFITMP40","BFITMP41");ARRKRZEMIENIE^SAVE(VARSAVENAME);PRZYGODA^GOTO("ARCADE");}
{I1^SET([_I_*2]);I2^SET([[_I_*2]+1]);ARRKAMWSP^CHANGEAT(I1,*S1^GETPOSITIONX());ARRKAMWSP^CHANGEAT(I2,*S1^GETPOSITIONY());}
{ARRKAMSTAN^REMOVEAT(I1);ARRKAMGRAFA^ADD(ARRKAMGRAFA^GET(I1));ARRKAMGRAFA^REMOVEAT(I1);ARRKAMWSP^ADD(0,0);ARRKAMWSP^REMOVEAT([I1*2]);ARRKAMWSP^REMOVEAT([I1*2]);IILOSCKAMIENI^DEC();I2^DEC();}
{BEHSETSCENE^RUN();BEHSAVESCENE^RUN();@IF("G_SARCADESCENE","!_",""KRZEMIENIE"","BFITMP13","");G_SARCADESCENE^SET("KRZEMIENIE");VARSAVENAME^SET("$COMMON\KRZEMIENIE0.ARR");ARRKRZEMIENIE^LOAD(VARSAVENAME);@IF(ARRKRZEMIENIE^GETSIZE(),"_","0","BFITMP14","");@LOOP("{ARRKAMGRAFA^ADD(ARRKRZEMIENIE^GET(_I_));}",0,12,1);@LOOP("{ARRKAMWSP^ADD(ARRKRZEMIENIE^GET(_I_));}",12,16,1);IILOSCKAMIENI^SET(ARRKRZEMIENIE^GET(28));ISTONECONTER^SET(IILOSCKAMIENI);@LOOP("{ARRKAMSTAN^ADD(ARRKRZEMIENIE^GET(_I_));}",29,IILOSCKAMIENI,1);I3^SET(1);ANNKAMIENIE^CLONE(IILOSCKAMIENI);@LOOP("{S1^SET(["ANNKAMIENIE_"+[_I_+1]]);*S1^SETFRAME(ARRKAMGRAFA^GET(_I_),[ARRKAMSTAN^GET(_I_)@2]);@IF("ARRKAMWSP^GET([2*_I_])'0&&ARRKAMWSP^GET([[2*_I_]+1])'0","BFITMP15","BFITMP16");*S1^SHOW();@IF([ARRKAMSTAN^GET(_I_)%2],"_","0","BFITMP17","");}",0,IILOSCKAMIENI,1);@IF("IILOSCKAMIENI","_","0","BFITMP18","BFITMP19");}
{@LOOP("{S1^SET(["ANNKAMIENIE_"+[_I_+1]]);@IF(ARRKAMSTAN^GET(_I_),">","-1","BFITMP37","");}",0,IILOSCKAMIENI,1);I1^SET(0);I2^SET(ARRKAMSTAN^GETSIZE());@WHILE("I1","<","I2","{@IF(ARRKAMSTAN^GET(I1),"<","0","BFITMP38","BFITMP39");}");ARRKRZEMIENIE^REMOVEALL();@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMGRAFA^GET(_I_));}",0,12,1);@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMWSP^GET(_I_));}",0,16,1);ARRKRZEMIENIE^ADD(IILOSCKAMIENI);@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMSTAN^GET(_I_));}",0,IILOSCKAMIENI,1);G_SARCADESCENE^SET(VARS_OSTATNIASCENA);@IF("VARB_SUKCES","_","TRUE","BFITMP40","BFITMP41");ARRKRZEMIENIE^SAVE(VARSAVENAME);PRZYGODA^GOTO("ARCADE");}
{I1^SET([_I_*2]);I2^SET([[_I_*2]+1]);ARRKAMWSP^CHANGEAT(I1,*S1^GETPOSITIONX());ARRKAMWSP^CHANGEAT(I2,*S1^GETPOSITIONY());}
{ARRKAMSTAN^REMOVEAT(I1);ARRKAMGRAFA^ADD(ARRKAMGRAFA^GET(I1));ARRKAMGRAFA^REMOVEAT(I1);ARRKAMWSP^ADD(0,0);ARRKAMWSP^REMOVEAT([I1*2]);ARRKAMWSP^REMOVEAT([I1*2]);IILOSCKAMIENI^DEC();I2^DEC();}
{BEHSETSCENE^RUN();BEHSAVESCENE^RUN();@IF("G_SARCADESCENE","!_",""KRZEMIENIE"","BFITMP11","");G_SARCADESCENE^SET("KRZEMIENIE");VARSAVENAME^SET("$COMMON\KRZEMIENIE0.ARR");ARRKRZEMIENIE^LOAD(VARSAVENAME);@IF(ARRKRZEMIENIE^GETSIZE(),"_","0","BFITMP12","");@LOOP("{ARRKAMGRAFA^ADD(ARRKRZEMIENIE^GET(_I_));}",0,12,1);@LOOP("{ARRKAMWSP^ADD(ARRKRZEMIENIE^GET(_I_));}",12,16,1);IILOSCKAMIENI^SET(ARRKRZEMIENIE^GET(28));ISTONECONTER^SET(IILOSCKAMIENI);@LOOP("{ARRKAMSTAN^ADD(ARRKRZEMIENIE^GET(_I_));}",29,IILOSCKAMIENI,1);I3^SET(1);ANNKAMIENIE^CLONE(IILOSCKAMIENI);@LOOP("{S1^SET(["ANNKAMIENIE_"+[_I_+1]]);*S1^SETFRAME(ARRKAMGRAFA^GET(_I_),[ARRKAMSTAN^GET(_I_)@2]);@IF("ARRKAMWSP^GET([2*_I_])'0&&ARRKAMWSP^GET([[2*_I_]+1])'0","BFITMP13","BFITMP14");*S1^SHOW();@IF([ARRKAMSTAN^GET(_I_)%2],"_","0","BFITMP15","");}",0,IILOSCKAMIENI,1);@IF("IILOSCKAMIENI","_","0","BFITMP16","BFITMP17");}
{@LOOP("{S1^SET(["ANNKAMIENIE_"+[_I_+1]]);@IF(ARRKAMSTAN^GET(_I_),">","-1","BFITMP35","");}",0,IILOSCKAMIENI,1);I1^SET(0);I2^SET(ARRKAMSTAN^GETSIZE());@WHILE("I1","<","I2","{@IF(ARRKAMSTAN^GET(I1),"<","0","BFITMP36","BFITMP37");}");ARRKRZEMIENIE^REMOVEALL();@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMGRAFA^GET(_I_));}",0,12,1);@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMWSP^GET(_I_));}",0,16,1);ARRKRZEMIENIE^ADD(IILOSCKAMIENI);@LOOP("{ARRKRZEMIENIE^ADD(ARRKAMSTAN^GET(_I_));}",0,IILOSCKAMIENI,1);G_SARCADESCENE^SET(VARS_OSTATNIASCENA);@IF("VARB_SUKCES","_","TRUE","BFITMP38","BFITMP39");ARRKRZEMIENIE^SAVE(VARSAVENAME);PRZYGODA^GOTO("ARCADE");}
{I1^SET([_I_*2]);I2^SET([[_I_*2]+1]);ARRKAMWSP^CHANGEAT(I1,*S1^GETPOSITIONX());ARRKAMWSP^CHANGEAT(I2,*S1^GETPOSITIONY());}
{ARRKAMSTAN^REMOVEAT(I1);ARRKAMGRAFA^ADD(ARRKAMGRAFA^GET(I1));ARRKAMGRAFA^REMOVEAT(I1);ARRKAMWSP^ADD(0,0);ARRKAMWSP^REMOVEAT([I1*2]);ARRKAMWSP^REMOVEAT([I1*2]);IILOSCKAMIENI^DEC();I2^DEC();}
{CANVASOBSERVER^SETBACKGROUND("BKG3.IMG");IMGMASK^LOAD("MASK3.IMG");IMGMASK^HIDE();ANNPLAYER0^LOAD("PLAYER0_POCH.ANN");ANNPLAYER1^LOAD("PLAYER1_POCH.ANN");BEHPLAYERS^RUN();ANNBTN^LOAD("LEVEL1\BTN.ANN");ANNBTNMASK^LOAD("LEVEL1\BTNMASK.ANN");ANNBTNGRAPH^LOAD("LEVEL1\BTNGRAPH.ANN");ANNSWITCH^LOAD("LEVEL1\SWITCH.ANN");ANNSWITCHMASK^LOAD("LEVEL1\SWITCHMASK.ANN");ANNSWITCHGRAPH^LOAD("LEVEL1\SWITCHGRAPH.ANN");ANNSKRZYNIE^LOAD("LEVEL1\SKRZYNIE.ANN");ANNSKRZYNIEMASK^LOAD("LEVEL1\SKRZYNIE_MASK.ANN");ANNMENU^LOAD("MENU1.ANN");ANNMENUKEY^LOAD("PANPLAY1.ANN");ANNKLUCZYK^PLAY("PLAY");SEQLAB1^PLAY("WSTEP");}
{ARRAYPLAYERSSTARTX^ADD(18,18);ARRAYPLAYERSSTARTY^ADD(12,13);ARRAYPLAYERS^ADD("ANNPLAYER0","ANNPLAYER1");ANNENEMY1^LOAD("LIS1.ANN");ANNENEMY1PATH^LOAD("LEVEL1\ENEMY1_PATH.ANN");ANNENEMY1FIELD^LOAD("LEVEL1\ENEMY1_FIELD.ANN");ANNENEMY1MASK^LOAD("LEVEL1\ENEMY1_MASK.ANN");ANNENEMY1MMASK^LOAD("LEVEL1\ENEMY1_MMASK.ANN");ANNENEMY1MMASK^PLAY("UP");ARRAYENEMY1STARTX^ADD(12,9);ARRAYENEMY1STARTY^ADD(4,12);VARENEMYNAME^SET("ANNENEMY1");VARENEMYSTATE^SET("ARRAYENEMY1STATE");VARARRAYNAME^SET("ARRAYENEMY1");BEHINITENEMY^RUN();}
{CANVASOBSERVER^SETBACKGROUND("BKG4.IMG");IMGMASK^LOAD("MASK4.IMG");IMGMASK^HIDE();ANNPLAYER0^LOAD("PLAYER0_POCH.ANN");ANNPLAYER1^LOAD("PLAYER1_POCH.ANN");BEHPLAYERS^RUN();ANNBTN^LOAD("LEVEL2\BTN.ANN");ANNBTNMASK^LOAD("LEVEL2\BTNMASK.ANN");ANNBTNGRAPH^LOAD("LEVEL2\BTNGRAPH.ANN");ANNSWITCH^LOAD("LEVEL2\SWITCH.ANN");ANNSWITCHMASK^LOAD("LEVEL2\SWITCHMASK.ANN");ANNSWITCHGRAPH^LOAD("LEVEL2\SWITCHGRAPH.ANN");ANNSKRZYNIE^LOAD("LEVEL2\SKRZYNIE.ANN");ANNSKRZYNIEMASK^LOAD("LEVEL2\SKRZYNIE_MASK.ANN");ANNMENU^LOAD("MENU1.ANN");ANNMENUKEY^LOAD("PANPLAY1.ANN");ANNREXZYCIA^LOAD("REXZYCIA1.ANN");ANNKRETZYCIA^LOAD("KRETZYCIA1.ANN");ANNKLUCZYK^PLAY("PLAY");}
{ARRAYPLAYERSSTARTX^ADD(1,1);ARRAYPLAYERSSTARTY^ADD(12,13);ARRAYPLAYERS^ADD("ANNPLAYER0","ANNPLAYER1");ANNENEMY0^LOAD("BAZYL.ANN");ANNENEMY0PATH^LOAD("LEVEL2\ENEMY0_PATH.ANN");ANNENEMY0FIELD^LOAD("LEVEL2\ENEMY0_FIELD.ANN");ANNENEMY0MASK^LOAD("LEVEL2\ENEMY0_MASK.ANN");ANNENEMY0MMASK^LOAD("LEVEL2\ENEMY0_MMASK.ANN");ANNENEMY0MMASK^PLAY("UP");ARRAYENEMY0STARTX^ADD(4);ARRAYENEMY0STARTY^ADD(11);VARENEMYNAME^SET("ANNENEMY0");VARENEMYSTATE^SET("ARRAYENEMY0STATE");VARARRAYNAME^SET("ARRAYENEMY0");BEHINITENEMY^RUN();ANNENEMY1^LOAD("PAJAK.ANN");ANNENEMY1PATH^LOAD("LEVEL2\ENEMY1_PATH.ANN");ANNENEMY1FIELD^LOAD("LEVEL2\ENEMY1_FIELD.ANN");ANNENEMY1MASK^LOAD("LEVEL2\ENEMY1_MASK.ANN");ANNENEMY1MMASK^LOAD("LEVEL2\ENEMY1_MMASK.ANN");ANNENEMY1MMASK^PLAY("UP");ARRAYENEMY1STARTX^ADD(7,11,14);ARRAYENEMY1STARTY^ADD(7,5,7);VARENEMYNAME^SET("ANNENEMY1");VARENEMYSTATE^SET("ARRAYENEMY1STATE");VARARRAYNAME^SET("ARRAYENEMY1");BEHINITENEMY^RUN();}
{@IF("G_SARCADESCENELAST","_",""FUTUMAIN"","BFITMP92","BFITMP93");CANVASOBSERVER^SETBACKGROUND("BKG5.IMG");IMGMASK^LOAD("MASK5.IMG");IMGMASK^HIDE();BEHPLAYERS^RUN();ANNBTN^LOAD("LEVEL3\BTN.ANN");ANNBTNMASK^LOAD("LEVEL3\BTNMASK.ANN");ANNBTNGRAPH^LOAD("LEVEL3\BTNGRAPH.ANN");ANNSWITCH^LOAD("LEVEL3\SWITCH.ANN");ANNSWITCHMASK^LOAD("LEVEL3\SWITCHMASK.ANN");ANNSWITCHGRAPH^LOAD("LEVEL3\SWITCHGRAPH.ANN");ANNMENU^LOAD("MENU1.ANN");ANNMENUKEY^LOAD("PANPLAY1.ANN");@IF(G_SARCADESCENEPARAM^FIND("WROTKA"),"_","-1","BFITMP94","BFITMP95");@IF(G_SARCADESCENEPARAM^FIND("DYKTA"),">","-1","BFITMP96","");SEQWAZNE^PLAY(SWSTEP);}
{@IF("G_SARCADESCENELAST","_",""FUTUMAIN"","BFITMP97","BFITMP98");ARRAYPLAYERS^ADD("ANNPLAYER0","ANNPLAYER1");ANNENEMY1^LOAD("LIS.ANN");ANNENEMY1PATH^LOAD("LEVEL3\ENEMY1_PATH.ANN");ANNENEMY1FIELD^LOAD("LEVEL3\ENEMY1_FIELD.ANN");ANNENEMY1MASK^LOAD("LEVEL3\ENEMY1_MASK.ANN");ANNENEMY1MMASK^LOAD("LEVEL3\ENEMY1_MMASK.ANN");ANNENEMY1MMASK^PLAY("UP");ARRAYENEMY1STARTX^ADD(4,16);ARRAYENEMY1STARTY^ADD(7,9);VARENEMYNAME^SET("ANNENEMY1");VARENEMYSTATE^SET("ARRAYENEMY1STATE");VARARRAYNAME^SET("ARRAYENEMY1");BEHINITENEMY^RUN();}
{CANVASOBSERVER^SETBACKGROUND("BKG6.IMG");IMGMASK^LOAD("MASK6.IMG");IMGMASK^HIDE();ANNPLAYER0^LOAD("PLAYER0_RK.ANN");BEHPLAYERS^RUN();ANNBTN^LOAD("LEVEL4\BTN.ANN");ANNBTNMASK^LOAD("LEVEL4\BTNMASK.ANN");ANNBTNGRAPH^LOAD("LEVEL4\BTNGRAPH.ANN");ANNMENU^LOAD("MENU2.ANN");ANNMENUKEY^LOAD("PANPLAY2.ANN");@IF(G_SARCADESCENEPARAM^FIND("LABWST4"),"_","-1","BFITMP108","");}
{ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(MOUSE^GETPOSX());VARILASTY^SET(MOUSE^GETPOSY());VARIDOMAGIC^SET(1);}
{@IF("VARIDOMAGIC","_","0","BFITMP30","");VARIX^SET(VARMOUSEPOSX);VARIY^SET(VARMOUSEPOSY);VARIDIRX^SET([VARIX-VARILASTX]);VARIDIRY^SET([VARIY-VARILASTY]);VARIDOT^SET([VARIDIRX*VARILASTDIRX]);VARIDOT^ADD([VARIDIRY*VARILASTDIRY]);VARDTEMP1^ARCTANEX(VARIDIRY,VARIDIRX);VARDTEMP0^LENGTH(VARIDIRX,VARIDIRY);@IF("VARDTEMP0","<","30","BFITMP31","");VARDTAN^ARCTANEX(VARIDIRY,VARIDIRX);@IF("VARDLASTTAN","<","0.0","BFITMP32","BFITMP33");@IF("VARDTEMP0","<","0.0","BFITMP34","");@IF("VARDTEMP0>45.0&&VARDTEMP0<315.0","BFITMP35","");ARRROUTEX^ADD(VARIX);ARRROUTEY^ADD(VARIY);VARDLASTTAN^SET(VARDTAN);VARILASTDIRX^SET(VARIDIRX);VARILASTDIRY^SET(VARIDIRY);VARILASTX^SET(VARIX);VARILASTY^SET(VARIY);VARILASTCLONE^INC();@IF("VARILASTCLONE",">","10","BFITMP36","");VARSTEMP0^SET(["ANNMAGIC_"+VARILASTCLONE]);*VARSTEMP0^SETPOSITION(VARIX,VARIY);*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}
{VARITEMP0^SET(0);VARITEMP1^SET(0);@LOOP("{VARITER^SET(_I_);@IF("VARITEMP0","_","0","BFITMP47","");}",0,VARITEMP2,1);@IF("VARITEMP0","_","1","BFITMP48","");}
{VARDTEMP0^MUL(-1.0);}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{@IF("VARPLAYERCHANGED","_","1","BFITMP215","");VARINT1^SET(*VARSWITCH^GETNOFINEVENT(*VARSWITCH^GETEVENTNAME()));@LOOP("{@IF("VARINT1","_","1","BFITMP216","BFITMP217");VARSTRING0^SET(["ANNSWITCHGRAPH_"+VARINT0]);VARSTRING1^SET(["ANNSWITCHMASK_"+VARINT0]);*VARSTRING0^SETPRIORITY(*VARSTRING0^GETFRAMENAME());VARINT2^SET(*VARSTRING1^GETCFRAMEINEVENT());VARINT2^INC();VARINT2^MOD(*VARSTRING1^GETNOFINEVENT(*VARSTRING1^GETEVENTNAME()));*VARSTRING0^SETFRAME(["A"+VARINT0],VARINT2);*VARSTRING1^SETFRAME(["A"+VARINT0],VARINT2);}",0,VARINT1,1);}
{VARZASKRZYNIAOBS^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0+[2*I0]],[VARINT1+[2*I1]],FALSE,110,130,FALSE));@IF("VARZASKRZYNIAOBS","_","NULL","BFITMP165","");};
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);*VARPLAYERNAME^SETPOSITION(VARINT1,VARINT2);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);KEYBOARD^DISABLE();ISNDPRIORITY^SET(100);BEHSND^RUN("SEQLAB3",["RURA"+VARPLAYERNAME],0);SPLAYERNAMEREMEMBER^SET(VARPLAYERNAME);IREMEMBERX^SET(VARINT1);IREMEMBERY^SET(VARINT2);*VARPLAYERNAME^SETPOSITION(-100,-100);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{@IF("VARPLAYERCHANGED","_","1","BFITMP215","");VARINT1^SET(*VARSWITCH^GETNOFINEVENT(*VARSWITCH^GETEVENTNAME()));@LOOP("{@IF("VARINT1","_","1","BFITMP216","BFITMP217");VARSTRING0^SET(["ANNSWITCHGRAPH_"+VARINT0]);VARSTRING1^SET(["ANNSWITCHMASK_"+VARINT0]);*VARSTRING0^SETPRIORITY(*VARSTRING0^GETFRAMENAME());VARINT2^SET(*VARSTRING1^GETCFRAMEINEVENT());VARINT2^INC();VARINT2^MOD(*VARSTRING1^GETNOFINEVENT(*VARSTRING1^GETEVENTNAME()));*VARSTRING0^SETFRAME(["A"+VARINT0],VARINT2);*VARSTRING1^SETFRAME(["A"+VARINT0],VARINT2);}",0,VARINT1,1);}
{VARZASKRZYNIAOBS^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0+[2*I0]],[VARINT1+[2*I1]],FALSE,110,130,FALSE));@IF("VARZASKRZYNIAOBS","_","NULL","BFITMP165","");};
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);*VARPLAYERNAME^SETPOSITION(VARINT1,VARINT2);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);KEYBOARD^DISABLE();ISNDPRIORITY^SET(100);BEHSND^RUN("SEQLAB3",["RURA"+VARPLAYERNAME],0);SPLAYERNAMEREMEMBER^SET(VARPLAYERNAME);IREMEMBERX^SET(VARINT1);IREMEMBERY^SET(VARINT2);*VARPLAYERNAME^SETPOSITION(-100,-100);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{@IF("VARPLAYERCHANGED","_","1","BFITMP215","");VARINT1^SET(*VARSWITCH^GETNOFINEVENT(*VARSWITCH^GETEVENTNAME()));@LOOP("{@IF("VARINT1","_","1","BFITMP216","BFITMP217");VARSTRING0^SET(["ANNSWITCHGRAPH_"+VARINT0]);VARSTRING1^SET(["ANNSWITCHMASK_"+VARINT0]);*VARSTRING0^SETPRIORITY(*VARSTRING0^GETFRAMENAME());VARINT2^SET(*VARSTRING1^GETCFRAMEINEVENT());VARINT2^INC();VARINT2^MOD(*VARSTRING1^GETNOFINEVENT(*VARSTRING1^GETEVENTNAME()));*VARSTRING0^SETFRAME(["A"+VARINT0],VARINT2);*VARSTRING1^SETFRAME(["A"+VARINT0],VARINT2);}",0,VARINT1,1);}
{VARZASKRZYNIAOBS^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0+[2*I0]],[VARINT1+[2*I1]],FALSE,110,130,FALSE));@IF("VARZASKRZYNIAOBS","_","NULL","BFITMP163","");};
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);*VARPLAYERNAME^SETPOSITION(VARINT1,VARINT2);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);KEYBOARD^DISABLE();ISNDPRIORITY^SET(100);BEHSND^RUN("SEQLAB3",["RURA"+VARPLAYERNAME],0);SPLAYERNAMEREMEMBER^SET(VARPLAYERNAME);IREMEMBERX^SET(VARINT1);IREMEMBERY^SET(VARINT2);*VARPLAYERNAME^SETPOSITION(-100,-100);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{@IF("VARPLAYERCHANGED","_","1","BFITMP215","");VARINT1^SET(*VARSWITCH^GETNOFINEVENT(*VARSWITCH^GETEVENTNAME()));@LOOP("{@IF("VARINT1","_","1","BFITMP216","BFITMP217");VARSTRING0^SET(["ANNSWITCHGRAPH_"+VARINT0]);VARSTRING1^SET(["ANNSWITCHMASK_"+VARINT0]);*VARSTRING0^SETPRIORITY(*VARSTRING0^GETFRAMENAME());VARINT2^SET(*VARSTRING1^GETCFRAMEINEVENT());VARINT2^INC();VARINT2^MOD(*VARSTRING1^GETNOFINEVENT(*VARSTRING1^GETEVENTNAME()));*VARSTRING0^SETFRAME(["A"+VARINT0],VARINT2);*VARSTRING1^SETFRAME(["A"+VARINT0],VARINT2);}",0,VARINT1,1);}
{VARZASKRZYNIAOBS^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0+[2*I0]],[VARINT1+[2*I1]],FALSE,110,130,FALSE));@IF("VARZASKRZYNIAOBS","_","NULL","BFITMP165","");};
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);*VARPLAYERNAME^SETPOSITION(VARINT1,VARINT2);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);KEYBOARD^DISABLE();ISNDPRIORITY^SET(100);BEHSND^RUN("SEQLAB3",["RURA"+VARPLAYERNAME],0);SPLAYERNAMEREMEMBER^SET(VARPLAYERNAME);IREMEMBERX^SET(VARINT1);IREMEMBERY^SET(VARINT2);*VARPLAYERNAME^SETPOSITION(-100,-100);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{@IF("VARPLAYERCHANGED","_","1","BFITMP217","");VARINT1^SET(*VARSWITCH^GETNOFINEVENT(*VARSWITCH^GETEVENTNAME()));@LOOP("{@IF("VARINT1","_","1","BFITMP218","BFITMP219");VARSTRING0^SET(["ANNSWITCHGRAPH_"+VARINT0]);VARSTRING1^SET(["ANNSWITCHMASK_"+VARINT0]);*VARSTRING0^SETPRIORITY(*VARSTRING0^GETFRAMENAME());VARINT2^SET(*VARSTRING1^GETCFRAMEINEVENT());VARINT2^INC();VARINT2^MOD(*VARSTRING1^GETNOFINEVENT(*VARSTRING1^GETEVENTNAME()));*VARSTRING0^SETFRAME(["A"+VARINT0],VARINT2);*VARSTRING1^SETFRAME(["A"+VARINT0],VARINT2);}",0,VARINT1,1);}
{VARZASKRZYNIAOBS^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0+[2*I0]],[VARINT1+[2*I1]],FALSE,110,130,FALSE));@IF("VARZASKRZYNIAOBS","_","NULL","BFITMP165","");};
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);*VARPLAYERNAME^SETPOSITION(VARINT1,VARINT2);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);KEYBOARD^DISABLE();ISNDPRIORITY^SET(100);BEHSND^RUN("SEQLAB3",["RURA"+VARPLAYERNAME],0);SPLAYERNAMEREMEMBER^SET(VARPLAYERNAME);IREMEMBERX^SET(VARINT1);IREMEMBERY^SET(VARINT2);*VARPLAYERNAME^SETPOSITION(-100,-100);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}
{I9^SET($1);S3^SET(["ANRZUTEK1_"+IRZUTKLON]);I1^SET(RANDOM^GET(500));I1^ADD(150);ARPOS^SET(IRZUTKLON,0,I1);I2^SET(RANDOM^GET(500));I2^ADD(150);ARPOS^SET(IRZUTKLON,1,I2);I3^SET([I2-I1]);*S3^SETPOSITION([I1-I3],600);I3^SET(I3^LENGTH(I3,600));D1^SET(I3);D2^SET([I2-I1]);D2^SET([D2@D1]);D3^SET(600);D3^SET([D3@D1]);D2^SET([D2*20]);D3^SET([D3*20]);ARPOS^SET(IRZUTKLON,2,D2);ARPOS^SET(IRZUTKLON,3,D3);*S3^NPLAY(I9);SFX_LASRZUT^PLAY();IRZUTKLON^SET([[IRZUTKLON+1]%20]);}
{STLEV^SET("DBLEV_CURSOR");*SKLOC^SETFRAME(0,STLEV^GETFIELD(0));I1^SET([STLEV^GETFIELD(1)*50]);*SKLOC^SETPOSITION(800,[Y_POCZ_OFF-I1]);I1^SET(STLEV^GETFIELD(3));@IF("I1>0&&I1<10","BFITMP71","BFITMP72");I1^SET(STLEV^GETFIELD(2));@IF("I1",">_","20","BFITMP73","");I1^SET(SKLOC^GET(7,1));I1^SET([[I1+1]%5]);SKLOC^SET(["ANKLOC_"+I1]);DBLEV^NEXT();D1^SET(IWYMIAR);D2^SET([DWYMIARPOCZ-D1]);D1^SET(PRZESUW_1^GETWIDTH());D3^SET([D2@DWYMIARPOCZ]);D1^SET([D3*D1]);I1^SET(D1);PRZESUW^SETPOSITION([I1-20],0);IWYMIAR^DEC();};
{I9^SET($1);S3^SET(["ANRZUTEK1_"+IRZUTKLON]);I1^SET(RANDOM^GET(500));I1^ADD(150);ARPOS^SET(IRZUTKLON,0,I1);I2^SET(RANDOM^GET(500));I2^ADD(150);ARPOS^SET(IRZUTKLON,1,I2);I3^SET([I2-I1]);*S3^SETPOSITION([I1-I3],600);I3^SET(I3^LENGTH(I3,600));D1^SET(I3);D2^SET([I2-I1]);D2^SET([D2@D1]);D3^SET(600);D3^SET([D3@D1]);D2^SET([D2*20]);D3^SET([D3*20]);ARPOS^SET(IRZUTKLON,2,D2);ARPOS^SET(IRZUTKLON,3,D3);*S3^NPLAY(I9);IRZUTKLON^SET([[IRZUTKLON+1]%20]);}
{STLEV^SET("DBLEV_CURSOR");*SKLOC^SETFRAME(0,STLEV^GETFIELD(0));I1^SET([STLEV^GETFIELD(1)*50]);*SKLOC^SETPOSITION(800,[Y_POCZ_OFF-I1]);I1^SET(STLEV^GETFIELD(3));@IF("I1>0&&I1<10","BFITMP66","BFITMP67");I1^SET(STLEV^GETFIELD(2));@IF("I1",">_","20","BFITMP68","");I1^SET(SKLOC^GET(7,1));I1^SET([[I1+1]%5]);SKLOC^SET(["ANKLOC_"+I1]);DBLEV^NEXT();D1^SET(IWYMIAR);D2^SET([DWYMIARPOCZ-D1]);D1^SET(PRZESUW_1^GETWIDTH());D3^SET([D2@DWYMIARPOCZ]);D1^SET([D3*D1]);I1^SET(D1);PRZESUW^SETPOSITION([I1-20],0);IWYMIAR^DEC();};
{VARB_SCENEREADY^SET(TRUE);@LOOP("{VARS_OBJ^SET(["ANN_JO_OGNIWO_"+_I_]);*VARS_OBJ^SHOW();}",0,CONSTI_LANCUCHLENGTH,1);@LOOP("{@IF(ARR_OBJECTEXIST^GET(_I_),"_","1","BFITMP7","");}",0,14,1);}
{VARD_MASS^SET(0.1);VARD_FRICTION^SET(0.01);VARD_FRICTIONV^SET(0.01);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(100.0);VARI_TMP4^SET(12);ANN_JO_OGNIWO^CLONE(CONSTI_LANCUCHLENGTH);VARI_ID^SET(301);VARS_OBJ^SET("ANN_JO_OGNIWO");VARI_X^SET(*VARS_OBJ^GETCENTERX());VARI_Y^SET(*VARS_OBJ^GETCENTERY());VARI_Y^ADD(200);*VARS_OBJ^SHOW();WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,2,6,6,6);WTEST^SETLIMIT(VARI_ID,0,-300,0,800,900,0);*VARS_OBJ^SHOW();*VARS_OBJ^SETANCHOR("CENTER");WTEST^LINK(VARI_ID,VARS_OBJ);WTEST^SETPOSITION(VARI_ID,VARI_X,VARI_Y,0);VARI_Y^SUB([VARI_TMP4*2]);VARI_ID^INC();@LOOP("{VARI_TMP1^SET(_I_);VARS_OBJ^SET(["ANN_JO_OGNIWO_"+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,1,2,3,3,3);WTEST^SETPOSITION(VARI_ID,VARI_X,VARI_Y,0);WTEST^SETLIMIT(VARI_ID,0,-200,0,800,800,0);*VARS_OBJ^SETANCHOR("CENTER");WTEST^LINK(VARI_ID,VARS_OBJ);VARI_TMP1^SET([VARI_ID-1]);VARI_TMP2^SET([VARI_Y+16]);WTEST^JOIN(VARI_ID,VARI_TMP1,VARI_X,VARI_TMP2,0,0,-180,180,0,1,0);VARI_Y^SUB([VARI_TMP4*2]);VARI_ID^INC();}",1,CONSTI_LANCUCHLENGTH,1);WTEST^ADDFORCE([VARI_ID-2],-10000,0,0);WTEST^ADDFORCE([VARI_ID-3],0,100000,0);}
{VARD_TMP1^SET([VARELAPSED*VARD_MAGNESSPEED*16.0]);@IF(KEYBOARD^ISKEYDOWN("UP"),"_","TRUE","BFITMP25","");@IF(KEYBOARD^ISKEYDOWN("DOWN"),"_","TRUE","BFITMP26","");@IF(KEYBOARD^ISKEYDOWN("LEFT"),"_","TRUE","BFITMP27","");@IF(KEYBOARD^ISKEYDOWN("RIGHT"),"_","TRUE","BFITMP28","");}
{@IF("VARI_COLLISIONMAMCNT",">","0","BFITMP40","");VARI_X^SET(WTEST^GETPOSITIONX(501));VARI_Y^SET(WTEST^GETPOSITIONY(501));@LOOP("{VARS_TMP1^SET(["ANN_EO_WEGORZ_"+_I_]);VARI_TMPX^SET(*VARS_TMP1^GETCENTERX());VARI_TMPY^SET(*VARS_TMP1^GETPOSITIONY());VARI_TMP1^SET(VARI_TMP1^ABS([VARI_X-VARI_TMPX]));@IF("VARI_TMP1","<","60","BFITMP44","");}",0,VARI_WEGORZENUM,1);}
{ARR_WEGORZEPOSY^ADD(80,400,200,0,0,0);ANN_EO_WEGORZ^CLONE([CONSTI_WEGORZENUMMAX-1]);ANN_EO_WEGORZW^CLONE([CONSTI_WEGORZENUMMAX-1]);@LOOP("{VARS_TMP1^SET(["ANN_EO_WEGORZ_"+_I_]);VARS_TMP2^SET(["ANN_EO_WEGORZW_"+_I_]);VARI_TMPY^SET(ARR_WEGORZEPOSY^GET(_I_));*VARS_TMP1^SETPOSITION(0,[VARI_TMPY+VARI_BKGOFSY]);*VARS_TMP2^SETPOSITION(0,[VARI_TMPY+VARI_BKGOFSY]);GRP_MOVE^ADD(VARS_TMP1);GRP_MOVE^ADD(VARS_TMP2);}",0,CONSTI_WEGORZENUMMAX,1);VARI_WEGORZENUM^SET(ARRAYSAVE^GET(14));@LOOP("{VARI_TMPX^SET(RANDOM^GET(800));*["ANN_EO_WEGORZ_"+_I_]^MOVE(VARI_TMPX,0);*["ANN_EO_WEGORZW_"+_I_]^MOVE(VARI_TMPX,0);@IF(RANDOM^GET(2),"_","0","BFITMP70","BFITMP71");}",0,VARI_WEGORZENUM,1);}
{VARI_TMP2^SET(800);VARI_TMP1^SET(1000);VARI_TMP2^SUB(800);VARI_TMP1^SUB(600);VARI_TMP2^DIV(2);VARI_TMP1^DIV(2);VARI_BKGOFSX^SET([0-VARI_TMP2]);VARI_BKGOFSY^SET([0-VARI_TMP1]);VARI_TMP2^ADD(800);VARI_TMP1^ADD(600);WTEST^SETBKGSIZE(VARI_BKGOFSX,VARI_TMP2,VARI_BKGOFSY,VARI_TMP1);WTEST^SETGRAVITY(0,-100,0);VARI_WODAOPACITY^SET(255);VARI_WODAOPACITYOLD^SET(VARI_WODAOPACITY);WTEST^SETACTIVE(50,FALSE);WTEST^SETACTIVE(60,FALSE);FROTATE^SETPROPERTY("CANUNDO","TRUE");ARR_ANGLE^ADD(0,0,0,0,0,0,0,0,0,0,0,0,0,0);ARR_OBJECTEXIST^ADD(1,1,1,1,1,1,1,1,1,1,1,1,1,1);BEH_ADDSIMPLE^RUN(101,"ANN_MO_AKUMULATOR",0.9,1.2,1.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(102,"ANN_MO_AMORTYZATOR1",0.09,2.2,2.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(103,"ANN_MO_AMORTYZATOR2",0.09,2.2,2.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(104,"ANN_MO_BLOTNIK",0.05,2.2,2.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(105,"ANN_MO_FELGA",0.9,2.2,2.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(106,"ANN_MO_KANISTER",0.3,1.2,1.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(107,"ANN_MO_KOLO",0.05,1.2,1.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(108,"ANN_MO_ROWER",0.3,2.2,2.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(109,"ANN_MO_TV",0.7,2.2,2.5,0.0,0.0,100.0);BEH_ADDSIMPLE^RUN(110,"ANN_MO_HELM",0.2,2.2,2.5,0.0,0.0,100.0);BEH_ADDSPYCHACZ^RUN();BEH_ADDRURA^RUN();BEH_ADDMIECZ^RUN();BEH_ADDSZTANGA^RUN();BEH_ADDLANCUCH^RUN();BEH_ADDPIECYK^RUN();BEH_WEGORZEINIT^RUN();BEH_BABLEINIT^RUN();BEH_REMOVEUNUSEDITEMS^RUN();@IF("VARB_FIRSTENTER","_","TRUE","BFITMP72","BFITMP73");DMM_RUNNERSHOW^PLAY("ELAPSE");IMG_WODA^SETOPACITY(VARI_WODAOPACITY);ANN_H_PIECYKW^SETOPACITY([CONSTI_OPACITYMAX-VARI_WODAOPACITY]);@LOOP("{*["ANN_EO_WEGORZW_"+_I_]^SETOPACITY([CONSTI_OPACITYMAX-VARI_WODAOPACITY]);}",0,VARI_WEGORZENUM,1);}
{IMG_WODA^SETOPACITY(VARI_WODAOPACITY);ANN_H_PIECYKW^SETOPACITY([CONSTI_OPACITYMAX-VARI_WODAOPACITY]);@LOOP("{*["ANN_EO_WEGORZW_"+_I_]^SETOPACITY([CONSTI_OPACITYMAX-VARI_WODAOPACITY]);}",0,VARI_WEGORZENUM,1);VARI_WODAOPACITYOLD^SET(VARI_WODAOPACITY);};
{@IF(G_ARRSETTINGS^GET(1),"<","20","BFITMP16","BFITMP17");@RETURN(G_BTEMP);}
{@MSGBOX("KLOPS");}
{VARELAPSED^SET(WTEST^MOVEOBJECTS());VARD_STALA^SET([VARELAPSED*16.0]);VARD_SPEEDROT^SET(90.0);VARI_BKGX^SET(WTEST^GETBKGPOSX());VARI_BKGY^SET(WTEST^GETBKGPOSY());@IF("VARI_BKGX!'VARI_BKGOLDX||VARI_BKGY!'VARI_BKGOLDY","BFITMP12","");@IF(KEYBOARD^ISKEYDOWN("UP"),"_","TRUE","BFITMP13","");@IF(KEYBOARD^ISKEYDOWN("DOWN"),"_","TRUE","BFITMP14","");@IF(KEYBOARD^ISKEYDOWN("LEFT"),"_","TRUE","BFITMP15","");@IF(KEYBOARD^ISKEYDOWN("RIGHT"),"_","TRUE","BFITMP16","");VARI_CARANGLEREAL^SET(WTEST^GETROTATIONZ(501));VARI_CARANGLE^SET([WTEST^GETROTATIONZ(501)+360]);VARI_CARANGLE^SET([VARI_CARANGLE%360]);VARD_TMP5^SET(WTEST^GETPOSITIONZ(501));}
{VARD_TMP1^SET([VARD_PREDKOSCSTALA*VARD_STALA]);VARD_X^SET(VARD_X^COSINUS(VARI_CARANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_CARANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(502,VARD_X,VARD_Y,0);WTEST^ADDFORCE(503,VARD_X,VARD_Y,0);WTEST^ADDFORCE(504,VARD_X,VARD_Y,0);WTEST^ADDFORCE(505,VARD_X,VARD_Y,0);}
{VARD_TMP1^SET(0.0);VARD_TMP1^SUB([VARD_PREDKOSCSTALATYL*VARD_STALA]);VARD_X^SET(VARD_X^COSINUS(VARI_CARANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_CARANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(502,VARD_X,VARD_Y,0);WTEST^ADDFORCE(503,VARD_X,VARD_Y,0);WTEST^ADDFORCE(504,VARD_X,VARD_Y,0);WTEST^ADDFORCE(505,VARD_X,VARD_Y,0);}
{VARD_TMP1^SET([VARD_STALA*VARD_SPEEDROT]);VARI_ANGLE^SET([VARI_CARANGLE+90]);VARD_X^SET(VARD_X^COSINUS(VARI_ANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_ANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(502,VARD_X,VARD_Y,0);WTEST^ADDFORCE(503,VARD_X,VARD_Y,0);VARI_ANGLE^SET([VARI_CARANGLE-90]);VARD_X^SET(VARD_X^COSINUS(VARI_ANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_ANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(504,VARD_X,VARD_Y,0);WTEST^ADDFORCE(505,VARD_X,VARD_Y,0);}
{VARD_TMP1^SET([VARD_STALA*VARD_SPEEDROT]);VARI_ANGLE^SET([VARI_CARANGLE-90]);VARD_X^SET(VARD_X^COSINUS(VARI_ANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_ANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(502,VARD_X,VARD_Y,0);WTEST^ADDFORCE(503,VARD_X,VARD_Y,0);VARI_ANGLE^SET([VARI_CARANGLE+90]);VARD_X^SET(VARD_X^COSINUS(VARI_ANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_ANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(504,VARD_X,VARD_Y,0);WTEST^ADDFORCE(505,VARD_X,VARD_Y,0);}
{@MSGBOX("KLOPS");}
{VARELAPSED^SET(WTEST^MOVEOBJECTS());VARD_STALA^SET([VARELAPSED*16.0]);VARB_JADE^SET(FALSE);VARD_SPEEDROT^SET(WTEST^GETSPEED(501));VARD_SPEEDROT^MUL(4);VARD_SPEEDROT^ADD(2);VARI_BKGX^SET(WTEST^GETBKGPOSX());VARI_BKGY^SET(WTEST^GETBKGPOSY());@IF("VARI_BKGX!'VARI_BKGOLDX||VARI_BKGY!'VARI_BKGOLDY","BFITMP16","");@IF(KEYBOARD^ISKEYDOWN("UP"),"_","TRUE","BFITMP17","");@IF(KEYBOARD^ISKEYDOWN("DOWN"),"_","TRUE","BFITMP18","");@IF("VARB_JADE","_","FALSE","BFITMP19","");@IF(KEYBOARD^ISKEYDOWN("LEFT"),"_","TRUE","BFITMP20","");@IF(KEYBOARD^ISKEYDOWN("RIGHT"),"_","TRUE","BFITMP21","");VARI_CARANGLEREAL^SET(WTEST^GETROTATIONZ(501));VARI_CARANGLE^SET([WTEST^GETROTATIONZ(501)+360]);VARI_CARANGLE^SET([VARI_CARANGLE%360]);VARI_ANGLE^SET([0-VARI_CARANGLE]);VARD_TMP5^SET(WTEST^GETPOSITIONZ(501));VARD_TMP5^DIV(4);VARD_TMP1^SET(WTEST^GETPOSITIONZ(502));VARD_TMP2^SET(WTEST^GETPOSITIONZ(503));VARD_TMP3^SET(WTEST^GETPOSITIONZ(504));VARD_TMP4^SET(WTEST^GETPOSITIONZ(505));VARD_POS1^SET([[VARD_TMP1+VARD_TMP2]@2]);VARD_POS2^SET([[VARD_TMP3+VARD_TMP4]@2]);VARD_ROTY^SET([[VARD_POS1-VARD_POS2]@2]);VARD_ROTY^SET(VARD_ROTY^ABS(VARD_ROTY));VARD_Y^SET([VARD_TMP5-VARD_ROTY]);VARD_Y^DIV(50);VARD_Y^ADD(1);VARD_POS1^SET([[VARD_TMP1+VARD_TMP3]@2]);VARD_POS2^SET([[VARD_TMP2+VARD_TMP4]@2]);VARD_ROTX^SET([[VARD_POS1-VARD_POS2]@2]);VARD_ROTX^SET(VARD_ROTX^ABS(VARD_ROTX));VARD_X^SET([VARD_TMP5-VARD_ROTX]);VARD_X^DIV(50);VARD_X^ADD(1);FROTATE^UNLINK("ANN_H_SAMOCHODZIK");FSCALE^UNLINK("ANN_H_SAMOCHODZIK");FSCALE^SETPROPERTY("FACTORX",VARD_X);FSCALE^SETPROPERTY("FACTORY",VARD_Y);FROTATE^SETPROPERTY("ANGLE",VARI_ANGLE);FSCALE^LINK("ANN_H_SAMOCHODZIK");FROTATE^LINK("ANN_H_SAMOCHODZIK");VARI_CARX^SET(WTEST^GETPOSITIONX(501));VARI_CARY^SET(WTEST^GETPOSITIONY(501));ANN_H_MOTOCIEN^SETPOSITION([VARI_CARX-VARI_MOTOSHADOWDIST],[VARI_CARY+VARI_MOTOSHADOWDIST]);VARI_TMP1^SET(WTEST^GETSPEED(501));VARI_TMP1^DIV(4);VARI_TMP1^ADD(16);ANN_H_KOLOUR^SETFPS(VARI_TMP1);ANN_H_KOLOUL^SETFPS(VARI_TMP1);ANN_H_KOLODR^SETFPS(VARI_TMP1);ANN_H_KOLODL^SETFPS(VARI_TMP1);}
{VARB_JADE^SET(TRUE);VARD_TMP1^SET([VARD_PREDKOSCSTALA*VARD_STALA]);VARD_X^SET(VARD_X^COSINUS(VARI_CARANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_CARANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(502,VARD_X,VARD_Y,0);WTEST^ADDFORCE(503,VARD_X,VARD_Y,0);WTEST^ADDFORCE(504,VARD_X,VARD_Y,0);WTEST^ADDFORCE(505,VARD_X,VARD_Y,0);}
{VARB_JADE^SET(TRUE);VARD_TMP1^SET(0.0);VARD_TMP1^SUB([VARD_PREDKOSCSTALATYL*VARD_STALA]);VARD_X^SET(VARD_X^COSINUS(VARI_CARANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_CARANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(502,VARD_X,VARD_Y,0);WTEST^ADDFORCE(503,VARD_X,VARD_Y,0);WTEST^ADDFORCE(504,VARD_X,VARD_Y,0);WTEST^ADDFORCE(505,VARD_X,VARD_Y,0);}
{VARD_TMP1^SET([VARD_STALA*VARD_SPEEDROT]);VARI_ANGLE^SET([VARI_CARANGLE+90]);VARD_X^SET(VARD_X^COSINUS(VARI_ANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_ANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(502,VARD_X,VARD_Y,0);WTEST^ADDFORCE(503,VARD_X,VARD_Y,0);VARI_ANGLE^SET([VARI_CARANGLE-90]);VARD_X^SET(VARD_X^COSINUS(VARI_ANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_ANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(504,VARD_X,VARD_Y,0);WTEST^ADDFORCE(505,VARD_X,VARD_Y,0);}
{VARD_TMP1^SET([VARD_STALA*VARD_SPEEDROT]);VARI_ANGLE^SET([VARI_CARANGLE-90]);VARD_X^SET(VARD_X^COSINUS(VARI_ANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_ANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(502,VARD_X,VARD_Y,0);WTEST^ADDFORCE(503,VARD_X,VARD_Y,0);VARI_ANGLE^SET([VARI_CARANGLE+90]);VARD_X^SET(VARD_X^COSINUS(VARI_ANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_ANGLE));VARD_X^MUL(VARD_TMP1);VARD_Y^MUL(VARD_TMP1);WTEST^ADDFORCE(504,VARD_X,VARD_Y,0);WTEST^ADDFORCE(505,VARD_X,VARD_Y,0);}
{VARD_ELAPSED^SET(WTEST^MOVEOBJECTS());VARD_STALA^SET([VARD_ELAPSED*16.0]);VARI_BKGX^SET(WTEST^GETBKGPOSX());VARI_BKGY^SET(WTEST^GETBKGPOSY());@IF("VARI_BKGX!'VARI_BKGOLDX||VARI_BKGY!'VARI_BKGOLDY","BFITMP40","");BEH_UFOELAPSE^RUN();}
{VARS_TMP1^SET($1);VARI_TMP1^SET($2);VARB_TMP1^SET(FALSE);@IF("SEQKRET^ISPLAYING()'FALSE||VARI_TMP1<VARI_SEQPRIORITY","BFITMP48","");@RETURN(VARB_TMP1);}
{VARI_UFOSPEED^SET(700);VARD_X^SET(VARD_X^COSINUS(VARI_UFOANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_UFOANGLE));VARD_X^SET([VARD_X*VARI_UFOSPEED*VARD_STALA]);VARD_Y^SET([VARD_Y*VARI_UFOSPEED*VARD_STALA]);WTEST^ADDFORCE(501,VARD_X,VARD_Y,0);}
{VARI_UFOSPEED^SET(-400);VARD_X^SET(VARD_X^COSINUS(VARI_UFOANGLE));VARD_Y^SET(VARD_Y^SINUS(VARI_UFOANGLE));VARD_X^SET([VARD_X*VARI_UFOSPEED*VARD_STALA]);VARD_Y^SET([VARD_Y*VARI_UFOSPEED*VARD_STALA]);WTEST^ADDFORCE(501,VARD_X,VARD_Y,0);}
{BEHSETSCENE^RUN();BEHSAVESCENE^RUN();G_SARCADESCENE^SET("SCIGACZ");ILEVEL^SET(G_SARCADESCENELAST);KEYBOARD^SETAUTOREPEAT(FALSE);INRRUMAKA^SET(1);IOTOCZENIEPOSX^SET(0);IDLUGOSCTORU^SET(9600);IPIERWSZYTORPOSPOCZY^SET(149);IPIERWSZYTORPOSRUMRY^SET(188);IPOLSZEROKOSCIRUMAKA^SET(25);IZWROTY^SET(10);IZMIANATORUY^SET(74);IGRANICAL^SET(120);IWAGARUMAKAENEMY^SET(15);IMINFPSSPEED^SET(6);ICRASHSPEED^SET(6);IZYWYCHLEFT^SET(4);ICURRENTDEADNR^SET(0);IDLUGOSCTORU^SET([800-IDLUGOSCTORU]);IGRANICAR^SET([800-IGRANICAL]);ANNPASEK^CLONE(2);ANNPASEK^MOVE(-40,0);ANNPASEK_1^SETPRIORITY(899);ANNPASEK_1^SETFRAME("PASEK",1);ANNPASEK_2^SETPRIORITY(901);ANNPASEK_2^SETFRAME("PASEK",2);I1^SET(ANNPLAN1^GETNOFINEVENT("PLAY"));ANNPLAN1^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN1_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(1);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANNPLAN2^GETNOFINEVENT("PLAY"));ANNPLAN2^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN2_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(100);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANNPLAN3^GETNOFINEVENT("PLAY"));ANNPLAN3^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN3_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(200);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANNPLAN4^GETNOFINEVENT("PLAY"));ANNPLAN4^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN4_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(300);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANNPLAN5^GETNOFINEVENT("PLAY"));ANNPLAN5^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN5_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(1);GOTOCZENIE^ADD(S1);}",1,I1,1);GOTOCZENIE^SHOW();I3^SET(ANNPLOTMASKA^GETNOFINEVENT("MASKA"));ANNPLOTMASKA^CLONE(I3);@LOOP("{S1^SET(["ANNPLOTMASKA_"+_I_]);*S1^SETFRAME("MASKA",[_I_-1]);GOTOCZENIE^ADD(S1);}",1,I3,1);CANVASOBSERVER^REMOVE("ANNPLOTMASKA");ANNLEVELMASK^SETFRAME("LEVEL",[ILEVEL-1]);GOTOCZENIE^ADD("ANNLEVELMASK");GOTOCZENIE^ADD("ANNREXBUM","ANNE1BUM","ANNE2BUM","ANNE3BUM","ANNE4BUM");ANNWEHMASK^CLONE(3);BEHINITPLAYER_0^RUN();BEHINITENEMY_1^RUN();BEHINITENEMY_2^RUN();BEHINITENEMY_3^RUN();BEHINITTRAFIC^RUN();BEHRUNSCENE^RUN();}
{SZWROTEKRANU^SET(SREXKIERUNEK);I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP200","BFITMP201");@IF("IALLMOVEX","!_","0","BFITMP202","");}
{BE1ACTIVE^SET(TRUE);IE1SPEED^SET(0);IE1TOR^SET(3);IE1POSX^SET([IGRANICAL+2000]);IE1KIERUNEK^SET(1);SE1KIERUNEK^SET("R");BE1LOCK^SET(FALSE);BE1LOCKZMIANATORU^SET(FALSE);IE1PUNKTY^SET(1);IE1WAGARUMAKA^SET(8);ANNE1^SETFPS(IMINFPSSPEED);ANNE1RUMAK^SETFPS(IMINFPSSPEED);ANNE1LANCA^SETFPS(32);GENEMY1^ADD("ANNE1","ANNE1RUMAK","ANNE1LANCA","ANNWEHMASK_1");GENEMY1^SETPOSITION([IGRANICAL+2000],[IPIERWSZYTORPOSRUMRY+[IE1TOR*IZMIANATORUY]-IZMIANATORUY]);BEHE1PRIORITY^RUN(IE1KIERUNEK);ANNE1LANCA^SETFRAME(SE1KIERUNEK,0);ANNE1LANCA^SHOW();}
{BE2ACTIVE^SET(TRUE);IE2SPEED^SET(0);IE2TOR^SET(3);IE2POSX^SET([IGRANICAR-IDLUGOSCTORU-3000]);IE2KIERUNEK^SET(-1);SE2KIERUNEK^SET("L");BE2LOCK^SET(FALSE);BE2LOCKZMIANATORU^SET(FALSE);IE2PUNKTY^SET(1);IE2WAGARUMAKA^SET(14);ANNE2^SETFPS(IMINFPSSPEED);ANNE2RUMAK^SETFPS(IMINFPSSPEED);ANNE2LANCA^SETFPS(32);GENEMY2^ADD("ANNE2","ANNE2RUMAK","ANNE2LANCA","ANNWEHMASK_2");GENEMY2^SETPOSITION([IGRANICAR-IDLUGOSCTORU-3000],[IPIERWSZYTORPOSRUMRY+[IE2TOR*IZMIANATORUY]-IZMIANATORUY-IZWROTY]);BEHE2PRIORITY^RUN(IE2KIERUNEK);ANNE2LANCA^SETFRAME(SE2KIERUNEK,0);ANNE2LANCA^SHOW();}
{BE3ACTIVE^SET(TRUE);IE3SPEED^SET(0);IE3TOR^SET(4);IE3POSX^SET([IGRANICAR-IDLUGOSCTORU-200]);IE3KIERUNEK^SET(-1);SE3KIERUNEK^SET("L");BE3LOCK^SET(FALSE);BE3LOCKZMIANATORU^SET(FALSE);IE3PUNKTY^SET(1);IE3WAGARUMAKA^SET(23);ANNE3^SETFPS(IMINFPSSPEED);ANNE3RUMAK^SETFPS(IMINFPSSPEED);ANNE3LANCA^SETFPS(32);GENEMY3^ADD("ANNE3","ANNE3RUMAK","ANNE3LANCA","ANNWEHMASK_3");GENEMY3^SETPOSITION([IGRANICAR-IDLUGOSCTORU-200],[IPIERWSZYTORPOSRUMRY+[IE3TOR*IZMIANATORUY]-IZMIANATORUY-IZWROTY]);BEHE3PRIORITY^RUN(IE3KIERUNEK);ANNE3LANCA^SETFRAME(SE3KIERUNEK,0);ANNE3LANCA^SHOW();}
{ANNAUTOL^CLONE(11);ANNAUTOR^CLONE(11);ANNAUTOLMASK^CLONE(11);ANNAUTORMASK^CLONE(11);@LOOP("{I1^SET([RANDOM^GET(3)+1]);I2^SET(RANDOM^GET(4));I3^SET(RANDOM^GET(700));S1^SET(["ANNAUTOL_"+[_I_+1]]);S2^SET(["ANNAUTOLMASK_"+[_I_+1]]);*S1^SETPRIORITY(129);*S2^SETPRIORITY(0);*S1^SETFRAME(["L"+I1],I2);*S2^SETFRAME(["L"+I1],0);*S1^MOVE([[1000*_I_]+I3],0);*S2^MOVE([[1000*_I_]+I3],0);GTRAFFICL^ADD(S1);GTRAFFICL^ADD(S2);}",0,11,1);@LOOP("{I1^SET([RANDOM^GET(3)+1]);I2^SET(RANDOM^GET(4));I3^SET(RANDOM^GET(700));S1^SET(["ANNAUTOR_"+[_I_+1]]);S2^SET(["ANNAUTORMASK_"+[_I_+1]]);*S1^SETPRIORITY(179);*S2^SETPRIORITY(0);*S1^SETFRAME(["R"+I1],I2);*S2^SETFRAME(["R"+I1],0);*S1^MOVE([[1000*_I_]+I3],0);*S2^MOVE([[1000*_I_]+I3],0);GTRAFFICR^ADD(S1);GTRAFFICR^ADD(S2);}",0,11,1);GTRAFFICL^MOVE(500,[IPIERWSZYTORPOSRUMRY+[2*IZMIANATORUY]]);GTRAFFICR^MOVE(-2000,[IPIERWSZYTORPOSRUMRY+[3*IZMIANATORUY]]);CANVASOBSERVER^REMOVE("ANNAUTOR","ANNAUTOL","ANNAUTORMASK","ANNAUTOLMASK");}
{BEHREXPRIORITY^RUN(IREXKIERUNEK);GREX^MOVE(0,[IREXTORZMIANA*IZMIANATORUY]);}
{BEHE1PRIORITY^RUN(IE1KIERUNEK);GENEMY1^MOVE(0,[IE1TORZMIANA*IZMIANATORUY]);BE1LOCKZMIANATORU^SET(TRUE);TE1^ENABLE();}
{BEHE2PRIORITY^RUN(IE2KIERUNEK);GENEMY2^MOVE(0,[IE2TORZMIANA*IZMIANATORUY]);BE2LOCKZMIANATORU^SET(TRUE);TE2^ENABLE();}
{BEHE3PRIORITY^RUN(IE3KIERUNEK);GENEMY3^MOVE(0,[IE3TORZMIANA*IZMIANATORUY]);BE3LOCKZMIANATORU^SET(TRUE);TE3^ENABLE();}
{BEHE4PRIORITY^RUN(IE4KIERUNEK);GENEMY4^MOVE(0,[IE4TORZMIANA*IZMIANATORUY]);BE4LOCKZMIANATORU^SET(TRUE);TE4^ENABLE();}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP33","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP34","BFITMP35");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP40","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP41","BFITMP42");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);I3^SET([[IREXTOR*50]-50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP186","");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IREXTOR*IZMIANATORUY]]);I3^SET([IREXTOR*50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP189","");};
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY-IZWROTY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAR,I1);IREXPOSX^SET([IGRANICAR-IDLUGOSCTORU]);}
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAL,I1);IREXPOSX^SET(IGRANICAL);}
{GREX^SETPOSITION(IGRANICAL,[IPIERWSZYTORPOSRUMRY+[IREXTOR*IZMIANATORUY]-IZMIANATORUY]);}
{GREX^SETPOSITION(IGRANICAR,[IPIERWSZYTORPOSRUMRY+[IREXTOR*IZMIANATORUY]-IZMIANATORUY-IZWROTY]);}
{I1^SET([IREXPOSX+IOTOCZENIEPOSX]);I3^SET([IPIERWSZYTORPOSRUMRY+[IREXTOR*IZMIANATORUY]-IZMIANATORUY]);I4^SET([IZWROTY@2]);I3^ADD([[IREXKIERUNEK*I4]-I4]);I1^ADD([IPOLSZEROKOSCIRUMAKA*IREXKIERUNEK]);SREXCOLL^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I3,FALSE,0,0,FALSE));}
{I1^SET([IE1POSX+IOTOCZENIEPOSX]);I3^SET([IPIERWSZYTORPOSRUMRY+[IE1TOR*IZMIANATORUY]-IZMIANATORUY]);I4^SET([IZWROTY@2]);I3^ADD([[IE1KIERUNEK*I4]-I4]);I1^ADD([IPOLSZEROKOSCIRUMAKA*IE1KIERUNEK]);SE1COLL^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I3,FALSE,0,0,FALSE));}
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP222","BFITMP223");};
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP229","");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX]);I3^SET([IPIERWSZYTORPOSRUMRY+[IE2TOR*IZMIANATORUY]-IZMIANATORUY]);I4^SET([IZWROTY@2]);I3^ADD([[IE2KIERUNEK*I4]-I4]);I1^ADD([IPOLSZEROKOSCIRUMAKA*IE2KIERUNEK]);SE2COLL^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I3,FALSE,0,0,FALSE));}
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP237","BFITMP238");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP244","");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX]);I3^SET([IPIERWSZYTORPOSRUMRY+[IE3TOR*IZMIANATORUY]-IZMIANATORUY]);I4^SET([IZWROTY@2]);I3^ADD([[IE3KIERUNEK*I4]-I4]);I1^ADD([IPOLSZEROKOSCIRUMAKA*IE3KIERUNEK]);SE3COLL^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I3,FALSE,0,0,FALSE));}
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP252","BFITMP253");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP259","");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP266","BFITMP267");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP273","");};
{BEHSETSCENE^RUN();BEHSAVESCENE^RUN();G_SARCADESCENE^SET("SCIGACZ");ILEVEL^SET(G_SARCADESCENELAST);KEYBOARD^SETAUTOREPEAT(TRUE);INRRUMAKA^SET(1);IOTOCZENIEPOSX^SET(0);IDLUGOSCTORU^SET(9600);IPIERWSZYTORPOSPOCZY^SET(149);IPIERWSZYTORPOSRUMRY^SET(188);IPOLSZEROKOSCIRUMAKA^SET(25);IZWROTY^SET(10);IZMIANATORUY^SET(74);IGRANICAL^SET(120);IWAGARUMAKAENEMY^SET(15);IMINFPSSPEED^SET(6);ICRASHSPEED^SET(6);IZYWYCHLEFT^SET(4);ICURRENTDEADNR^SET(0);IDLUGOSCTORU^SET([800-IDLUGOSCTORU]);IGRANICAR^SET([800-IGRANICAL]);ANNPASEK^CLONE(2);ANNPASEK^MOVE(-40,0);ANNPASEK_1^SETPRIORITY(899);ANNPASEK_1^SETFRAME("PASEK",1);ANNPASEK_2^SETPRIORITY(901);ANNPASEK_2^SETFRAME("PASEK",2);I1^SET(ANNPLAN1^GETNOFINEVENT("PLAY"));ANNPLAN1^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN1_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(1);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANNPLAN2^GETNOFINEVENT("PLAY"));ANNPLAN2^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN2_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(100);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANNPLAN3^GETNOFINEVENT("PLAY"));ANNPLAN3^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN3_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(200);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANNPLAN4^GETNOFINEVENT("PLAY"));ANNPLAN4^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN4_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(300);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANNPLAN5^GETNOFINEVENT("PLAY"));ANNPLAN5^CLONE(I1);@LOOP("{S1^SET(["ANNPLAN5_"+_I_]);*S1^SETFRAME("PLAY",[_I_-1]);*S1^SETPRIORITY(1);GOTOCZENIE^ADD(S1);}",1,I1,1);GOTOCZENIE^SHOW();I3^SET(ANNPLOTMASKA^GETNOFINEVENT("MASKA"));ANNPLOTMASKA^CLONE(I3);@LOOP("{S1^SET(["ANNPLOTMASKA_"+_I_]);*S1^SETFRAME("MASKA",[_I_-1]);GOTOCZENIE^ADD(S1);}",1,I3,1);CANVASOBSERVER^REMOVE("ANNPLOTMASKA");ANNLEVELMASK^SETFRAME("LEVEL",[ILEVEL-1]);GOTOCZENIE^ADD("ANNLEVELMASK");GOTOCZENIE^ADD("ANNREXBUM","ANNE1BUM","ANNE2BUM","ANNE3BUM","ANNE4BUM");ANNWEHMASK^CLONE(3);BEHINITPLAYER_0^RUN();BEHINITENEMY_1^RUN();BEHINITENEMY_2^RUN();BEHINITENEMY_3^RUN();BEHINITTRAFIC^RUN();BEHRUNSCENE^RUN();}
{SZWROTEKRANU^SET(SREXKIERUNEK);I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP192","BFITMP193");@IF("IALLMOVEX","!_","0","BFITMP194","");}
{BE1ACTIVE^SET(TRUE);IE1SPEED^SET(0);IE1TOR^SET(3);IE1POSX^SET([IGRANICAL+2000]);IE1KIERUNEK^SET(1);SE1KIERUNEK^SET("R");BE1LOCK^SET(FALSE);BE1LOCKZMIANATORU^SET(FALSE);IE1PUNKTY^SET(1);IE1WAGARUMAKA^SET(8);ANNE1^SETFPS(IMINFPSSPEED);ANNE1RUMAK^SETFPS(IMINFPSSPEED);ANNE1LANCA^SETFPS(32);GENEMY1^ADD("ANNE1","ANNE1RUMAK","ANNE1LANCA","ANNWEHMASK_1");GENEMY1^SETPOSITION([IGRANICAL+2000],[IPIERWSZYTORPOSRUMRY+[IE1TOR*IZMIANATORUY]-IZMIANATORUY]);BEHE1PRIORITY^RUN(IE1KIERUNEK);ANNE1LANCA^SETFRAME(SE1KIERUNEK,0);ANNE1LANCA^SHOW();}
{BE2ACTIVE^SET(TRUE);IE2SPEED^SET(0);IE2TOR^SET(3);IE2POSX^SET([IGRANICAR-IDLUGOSCTORU-3000]);IE2KIERUNEK^SET(-1);SE2KIERUNEK^SET("L");BE2LOCK^SET(FALSE);BE2LOCKZMIANATORU^SET(FALSE);IE2PUNKTY^SET(1);IE2WAGARUMAKA^SET(14);ANNE2^SETFPS(IMINFPSSPEED);ANNE2RUMAK^SETFPS(IMINFPSSPEED);ANNE2LANCA^SETFPS(32);GENEMY2^ADD("ANNE2","ANNE2RUMAK","ANNE2LANCA","ANNWEHMASK_2");GENEMY2^SETPOSITION([IGRANICAR-IDLUGOSCTORU-3000],[IPIERWSZYTORPOSRUMRY+[IE2TOR*IZMIANATORUY]-IZMIANATORUY-IZWROTY]);BEHE2PRIORITY^RUN(IE2KIERUNEK);ANNE2LANCA^SETFRAME(SE2KIERUNEK,0);ANNE2LANCA^SHOW();}
{BE3ACTIVE^SET(TRUE);IE3SPEED^SET(0);IE3TOR^SET(4);IE3POSX^SET([IGRANICAR-IDLUGOSCTORU-200]);IE3KIERUNEK^SET(-1);SE3KIERUNEK^SET("L");BE3LOCK^SET(FALSE);BE3LOCKZMIANATORU^SET(FALSE);IE3PUNKTY^SET(1);IE3WAGARUMAKA^SET(23);ANNE3^SETFPS(IMINFPSSPEED);ANNE3RUMAK^SETFPS(IMINFPSSPEED);ANNE3LANCA^SETFPS(32);GENEMY3^ADD("ANNE3","ANNE3RUMAK","ANNE3LANCA","ANNWEHMASK_3");GENEMY3^SETPOSITION([IGRANICAR-IDLUGOSCTORU-200],[IPIERWSZYTORPOSRUMRY+[IE3TOR*IZMIANATORUY]-IZMIANATORUY-IZWROTY]);BEHE3PRIORITY^RUN(IE3KIERUNEK);ANNE3LANCA^SETFRAME(SE3KIERUNEK,0);ANNE3LANCA^SHOW();}
{ANNAUTOL^CLONE(11);ANNAUTOR^CLONE(11);ANNAUTOLMASK^CLONE(11);ANNAUTORMASK^CLONE(11);@LOOP("{I1^SET([RANDOM^GET(3)+1]);I2^SET(RANDOM^GET(4));I3^SET(RANDOM^GET(700));S1^SET(["ANNAUTOL_"+[_I_+1]]);S2^SET(["ANNAUTOLMASK_"+[_I_+1]]);*S1^SETPRIORITY(129);*S2^SETPRIORITY(0);*S1^SETFRAME(["L"+I1],I2);*S2^SETFRAME(["L"+I1],0);*S1^MOVE([[1000*_I_]+I3],0);*S2^MOVE([[1000*_I_]+I3],0);GTRAFFICL^ADD(S1);GTRAFFICL^ADD(S2);}",0,11,1);@LOOP("{I1^SET([RANDOM^GET(3)+1]);I2^SET(RANDOM^GET(4));I3^SET(RANDOM^GET(700));S1^SET(["ANNAUTOR_"+[_I_+1]]);S2^SET(["ANNAUTORMASK_"+[_I_+1]]);*S1^SETPRIORITY(179);*S2^SETPRIORITY(0);*S1^SETFRAME(["R"+I1],I2);*S2^SETFRAME(["R"+I1],0);*S1^MOVE([[1000*_I_]+I3],0);*S2^MOVE([[1000*_I_]+I3],0);GTRAFFICR^ADD(S1);GTRAFFICR^ADD(S2);}",0,11,1);GTRAFFICL^MOVE(500,[IPIERWSZYTORPOSRUMRY+[2*IZMIANATORUY]]);GTRAFFICR^MOVE(-2000,[IPIERWSZYTORPOSRUMRY+[3*IZMIANATORUY]]);CANVASOBSERVER^REMOVE("ANNAUTOR","ANNAUTOL","ANNAUTORMASK","ANNAUTOLMASK");}
{BEHREXPRIORITY^RUN(IREXKIERUNEK);GREX^MOVE(0,[IREXTORZMIANA*IZMIANATORUY]);}
{BEHE1PRIORITY^RUN(IE1KIERUNEK);GENEMY1^MOVE(0,[IE1TORZMIANA*IZMIANATORUY]);BE1LOCKZMIANATORU^SET(TRUE);TE1^ENABLE();}
{BEHE2PRIORITY^RUN(IE2KIERUNEK);GENEMY2^MOVE(0,[IE2TORZMIANA*IZMIANATORUY]);BE2LOCKZMIANATORU^SET(TRUE);TE2^ENABLE();}
{BEHE3PRIORITY^RUN(IE3KIERUNEK);GENEMY3^MOVE(0,[IE3TORZMIANA*IZMIANATORUY]);BE3LOCKZMIANATORU^SET(TRUE);TE3^ENABLE();}
{BEHE4PRIORITY^RUN(IE4KIERUNEK);GENEMY4^MOVE(0,[IE4TORZMIANA*IZMIANATORUY]);BE4LOCKZMIANATORU^SET(TRUE);TE4^ENABLE();}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP25","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP26","BFITMP27");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP32","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP33","BFITMP34");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);I3^SET([[IREXTOR*50]-50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP178","");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IREXTOR*IZMIANATORUY]]);I3^SET([IREXTOR*50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP181","");};
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY-IZWROTY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAR,I1);IREXPOSX^SET([IGRANICAR-IDLUGOSCTORU]);}
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAL,I1);IREXPOSX^SET(IGRANICAL);}
{GREX^SETPOSITION(IGRANICAL,[IPIERWSZYTORPOSRUMRY+[IREXTOR*IZMIANATORUY]-IZMIANATORUY]);}
{GREX^SETPOSITION(IGRANICAR,[IPIERWSZYTORPOSRUMRY+[IREXTOR*IZMIANATORUY]-IZMIANATORUY-IZWROTY]);}
{I1^SET([IREXPOSX+IOTOCZENIEPOSX]);I3^SET([IPIERWSZYTORPOSRUMRY+[IREXTOR*IZMIANATORUY]-IZMIANATORUY]);I4^SET([IZWROTY@2]);I3^ADD([[IREXKIERUNEK*I4]-I4]);I1^ADD([IPOLSZEROKOSCIRUMAKA*IREXKIERUNEK]);SREXCOLL^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I3,FALSE,0,0,FALSE));}
{I1^SET([IE1POSX+IOTOCZENIEPOSX]);I3^SET([IPIERWSZYTORPOSRUMRY+[IE1TOR*IZMIANATORUY]-IZMIANATORUY]);I4^SET([IZWROTY@2]);I3^ADD([[IE1KIERUNEK*I4]-I4]);I1^ADD([IPOLSZEROKOSCIRUMAKA*IE1KIERUNEK]);SE1COLL^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I3,FALSE,0,0,FALSE));}
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP214","BFITMP215");};
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP221","");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX]);I3^SET([IPIERWSZYTORPOSRUMRY+[IE2TOR*IZMIANATORUY]-IZMIANATORUY]);I4^SET([IZWROTY@2]);I3^ADD([[IE2KIERUNEK*I4]-I4]);I1^ADD([IPOLSZEROKOSCIRUMAKA*IE2KIERUNEK]);SE2COLL^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I3,FALSE,0,0,FALSE));}
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP229","BFITMP230");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP236","");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX]);I3^SET([IPIERWSZYTORPOSRUMRY+[IE3TOR*IZMIANATORUY]-IZMIANATORUY]);I4^SET([IZWROTY@2]);I3^ADD([[IE3KIERUNEK*I4]-I4]);I1^ADD([IPOLSZEROKOSCIRUMAKA*IE3KIERUNEK]);SE3COLL^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I3,FALSE,0,0,FALSE));}
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP244","BFITMP245");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP251","");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP258","BFITMP259");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP265","");};
{VARFORCEY^ADD([5*VARVALUE]);}
{VARFORCEX^SUB([3*VARVALUE]);@IF("VAROBJECT","_","6","BFITMP2","");};
{VARFORCEX^ADD([3*VARVALUE]);@IF("VAROBJECT","_","6","BFITMP4","");};
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARI_TMP2^SET($4);VARI_TMP3^SET($5);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(500.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,2,VARI_TMP2,VARI_TMP2,VARI_TMP2);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");VARI_TMP5^SET(VARI_TMP3^RANDOM(VARI_TMP3));*VARS_OBJ^SETFRAME("PLAY",VARI_TMP3);}",0,VARI_TMP4,1);}
{VARS_TMP1^SET($1);VARS_TMP2^SET($2);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETPOSITIONX());VARI_TMPY^SET(*VARS_TMP2^GETPOSITIONY());GRP_UKLAD^ADD(VARS_OBJ);*VARS_OBJ^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_OBJ^PLAY("PLAY");}",0,VARI_TMP4,1);}
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARI_TMP2^SET($4);VARI_TMP3^SET($5);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(500.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,0,VARI_TMP2,VARI_TMP3,200);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");VARI_TMP5^SET(VARI_TMP3^RANDOM(VARI_TMP3));*VARS_OBJ^SETFRAME("PLAY",VARI_TMP3);}",0,VARI_TMP4,1);}
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(1000.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,2,20,20,20);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);WTEST^SETACTIVE(VARI_ID,FALSE);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");}",0,VARI_TMP4,1);}
{S2^SET($1);S1^SET($2);I2^SET(*S1^GETNOF());*S2^CLONE(I2);I1^SET(1);I2^SET(*S1^GETNOFINEVENT("P1"));@LOOP("{*S1^SETFRAME("P1",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P1",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P1");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P2"));@LOOP("{*S1^SETFRAME("P2",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P2",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P2");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P3"));@LOOP("{*S1^SETFRAME("P3",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P3",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P3");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P4"));@LOOP("{*S1^SETFRAME("P4",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P4",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P4");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P5"));@LOOP("{*S1^SETFRAME("P5",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P5",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P5");}",I1,I2,1);}
{S1^SET(["L"+TUNEL_ILVL]);I1^SET(ANN_MASKAD^GETNOFINEVENT(S1));ANN_MASKAD^CLONE(I1);@LOOP("{S2^SET(["ANN_MASKAD_"+_I_]);*S2^SETFRAME(S1,[_I_-1]);GRP_UKLAD^ADD(S2);}",1,I1,1);ANN_MASKAD^SETPOSITION(-250,-250);}
{ARR_UKLAD^LOAD("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^LOAD("$COMMON\TUNEL_NAKLADKA.ARR");ANN_NAKLADKA^CLONE(38);VARI_TMP1^SET(0);VARI_TMP2^SET([39*3]);@LOOP("{VARI_TMPX^SET(ARR_NAKLADKA^GET([_I_+0]));VARI_TMPY^SET(ARR_NAKLADKA^GET([_I_+1]));VARS_TMP2^SET(ARR_NAKLADKA^GET([_I_+2]));VARS_TMP1^SET(["ANN_NAKLADKA_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);VARI_TMP1^INC();GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP2,3);ANN_UKLAD^CLONE(366);VARI_TMP1^SET(0);VARI_TMP2^SET([367*3]);@LOOP("{VARI_TMPX^SET(ARR_UKLAD^GET([_I_+0]));VARI_TMPY^SET(ARR_UKLAD^GET([_I_+1]));VARS_TMP2^SET(ARR_UKLAD^GET([_I_+2]));VARS_TMP1^SET(["ANN_UKLAD_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);@IF(VARS_TMP2^FIND("TLO"),"!_","-1","BFITMP27","BFITMP28");VARI_TMP1^INC();GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP2,3);VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{DMM_NAKLADKA^LOAD("H_NAKLADKA.ANN");DMM_UKLAD^LOAD("H_UKLAD.ANN");VARI_TMP1^SET(DMM_NAKLADKA^GETNOFINEVENT("UKLAD"));@LOOP("{DMM_NAKLADKA^SETFRAME("UKLAD",_I_);VARI_TMPX^SET(DMM_NAKLADKA^GETPOSITIONX());VARI_TMPY^SET(DMM_NAKLADKA^GETPOSITIONY());VARS_TMP2^SET(DMM_NAKLADKA^GETFRAMENAME());ARR_NAKLADKA^ADD(VARI_TMPX,VARI_TMPY,VARS_TMP2);GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP1,1);VARI_TMP1^SET(DMM_UKLAD^GETNOFINEVENT("UKLAD"));@LOOP("{DMM_UKLAD^SETFRAME("UKLAD",_I_);VARI_TMPX^SET(DMM_UKLAD^GETPOSITIONX());VARI_TMPY^SET(DMM_UKLAD^GETPOSITIONY());VARS_TMP2^SET(DMM_UKLAD^GETFRAMENAME());ARR_UKLAD^ADD(VARI_TMPX,VARI_TMPY,VARS_TMP2);GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP1,1);ARR_UKLAD^SAVE("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^SAVE("$COMMON\TUNEL_NAKLADKA.ARR");VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","0","BFITMP20","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","1","BFITMP22","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARI_TMP2^SET($4);VARI_TMP3^SET($5);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(500.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,2,VARI_TMP2,VARI_TMP2,VARI_TMP2);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");VARI_TMP5^SET(VARI_TMP3^RANDOM(VARI_TMP3));*VARS_OBJ^SETFRAME("PLAY",VARI_TMP3);}",0,VARI_TMP4,1);}
{VARS_TMP1^SET($1);VARS_TMP2^SET($2);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETPOSITIONX());VARI_TMPY^SET(*VARS_TMP2^GETPOSITIONY());GRP_UKLAD^ADD(VARS_OBJ);*VARS_OBJ^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_OBJ^PLAY("PLAY");}",0,VARI_TMP4,1);}
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARI_TMP2^SET($4);VARI_TMP3^SET($5);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(500.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,0,VARI_TMP2,VARI_TMP3,200);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");VARI_TMP5^SET(VARI_TMP3^RANDOM(VARI_TMP3));*VARS_OBJ^SETFRAME("PLAY",VARI_TMP3);}",0,VARI_TMP4,1);}
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(1000.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,2,20,20,20);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);WTEST^SETACTIVE(VARI_ID,FALSE);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");}",0,VARI_TMP4,1);}
{S2^SET($1);S1^SET($2);I2^SET(*S1^GETNOF());*S2^CLONE(I2);I1^SET(1);I2^SET(*S1^GETNOFINEVENT("P1"));@LOOP("{*S1^SETFRAME("P1",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P1",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P1");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P2"));@LOOP("{*S1^SETFRAME("P2",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P2",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P2");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P3"));@LOOP("{*S1^SETFRAME("P3",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P3",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P3");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P4"));@LOOP("{*S1^SETFRAME("P4",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P4",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P4");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P5"));@LOOP("{*S1^SETFRAME("P5",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P5",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P5");}",I1,I2,1);}
{S1^SET(["L"+TUNEL_ILVL]);I1^SET(ANN_MASKAD^GETNOFINEVENT(S1));ANN_MASKAD^CLONE(I1);@LOOP("{S2^SET(["ANN_MASKAD_"+_I_]);*S2^SETFRAME(S1,[_I_-1]);GRP_UKLAD^ADD(S2);}",1,I1,1);ANN_MASKAD^SETPOSITION(-250,-250);}
{ARR_UKLAD^LOAD("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^LOAD("$COMMON\TUNEL_NAKLADKA.ARR");ANN_NAKLADKA^CLONE(38);VARI_TMP1^SET(0);VARI_TMP2^SET([39*3]);@LOOP("{VARI_TMPX^SET(ARR_NAKLADKA^GET([_I_+0]));VARI_TMPY^SET(ARR_NAKLADKA^GET([_I_+1]));VARS_TMP2^SET(ARR_NAKLADKA^GET([_I_+2]));VARS_TMP1^SET(["ANN_NAKLADKA_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);VARI_TMP1^INC();GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP2,3);ANN_UKLAD^CLONE(366);VARI_TMP1^SET(0);VARI_TMP2^SET([367*3]);@LOOP("{VARI_TMPX^SET(ARR_UKLAD^GET([_I_+0]));VARI_TMPY^SET(ARR_UKLAD^GET([_I_+1]));VARS_TMP2^SET(ARR_UKLAD^GET([_I_+2]));VARS_TMP1^SET(["ANN_UKLAD_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);@IF(VARS_TMP2^FIND("TLO"),"!_","-1","BFITMP27","BFITMP28");VARI_TMP1^INC();GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP2,3);VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{DMM_NAKLADKA^LOAD("H_NAKLADKA.ANN");DMM_UKLAD^LOAD("H_UKLAD.ANN");VARI_TMP1^SET(DMM_NAKLADKA^GETNOFINEVENT("UKLAD"));@LOOP("{DMM_NAKLADKA^SETFRAME("UKLAD",_I_);VARI_TMPX^SET(DMM_NAKLADKA^GETPOSITIONX());VARI_TMPY^SET(DMM_NAKLADKA^GETPOSITIONY());VARS_TMP2^SET(DMM_NAKLADKA^GETFRAMENAME());ARR_NAKLADKA^ADD(VARI_TMPX,VARI_TMPY,VARS_TMP2);GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP1,1);VARI_TMP1^SET(DMM_UKLAD^GETNOFINEVENT("UKLAD"));@LOOP("{DMM_UKLAD^SETFRAME("UKLAD",_I_);VARI_TMPX^SET(DMM_UKLAD^GETPOSITIONX());VARI_TMPY^SET(DMM_UKLAD^GETPOSITIONY());VARS_TMP2^SET(DMM_UKLAD^GETFRAMENAME());ARR_UKLAD^ADD(VARI_TMPX,VARI_TMPY,VARS_TMP2);GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP1,1);ARR_UKLAD^SAVE("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^SAVE("$COMMON\TUNEL_NAKLADKA.ARR");VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","0","BFITMP20","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","1","BFITMP22","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARI_TMP2^SET($4);VARI_TMP3^SET($5);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(500.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,2,VARI_TMP2,VARI_TMP2,VARI_TMP2);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");VARI_TMP5^SET(VARI_TMP3^RANDOM(VARI_TMP3));*VARS_OBJ^SETFRAME("PLAY",VARI_TMP3);}",0,VARI_TMP4,1);}
{VARS_TMP1^SET($1);VARS_TMP2^SET($2);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETPOSITIONX());VARI_TMPY^SET(*VARS_TMP2^GETPOSITIONY());GRP_UKLAD^ADD(VARS_OBJ);*VARS_OBJ^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_OBJ^PLAY("PLAY");}",0,VARI_TMP4,1);}
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARI_TMP2^SET($4);VARI_TMP3^SET($5);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(500.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,0,VARI_TMP2,VARI_TMP3,200);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");VARI_TMP5^SET(VARI_TMP3^RANDOM(VARI_TMP3));*VARS_OBJ^SETFRAME("PLAY",VARI_TMP3);}",0,VARI_TMP4,1);}
{VARI_TMP1^SET($1);VARS_TMP1^SET($2);VARS_TMP2^SET($3);VARD_MASS^SET(1.0);VARD_FRICTION^SET(1.1);VARD_FRICTIONV^SET(1.0);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(1000.0);VARI_TMP4^SET(*VARS_TMP2^GETNOFINEVENT("PLAY"));*VARS_TMP1^CLONE([VARI_TMP4-1]);@LOOP("{VARS_OBJ^SET([VARS_TMP1+"_"+_I_]);*VARS_OBJ^SETANCHOR("CENTER");VARI_ID^SET([VARI_TMP1+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,2,20,20,20);WTEST^SETLIMIT(VARI_ID,0,0,0,8000,1080,0);WTEST^LINK(VARI_ID,VARS_OBJ);WTEST^SETACTIVE(VARI_ID,FALSE);*VARS_TMP2^SETFRAME("PLAY",_I_);VARI_TMPX^SET(*VARS_TMP2^GETCENTERX());VARI_TMPY^SET(*VARS_TMP2^GETCENTERY());WTEST^SETPOSITION(VARI_ID,VARI_TMPX,VARI_TMPY,0);*VARS_OBJ^PLAY("PLAY");}",0,VARI_TMP4,1);}
{S2^SET($1);S1^SET($2);I2^SET(*S1^GETNOF());*S2^CLONE(I2);I1^SET(1);I2^SET(*S1^GETNOFINEVENT("P1"));@LOOP("{*S1^SETFRAME("P1",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P1",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P1");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P2"));@LOOP("{*S1^SETFRAME("P2",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P2",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P2");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P3"));@LOOP("{*S1^SETFRAME("P3",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P3",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P3");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P4"));@LOOP("{*S1^SETFRAME("P4",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P4",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P4");}",I1,I2,1);I1^ADD(I2);I2^SET(*S1^GETNOFINEVENT("P5"));@LOOP("{*S1^SETFRAME("P5",[_I_-I1]);I3^SET(*S1^GETPOSITIONX());I4^SET(*S1^GETPOSITIONY());S3^SET([S2+"_"+_I_]);GRP_UKLAD^ADD(S3);*S3^SETFRAME("P5",0);*S3^SETPOSITION(I3,I4);*S3^PLAY("P5");}",I1,I2,1);}
{S1^SET(["L"+TUNEL_ILVL]);I1^SET(ANN_MASKAD^GETNOFINEVENT(S1));ANN_MASKAD^CLONE(I1);@LOOP("{S2^SET(["ANN_MASKAD_"+_I_]);*S2^SETFRAME(S1,[_I_-1]);GRP_UKLAD^ADD(S2);}",1,I1,1);ANN_MASKAD^SETPOSITION(-250,-250);}
{ARR_UKLAD^LOAD("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^LOAD("$COMMON\TUNEL_NAKLADKA.ARR");ANN_NAKLADKA^CLONE(38);VARI_TMP1^SET(0);VARI_TMP2^SET([39*3]);@LOOP("{VARI_TMPX^SET(ARR_NAKLADKA^GET([_I_+0]));VARI_TMPY^SET(ARR_NAKLADKA^GET([_I_+1]));VARS_TMP2^SET(ARR_NAKLADKA^GET([_I_+2]));VARS_TMP1^SET(["ANN_NAKLADKA_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);VARI_TMP1^INC();GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP2,3);ANN_UKLAD^CLONE(366);VARI_TMP1^SET(0);VARI_TMP2^SET([367*3]);@LOOP("{VARI_TMPX^SET(ARR_UKLAD^GET([_I_+0]));VARI_TMPY^SET(ARR_UKLAD^GET([_I_+1]));VARS_TMP2^SET(ARR_UKLAD^GET([_I_+2]));VARS_TMP1^SET(["ANN_UKLAD_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);@IF(VARS_TMP2^FIND("TLO"),"!_","-1","BFITMP23","BFITMP24");VARI_TMP1^INC();GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP2,3);VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{DMM_NAKLADKA^LOAD("H_NAKLADKA.ANN");DMM_UKLAD^LOAD("H_UKLAD.ANN");VARI_TMP1^SET(DMM_NAKLADKA^GETNOFINEVENT("UKLAD"));@LOOP("{DMM_NAKLADKA^SETFRAME("UKLAD",_I_);VARI_TMPX^SET(DMM_NAKLADKA^GETPOSITIONX());VARI_TMPY^SET(DMM_NAKLADKA^GETPOSITIONY());VARS_TMP2^SET(DMM_NAKLADKA^GETFRAMENAME());ARR_NAKLADKA^ADD(VARI_TMPX,VARI_TMPY,VARS_TMP2);GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP1,1);VARI_TMP1^SET(DMM_UKLAD^GETNOFINEVENT("UKLAD"));@LOOP("{DMM_UKLAD^SETFRAME("UKLAD",_I_);VARI_TMPX^SET(DMM_UKLAD^GETPOSITIONX());VARI_TMPY^SET(DMM_UKLAD^GETPOSITIONY());VARS_TMP2^SET(DMM_UKLAD^GETFRAMENAME());ARR_UKLAD^ADD(VARI_TMPX,VARI_TMPY,VARS_TMP2);GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP1,1);ARR_UKLAD^SAVE("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^SAVE("$COMMON\TUNEL_NAKLADKA.ARR");VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","0","BFITMP16","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","1","BFITMP18","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{BEHSETSCENE^RUN();BEHSAVESCENE^RUN();INRRUMAKA^SET(G_SARCADESCENELAST^GET(0,1));TURNIEJ_IRUNDA^SET(G_SARCADESCENELAST^GET(1,1));VARI_SZUKAJHERBU^SET(G_SARCADESCENELAST^GET(2,1));KEYBOARD^SETAUTOREPEAT(TRUE);IOTOCZENIEPOSX^SET(0);IDLUGOSCTORU^SET(4800);IPIERWSZYTORPOSPOCZY^SET(140);IPIERWSZYTORPOSRUMRY^SET(235);IPOLSZEROKOSCIRUMAKA^SET(50);IZWROTY^SET(10);IZMIANATORUY^SET(115);IGRANICAL^SET(120);IWAGARUMAKAENEMY^SET(15);IMINFPSSPEED^SET(6);ICRASHSPEED^SET(6);IZYWYCHLEFT^SET(4);ICURRENTDEADNR^SET(0);IDLUGOSCTORU^SET([800-IDLUGOSCTORU]);IGRANICAR^SET([800-IGRANICAL]);ARRPOSX^ADD(0,0,0,0,0);ARRTORY^ADD(0,0,0,0,0);I1^SET(ANNTYL^GETNOFINEVENT("TYL"));ANNTYL^CLONE(I1);@LOOP("{S1^SET(["ANNTYL_"+_I_]);*S1^SETFRAME("TYL",[_I_-1]);*S1^SETPRIORITY(1);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANN1PLAN^GETNOFINEVENT("1PLAN"));ANN1PLAN^CLONE(I1);@LOOP("{S1^SET(["ANN1PLAN_"+_I_]);*S1^SETFRAME("1PLAN",[_I_-1]);*S1^SETPRIORITY(150);GOTOCZENIE^ADD(S1);}",1,I1,1);ANNSLUPEK^CLONE(2);@LOOP("{S1^SET(["ANNSLUPEK_"+_I_]);*S1^SETFRAME("STAND",[_I_-1]);*S1^SETPRIORITY(160);GOTOCZENIE^ADD(S1);}",1,2,1);ANNFLAGA^CLONE(2);@LOOP("{S1^SET(["ANNFLAGA_"+_I_]);*S1^SETFRAME(["F"+_I_],0);*S1^SETPRIORITY(161);*S1^PLAY(["F"+_I_]);GOTOCZENIE^ADD(S1);}",1,2,1);I1^SET(ANNPLOT^GETNOFINEVENT("1"));ANNPLOT^CLONE(I1);@LOOP("{S1^SET(["ANNPLOT_"+_I_]);*S1^SETFRAME("1",[_I_-1]);*S1^SETPRIORITY(50);GOTOCZENIE^ADD(S1);}",1,I1,1);I2^SET(ANNPLOT^GETNOFINEVENT("2"));ANNPLOT^CLONE(I2);@LOOP("{S1^SET(["ANNPLOT_"+_I_]);*S1^SETFRAME("2",[_I_-1-I1]);*S1^SETPRIORITY(100);GOTOCZENIE^ADD(S1);}",[I1+1],I2,1);GOTOCZENIE^SHOW();ANNPLOT^MOVE(0,700);I3^SET(ANNPLOTMASKA^GETNOFINEVENT("MASKA"));ANNPLOTMASKA^CLONE(I3);@LOOP("{S1^SET(["ANNPLOTMASKA_"+_I_]);*S1^SETFRAME("MASKA",[_I_-1]);GOTOCZENIE^ADD(S1);}",1,I3,1);ANNPLOTMASKA^MOVE(0,700);GOTOCZENIE^ADD("ANNREXBUM","ANNE1BUM","ANNE2BUM","ANNE3BUM","ANNE4BUM");ANNTARCZA^CLONE(5);BEHINITENEMIESKOLORY^RUN();BEHINITPLAYER^RUN();BEHINITENEMY_1^RUN();BEHINITENEMY_2^RUN();BEHINITENEMY_3^RUN();IALLMOVEX^SET(-125);GENEMY2^MOVE(IALLMOVEX,0);GENEMY3^MOVE(IALLMOVEX,0);GENEMY4^MOVE(IALLMOVEX,0);GOTOCZENIE^MOVE(IALLMOVEX,0);IREXPOSX^SUB(IALLMOVEX);IE1POSX^SUB(IALLMOVEX);IOTOCZENIEPOSX^ADD(IALLMOVEX);SEQOPIS^PLAY(["ZAPOWIEDZ"+TURNIEJ_IRUNDA]);BEHREXIKONKA^RUN();BEHE1IKONKA^RUN();BEHE2IKONKA^RUN();BEHE3IKONKA^RUN();}
{I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP217","BFITMP218");@IF("IALLMOVEX","!_","0","BFITMP219","");}
{@IF("TURNIEJ_IRUNDA","_","5","BFITMP220","");I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+1]));ANNE1^LOAD(["ENEMY"+I1+".ANN"]);ANNE1RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE1TARCZA^SET(I1);I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));ANNE2^LOAD(["ENEMY"+I1+".ANN"]);ANNE2RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE2TARCZA^SET(I1);I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));ANNE3^LOAD(["ENEMY"+I1+".ANN"]);ANNE3RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE3TARCZA^SET(I1);}
{I1^SET($1);IZYWYCHLEFT^DEC();I2^SET(ARRTURNIEJ^FIND(I1));I3^SET([[4*TURNIEJ_IRUNDA]+ICURRENTDEADNR]);ICURRENTDEADNR^INC();ARRTURNIEJ^REMOVEAT(I2);ARRTURNIEJ^INSERTAT(I3,I1);@IF("I1","_","0","BFITMP229","BFITMP230");}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BREXLOCK","_","FALSE","BFITMP248","");I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);}
{BEHREXPRIORITY^RUN(IREXKIERUNEK);GREX^MOVE(0,[IREXTORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(0,IREXTOR);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE1LOCK","_","FALSE","BFITMP254","");I1^SET([3600-[IE1PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_1^SETFRAME([SE1TARCZA+SE1KIERUNEK],I1);}
{BEHE1PRIORITY^RUN(IE1KIERUNEK);GENEMY1^MOVE(0,[IE1TORZMIANA*IZMIANATORUY]);IMGIKONKA1^MOVE(0,[IE1TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(1,IE1TOR);BE1LOCKZMIANATORU^SET(TRUE);TE1^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE2LOCK","_","FALSE","BFITMP273","");I1^SET([3600-[IE2PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_2^SETFRAME([SE2TARCZA+SE2KIERUNEK],I1);}
{BEHE2PRIORITY^RUN(IE2KIERUNEK);GENEMY2^MOVE(0,[IE2TORZMIANA*IZMIANATORUY]);IMGIKONKA2^MOVE(0,[IE2TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(2,IE2TOR);BE2LOCKZMIANATORU^SET(TRUE);TE2^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE3LOCK","_","FALSE","BFITMP292","");I1^SET([3600-[IE3PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_3^SETFRAME([SE3TARCZA+SE3KIERUNEK],I1);}
{BEHE3PRIORITY^RUN(IE3KIERUNEK);GENEMY3^MOVE(0,[IE3TORZMIANA*IZMIANATORUY]);IMGIKONKA3^MOVE(0,[IE3TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(3,IE3TOR);BE3LOCKZMIANATORU^SET(TRUE);TE3^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE4LOCK","_","FALSE","BFITMP311","");I1^SET([3600-[IE4PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_4^SETFRAME([SE4TARCZA+SE4KIERUNEK],I1);}
{BEHE4PRIORITY^RUN(IE4KIERUNEK);GENEMY4^MOVE(0,[IE4TORZMIANA*IZMIANATORUY]);IMGIKONKA4^MOVE(0,[IE4TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(4,IE4TOR);BE4LOCKZMIANATORU^SET(TRUE);TE4^ENABLE();}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP24","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP25","BFITMP26");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP32","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP33","BFITMP34");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);I3^SET([[IREXTOR*50]-50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP203","");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IREXTOR*IZMIANATORUY]]);I3^SET([IREXTOR*50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP206","");};
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY-IZWROTY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAR,I1);IREXPOSX^SET([IGRANICAR-IDLUGOSCTORU]);}
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAL,I1);IREXPOSX^SET(IGRANICAL);}
{IPIERWSZYZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));IDRUGIZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));INRPRZEDSTAWIANEGO^SET(0);I1^SET(ARRTURNIEJ^FIND(0));I2^SET([TURNIEJ_IRUNDA*8]);I2^SET([5+I2-I1]);TURNIEJ_IRUNDA^INC();I3^SET([TURNIEJ_IRUNDA*4]);I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,0);ARRTURNIEJ^CHANGEAT(I1,I4);I3^ADD(RANDOM^GET(3));I3^INC();I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,ARRTURNIEJ^GET(I2));ARRTURNIEJ^CHANGEAT(I2,I4);G_SARCADESCENELAST^SET(INRRUMAKA);G_SARCADESCENELAST^ADD(TURNIEJ_IRUNDA);G_SARCADESCENELAST^ADD(VARI_SZUKAJHERBU);SEQOPIS^PLAY("ZWYCIEZA");}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SFX_TURNIEJOUT^PLAY();}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SFX_TURNIEJOUT^PLAY();}
{IREXSPEED^SET(0);SREXKIERUNEK^SET("L");BEHREXPRIORITY^RUN(IREXKIERUNEK);ANNREX^PLAY(SREXKIERUNEK);ANNREXRUMAK^PLAY(SREXKIERUNEK);ANNREXLANCA^SETFRAME(SREXKIERUNEK,0);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],ANNTARCZA_5^GETCFRAMEINEVENT());I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY-IZWROTY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAR,I1);IREXPOSX^SET([IGRANICAR-IDLUGOSCTORU]);}
{IREXSPEED^SET(0);SREXKIERUNEK^SET("R");BEHREXPRIORITY^RUN(IREXKIERUNEK);ANNREX^PLAY(SREXKIERUNEK);ANNREXRUMAK^PLAY(SREXKIERUNEK);ANNREXLANCA^SETFRAME(SREXKIERUNEK,0);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],ANNTARCZA_5^GETCFRAMEINEVENT());I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAL,I1);IREXPOSX^SET(IGRANICAL);}
{I1^SET([I2*I3]);@IF("IREXKIERUNEK","_","I4","BFITMP243","BFITMP244");SFX_TURNIEJCIOS1^PLAY();@IF("I1",">","89","BFITMP246","BFITMP247");BEHSND^RUN("SEQKRETDOPING","REXDOSTAL",3);};
{I1^SET([I2*I3]);@IF("IE1KIERUNEK","_","I4","BFITMP249","BFITMP250");SFX_TURNIEJCIOS2^PLAY();@IF("I1",">","89","BFITMP252","BFITMP253");};
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP257","BFITMP258");};
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP264","");};
{I1^SET([I2*I3]);@IF("IE2KIERUNEK","_","I4","BFITMP268","BFITMP269");SFX_TURNIEJCIOS3^PLAY();@IF("I1",">","89","BFITMP271","BFITMP272");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP276","BFITMP277");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP283","");};
{I1^SET([I2*I3]);@IF("IE3KIERUNEK'I4&&IE3SPEED>2","BFITMP287","BFITMP288");SFX_TURNIEJCIOS4^PLAY();@IF("I1",">","89","BFITMP290","BFITMP291");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP295","BFITMP296");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP302","");};
{I1^SET([I2*I3]);@IF("IE4KIERUNEK'I4&&IE4SPEED>2","BFITMP306","BFITMP307");@IF("I1",">","89","BFITMP309","BFITMP310");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP314","BFITMP315");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP321","");};
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{BEHSETSCENE^RUN();BEHSAVESCENE^RUN();INRRUMAKA^SET(G_SARCADESCENELAST^GET(0,1));TURNIEJ_IRUNDA^SET(G_SARCADESCENELAST^GET(1,1));VARI_SZUKAJHERBU^SET(G_SARCADESCENELAST^GET(2,1));KEYBOARD^SETAUTOREPEAT(TRUE);IOTOCZENIEPOSX^SET(0);IDLUGOSCTORU^SET(4800);IPIERWSZYTORPOSPOCZY^SET(140);IPIERWSZYTORPOSRUMRY^SET(235);IPOLSZEROKOSCIRUMAKA^SET(50);IZWROTY^SET(10);IZMIANATORUY^SET(115);IGRANICAL^SET(120);IWAGARUMAKAENEMY^SET(15);IMINFPSSPEED^SET(6);ICRASHSPEED^SET(6);IZYWYCHLEFT^SET(4);ICURRENTDEADNR^SET(0);IDLUGOSCTORU^SET([800-IDLUGOSCTORU]);IGRANICAR^SET([800-IGRANICAL]);ARRPOSX^ADD(0,0,0,0,0);ARRTORY^ADD(0,0,0,0,0);I1^SET(ANNTYL^GETNOFINEVENT("TYL"));ANNTYL^CLONE(I1);@LOOP("{S1^SET(["ANNTYL_"+_I_]);*S1^SETFRAME("TYL",[_I_-1]);*S1^SETPRIORITY(1);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANN1PLAN^GETNOFINEVENT("1PLAN"));ANN1PLAN^CLONE(I1);@LOOP("{S1^SET(["ANN1PLAN_"+_I_]);*S1^SETFRAME("1PLAN",[_I_-1]);*S1^SETPRIORITY(150);GOTOCZENIE^ADD(S1);}",1,I1,1);ANNSLUPEK^CLONE(2);@LOOP("{S1^SET(["ANNSLUPEK_"+_I_]);*S1^SETFRAME("STAND",[_I_-1]);*S1^SETPRIORITY(160);GOTOCZENIE^ADD(S1);}",1,2,1);ANNFLAGA^CLONE(2);@LOOP("{S1^SET(["ANNFLAGA_"+_I_]);*S1^SETFRAME(["F"+_I_],0);*S1^SETPRIORITY(161);*S1^PLAY(["F"+_I_]);GOTOCZENIE^ADD(S1);}",1,2,1);I1^SET(ANNPLOT^GETNOFINEVENT("1"));ANNPLOT^CLONE(I1);@LOOP("{S1^SET(["ANNPLOT_"+_I_]);*S1^SETFRAME("1",[_I_-1]);*S1^SETPRIORITY(50);GOTOCZENIE^ADD(S1);}",1,I1,1);I2^SET(ANNPLOT^GETNOFINEVENT("2"));ANNPLOT^CLONE(I2);@LOOP("{S1^SET(["ANNPLOT_"+_I_]);*S1^SETFRAME("2",[_I_-1-I1]);*S1^SETPRIORITY(100);GOTOCZENIE^ADD(S1);}",[I1+1],I2,1);GOTOCZENIE^SHOW();ANNPLOT^MOVE(0,700);I3^SET(ANNPLOTMASKA^GETNOFINEVENT("MASKA"));ANNPLOTMASKA^CLONE(I3);@LOOP("{S1^SET(["ANNPLOTMASKA_"+_I_]);*S1^SETFRAME("MASKA",[_I_-1]);GOTOCZENIE^ADD(S1);}",1,I3,1);ANNPLOTMASKA^MOVE(0,700);GOTOCZENIE^ADD("ANNREXBUM","ANNE1BUM","ANNE2BUM","ANNE3BUM","ANNE4BUM");ANNTARCZA^CLONE(5);BEHINITENEMIESKOLORY^RUN();BEHINITPLAYER^RUN();BEHINITENEMY_1^RUN();BEHINITENEMY_2^RUN();BEHINITENEMY_3^RUN();IALLMOVEX^SET(-125);GENEMY2^MOVE(IALLMOVEX,0);GENEMY3^MOVE(IALLMOVEX,0);GENEMY4^MOVE(IALLMOVEX,0);GOTOCZENIE^MOVE(IALLMOVEX,0);IREXPOSX^SUB(IALLMOVEX);IE1POSX^SUB(IALLMOVEX);IOTOCZENIEPOSX^ADD(IALLMOVEX);SEQOPIS^PLAY(["ZAPOWIEDZ"+TURNIEJ_IRUNDA]);BEHREXIKONKA^RUN();BEHE1IKONKA^RUN();BEHE2IKONKA^RUN();BEHE3IKONKA^RUN();}
{I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP201","BFITMP202");@IF("IALLMOVEX","!_","0","BFITMP203","");}
{@IF("TURNIEJ_IRUNDA","_","5","BFITMP204","");I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+1]));ANNE1^LOAD(["ENEMY"+I1+".ANN"]);ANNE1RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE1TARCZA^SET(I1);I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));ANNE2^LOAD(["ENEMY"+I1+".ANN"]);ANNE2RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE2TARCZA^SET(I1);I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));ANNE3^LOAD(["ENEMY"+I1+".ANN"]);ANNE3RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE3TARCZA^SET(I1);}
{I1^SET($1);IZYWYCHLEFT^DEC();I2^SET(ARRTURNIEJ^FIND(I1));I3^SET([[4*TURNIEJ_IRUNDA]+ICURRENTDEADNR]);ICURRENTDEADNR^INC();ARRTURNIEJ^REMOVEAT(I2);ARRTURNIEJ^INSERTAT(I3,I1);@IF("I1","_","0","BFITMP213","BFITMP214");}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BREXLOCK","_","FALSE","BFITMP232","");I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);}
{BEHREXPRIORITY^RUN(IREXKIERUNEK);GREX^MOVE(0,[IREXTORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(0,IREXTOR);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE1LOCK","_","FALSE","BFITMP238","");I1^SET([3600-[IE1PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_1^SETFRAME([SE1TARCZA+SE1KIERUNEK],I1);}
{BEHE1PRIORITY^RUN(IE1KIERUNEK);GENEMY1^MOVE(0,[IE1TORZMIANA*IZMIANATORUY]);IMGIKONKA1^MOVE(0,[IE1TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(1,IE1TOR);BE1LOCKZMIANATORU^SET(TRUE);TE1^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE2LOCK","_","FALSE","BFITMP257","");I1^SET([3600-[IE2PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_2^SETFRAME([SE2TARCZA+SE2KIERUNEK],I1);}
{BEHE2PRIORITY^RUN(IE2KIERUNEK);GENEMY2^MOVE(0,[IE2TORZMIANA*IZMIANATORUY]);IMGIKONKA2^MOVE(0,[IE2TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(2,IE2TOR);BE2LOCKZMIANATORU^SET(TRUE);TE2^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE3LOCK","_","FALSE","BFITMP276","");I1^SET([3600-[IE3PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_3^SETFRAME([SE3TARCZA+SE3KIERUNEK],I1);}
{BEHE3PRIORITY^RUN(IE3KIERUNEK);GENEMY3^MOVE(0,[IE3TORZMIANA*IZMIANATORUY]);IMGIKONKA3^MOVE(0,[IE3TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(3,IE3TOR);BE3LOCKZMIANATORU^SET(TRUE);TE3^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE4LOCK","_","FALSE","BFITMP295","");I1^SET([3600-[IE4PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_4^SETFRAME([SE4TARCZA+SE4KIERUNEK],I1);}
{BEHE4PRIORITY^RUN(IE4KIERUNEK);GENEMY4^MOVE(0,[IE4TORZMIANA*IZMIANATORUY]);IMGIKONKA4^MOVE(0,[IE4TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(4,IE4TOR);BE4LOCKZMIANATORU^SET(TRUE);TE4^ENABLE();}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP20","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP21","BFITMP22");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP28","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP29","BFITMP30");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);I3^SET([[IREXTOR*50]-50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP187","");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IREXTOR*IZMIANATORUY]]);I3^SET([IREXTOR*50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP190","");};
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY-IZWROTY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAR,I1);IREXPOSX^SET([IGRANICAR-IDLUGOSCTORU]);}
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAL,I1);IREXPOSX^SET(IGRANICAL);}
{IPIERWSZYZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));IDRUGIZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));INRPRZEDSTAWIANEGO^SET(0);I1^SET(ARRTURNIEJ^FIND(0));I2^SET([TURNIEJ_IRUNDA*8]);I2^SET([5+I2-I1]);TURNIEJ_IRUNDA^INC();I3^SET([TURNIEJ_IRUNDA*4]);I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,0);ARRTURNIEJ^CHANGEAT(I1,I4);I3^ADD(RANDOM^GET(3));I3^INC();I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,ARRTURNIEJ^GET(I2));ARRTURNIEJ^CHANGEAT(I2,I4);G_SARCADESCENELAST^SET(INRRUMAKA);G_SARCADESCENELAST^ADD(TURNIEJ_IRUNDA);G_SARCADESCENELAST^ADD(VARI_SZUKAJHERBU);SEQOPIS^PLAY("ZWYCIEZA");}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SNDZAPLANSZA^PLAY();}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SNDZAPLANSZA^PLAY();}
{IREXSPEED^SET(0);SREXKIERUNEK^SET("L");BEHREXPRIORITY^RUN(IREXKIERUNEK);ANNREX^PLAY(SREXKIERUNEK);ANNREXRUMAK^PLAY(SREXKIERUNEK);ANNREXLANCA^SETFRAME(SREXKIERUNEK,0);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],ANNTARCZA_5^GETCFRAMEINEVENT());I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY-IZWROTY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAR,I1);IREXPOSX^SET([IGRANICAR-IDLUGOSCTORU]);}
{IREXSPEED^SET(0);SREXKIERUNEK^SET("R");BEHREXPRIORITY^RUN(IREXKIERUNEK);ANNREX^PLAY(SREXKIERUNEK);ANNREXRUMAK^PLAY(SREXKIERUNEK);ANNREXLANCA^SETFRAME(SREXKIERUNEK,0);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],ANNTARCZA_5^GETCFRAMEINEVENT());I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAL,I1);IREXPOSX^SET(IGRANICAL);}
{I1^SET([I2*I3]);@IF("IREXKIERUNEK","_","I4","BFITMP227","BFITMP228");@IF("I1",">","89","BFITMP230","BFITMP231");BEHSND^RUN("SEQKRETDOPING","REXDOSTAL",3);};
{I1^SET([I2*I3]);@IF("IE1KIERUNEK","_","I4","BFITMP233","BFITMP234");@IF("I1",">","89","BFITMP236","BFITMP237");};
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP241","BFITMP242");};
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP248","");};
{I1^SET([I2*I3]);@IF("IE2KIERUNEK","_","I4","BFITMP252","BFITMP253");@IF("I1",">","89","BFITMP255","BFITMP256");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP260","BFITMP261");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP267","");};
{I1^SET([I2*I3]);@IF("IE3KIERUNEK'I4&&IE3SPEED>2","BFITMP271","BFITMP272");@IF("I1",">","89","BFITMP274","BFITMP275");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP279","BFITMP280");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP286","");};
{I1^SET([I2*I3]);@IF("IE4KIERUNEK'I4&&IE4SPEED>2","BFITMP290","BFITMP291");@IF("I1",">","89","BFITMP293","BFITMP294");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP298","BFITMP299");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP305","");};
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+INRPRZEDSTAWIANEGO]));SEQZAWODNIK^PLAY(["ZAW"+I1]);}
{BEHSETSCENE^RUN();BEHSAVESCENE^RUN();@IF("G_SARCADESCENE","!_",""TURNIEJ"","BFITMP193","");G_ANNPAGE^HIDE();KEYBOARD^SETAUTOREPEAT(TRUE);INRRUMAKA^SET(G_SARCADESCENELAST^GET(0,1));IOTOCZENIEPOSX^SET(0);IDLUGOSCTORU^SET(4800);IPIERWSZYTORPOSPOCZY^SET(140);IPIERWSZYTORPOSRUMRY^SET(235);IPOLSZEROKOSCIRUMAKA^SET(50);IZWROTY^SET(10);IZMIANATORUY^SET(115);IGRANICAL^SET(120);IWAGARUMAKAENEMY^SET(15);IMINFPSSPEED^SET(6);ICRASHSPEED^SET(6);IZYWYCHLEFT^SET(4);ICURRENTDEADNR^SET(0);IDLUGOSCTORU^SET([800-IDLUGOSCTORU]);IGRANICAR^SET([800-IGRANICAL]);ARRPOSX^ADD(0,0,0,0,0);ARRTORY^ADD(0,0,0,0,0);I1^SET(ANNTYL^GETNOFINEVENT("TYL"));ANNTYL^CLONE(I1);@LOOP("{S1^SET(["ANNTYL_"+_I_]);*S1^SETFRAME("TYL",[_I_-1]);*S1^SETPRIORITY(1);GOTOCZENIE^ADD(S1);}",1,I1,1);I1^SET(ANN1PLAN^GETNOFINEVENT("1PLAN"));ANN1PLAN^CLONE(I1);@LOOP("{S1^SET(["ANN1PLAN_"+_I_]);*S1^SETFRAME("1PLAN",[_I_-1]);*S1^SETPRIORITY(150);GOTOCZENIE^ADD(S1);}",1,I1,1);ANNSLUPEK^CLONE(2);@LOOP("{S1^SET(["ANNSLUPEK_"+_I_]);*S1^SETFRAME("STAND",[_I_-1]);*S1^SETPRIORITY(160);GOTOCZENIE^ADD(S1);}",1,2,1);ANNFLAGA^CLONE(2);@LOOP("{S1^SET(["ANNFLAGA_"+_I_]);*S1^SETFRAME(["F"+_I_],0);*S1^SETPRIORITY(161);*S1^PLAY(["F"+_I_]);GOTOCZENIE^ADD(S1);}",1,2,1);I1^SET(ANNPLOT^GETNOFINEVENT("1"));ANNPLOT^CLONE(I1);@LOOP("{S1^SET(["ANNPLOT_"+_I_]);*S1^SETFRAME("1",[_I_-1]);*S1^SETPRIORITY(50);GOTOCZENIE^ADD(S1);}",1,I1,1);I2^SET(ANNPLOT^GETNOFINEVENT("2"));ANNPLOT^CLONE(I2);@LOOP("{S1^SET(["ANNPLOT_"+_I_]);*S1^SETFRAME("2",[_I_-1-I1]);*S1^SETPRIORITY(100);GOTOCZENIE^ADD(S1);}",[I1+1],I2,1);GOTOCZENIE^SHOW();ANNPLOT^MOVE(0,700);I3^SET(ANNPLOTMASKA^GETNOFINEVENT("MASKA"));ANNPLOTMASKA^CLONE(I3);@LOOP("{S1^SET(["ANNPLOTMASKA_"+_I_]);*S1^SETFRAME("MASKA",[_I_-1]);GOTOCZENIE^ADD(S1);}",1,I3,1);ANNPLOTMASKA^MOVE(0,700);GOTOCZENIE^ADD("ANNREXBUM","ANNE1BUM","ANNE2BUM","ANNE3BUM","ANNE4BUM");ANNTARCZA^CLONE(5);BEHINITENEMIESKOLORY^RUN();BEHINITPLAYER^RUN();BEHINITENEMY_1^RUN();BEHINITENEMY_2^RUN();BEHINITENEMY_3^RUN();IALLMOVEX^SET(-125);GENEMY2^MOVE(IALLMOVEX,0);GENEMY3^MOVE(IALLMOVEX,0);GENEMY4^MOVE(IALLMOVEX,0);GOTOCZENIE^MOVE(IALLMOVEX,0);IREXPOSX^SUB(IALLMOVEX);IE1POSX^SUB(IALLMOVEX);IOTOCZENIEPOSX^ADD(IALLMOVEX);SEQOPIS^PLAY(["ZAPOWIEDZ"+TURNIEJ_IRUNDA]);BEHREXIKONKA^RUN();BEHE1IKONKA^RUN();BEHE2IKONKA^RUN();BEHE3IKONKA^RUN();}
{I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP202","BFITMP203");@IF("IALLMOVEX","!_","0","BFITMP204","");}
{@IF("TURNIEJ_IRUNDA","_","5","BFITMP205","");I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+1]));ANNE1^LOAD(["ENEMY"+I1+".ANN"]);ANNE1RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE1TARCZA^SET(I1);I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));ANNE2^LOAD(["ENEMY"+I1+".ANN"]);ANNE2RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE2TARCZA^SET(I1);I1^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));ANNE3^LOAD(["ENEMY"+I1+".ANN"]);ANNE3RUMAK^LOAD(["ENEMY"+I1+"_RUMAK.ANN"]);SE3TARCZA^SET(I1);}
{I1^SET($1);IZYWYCHLEFT^DEC();I2^SET(ARRTURNIEJ^FIND(I1));I3^SET([[4*TURNIEJ_IRUNDA]+ICURRENTDEADNR]);ICURRENTDEADNR^INC();ARRTURNIEJ^REMOVEAT(I2);ARRTURNIEJ^INSERTAT(I3,I1);@IF("I1","_","0","BFITMP214","BFITMP215");}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BREXLOCK","_","FALSE","BFITMP233","");I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);}
{BEHREXPRIORITY^RUN(IREXKIERUNEK);GREX^MOVE(0,[IREXTORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(0,IREXTOR);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE1LOCK","_","FALSE","BFITMP239","");I1^SET([3600-[IE1PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_1^SETFRAME([SE1TARCZA+SE1KIERUNEK],I1);}
{BEHE1PRIORITY^RUN(IE1KIERUNEK);GENEMY1^MOVE(0,[IE1TORZMIANA*IZMIANATORUY]);IMGIKONKA1^MOVE(0,[IE1TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(1,IE1TOR);BE1LOCKZMIANATORU^SET(TRUE);TE1^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE2LOCK","_","FALSE","BFITMP258","");I1^SET([3600-[IE2PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_2^SETFRAME([SE2TARCZA+SE2KIERUNEK],I1);}
{BEHE2PRIORITY^RUN(IE2KIERUNEK);GENEMY2^MOVE(0,[IE2TORZMIANA*IZMIANATORUY]);IMGIKONKA2^MOVE(0,[IE2TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(2,IE2TOR);BE2LOCKZMIANATORU^SET(TRUE);TE2^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE3LOCK","_","FALSE","BFITMP277","");I1^SET([3600-[IE3PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_3^SETFRAME([SE3TARCZA+SE3KIERUNEK],I1);}
{BEHE3PRIORITY^RUN(IE3KIERUNEK);GENEMY3^MOVE(0,[IE3TORZMIANA*IZMIANATORUY]);IMGIKONKA3^MOVE(0,[IE3TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(3,IE3TOR);BE3LOCKZMIANATORU^SET(TRUE);TE3^ENABLE();}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE4LOCK","_","FALSE","BFITMP296","");I1^SET([3600-[IE4PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_4^SETFRAME([SE4TARCZA+SE4KIERUNEK],I1);}
{BEHE4PRIORITY^RUN(IE4KIERUNEK);GENEMY4^MOVE(0,[IE4TORZMIANA*IZMIANATORUY]);IMGIKONKA4^MOVE(0,[IE4TORZMIANA*IZMIANATORUY]);ARRTORY^CHANGEAT(4,IE4TOR);BE4LOCKZMIANATORU^SET(TRUE);TE4^ENABLE();}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP20","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP21","BFITMP22");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP28","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP29","BFITMP30");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);I3^SET([[IREXTOR*50]-50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP187","");};
{I1^SET([IREXPOSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IREXTOR*IZMIANATORUY]]);I3^SET([IREXTOR*50]);SREXOPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,I3,I3,FALSE));@IF("SREXOPLOT","_","NULL","BFITMP190","");};
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY-IZWROTY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAR,I1);IREXPOSX^SET([IGRANICAR-IDLUGOSCTORU]);}
{IALLMOVEX^SET(0);I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAL,I1);IREXPOSX^SET(IGRANICAL);}
{IPIERWSZYZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));IDRUGIZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));INRPRZEDSTAWIANEGO^SET(0);I1^SET(ARRTURNIEJ^FIND(0));I2^SET([TURNIEJ_IRUNDA*8]);I2^SET([5+I2-I1]);TURNIEJ_IRUNDA^INC();I3^SET([TURNIEJ_IRUNDA*4]);I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,0);ARRTURNIEJ^CHANGEAT(I1,I4);I3^ADD(RANDOM^GET(3));I3^INC();I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,ARRTURNIEJ^GET(I2));ARRTURNIEJ^CHANGEAT(I2,I4);SEQOPIS^PLAY("ZWYCIEZA");}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SNDZAPLANSZA^PLAY();}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SNDZAPLANSZA^PLAY();}
{IREXSPEED^SET(0);SREXKIERUNEK^SET("L");BEHREXPRIORITY^RUN(IREXKIERUNEK);ANNREX^PLAY(SREXKIERUNEK);ANNREXRUMAK^PLAY(SREXKIERUNEK);ANNREXLANCA^SETFRAME(SREXKIERUNEK,0);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],ANNTARCZA_5^GETCFRAMEINEVENT());I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY-IZWROTY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAR,I1);IREXPOSX^SET([IGRANICAR-IDLUGOSCTORU]);}
{IREXSPEED^SET(0);SREXKIERUNEK^SET("R");BEHREXPRIORITY^RUN(IREXKIERUNEK);ANNREX^PLAY(SREXKIERUNEK);ANNREXRUMAK^PLAY(SREXKIERUNEK);ANNREXLANCA^SETFRAME(SREXKIERUNEK,0);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],ANNTARCZA_5^GETCFRAMEINEVENT());I1^SET([IPIERWSZYTORPOSRUMRY-IZMIANATORUY+[IREXTOR*IZMIANATORUY]]);GREX^SETPOSITION(IGRANICAL,I1);IREXPOSX^SET(IGRANICAL);}
{I1^SET([I2*I3]);@IF("IREXKIERUNEK","_","I4","BFITMP228","BFITMP229");@IF("I1",">","89","BFITMP231","BFITMP232");BEHSND^RUN("SEQKRETDOPING","REXDOSTAL",3);};
{I1^SET([I2*I3]);@IF("IE1KIERUNEK","_","I4","BFITMP234","BFITMP235");@IF("I1",">","89","BFITMP237","BFITMP238");};
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP242","BFITMP243");};
{I1^SET([IE1POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE1TOR*IZMIANATORUY]]);SE1OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE1OPLOT","_","NULL","BFITMP249","");};
{I1^SET([I2*I3]);@IF("IE2KIERUNEK","_","I4","BFITMP253","BFITMP254");@IF("I1",">","89","BFITMP256","BFITMP257");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP261","BFITMP262");};
{I1^SET([IE2POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE2TOR*IZMIANATORUY]]);SE2OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE2OPLOT","_","NULL","BFITMP268","");};
{I1^SET([I2*I3]);@IF("IE3KIERUNEK'I4&&IE3SPEED>2","BFITMP272","BFITMP273");@IF("I1",">","89","BFITMP275","BFITMP276");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP280","BFITMP281");};
{I1^SET([IE3POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE3TOR*IZMIANATORUY]]);SE3OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE3OPLOT","_","NULL","BFITMP287","");};
{I1^SET([I2*I3]);@IF("IE4KIERUNEK'I4&&IE4SPEED>2","BFITMP291","BFITMP292");@IF("I1",">","89","BFITMP294","BFITMP295");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY-IZMIANATORUY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP299","BFITMP300");};
{I1^SET([IE4POSX+IOTOCZENIEPOSX-IPOLSZEROKOSCIRUMAKA]);I2^SET([IPIERWSZYTORPOSPOCZY+[IE4TOR*IZMIANATORUY]]);SE4OPLOT^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,FALSE,0,0,FALSE));@IF("SE4OPLOT","_","NULL","BFITMP306","");};
