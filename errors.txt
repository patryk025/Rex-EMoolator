{VARSTEMP0^SET($1);@IF("VARSTEMP0","_",""NULL"","BFITMP1","");@WHILE(VARSTEMP0^GETLENGTH(),">","0","{VARITEMP0^SET(VARSTEMP0^FIND(");");@IF("VARITEMP0","_","-1","BFITMP4","BFITMP5");}");}
{VARSTEMP0^SET($1);@IF("VARSTEMP0","_",""NULL"","BFITMP8","");ARRSEQ^REMOVEALL();@WHILE(VARSTEMP0^GETLENGTH(),">","0","{VARITEMP0^SET(VARSTEMP0^FIND(");");@IF("VARITEMP0","_","-1","BFITMP9","BFITMP10");}");}
{ANNOBJECT0^STOP(FALSE);ANNOBJECT0^SETFRAME"STATE0",1);}
{VARSTEMP0^SET(BEHGETOBJECT^RUN("GES_MIOTLISKO"));*VARSTEMP0^PLAY("STATE0);}
{VARSTEMP0^SET(BEHGETOBJECT^RUN("GES_PRZYSTAN"));*VARSTEMP0^PLAY("STATE0);}
{BEHSELECTOBJS^RUN("POMOST_BOBROR");SOBJECT|IPARAM0^SET(0);BEHUPDATEOBJECTS^RUN();VARSTEMP0^SET(BEHGETOBJECT^RUN("DZIELNICA3));*VARSTEMP0^HIDE();}
{BEHLOADTEMPOBJ^RUN("DOMSPIEL");BEHSELECTTEMPOBJS^RUN("SPIELMAUSTER");@IF("STEMPOBJ|TYPE","_","0","BFITMP379","");@IF("G_SLASTOBJECTS'"LABIRYNT"&&G_ISUCCESS>0","BFITMP382","");BEHSELECTOBJ^RUN(24);@IF("SOBJECT|IPARAM0","_","0","BFITMP383","");@IF("G_SLASTOBJECTS","_",""DOMSPIEL"","BFITMP384","");ANNPOLA^LOAD("PIKLIBIA\POLA.ANN");ANNPOLA^SETPRIORITY(2000);@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);ARRJUNK^ADD(SOBJECT|IPARAM2);VARSTEMP0^SET(["ANNKNIGHT"+VARITER]);VARSTEMP1^SET(["PIKLIBIA\RYCERZ"+VARITER+".ANN"]);*VARSTEMP0^LOAD(VARSTEMP1);*VARSTEMP0^SETPRIORITY(2000);BEHSELECTOBJ^RUN(VARITER);ARRSTART^ADD(SOBJECT|IPARAM1);}",0,8,1);ARRKNIGHTX^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTY^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTDELTAX^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTDELTAY^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTFRAME^ADD(0,0,0,0,0,0,0,0);ARRLASTIDX^ADD(0,0,0,0,0,0,0,0);ARRRECENTFIELD^ADD(0,0,0,0,0,0,0,0);ARRCROSS^ADD(0,0,0);ARRLASTCROSS^ADD("NULL","NULL");ARRDEAD^ADD(1,1,1,1,1,1,1,1);BEHMAKEFIELDS^RUN();@LOOP("{VARITER2^SET(_I_);BEHPLACEATFIELD^RUN(VARITER2,ARRSTART^GET(VARITER2));VARITER^SET([VARITER2+8]);BEHSELECTOBJ^RUN(VARITER);@IF("SOBJECT|IPARAM1","_","0","BFITMP387","BFITMP388");}",0,8,1);@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);VARSTEMP0^SET(["ANNOBJECT"+VARITER]);*VARSTEMP0^SETPRIORITY(3);*VARSTEMP0^PLAY("STATE0");@LOOP("{BEHTOGGLECROSS^RUN(VARSTEMP0);VARSTEMP1^SET(*VARSTEMP0^GETEVENTNAME());}",0,SOBJECT|IPARAM0,1);}",0,24,1);@LOOP("{VARSTEMP0^SET(["ANNOBJECT"+_I_]);*VARSTEMP0^HIDE();}",32,8,1);VARSTEMP0^SET(BEHGETOBJECT^RUN("DO_MIOTLISKA"));*VARSTEMP0^SHOW();VARSTEMP0^SET(BEHGETOBJECT^RUN("DRZWI"));*VARSTEMP0^SHOW();}
{@IF("VARSSEQNAME","_",""KOT1","BFITMP42","");}
{@IF("VARSSEQNAME","_",""KOT3","BFITMP66","");@IF("VARSSEQNAME","_",""USE_CIASTECZKO"","BFITMP67","");@IF("VARSSEQNAME","_",""USE_GRZYBEK"","BFITMP68","");@IF("VARSSEQNAME","_",""PODIALOGSUKCES"","BFITMP69","");@IF("VARSSEQNAME","_",""GASIENICA_PREDIALOG"","BFITMP70","");}
{VARSTEMP0^SET(BEHGETOBJECT^RUN("GASIE));*VARSTEMP0^HIDE();BEHLOADSEQARREX^RUN("USE_GRZYBEK",FALSE);}
{G_MENU^ADDEXP(40);BEHLOADTEMPOBJ^RUN("GABINETDYR");BEHSELECTTEMPOBJS^RUN("BUREKTOR");STEMPOBJ|IPARAM1^SET(6);BEHUPDATETEMPOBJ^RUN();BEHLOADTEMPOBJ^RUN("KORYTARZ");BEHSELECTTEMPOBJS^RUN("DO_WINDY");STEMPOBJ|TYPE^SET(3);BEHUPDATETEMPOBJ^RUN();BEHSELECTTEMPOBJS^RUN("DRZWI_GULDRYK");STEMPOBJ|TYPE^SET(0);BEHUPDATETEMPOBJ^RUN();BEHSELECTTEMPOBJS^RUN("DO_GULDRYKA");STEMPOBJ|TYPE^SET(0);BEHUPDATETEMPOBJ^RUN();BEHSELECTOBJ;}
{G_SARCADEOBJECTS^SET("4');PRZYGODA^GOTO("DRAGON");@BREAK();}
{IMGWODA^SETPOSITION([795-[VARAMMO*2]],78);}
{VARINT5^SET([VARINT0^ABS(VARINT0)@4]);VARINT4^SET([VARINT5+2]);VARINT3^SET([VARINT5+1]);VARINT2^SET(VARINT5);VARINT5^SET([0-VARINT0@VARINT0]);VARINT4^MUL(VARINT5);VARINT3^MUL(VARINT5);VARINT2^MUL(VARINT5);@IF("VARCPUSPEED","_","1","BFITMP83","");GRBKG^MOVE(VARINT3,0);IMGBKGB_1^MOVE(VARINT4,0);IMGBKGB_2^MOVE(VARINT4,0);ARRAYBKG^SUB([0-VARINT3]);ARRAYBKGB^SUB([0-VARINT4]);};
{KEYBOARD^SETAUTOREPEAT(FALSE);G_AMBIENT^SETAMBIENT("NULL");G_IFLIPPAGE^SET(1);__FLIP__^RUN();G_SLASTOBJECTS^SET("FRED");G_SARCADEOBJECTS^SET("FRED");SCENENAME^SET("FRED");FRED^STARTMUSIC("BAJKI.WAV");FRED^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));G_CURSOR^SETSCENE("FRED");G_MENU^SETSCENE("FRED");G_MENU^SAVESETS();VARENERGIA^SET(200);GROUPNAK^ADD("IMGNAK1","IMGNAK2","IMGNAK3","IMGNAK4","IMGNAK5","IMGNAK6","IMGNAK7","IMGNAK8","IMGNAK9","IMGNAK10","IMGNAK11","IMGNAK12","IMGNAK13","IMGNAK14","IMGNAK15","IMGNAK16","IMGNAK17","IMGNAK18");GROUPNAK^MOVE(0,-3000);ANNELEMENT^CLONE(ANNUKLAD^GETNOFINEVENT(0));ANNELEMENT^MOVE(-200,0);ANNELEMENT^HIDE();CANVASOBSERVER^REMOVE("ANNELEMENT");@LOOP("{ANNUKLAD^SETFRAME(0,_I_);VARSTRING0^SET(["ANNELEMENT_"+[_I_+1]]);VARX^SET([ANNUKLAD^GETCENTERX()@20]);VARY^SET([ANNUKLAD^GETCENTERY()@20]);*VARSTRING0^PLAY(ANNUKLAD^GETFRAMENAME());*VARSTRING0^MOVE(-200,0);PATBOARD^ADD(["E"+_I_],VARX,VARY,VARSTRING0,0);}",0,ANNUKLAD^GETNOFINEVENT(0),1);PATBOARD^MOVE(0,-3000);ANNENEMY^CLONE(ANNEUKLAD^GETNOFINEVENT(0));ANNENEMY^HIDE();CANVASOBSERVER^REMOVE("ANNENEMY");@LOOP("{ANNEUKLAD^SETFRAME(0,_I_);ANNEUKLAD^HIDE();VARSTRING0^SET(["ANNENEMY_"+[_I_+1]]);GROUPENEMY^ADD(VARSTRING0);*VARSTRING0^SETPOSITION(ANNEUKLAD^GETCENTERX(),[ANNEUKLAD^GETCENTERY()-3000]);*VARSTRING0^PLAY(ANNEUKLAD^GETFRAMENAME());}",0,ANNEUKLAD^GETNOFINEVENT(0),1);ANNCOLL^PLAY("ELAPSE");ANNPLAYERPOS^SETANCHOR("LEFTUPPER");ANNPLAYER^PLAY("IDLEL");ANNPLAYER^SETANCHOR("CENTER");ANNPLAYER^MOVE(100,400);VARPLAYERX^SET(175);VARPLAYERY^SET(3450);VARX^SET([VARPLAYERX@50*5]);VARY^SET([VARPLAYERY@50*5]);ANNPLAYERPOS^SETPOSITION(VARX,VARY);}
{VARX^SET([VARPLAYERX+VARALPHADX@50*5]);VARY^SET([VARPLAYERY+VARALPHADY@50*5]);@IF("VARX'5&&VARY'0","BFITMP31","");VARALPHA^SET(IMGLEVEL^GETALPHA(VARX,VARY));@IF("VARALPHA","_","0","BFITMP33","");VARPLAYERX^ADD(VARDX);VARPLAYERY^ADD(VARDY);ANNPLAYERPOS^SETPOSITION(VARX,VARY);BEHMOVEBKG^RUN();}
{VARX^SET([VARPLAYERX@50*5]);VARY^SET([VARPLAYERY-4@50*5]);VARINT0^SET([VARPLAYERX@50*50]);@IF(IMGLEVEL^GETALPHA(VARX,VARY),"!_","0","BFITMP9","BFITMP10");@BREAK();};
{VARX^SET([VARPLAYERX@50*5]);VARY^SET([VARPLAYERY+50@50*5]);VARINT0^SET([VARPLAYERX@50*50]);@IF(IMGLEVEL^GETALPHA(VARX,VARY),"!_","0","BFITMP14","BFITMP15");@BREAK();};
{VARX^SET([VARPLAYERX-25@50*5]);VARY^SET([VARPLAYERY+40@50*5]);@IF("IMGLEVEL^GETALPHA(VARX,VARY)'0||VARDIR'"L"","BFITMP18","BFITMP19");};
{VARX^SET([VARPLAYERX+25@50*5]);VARY^SET([VARPLAYERY+40@50*5]);@IF("IMGLEVEL^GETALPHA(VARX,VARY)'0||VARDIR'"R"","BFITMP24","BFITMP25");};
{@IF("VARINT0<200&&[VARSCROLL-VARDY]<3000","BFITMP34","BFITMP35");};
{@IF("VARINT0>400&&[VARSCROLL-VARDY]>0","BFITMP36","BFITMP37");};
{VARDTEMP1^MUL(-1.0);}
{VARSTRING2^SET(["ARRAYKUBEK"+VARINT0]);VARINT3^SET(*VARSTRING2^GET(0));VARINT4^SET(*VARSTRING2^GET(1));*VARSTRING4^ENABLE();*VARSTRING3^SETPRIORITY([11+ARRAYKUBEK^GET(VARLAYER)]);*VARSTRING3^SETPOSITION([VARINT3+90],[VARINT4+130-[ARRAYKUBEK^GET(VARLAYER)*5]]);}
{ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(MOUSE^GETPOSX());VARILASTY^SET(MOUSE^GETPOSY());VARIDOMAGIC^SET(1);}
{VARDTEMP0^MUL(-1.0);}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTDBG^SET(0);}
{VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTX^SET(VARICURSORX);VARILASTY^SET(VARICURSORY);ANNWAND0^PLAY("IDLE");}
{VARITEMP0^SET([40@ARREFFECTLEVEL0^GET(1)]);@IF(ARREFFECTELAPSED0^GET(1),"_","0","BFITMP35","");@IF(ARREFFECTELAPSED0^GET(1),"_","VARITEMP0","BFITMP36","");ARREFFECTELAPSED0^ADDAT(1,1);}
{VARITEMP0^SET([40@ARREFFECTLEVEL1^GET(1)]);@IF(ARREFFECTELAPSED1^GET(1),"_","0","BFITMP37","");@IF(ARREFFECTELAPSED1^GET(1),"_","VARITEMP0","BFITMP38","");ARREFFECTELAPSED1^ADDAT(1,1);}
{VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTDBG^SET(0);SNDREXSLEEP^PLAY();ANNWAND0^TOP(FALSE);ANNHEAD0^TOP(FALSE);ANNHEAD0^PLAY("SPI");ANNWAND0^STOP(FALSE);ANNWAND0^PLAY("ZWISA");ARRTIMEELAPSED^CHANGEAT(0,0);}
{BEHPLAYSOUND^RUN(5;);ANNHEAD1^STOP(FALSE);ANNHEAD1^PLAY("SPI");ANNWAND1^STOP(FALSE);ANNWAND1^PLAY("ZWISA");STLMAGIC^STOP(FALSE);ARRTIMEELAPSED^CHANGEAT(1,0);}
{ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(VARICURSORX);VARILASTY^SET(VARICURSORY);VARIDOMAGIC^SET(1);VARILASTDBG^SET(0);}
{VARDTEMP0^MUL(-1.0);}
{VARITEMP0^SET([40@ARREFFECTLEVEL0^GET(1)]);@IF(ARREFFECTELAPSED0^GET(1),"_","0","BFITMP11","");@IF(ARREFFECTELAPSED0^GET(1),"_","VARITEMP0","BFITMP12","");ARREFFECTELAPSED0^ADDAT(1,1);}
{VARITEMP0^SET([40@ARREFFECTLEVEL1^GET(1)]);@IF(ARREFFECTELAPSED1^GET(1),"_","0","BFITMP13","");@IF(ARREFFECTELAPSED1^GET(1),"_","VARITEMP0","BFITMP14","");ARREFFECTELAPSED1^ADDAT(1,1);}
{VARDTEMP0^MUL(-1.0);}
{G_AMBIENT^SETAMBIENT("NULL");MIOTLY^RESUME();KEYBOARD^SETAUTOREPEAT(FALSE);G_IFLIPPAGE^SET(1);__FLIP__^RUN();MIOTLY^STARTMUSIC("LOTNAMIOTLE.WAV");MIOTLY^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));G_CURSOR^SETSCENE("MIOTLY");G_MENU^SETSCENE("MIOTLY");VARSPEED^SET(SYSTEM^GETMHZ());@IF("VARSPEED",">","799","BFITMP26","BFITMP27");VARSAVENAME^SET("$COMMON\MIOTLY0.ARR");@IF("G_SARCADEOBJECTS","_",""MIOTLY"","BFITMP30","BFITMP31");SCENENAME^SET("MIOTLY");G_SLASTOBJECTS^SET("MIOTLY");G_MENU^SAVESETS();VARBKGPOSY^SET(0);VARENERGIA^SET(200);ANNREX^SETANCHOR("CENTER");ANNREX^PLAY("0");ANNKRET^SETANCHOR("CENTER");ANNKRET^PLAY("0");ANNPT0^SETANCHOR("CENTER");ANNPT1^SETANCHOR("CENTER");ANNKURZ^CLONE(10);@LOOP("{*["ANNKURZ"_+[_I_+1]]^SETPRIORITY(20);*["ANNKURZ"_+[_I_+1]]^PLAY("PLAY");*["ANNKURZ_"+[_I_+1]]^SETANCHOR("CENTER");}",0,10,1);CNVLOADER^LOAD(["CNVLEVEL"+VARLEVEL+".CNV"]);BEHINITCNV^RUN();BEHINITLEVEL^RUN();BEHINITWORLD^RUN();SEQKRET^PLAY("ENTRE");SNDWIR^PLAY();}
{WORLD^SETGRAVITY(0,0,0);GROUPANIMO^ADD("ANNREX","ANNKRET","ANNR0","ANNR1","ANNR2","ANNR3","ANNR4","ANNR5","ANNR6","ANNKURZ_1","ANNKURZ_2","ANNKURZ_3","ANNKURZ_4","ANNKURZ_5","ANNKURZ_6","ANNKURZ_7","ANNKURZ_8","ANNKURZ_9","ANNKURZ_10");ARRAYANIMO^ADD("ANNREX","ANNKRET","ANNR0","ANNR1","ANNR2","ANNR3","ANNR4","ANNR5","ANNR6");ARRAYID^ADD(199,207,200,201,202,203,204,205,206);ARRAYDX^ADD(0,0,0,0,0,0,0,0,0);ARRAYDY^ADD(0,0,0,0,0,0,0,0,0);ANNREX^SETPOSITION(380,300);WORLD^ADDBODY(199,40,0.0,0.0,0,0.0,0,1,2,16,16,16);WORLD^SETPOSITION(199,380,300,0);WORLD^SETLIMIT(199,50,-9999999,0,750,9999999,0);WORLD^LINK(199,"ANNREX",2);WORLD^SETACTIVE(199,FALSE);ANNKRET^SETPOSITION(562,300);WORLD^ADDBODY(207,1,0.0,0,0.0,0.0,300,1,2,16,16,16);WORLD^SETPOSITION(207,562,300,0);WORLD^SETLIMIT(207,50,-9999999,0,750,9999999,0);WORLD^LINK(207,"ANNKRET",2);WORLD^SETACTIVE(207,FALSE);@LOOP("{*["ANNR"+_I_]^SETANCHOR("CENTER");VARINT0^SET([200+_I_]);VARINT1^SET([20*[_I_+1]+400]);VARINT2^SET([0-_I_*5]);VARSTRING0^SET(["ANNR"+_I_]);*VARSTRING0^SETANCHOR("CENTER");*VARSTRING0^PLAY("PLAY");*VARSTRING0^SETPOSITION(VARINT1,300);WORLD^ADDBODY(VARINT0,0.1,0.5,0.5,0.0,0.0,100000,1,2,16,16,16);WORLD^SETPOSITION(VARINT0,VARINT1,300,0);WORLD^SETLIMIT(VARINT0,50,-9999999,0,750,9999999,0);WORLD^LINK(VARINT0,VARSTRING0,2);}",0,7,1);WORLD^JOIN(199,200,400,300,0,0,-180,180);WORLD^JOIN(200,201,420,300,0,0,-180,180);WORLD^JOIN(201,202,440,300,0,0,-180,180);WORLD^JOIN(202,203,460,300,0,0,-180,180);WORLD^JOIN(203,204,480,300,0,0,-180,180);WORLD^JOIN(204,205,500,300,0,0,-180,180);WORLD^JOIN(205,206,520,300,0,0,-180,180);WORLD^JOIN(206,207,540,300,0,0,-180,180);WORLD^START();ANNELAPSE^PLAY("ELAPSE");ANNREXELAPSE^PLAY("ELAPSE");}
{ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(MOUSE^GETPOSX());VARILASTY^SET(MOUSE^GETPOSY());VARIDOMAGIC^SET(1);}
{VARDTEMP0^MUL(-1.0);}
{VARINT0^SET([ARRAYPIECHURZYPARAM^GET(3)+VARENEMYNO]);@IF("VARINT0",">","VARSUKCES","BFITMP69","");VARENEMYNO^ADD(ARRAYPIECHURZYPARAM^GET(3));ANNPIECHUR^CLONE(1);VARPIECHURNO^INC();VARSTRING0^SET(["ANNPIECHUR_"+VARPIECHURNO]);*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$0","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$2","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$4","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$6","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$12","BEHANIMOPRIORITY");*VARSTRING0^SETFPS(ARRAYPIECHURZYPARAM^GET(2));*VARSTRING0^PLAY(["P"+RANDOM^GET(7)]);@IF(SEQDROB^ISPLAYING(),"_","FALSE","BFITMP70","");}
{VARINT0^SET([ARRAYGOOSEPARAM^GET(3)+VARENEMYNO]);@IF("VARINT0",">","VARSUKCES","BFITMP71","");VARENEMYNO^ADD(ARRAYGOOSEPARAM^GET(3));ANNGOOSE^CLONE(1);VARGOOSENO^INC();VARSTRING0^SET(["ANNGOOSE_"+VARGOOSENO]);*VARSTRING0^SETFPS(ARRAYGOOSEPARAM^GET(2));*VARSTRING0^SETPRIORITY(0);*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$0","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$2","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$4","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$6","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$8","BEHANIMOPRIORITY");*VARSTRING0^PLAY(["P"+RANDOM^GET(8)]);@IF(SEQDROB^ISPLAYING(),"_","FALSE","BFITMP72","");}
{VARINT0^SET([ARRAYKURAPARAM^GET(3)+VARENEMYNO]);@IF("VARINT0",">","VARSUKCES","BFITMP73","");VARENEMYNO^ADD(ARRAYKURAPARAM^GET(3));ANNKURA^CLONE(1);VARKURANO^INC();VARSTRING0^SET(["ANNKURA_"+VARKURANO]);*VARSTRING0^SETFPS(ARRAYKURAPARAM^GET(2));*VARSTRING0^SETPRIORITY(0);*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$0","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$2","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$4","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$6","BEHANIMOPRIORITY");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED$8","BEHANIMOPRIORITY");*VARSTRING0^PLAY(["P"+RANDOM^GET(2)]);@IF(SEQDROB^ISPLAYING(),"_","FALSE","BFITMP74","");}
{ANNPOD^CLONE(7);ANNPOD^PLAY("MOD_B0");ANNPOD_1^PLAY("MOD_BW0");ANNPOD_2^PLAY("MOD_C0");ANNPOD_3^PLAY("MOD_A0");ANNPOD_4^SETFRAME("PANEL",0);ANNPOD_5^SETFRAME("ZAWOR",0);ANNPOD_6^SETFRAME("TLOK",0);ANNPOD_7^SETFRAME("OBRAZ",0);ANNOBJ^CLONE(5);I1^SET(ANNOBJ^GETNOFINEVENT("PARA_STOP"));ANNOBJ^SETFRAME("PARA_STOP",[I1-1]);ANNOBJ_1^SETFRAME("PODEST",0);ANNOBJ_2^SETFRAME("SRUBA",0);ANNOBJ_4^SETFRAME("MLOTEK",0);ANNOBJ_5^SETFRAME("SZAFA",0);ANNOBJ^SETPRIORITY(820);ANNOBJ_2^SETPRIORITY(600);ANNOBJ_5^SETPRIORITY(810);I1^SET(GSAVE^GET("AWARIA_FRANCUZ_POS"));ANNOBJ_3^SETFRAME("FRANCUZ",I1);@IF("I1","<","3","BFITMP468","BFITMP469");@IF(INV^CHECK("FRANCUZ"),"_","TRUE","BFITMP470","");@IF(INV^CHECK("MLOTEK"),"_","TRUE","BFITMP471","");ANNNAK^CLONE(5);ANNNAK^PLAY("RURA");ANNNAK_1^PLAY("PARA");ANNNAK_2^SETFRAME("1PLAN",0);ANNNAK_3^SETFRAME("WSK_A",0);ANNNAK_4^SETFRAME("WSK_B",0);ANNNAK_5^SETFRAME("WSK_C",0);IMODBPOSX^SET(ANNPOD^GETPOSITIONX());IMODBPOSY^SET(ANNPOD^GETPOSITIONY());ANNPOD^ADDBEHAVIOUR("ONFRAMECHANGED","BEHMOVEWSKAZOWKIB");IMODCPOSX^SET(ANNPOD_2^GETPOSITIONX());IMODCPOSY^SET(ANNPOD_2^GETPOSITIONY());ANNPOD_2^ADDBEHAVIOUR("ONFRAMECHANGED","BEHMOVEPARAC");ANNOBJ^ADDBEHAVIOUR("ONFINISHED$PARA_START","BEHPARAFINISHEDSTART");ANNOBJ_3^ADDBEHAVIOUR("ONFINISHED$FRANCUZ_SPADA","BEHFRANCUZFINISHEDSPADA");ISTANMODA^SET(GSAVE^GET("AWARIA_STAN_MOD_A"));ISTANMODB^SET(GSAVE^GET("AWARIA_STAN_MOD_B"));ISTANMODC^SET(GSAVE^GET("AWARIA_STAN_MOD_C"));}
{REX^DISABLE();ANNPOD4^ADDBEHAVIOUR("ONFINISHED$WPADAJA","BEHFINISHEDWPADAJA");BEHDIALOGPLAYOFF^RUN("WSTEP4A",10);}
{@IF(ARRPODANNS^GET(5),"_","FALSE","BFITMP850","");@IF(ARROBJANNS^GET(5),"_","FALSE","BFITMP851","");ANNPOD5^SETFRAME("SZTALUGA",0);S1^SET(GSAVE^GET("EGIPT_PLANSZA5_STAN_TABLICY"));I2^SET(S1^GET(1));I3^SET(S1^GET(2));ANNPOD5_1^SETFRAME("TABLICA1",0);ANNPOD5_2^SETFRAME("TABLICA2",I2);ANNPOD5_3^SETFRAME("TABLICA3",I3);ANNPOD5_4^SETFRAME("STOLIK",0);ANNOBJ5^PLAY("TOM_IDLE");ANNOBJ5_1^PLAY("JONES_IDLE");ANNOBJ5_2^SETFRAME("PAPIERY",0);ANNOBJ5_3^SETFRAME("NOTES",0);ANNOBJ5_4^SETFRAME("LAMPA",0);SPL5UKLADPRZYCISKOW^SET(GSAVE^GET("EGIPT_PLANSZA5_UKLAD_PRZYCISKOW"));I1^SET(SPL5UKLADPRZYCISKOW^GET(0));ANNOBJ5_5^SETFRAME("PRZ1_1",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(1));ANNOBJ5_6^SETFRAME("PRZ1_2",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(2));ANNOBJ5_7^SETFRAME("PRZ1_3",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(3));ANNOBJ5_8^SETFRAME("PRZ1_4",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(4));ANNOBJ5_9^SETFRAME("PRZ2_1",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(5));ANNOBJ5_10^SETFRAME("PRZ2_2",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(6));ANNOBJ5_11^SETFRAME("PRZ2_3",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(7));ANNOBJ5_12^SETFRAME("PRZ2_4",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(8));ANNOBJ5_13^SETFRAME("PRZ3_1",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(9));ANNOBJ5_14^SETFRAME("PRZ3_2",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(10));ANNOBJ5_15^SETFRAME("PRZ3_3",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(11));ANNOBJ5_16^SETFRAME("PRZ3_4",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(12));ANNOBJ5_17^SETFRAME("PRZ4_1",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(13));ANNOBJ5_18^SETFRAME("PRZ4_2",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(14));ANNOBJ5_19^SETFRAME("PRZ4_3",I1);I1^SET(SPL5UKLADPRZYCISKOW^GET(15));ANNOBJ5_20^SETFRAME("PRZ4_4",I1);I1^SET(GSAVE^GET("EGIPT_PLANSZA5_PRZEJSCIE_B"));ANNOBJ5_21^SETFRAME("PRZEJSCIE",I1);ANNOBJ5_21^ADDBEHAVIOUR("ONFINISHED$PRZEJSCIE_OPEN","BEHFINISHEDPRZEJSCIEOPEN");ANNNAK5^SETFRAME("1PLAN",0);ANNPOD5^SETPRIORITY(400);ANNPOD5_1^SETPRIORITY(403);ANNPOD5_2^SETPRIORITY(402);ANNPOD5_3^SETPRIORITY(401);ANNPOD5_4^SETPRIORITY(1000);ANNOBJ5_2^SETPRIORITY(1010);ANNOBJ5_3^SETPRIORITY(1010);ANNOBJ5_4^SETPRIORITY(1010);GPRZYCISKINAPANELU^SETPRIORITY(401);ANNPOD5^SHOW();ANNPOD5_1^SHOW();ANNPOD5_2^SHOW();ANNPOD5_3^SHOW();ANNPOD5_4^SHOW();ANNOBJ5^SHOW();ANNOBJ5_1^SHOW();ANNOBJ5_2^SHOW();ANNOBJ5_3^SHOW();ANNOBJ5_4^SHOW();@IF(GSAVE^GET("EGIPT_PLANSZA5_PRZEJSCIE_B"),"_","0","BFITMP852","");ANNOBJ5_21^SHOW();ANNNAK5^SHOW();ARROTHERIDLEOBJEVT^ADD("ANNOBJ5","TOM_","ANNOBJ5_1","JONES_");ANNRUNNEROTHERIDLE^PLAY("RUN");}
{ANNPOLA^HIDE();ANNPOLACOPY^HIDE();DBLEVEL^REMOVEALL();DBLEVEL^LOAD(["LEV"+IBDLEVEL+"_"+SGAMEDIFFICULTY+".FLD"]);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));ISIZEX^SET(S1^GET(0,3));ISIZEY^SET(S1^GET(4,3));DBLEVEL^NEXT();STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));IPLAYERPOSX^SET(S1^GET(0,3));IPLAYERPOSY^SET(S1^GET(4,3));DBLEVEL^NEXT();I1^SET(0);@WHILE("I1","<","ISIZEY","{STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));@LOOP("{I2^SET(S1^GET([_I_*4],3));ARRMAPA^SET(_I_,I1,I2);}",0,ISIZEX,1);DBLEVEL^NEXT();I1^INC();}");ICENTERX^SET(6);ICENTERY^SET(5);ISCROLLMAXX^SET([[ISIZEX*IGRID]-[14*IGRID]]);ISCROLLMAXY^SET([[ISIZEY*IGRID]-[10*IGRID]]);IBKGSTARTX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);IBKGSTARTY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);IBKGSTARTX^CLAMP(0,ISCROLLMAXX);IBKGSTARTY^CLAMP(0,ISCROLLMAXY);ISCREENPOSX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);ISCREENPOSY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);ISLOWNIKSELECTOR^SET(IBDLEVEL);I1^SET(0);I2^SET(0);@WHILE("I1","<","ISIZEY","{@LOOP("{I3^SET(ARRMAPA^GET(_I_,I1));@IF("I3","_","5","BFITMP42","");@IF("I3>IINFO_OD&&I3<IINFO_DO","BFITMP43","");}",0,ISIZEX,1);I1^INC();}");ANNPLAYER^SETFPS(40);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPLAYER^SETPOSITION(I1,I2);CANVASOBSERVER^MOVEBKG(IBKGSTARTX,IBKGSTARTY);GOBJ^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);ANNPLAYER^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);IMGMASKCUT^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);BEHINITBKG^RUN();}
{ANNPOLACOPY^HIDE();I1^ADD([ILASTDIRX*IGRID]);I2^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET([IPLAYERPOSX+ILASTDIRX],[IPLAYERPOSY+ILASTDIRY],IPCHANY);CANVASOBSERVER^PASTE("ANNPOLACOPY",I1,I2);IPCHANY^SET(-1);ISPADX^SET([I1 @ IGRID]);ISPADY^SET([[I2 @ IGRID]+1]);ISPADREMX^SET(ISPADX);ISPADREMY^SET([ISPADY-1]);SSPADANIESELECTOR^SET("D");@IF("BSPADA","_","FALSE","BFITMP51","");@IF("BSPADA","_","FALSE","BFITMP52","");}
{SOBJACTION^REMOVEBEHAVIOUR("ONBRUTALCHANGED$__END__");}
{ILEVEL^SET(1);ANNKON^LOAD("CZOLG.ANN");ANNKOLASA^LOAD("WIEZYCZKA.ANN");ANNKON^SETPRIORITY(55);ANNKOLASA^SETPRIORITY(50);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(55.0);DKOLASAHALFWIDTH^SET(26.0);DKONLEN^SET(32.0);DKONACCELERATION^SET(0.20);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-3.0);DKONSPEEDMAX^SET(10.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);GTRASA^ADD("ANNBUM");BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();}
{ILEVEL^SET(1);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(36.0);DKOLASAHALFWIDTH^SET(16.0);DKONLEN^SET(55.0);DKONACCELERATION^SET(0.075);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-1.0);DKONSPEEDMAX^SET(7.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();}
{ILEVEL^SET(1);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(36.0);DKOLASAHALFWIDTH^SET(16.0);DKONLEN^SET(55.0);DKONACCELERATION^SET(0.05);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-0.7);DKONSPEEDMAX^SET(9.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();IMGZEGAR^SHOW();ANNWSKAZOWKA^SHOW();ICZAS^ADDBEHAVIOUR("ONCHANGED","BEHCZAS");}
{D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[1.0+D3],"BFITMP0","");BEHSEQPLAY^RUN("SEQPLAYER","WODA",2);IJAZDAWAVE^SET(1);}
{D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[0.5+D3],"BFITMP1","");IJAZDAWAVE^SET(0);}
{ANNKON^SETFPS([IKONFPS*8]);}
{@IF("IDIR","_","0","BFITMP18","BFITMP19");IKONANGLEADD^SET([[3.0*DKONSPEED]@DKONSPEEDMAX]);IKONANGLEADD^SET([5-IKONANGLEADD]);IKONFPS^SET([6-IKONANGLEADD]);@IF("DKONSPEED",">_","0.0","BFITMP20","");D1^SINUS(IKONANGLENEW);D2^COSINUS(IKONANGLENEW);DKONMOVEX^SET([D1*DKONSPEED]);DKONMOVEY^SET([D2*[0.0-DKONSPEED]]);IKONNEWX^SET([DKONPOSX+DKONMOVEX]);IKONNEWY^SET([DKONPOSY+DKONMOVEY]);@IF("DKONSPEED",">_","0.0","BFITMP21","BFITMP22");D1^COSINUS(IKOLASAANGLE);D2^SINUS(IKOLASAANGLE);D3^SET([D1*[0.0-DKOLASAHALFWIDTH]]);D4^SET([D2*[0.0-DKOLASAHALFWIDTH]]);ICOLLSELBOKI^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));D3^SET([D1*DKOLASAHALFWIDTH]);D4^SET([D2*DKOLASAHALFWIDTH]);ICOLLSELBOKI^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));ICOLLSEL^SET(IMGMASK^GETPIXEL(IKONNEWX,IKONNEWY));IKONANGLE^SET(IKONANGLENEW);I1^SET(IKOLASAANGLE);I1^CLAMP([IKONANGLE-30],[IKONANGLE+30]);I2^SET([IKONANGLE-IKOLASAANGLE]);I2^CLAMP(-2,2);IKOLASAANGLE^SET([I1+I2]);DKONPOSX^ADD(DKONMOVEX);DKONPOSY^ADD(DKONMOVEY);IKONMOVEX^SET([DKONPOSX-IKONPOSX]);IKONMOVEY^SET([DKONPOSY-IKONPOSY]);@IF("IKONMOVEX!'0||IKONMOVEY!'0","BFITMP23","");ICZAS^INC();}
{@IF("ICZAS","_","ICZASMAX","BFITMP46","");ICZASANGLE^SET([[20*ICZAS]@ICZASMAX]);}
{D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[0.5+D3],"BFITMP9","");}
{D3^SET([[DKONSPEEDMAX-DKONSPEED]*2.0]);D3^SET([2.5-[D3@DKONSPEEDMAX]]);D3^CLAMP(0.5,2.5);DKONSPEED^ADD([DKONACCELERATION*D3]);DKONSPEED^CLAMP(DKONSPEEDMIN,DKONSPEEDMAX);}
{D3^SET([[DKONSPEEDMAX-DKONSPEED]*2.0]);D3^SET([3.0-[D3@DKONSPEEDMAX]]);D3^CLAMP(0.5,2.5);DKONSPEED^SUB([DKONACCELERATION*D3]);DKONSPEED^CLAMP(0.0,DKONSPEEDMAX);}
{D3^SET([D1*DKONLEN]);D4^SET([D2*[0.0-DKONLEN]]);ICOLLSELLEB^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));ICOLLSELTULOW^SET(IMGMASK^GETPIXEL([IKONNEWX+[D3@2.0]],[IKONNEWY+[D4@2.0]]));}
{D1^SINUS(IKONANGLE);D2^COSINUS(IKONANGLE);D3^SET([D1*200.0]);D4^SET([D2*[0.0-200.0]]);ANNBUM^SETPOSITION([IKONPOSX+IPLANPOSX+D3],[IKONPOSY+IPLANPOSY+D4]);ANNBUM^PLAY("BUM");S1^SET(CANVASOBSERVER^GETGRAPHICSAT([IKONPOSX+IPLANPOSX+D3],[IKONPOSY+IPLANPOSY+D4],TRUE,20,20,TRUE));@IF("S1","!_","NULL","BFITMP27","");}
{S1^SET(["ENEMY"+IENEMYNO]);CLSCHASZCZEENEMYOBJ^NEW(S1,0,IX,IY);GENEMIES^ADD(S1);GENEMYNAMES^ADD(S1);SPLAYERGOON^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+S1],"BEHGOONENEMY");IENEMYNO^INC();ARRMAPA^SET(IX,IY,S1);SPOLE^SET("");}
{S1^SET(["ENEMY"+IENEMYNO]);CLSCHASZCZEENEMYOBJ^NEW(S1,1,IX,IY);GENEMIES^ADD(S1);GENEMYNAMES^ADD(S1);SPLAYERGOON^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+S1],"BEHGOONENEMY");IENEMYNO^INC();ARRMAPA^SET(IX,IY,S1);SPOLE^SET("");}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP117","BFITMP118");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP119","BFITMP120");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP121","BFITMP122");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP123","BFITMP124");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP125","BFITMP126");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP127","BFITMP128");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP129","BFITMP130");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP131","BFITMP132");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP133","BFITMP134");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP135","BFITMP136");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP137","BFITMP138");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP139","BFITMP140");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@LOOP("{S1^SET(["ENEMY"+_I_]);SPLAYERGOON^REMOVEBEHAVIOUR(["ONBRUTALCHANGED^"+S1]);SPLAYERGOON^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+S1],"BEHGOONENEMYNOCOLL");}",0,IENEMYNO,1);}
{ILEVEL^SET(1);CANVASOBSERVER^SETBACKGROUND("1_BKG.IMG");IMGPLAN^LOAD("1_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1200);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(2100);IPLANSIZEPXY^SET(1425);I1PLANSIZEPXX^SET(1728);I1PLANSIZEPXY^SET(1425);IKRETPOSX^SET(300);IKRETPOSY^SET(1425);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);IRZEDOWBELEK^SET(5);ARRBELKISPEED^REMOVEALL();ARRBELKISTART^REMOVEALL();ARRBELKIGESTOSC^REMOVEALL();ARRBELKIMOVEDSOFAR^REMOVEALL();ARRBELKISPEED^ADD(1,2,1,2,1);ARRBELKISTART^ADD(4,3,2,0,-1);ARRBELKIGESTOSC^ADD(350,375,400,375,325);ARRBELKIMOVEDSOFAR^ADD(0,0,0,0,0);I6^SET(0);I4^SET(1);I3^SET(10);I5^SET(1);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(1);I4^ADD(I3);I3^SET(10);I5^SET(3);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(2);I4^ADD(I3);I3^SET(10);I5^SET(5);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(3);I4^ADD(I3);I3^SET(10);I5^SET(9);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(4);I4^ADD(I3);I3^SET(10);I5^SET(13);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");ANNBELKA^HIDE();CLSEIFELENEMYOBJ^NEW("ENEMY0","1_ENEMY0.ANN",2,5,16,4,0,2,18);CLSEIFELENEMYOBJ^NEW("ENEMY2","1_ENEMY0.ANN",1,17,2,9,0,8,6);CLSEIFELENEMYOBJ^NEW("ENEMY3","1_ENEMY0.ANN",1,21,6,5,0,8,6);CLSEIFELENEMYOBJ^NEW("ENEMY5","1_ENEMY0.ANN",1,15,14,6,0,25,16);GENEMIES^ADD("ENEMY0");GENEMIES^ADD("ENEMY2");GENEMIES^ADD("ENEMY3");GENEMIES^ADD("ENEMY5");GBKG^ADD("ENEMY0");GBKG^ADD("ENEMY2");GBKG^ADD("ENEMY3");GBKG^ADD("ENEMY5");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^2","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^6","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^14","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^16","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("1_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("1_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(35);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(20);ANNTELEPORT4^SETPRIORITY(20);ANNTELEPORT5^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(1);CANVASOBSERVER^SETBACKGROUND("1_BKG.IMG");IMGPLAN^LOAD("1_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1200);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(2100);IPLANSIZEPXY^SET(1425);I1PLANSIZEPXX^SET(1728);I1PLANSIZEPXY^SET(1425);IKRETPOSX^SET(300);IKRETPOSY^SET(1425);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);IRZEDOWBELEK^SET(5);ARRBELKISPEED^REMOVEALL();ARRBELKISTART^REMOVEALL();ARRBELKIGESTOSC^REMOVEALL();ARRBELKIMOVEDSOFAR^REMOVEALL();ARRBELKISPEED^ADD(3,3,2,2,1);ARRBELKISTART^ADD(4,3,2,0,-1);ARRBELKIGESTOSC^ADD(225,300,225,300,225);ARRBELKIMOVEDSOFAR^ADD(0,0,0,0,0);I6^SET(0);I4^SET(1);I3^SET(10);I5^SET(1);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(1);I4^ADD(I3);I3^SET(10);I5^SET(3);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(2);I4^ADD(I3);I3^SET(10);I5^SET(5);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(3);I4^ADD(I3);I3^SET(10);I5^SET(9);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(4);I4^ADD(I3);I3^SET(10);I5^SET(13);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");ANNBELKA^HIDE();CLSEIFELENEMYOBJ^NEW("ENEMY0","1_ENEMY0.ANN",1,5,16,4,0,2,18);CLSEIFELENEMYOBJ^NEW("ENEMY1","1_ENEMY0.ANN",2,2,10,4,0,22,10);CLSEIFELENEMYOBJ^NEW("ENEMY2","1_ENEMY0.ANN",3,17,2,9,0,8,6);CLSEIFELENEMYOBJ^NEW("ENEMY3","1_ENEMY0.ANN",1,21,6,5,0,8,6);CLSEIFELENEMYOBJ^NEW("ENEMY4","1_ENEMY0.ANN",2,19,12,4,0,25,16);CLSEIFELENEMYOBJ^NEW("ENEMY5","1_ENEMY0.ANN",3,15,14,6,0,25,16);GENEMIES^ADD("ENEMY0","ENEMY1","ENEMY2","ENEMY3","ENEMY4","ENEMY5");GBKG^ADD("ENEMY0","ENEMY1","ENEMY2","ENEMY3","ENEMY4","ENEMY5");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^2","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^6","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^10","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^12","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^14","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^16","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("1_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("1_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(35);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(20);ANNTELEPORT4^SETPRIORITY(20);ANNTELEPORT5^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(2);CANVASOBSERVER^SETBACKGROUND("2_BKG.IMG");IMGPLAN^LOAD("2_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1100);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(1875);IPLANSIZEPXY^SET(1650);I1PLANSIZEPXX^SET(1650);I1PLANSIZEPXY^SET(1650);IKRETPOSX^SET(1200);IKRETPOSY^SET(1650);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);IRZEDOWBELEK^SET(5);ARRBELKISPEED^REMOVEALL();ARRBELKISTART^REMOVEALL();ARRBELKIGESTOSC^REMOVEALL();ARRBELKIMOVEDSOFAR^REMOVEALL();ARRBELKISPEED^ADD(1,-1,2,-1,1);ARRBELKISTART^ADD(2,[5+14],3,[2+21],1);ARRBELKIGESTOSC^ADD(350,-210,375,-225,275);ARRBELKIMOVEDSOFAR^ADD(0,0,0,0,0);I6^SET(0);I4^SET(1);I3^SET(3);I5^SET(4);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(1);I4^ADD(I3);I3^SET(5);I5^SET(8);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(2);I4^ADD(I3);I3^SET(4);I5^SET(12);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(3);I4^ADD(I3);I3^SET(7);I5^SET(16);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(4);I4^ADD(I3);I3^SET(6);I5^SET(18);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");ANNBELKA^HIDE();CLSEIFELENEMYOBJ^NEW("ENEMY3","1_ENEMY0.ANN",1,13,5,4,0,17,9);CLSEIFELENEMYOBJ^NEW("ENEMY4","1_ENEMY0.ANN",1,11,7,3,0,17,9);CLSEIFELENEMYOBJ^NEW("ENEMY8","1_ENEMY0.ANN",1,16,11,3,0,21,9);CLSEIFELENEMYOBJ^NEW("ENEMY10","1_ENEMY0.ANN",1,6,13,5,0,9,17);CLSEIFELENEMYOBJ^NEW("ENEMY14","1_ENEMY0.ANN",3,8,21,6,0,16,21);GENEMIES^ADD("ENEMY3");GENEMIES^ADD("ENEMY4");GENEMIES^ADD("ENEMY8");GENEMIES^ADD("ENEMY10");GENEMIES^ADD("ENEMY14");GBKG^ADD("ENEMY3");GBKG^ADD("ENEMY4");GBKG^ADD("ENEMY8");GBKG^ADD("ENEMY10");GBKG^ADD("ENEMY14");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^5","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^7","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^11","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^13","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^17","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^21","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("2_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("2_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("2_TELE0.ANN");ANNTELEPORT1^LOAD("2_TELE1.ANN");ANNTELEPORT2^LOAD("2_TELE2.ANN");ANNTELEPORT3^LOAD("2_TELE3.ANN");ANNTELEPORT4^LOAD("2_TELE4.ANN");ANNTELEPORT5^LOAD("2_TELE5.ANN");ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(20);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(35);ANNTELEPORT4^SETPRIORITY(35);ANNTELEPORT5^SETPRIORITY(35);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(2);CANVASOBSERVER^SETBACKGROUND("2_BKG.IMG");IMGPLAN^LOAD("2_0PLAN.IMG");ANNBELKA^LOAD("1_BELKA.ANN");IBKGSIZEPXX^SET(1100);IBKGSIZEPXY^SET(1000);IPLANSIZEPXX^SET(1875);IPLANSIZEPXY^SET(1650);I1PLANSIZEPXX^SET(1650);I1PLANSIZEPXY^SET(1650);IKRETPOSX^SET(1200);IKRETPOSY^SET(1650);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);IRZEDOWBELEK^SET(5);ARRBELKISPEED^REMOVEALL();ARRBELKISTART^REMOVEALL();ARRBELKIGESTOSC^REMOVEALL();ARRBELKIMOVEDSOFAR^REMOVEALL();ARRBELKISPEED^ADD(1,-2,2,-1,1);ARRBELKISTART^ADD(2,[5+14],3,[2+21],1);ARRBELKIGESTOSC^ADD(350,-210,375,-225,275);ARRBELKIMOVEDSOFAR^ADD(0,0,0,0,0);I6^SET(0);I4^SET(1);I3^SET(3);I5^SET(4);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(1);I4^ADD(I3);I3^SET(5);I5^SET(8);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(2);I4^ADD(I3);I3^SET(4);I5^SET(12);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(3);I4^ADD(I3);I3^SET(7);I5^SET(16);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");I6^SET(4);I4^ADD(I3);I3^SET(6);I5^SET(18);ANNBELKA^CLONE(I3);GBKG^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^ADDCLONES("ANNBELKA",I4,[I4+I3-1]);*["GBELKI"+I6]^SETMARKERPOS(0);I1^SET([75*ARRBELKISTART^GET(I6)]);I2^SET(ARRBELKIGESTOSC^GET(I6));@LOOP("{*["ANNBELKA_"+[I4+_I_]]^SETPOSITION([I1+[_I_*I2]],[I5*75]);}",0,I3,1);ICOLLBELKASEL^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+I5],"BEHCOLLBELKI");ANNBELKA^HIDE();CLSEIFELENEMYOBJ^NEW("ENEMY0","1_ENEMY0.ANN",2,3,3,5,0,5,11);CLSEIFELENEMYOBJ^NEW("ENEMY1","1_ENEMY0.ANN",1,18,3,4,0,6,7);CLSEIFELENEMYOBJ^NEW("ENEMY2","1_ENEMY0.ANN",1,6,5,4,0,6,7);CLSEIFELENEMYOBJ^NEW("ENEMY3","1_ENEMY0.ANN",2,13,5,4,0,17,9);CLSEIFELENEMYOBJ^NEW("ENEMY4","1_ENEMY0.ANN",1,11,7,3,0,17,9);CLSEIFELENEMYOBJ^NEW("ENEMY6","1_ENEMY0.ANN",1,7,9,3,0,6,7);CLSEIFELENEMYOBJ^NEW("ENEMY8","1_ENEMY0.ANN",2,16,11,3,0,21,9);CLSEIFELENEMYOBJ^NEW("ENEMY9","1_ENEMY0.ANN",1,20,11,3,0,21,9);CLSEIFELENEMYOBJ^NEW("ENEMY10","1_ENEMY0.ANN",2,6,13,5,0,9,17);CLSEIFELENEMYOBJ^NEW("ENEMY11","1_ENEMY0.ANN",1,3,15,4,0,9,17);CLSEIFELENEMYOBJ^NEW("ENEMY13","1_ENEMY0.ANN",1,7,19,4,0,16,21);CLSEIFELENEMYOBJ^NEW("ENEMY14","1_ENEMY0.ANN",3,8,21,6,0,16,21);GENEMIES^ADD("ENEMY0");GENEMIES^ADD("ENEMY1");GENEMIES^ADD("ENEMY2");GENEMIES^ADD("ENEMY3");GENEMIES^ADD("ENEMY4");GENEMIES^ADD("ENEMY6");GENEMIES^ADD("ENEMY8");GENEMIES^ADD("ENEMY9");GENEMIES^ADD("ENEMY10");GENEMIES^ADD("ENEMY11");GENEMIES^ADD("ENEMY13");GENEMIES^ADD("ENEMY14");GBKG^ADD("ENEMY0");GBKG^ADD("ENEMY1");GBKG^ADD("ENEMY2");GBKG^ADD("ENEMY3");GBKG^ADD("ENEMY4");GBKG^ADD("ENEMY6");GBKG^ADD("ENEMY8");GBKG^ADD("ENEMY9");GBKG^ADD("ENEMY10");GBKG^ADD("ENEMY11");GBKG^ADD("ENEMY13");GBKG^ADD("ENEMY14");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^3","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^5","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^7","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^9","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^11","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^13","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^15","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^17","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^19","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^21","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("2_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("2_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("2_TELE0.ANN");ANNTELEPORT1^LOAD("2_TELE1.ANN");ANNTELEPORT2^LOAD("2_TELE2.ANN");ANNTELEPORT3^LOAD("2_TELE3.ANN");ANNTELEPORT4^LOAD("2_TELE4.ANN");ANNTELEPORT5^LOAD("2_TELE5.ANN");ANNTELEPORT0^SETPRIORITY(20);ANNTELEPORT1^SETPRIORITY(20);ANNTELEPORT2^SETPRIORITY(20);ANNTELEPORT3^SETPRIORITY(35);ANNTELEPORT4^SETPRIORITY(35);ANNTELEPORT5^SETPRIORITY(35);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(3);CANVASOBSERVER^SETBACKGROUND("3_BKG.IMG");IMGPLAN^LOAD("_PUSTY.IMG");ANNBELKA^LOAD("1_BELKA.ANN");ANNKRET^LOAD("3_REX.ANN");ANNKRET^SETFPS(32);ANNNEMO^PLAY("IDLE");GBKG^ADD("ANNNEMO");IBKGSIZEPXX^SET(2400);IBKGSIZEPXY^SET(1800);IPLANSIZEPXX^SET(2400);IPLANSIZEPXY^SET(1800);I1PLANSIZEPXX^SET(2400);I1PLANSIZEPXY^SET(1800);IKRETPOSX^SET(260);IKRETPOSY^SET(900);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);ANNBELKA^HIDE();IILOSCFLAM^SET(9);ANNFLAME^CLONE([IILOSCFLAM-1]);GFLAMES^ADDCLONES("ANNFLAME",0,[IILOSCFLAM-1]);GBKG^ADDCLONES("ANNFLAME",0,[IILOSCFLAM-1]);ARRFLAMESX^REMOVEALL();ARRFLAMESY^REMOVEALL();ARRFLAMESDIR^REMOVEALL();ARRFLAMESDELAY^REMOVEALL();ARRFLAMESX^ADD(6,16,15,13,27,27,22,19,20);ARRFLAMESY^ADD(20,18,20,6,8,10,16,18,20);ARRFLAMESDIR^ADD("R","R","R","L","L","L","L","L","L");ARRFLAMESDELAY^ADD(100,125,175,150,140,250,200,180,220);@LOOP("{S1^SET(["ANNFLAME_"+_I_]);@IF(ARRFLAMESDIR^GET(_I_),"_",""R"","BFITMP0","BFITMP1");}",0,IILOSCFLAM,1);CLSEIFELENEMYOBJ^NEW("ENEMY0","3_ENEMY0.ANN",3,19,5,4,0,14,17);CLSEIFELENEMYOBJ^NEW("ENEMY2","3_ENEMY0.ANN",2,16,13,4,0,8,3);CLSEIFELENEMYOBJ^NEW("ENEMY4","3_ENEMY0.ANN",2,16,17,6,0,16,21);CLSEIFELENEMYOBJ^NEW("ENEMY6","3_ENEMY0.ANN",2,6,23,8,0,10,17);CLSEIFELENEMYOBJ^NEW("ENEMY7","3_ENEMY0.ANN",4,15,23,8,0,16,21);GENEMIES^ADD("ENEMY0");GENEMIES^ADD("ENEMY2");GENEMIES^ADD("ENEMY4");GENEMIES^ADD("ENEMY6");GENEMIES^ADD("ENEMY7");GBKG^ADD("ENEMY0");GBKG^ADD("ENEMY2");GBKG^ADD("ENEMY4");GBKG^ADD("ENEMY6");GBKG^ADD("ENEMY7");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^5","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^13","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^17","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^23","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("3_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("3_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("3_TELE0.ANN");ANNTELEPORT1^LOAD("3_TELE1.ANN");ANNTELEPORT0^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{ILEVEL^SET(3);CANVASOBSERVER^SETBACKGROUND("3_BKG.IMG");IMGPLAN^LOAD("_PUSTY.IMG");ANNBELKA^LOAD("1_BELKA.ANN");ANNKRET^LOAD("3_REX.ANN");ANNKRET^SETFPS(32);ANNNEMO^PLAY("IDLE");GBKG^ADD("ANNNEMO");IBKGSIZEPXX^SET(2400);IBKGSIZEPXY^SET(1800);IPLANSIZEPXX^SET(2400);IPLANSIZEPXY^SET(1800);I1PLANSIZEPXX^SET(2400);I1PLANSIZEPXY^SET(1800);IKRETPOSX^SET(260);IKRETPOSY^SET(900);DFACTORX^SET([IBKGSIZEPXX-800]);DFACTORX^DIV([IPLANSIZEPXX-800]);DFACTORY^SET([IBKGSIZEPXY-600]);DFACTORY^DIV([IPLANSIZEPXY-600]);DFACTOR1PLANX^SET([I1PLANSIZEPXX-800]);DFACTOR1PLANX^DIV([IPLANSIZEPXX-800]);DFACTOR1PLANY^SET([I1PLANSIZEPXY-600]);DFACTOR1PLANY^DIV([IPLANSIZEPXY-600]);IMAPASIZEX^SET([IPLANSIZEPXX@75]);IMAPASIZEY^SET([IPLANSIZEPXY@75]);IKRETPOSMAPAX^SET([IKRETPOSX@75]);IKRETPOSMAPAY^SET([[IKRETPOSY@75]-1]);ANNBELKA^HIDE();IILOSCFLAM^SET(9);ANNFLAME^CLONE([IILOSCFLAM-1]);GFLAMES^ADDCLONES("ANNFLAME",0,[IILOSCFLAM-1]);GBKG^ADDCLONES("ANNFLAME",0,[IILOSCFLAM-1]);ARRFLAMESX^REMOVEALL();ARRFLAMESY^REMOVEALL();ARRFLAMESDIR^REMOVEALL();ARRFLAMESDELAY^REMOVEALL();ARRFLAMESX^ADD(6,16,15,13,27,27,22,19,20);ARRFLAMESY^ADD(20,18,20,6,8,10,16,18,20);ARRFLAMESDIR^ADD("R","R","R","L","L","L","L","L","L");ARRFLAMESDELAY^ADD(100,125,175,150,140,250,200,180,220);@LOOP("{S1^SET(["ANNFLAME_"+_I_]);@IF(ARRFLAMESDIR^GET(_I_),"_",""R"","BFITMP2","BFITMP3");}",0,IILOSCFLAM,1);CLSEIFELENEMYOBJ^NEW("ENEMY0","3_ENEMY0.ANN",3,19,5,4,0,14,17);CLSEIFELENEMYOBJ^NEW("ENEMY1","3_ENEMY0.ANN",2,6,11,4,0,4,15);CLSEIFELENEMYOBJ^NEW("ENEMY2","3_ENEMY0.ANN",2,16,13,4,0,8,3);CLSEIFELENEMYOBJ^NEW("ENEMY3","3_ENEMY0.ANN",3,7,15,5,0,4,15);CLSEIFELENEMYOBJ^NEW("ENEMY4","3_ENEMY0.ANN",2,16,17,6,0,16,21);CLSEIFELENEMYOBJ^NEW("ENEMY5","3_ENEMY0.ANN",3,3,19,5,0,10,17);CLSEIFELENEMYOBJ^NEW("ENEMY6","3_ENEMY0.ANN",2,6,23,8,0,10,17);CLSEIFELENEMYOBJ^NEW("ENEMY7","3_ENEMY0.ANN",4,15,23,8,0,16,21);GENEMIES^ADD("ENEMY0");GENEMIES^ADD("ENEMY1");GENEMIES^ADD("ENEMY2");GENEMIES^ADD("ENEMY3");GENEMIES^ADD("ENEMY4");GENEMIES^ADD("ENEMY5");GENEMIES^ADD("ENEMY6");GENEMIES^ADD("ENEMY7");GBKG^ADD("ENEMY0");GBKG^ADD("ENEMY1");GBKG^ADD("ENEMY2");GBKG^ADD("ENEMY3");GBKG^ADD("ENEMY4");GBKG^ADD("ENEMY5");GBKG^ADD("ENEMY6");GBKG^ADD("ENEMY7");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^5","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^11","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^13","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^15","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^17","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^19","BEHCOLLENEMIES");ICOLLENEMYSEL^ADDBEHAVIOUR("ONBRUTALCHANGED^23","BEHCOLLENEMIES");ANNKRET^SETFRAME("R_IDLE",0);ANNKRET^SETPOSITION(IKRETPOSX,IKRETPOSY);ANNPLANNAK^LOAD("3_0PLAN_NAK.ANN");I1^SET(ANNPLANNAK^GETNOFINEVENT("IDLE"));ANNPLANNAK^CLONE([I1-1]);@LOOP("{*["ANNPLANNAK_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);GBKG^ADDCLONES("ANNPLANNAK",0,[I1-1]);ANN1PLAN^LOAD("3_1PLAN.ANN");I1^SET(ANN1PLAN^GETNOFINEVENT("IDLE"));ANN1PLAN^CLONE([I1-1]);@LOOP("{*["ANN1PLAN_"+_I_]^SETFRAME("IDLE",_I_);}",0,I1,1);G1PLAN^ADDCLONES("ANN1PLAN",0,[I1-1]);ANNTELEPORT0^LOAD("3_TELE0.ANN");ANNTELEPORT1^LOAD("3_TELE1.ANN");ANNTELEPORT0^SETPRIORITY(20);GBKG^ADD("IMGPLAN","ANNTELEPORT0","ANNTELEPORT1");GBKG^ADD("ANNTELEPORT2","ANNTELEPORT3","ANNTELEPORT4","ANNTELEPORT5");BEHMOVEALLTOKRET^RUN();}
{I1^SET([[IKRETPOSX-IKRETWIDTH]@ 75]);@IF(ARRMAPA^GET(I1,[IKRETPOSMAPAY-2]),"_","0","BFITMP122","");I1^SET([[IKRETPOSX+IKRETWIDTH]@ 75]);@IF(ARRMAPA^GET(I1,[IKRETPOSMAPAY-2]),"_","0","BFITMP123","");}
{I1^SET([[IKRETPOSX-IKRETWIDTH]@ 75]);@IF(ARRMAPA^GET(I1,[IKRETPOSMAPAY+1]),"_","0","BFITMP130","");I1^SET([[IKRETPOSX+IKRETWIDTH]@ 75]);@IF(ARRMAPA^GET(I1,[IKRETPOSMAPAY+1]),"_","0","BFITMP131","");}
{I1^ADD([IKRETWIDTH*2]);S1^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,TRUE,10,10,TRUE));}
{I1^ADD([IKRETWIDTH*2]);S1^SET(CANVASOBSERVER^GETGRAPHICSAT(I1,I2,TRUE,22,22,TRUE));}
{ANNKEYBMOUSEHELP^PLAY("M");BEHMUSICSET^RUN("INDIE");BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");BUTNULLLOC^SETPRIORITY(1000);@INT("IX",0);@INT("IY",0);@INT("IDY",0);@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP44","BFITMP45");ANNNAKLADKI^CLONE(1);ANNNAKLADKI^SETFRAME("IDLE",0);ANNNAKLADKI_1^SETFRAME("IDLE",1);ARFROM^ADD("NULL","KRET_WH14","KRET_WH13","KRET_WH12","KRET_WH11","KRET_WH11","KRET_WH10","KRET_WH09");ARTO^ADD("REX_WH15","REX_WH21","KRET_WH20","REX_WH19","KRET_WH18","REX_WH17","REX_WH16");T^CLONE(2);K^CLONE(ILEVEL);K^HIDE();ARTX0^ADD(0);ARTY0^ADD(0);ARTX1^ADD(0);ARTY1^ADD(0);ARTX2^ADD(0);ARTY2^ADD(0);ART0^ADD(0);ART1^ADD(0);ART2^ADD(0);@LOOP("{ART0^ADD([ILEVEL+1-_I_]);}",1,ILEVEL,1);T_0^SETFRAME("0",0);T_1^SETFRAME("1",0);T_2^SETFRAME("2",0);IY^SET(550);@LOOP("{*["K_"+_I_]^SETFRAME("POS",[_I_-1]);*["K_"+_I_]^SETPRIORITY([8-_I_]);IX^SET(150);@IF("_I_","_","3","BFITMP46","BFITMP47");ARTX0^ADD(IX);ARTY0^ADD(IY);ARTX1^ADD([IX+250]);ARTY1^ADD(IY);ARTX2^ADD([IX+500]);ARTY2^ADD(IY);}",1,ILEVEL,1);@LOOP("{*["K_"+_I_]^SETFRAME([""+_I_],0);*["K_"+_I_]^SETPOSITION(ARTX0^GET([ILEVEL+1-_I_]),ARTY0^GET([ILEVEL+1-_I_]));}",1,ILEVEL,1);SK^SET("NULL");BEND^SET(FALSE);BINTRO^SET(TRUE);@IF(GSAVE^GET("HANOI_STATUS"),"_",""NIEODWIEDZONY"","BFITMP48","BFITMP49");}
{RCP^SET([1.0@60.0]);DT^ADD(RCP);DT^SET([DT*1.2]);DX^SET([IX1-IX0]);DY^SET([IY1-IY0]);X^SET([DX*DT]);Y^SET([DY*DT]);*SK^SETPOSITION([IX0+X],[IY0+Y]);*SK^INVALIDATE();@IF("DT",">","1.0","BFITMP0","");@BREAK();}
{BSUC2^SET(TRUE);@LOOP("{@IF("[ILEVEL+1-_I_]!'ART2^GET(_I_)&&BSUC2'TRUE","BFITMP20","");}",1,ILEVEL,1);}
{@INT("GX",0);@INT("GY",0);@STRING("SEV","");@STRING("SS","");@STRING("SEL","");@STRING("SOBJ","");@BOOL("BEL",FALSE);@IF("BEND","_","TRUE","BFITMP36","");GX^SET([[MOUSE^GETPOSX()+IACCLX]@IGRIDX]);GY^SET([MOUSE^GETPOSY()@IGRIDY]);@IF("BLOCK","_","TRUE","BFITMP43","");BLOCK^SET(FALSE);}
{IDRAGX^SET([[MOUSE^GETPOSX()+IACCLX]@IGRIDX]);IDRAGY^SET([MOUSE^GETPOSY()@IGRIDY]);@IF("IDRAGX<0||IDRAGX>[IMAXX+6]||IDRAGY<3||IDRAGY>IMAXY","BFITMP29","");@IF("IDRAGX'ILX&&IDRAGY'ILY","BFITMP30","");@IF("IDRAGX'IWX&&IDRAGY'IWY","BFITMP31","");@IF("BL'TRUE||BW'TRUE","BFITMP32","");@IF("IDRAGY>IMAXY||IDRAGY<3","BFITMP33","");ICI^SET(*OBJ^GETCLONEINDEX());SLOCKED^SET(["ANTRACK_"+ICI]);ARTRACK^REMOVE(SLOCKED);ARMAP^SET(IDRAGX,IDRAGY,"OK");*SLOCKED^SETPRIORITY(2);BLOCK^SET(TRUE);SFX_KOLEJ_PUT^PLAY();}
{GX^SET([[MOUSE^GETPOSX()+IACCLX]@IGRIDX]);GY^SET([MOUSE^GETPOSY()@IGRIDY]);PX^SET([MOUSE^GETPOSX()+IACCLX]);PY^SET([MOUSE^GETPOSY()]);DX2^SET(*SLOCKED^GETWIDTH());DY2^SET(*SLOCKED^GETHEIGHT());X2^SET([DX2@2]);Y2^SET([DY2@2]);*SLOCKED^SETPOSITION([PX-IACCLX-X2],[PY-Y2]);}
{)VARNIEREAGUJ^SET(1}
{@STRING("ST","");@INT("CF2",0);@INT("CF3",0);GRPLANS^MOVE(4,0);GGRT^MOVE(4,0);GGRE^MOVE(4,0);GRCHM^MOVE(5,0);IOFFX^ADD(4);@INT("BLNDMG",ANBALON^GETCFRAMEINEVENT());IAMFORY^SUB([1+BLNDMG]);@INT("ILE",0);@INT("REM",0);@INT("AMF",0);@INT("ATMP",0);REM^SET([IAMFORY%IADDAMFORA]);AMF^SET([IAMFORY@IADDAMFORA]);ATMP^SET([IADDAMFORA@10]);ILE^SET([REM@ATMP]);@IF("IAMFORY","<","1","BFITMP28","");@IF("ILE'0&&AMF'0","BFITMP29","BFITMP30");@LOOP("{ST^SET(ARFSCR^GET(_I_));*ST^MOVE(2,0);}",0,ARFSCR^GETSIZE(),1);IMGLINA^SETPOSITION([ANKRET^GETCENTERX()-IMGLINA^GETWIDTH()],[ANKRET^GETCENTERY()-IMGLINA^GETHEIGHT()]);ICURGRID^SET([IOFFX@200]);BEHBALONKOL^RUN();@IF("BFUEL'TRUE||BFAILED'TRUE","BFITMP31","");@IF("BKROK","_","FALSE","BFITMP32","BFITMP33");}
{TX^SET([IMGPASEK^GETWIDTH()@3*2]);IX^SET([IMGPASEK^GETPOSITIONX()+TX]);}
{@IF("IETAP","_","1","BFITMP5","");@IF("IETAP","_","2","BFITMP6","");@IF("IETAP","_","3","BFITMP7","");IY^SET(IMGPASEK^GETPOSITIONY());WX^SET([DX2*ICURGRID@DT]);IMGKROPA^SETPOSITION([WX+IX],[IY+1]);}
{||SOBJ2^FIND("IMGM")>-1){SOBJT^SET(SOBJ2);}
{ANPIES^PLAY("PRZE");@IF(ANKRET^GETEVENTNAME(),"_",""IDLE"","BFITMP129","");BHIT^SET(TRUE);@IF(SEV^GET(0),"_",""F"","BFITMP130","");@IF("SEV^GET(0)'"Z"||SEV^GET(0)'"G"||SEV^GET(0)'"C"||SEV^GET(0)'"P"||SEV^GET(0)'"Q"","BFITMP131","");@IF("_I_","<","6","BFITMP133","BFITMP134");@IF("BKROK","_","TRUE","BFITMP135","BFITMP136");@IF("IWN","_","0","BFITMP137","");@IF("INIETOM","_","0","BFITMP140","");ANBLANK^PAUSE();ANHITMOVE^PLAY("MOVE");}
{IGMUSICVOLUMEFIX^SET(0);IGMUSICVOLUME^SET(700);BEHMUSICSET^RUN("INTRO");ANNKEYBMOUSEHELP^PLAY("NULL");I1^SET([1+RANDOM^GET(4)]);CANVASOBSERVER^SETBACKGROUND(["BKG"+I1+".IMG"]);ANNNAKLADKI^CLONE(1);ANNNAKLADKI^SETFRAME("IDLE",0);ANNNAKLADKI_1^SETFRAME("IDLE",1);IILOSCSLOTOW^SET(4);IWOLNYCHSLOTOW^SET(IILOSCSLOTOW);ANNSZUFLADA^CLONE([IILOSCSLOTOW-1]);ANNTRUDNOSC^CLONE([[IILOSCSLOTOW*2]-1]);ANNTRUDNOSCOUT^CLONE([IILOSCSLOTOW-1]);ANNUSUWANIE^CLONE([IILOSCSLOTOW-1]);ANNZAJEZDNIA^CLONE([IILOSCSLOTOW-1]);@STRING("STMPSS","");@STRING("STMPSD","");@LOOP("{I1^SET(_I_);I2^SET([_I_*2]);I3^SET([_I_*ISLOTOFFSETY]);STMPSS^SET(GSAVE^GGET(["SLOT"+I1+"_STATUS"]));STMPSD^SET(GSAVE^GGET(["SLOT"+I1+"_DIFFICULTY"]));S1^SET(["ANNSZUFLADA_"+I1]);*S1^SETPOSITION(0,I3);@IF("STMPSS","_",""EMPTY"","BFITMP30","BFITMP31");S2^SET(["BTNSZUFLADA"+I1]);*S2^SETSTD(S1);S1^SET(["ANNTRUDNOSC_"+I2]);S2^SET(["ANNTRUDNOSC_"+[I2+1]]);S3^SET(["ANNTRUDNOSCOUT_"+I1]);*S1^SETFRAME("IDLE",0);*S2^SETFRAME("IDLE",1);*S1^SETPOSITION(0,I3);*S2^SETPOSITION(0,I3);*S3^SETPOSITION(0,I3);@IF("STMPSS","_",""EMPTY"","BFITMP34","");S1^SET(["ANNUSUWANIE_"+I1]);*S1^SETPOSITION(0,I3);*S1^SETFRAME("IDLE",0);@IF("STMPSS","_",""FULL"","BFITMP35","");S1^SET(["ANNZAJEZDNIA_"+I1]);*S1^SETPOSITION(0,I3);@IF("STMPSS'"FULL"&&GSAVE^GGET(["SLOT"+I1+"_INTRO"])'"UKONCZONY"","BFITMP36","");}",0,IILOSCSLOTOW,1);@IF("IWOLNYCHSLOTOW","_","4","BFITMP37","");}
{GSAVE^GSET(["SLOT"+IGSLOTNO+"_STATUS"],"EMPTY");GSAVE^GSET(["SLOT"+IGSLOTNO+"_DIFFICULTY"],"NORMAL");GSAVE^GSET(["SLOT"+IGSLOTNO+"_MUSIC_VOLUME"],700);@IF(GSAVE^GGET(["SLOT"+IGSLOTNO+"_INTRO"]),"!_",""UKONCZONY"","BFITMP38","");S1^SET(["ANNSZUFLADA_"+IGSLOTNO]);*S1^SETFRAME("IDLE",0);I1^SET([IGSLOTNO*2]);S1^SET(["ITRUDNOSC"+IGSLOTNO]);S2^SET(["ANNTRUDNOSCOUT_"+IGSLOTNO]);S3^SET(["ANNTRUDNOSC_"+I1]);S4^SET(["ANNTRUDNOSC_"+[I1+1]]);*S1^SET(0);*S2^SETFRAME("IDLE",0);*S3^SETFRAME("IDLE",0);*S4^SETFRAME("IDLE",1);*S2^SHOW();*S3^SHOW();*S4^SHOW();S1^SET(["BTNTRUDNOSC"+IGSLOTNO+"N"]);S2^SET(["BTNTRUDNOSC"+IGSLOTNO+"E"]);*S1^SETSTD(S3);*S2^SETSTD(S4);S1^SET(["ANNUSUWANIE_"+IGSLOTNO]);S2^SET(["BTNUSUWANIE"+IGSLOTNO]);*S1^HIDE();*S2^SETSTD("");S1^SET(["ANNZAJEZDNIA_"+IGSLOTNO]);S2^SET(["BTNZAJEZDNIA"+IGSLOTNO]);*S1^HIDE();*S2^SETSTD("");}
{BSLOTFIRSTTIME^SET(TRUE);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);}
{BSLOTFIRSTTIME^SET(TRUE);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);}
{BSLOTFIRSTTIME^SET(TRUE);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);}
{BSLOTFIRSTTIME^SET(TRUE);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);}
{BEHCHECKGROUND^RUN();@IF("BPRZYSPIESZENIE","_","FALSE","BFITMP8","");IPASEKPOS^SET([[300*IKRETPOSX]@ILOKOPOSX]);}
{@IF([IKRETPOSX+IKRETMOVEX],"<","150","BFITMP9","");ISCROLLMOVEX^SET([ISCROLLSPEED+[IKRETMOVEX@7]]);CANVASOBSERVER^MOVEBKG(ISCROLLMOVEX,0);@IF("I5PLANPOSX","<","-1600","BFITMP10","");I1^SET([0-[ISCROLLMOVEX*5]]);I5PLANPOSX^ADD(I1);ANN5PLAN^MOVE(I1,0);@IF("I4PLANPOSX","<","-450","BFITMP11","");I1^SET([0-[ISCROLLMOVEX*6]]);I4PLANPOSX^ADD(I1);ANNPRZESZKODY^MOVE(I1,0);@IF("I4PLANPOSX_1","<","-450","BFITMP12","");I1^SET([0-[ISCROLLMOVEX*6]]);I4PLANPOSX_1^ADD(I1);ANNPRZESZKODY_1^MOVE(I1,0);@IF("I3PLANPOSX","<","-1600","BFITMP13","");I1^SET([0-[ISCROLLMOVEX*7]]);I3PLANPOSX^ADD(I1);G3PLAN^MOVE(I1,0);GPOCIAG^MOVE([0-IKRETMOVEX],0);IKRETPOSX^ADD(IKRETMOVEX);I1^SET([0-[ISCROLLMOVEX*6]-1]);GDYMKI^MOVE(I1,0);@IF("I1PLANPOSX","<","-800","BFITMP14","");I1^SET([0-[ISCROLLMOVEX*20]]);I1PLANPOSX^ADD(I1);ANN1PLAN^MOVE(I1,0);BEHCHECKCOLL^RUN();BEHCHECKCOLL_1^RUN();ITIMER^INC();}
{ANNKEYBMOUSEHELP^PLAY("LPGD");BEHMUSICSET^RUN("DOROZKA");BEHAMBIENTSNDPLAY^RUN("SFX_TRAIN_OUTSIDE");SLEVELSEL^SET(["1"+SGAMEDIFFICULTY]);ARRKRETCANDO^REMOVEALL();ARRKRETCANDO^ADD("ISC","SKOCZYC","SCHYLIC");@IF(GSAVE^GET("ONOEX_STATUS"),"_",""NIEODWIEDZONY"","BFITMP32","");IPASEKPOS^SET([[300*IKRETPOSX]@ILOKOPOSX]);ANNRUNNERGAME^PLAY("RUN");ANNKRET^PLAY("STOI");}
{IKRETMOVEX^SET([0-[ISCROLLSPEED*7]]);ANNKRET^PLAY("SPADA_Z_0");}
{BKRETLOCKED^SET(TRUE);IKRETMOVEX^SET([0-[ISCROLLSPEED*6]]);ANNKRET^PLAY("PRZEWRACA_WSTAJE");SEQKRET^PLAY("DUSI_SIE");}
{IKRETMOVEX^SET([0-[ISCROLLSPEED*7]]);ANNKRET^PLAY("SPADA_Z_1");}
{BKRETLOCKED^SET(TRUE);IKRETMOVEX^SET([0-[ISCROLLSPEED*6]]);ANNKRET^PLAY("SUNIE");SEQKRET^PLAY("DUSI_SIE");}
{IKRETMOVEX^SET([0-[ISCROLLSPEED*7]]);ANNKRET^PLAY("SPADA_Z_0");}
{BKRETLOCKED^SET(TRUE);IKRETMOVEX^SET([0-[ISCROLLSPEED*6]]);ANNKRET^PLAY("PRZEWRACA_WSTAJE");SEQKRET^PLAY("DUSI_SIE");}
{IKRETMOVEX^SET([0-[ISCROLLSPEED*7]]);ANNKRET^PLAY("SPADA_Z_1");}
{BKRETLOCKED^SET(TRUE);IKRETMOVEX^SET([0-[ISCROLLSPEED*6]]);ANNKRET^PLAY("SUNIE");SEQKRET^PLAY("DUSI_SIE");}
{*SGSCENENAME^STARTMUSIC([$1+".WAV"]);IGMUSICVOLUME^SET(IGMUSICVOLUME);}
{ITEMPA^SET(*["ANNKULKIABC_"+IAN]^GETPOSITIONX(FALSE));ITEMPB^SET(*["ANNKULKIABC_"+IAN]^GETPOSITIONX());ITEMPX^SET(ITEMPA-ITEMPB);ITEMPA^SET(*["ANNKULKIABC_"+IAN]^GETPOSITIONY(FALSE));ITEMPB^SET(*["ANNKULKIABC_"+IAN]^GETPOSITIONY());ITEMPY^SET(ITEMPA-ITEMPB);MIDA^SET(*["ANNKULKIABC_"+IAN]^GETWIDTH());MIDB^SET(*["ANNKULKIABC_"+IAN]^GETHEIGHT());MIDX^SET([MIDA@2]);MIDY^SET([MIDB@2]);*["ANNKULKIABC_"+IAN]^SETPOSITION([MOUSE^GETPOSX()+ITEMPX-MIDX],[MOUSE^GETPOSY()+ITEMPY-MIDY]);}
{ITEMPA^SET(*["ANNKULKIABCREX_"+IAN]^GETPOSITIONX(FALSE));ITEMPB^SET(*["ANNKULKIABCREX_"+IAN]^GETPOSITIONX());ITEMPX^SET(ITEMPA-ITEMPB);ITEMPA^SET(*["ANNKULKIABCREX_"+IAN]^GETPOSITIONY(FALSE));ITEMPB^SET(*["ANNKULKIABCREX_"+IAN]^GETPOSITIONY());ITEMPY^SET(ITEMPA-ITEMPB);MIDA^SET(*["ANNKULKIABCREX_"+IAN]^GETWIDTH());MIDB^SET(*["ANNKULKIABCREX_"+IAN]^GETHEIGHT());MIDX^SET([MIDA@2]);MIDY^SET([MIDB@2]);*["ANNKULKIABCREX_"+IAN]^SETPOSITION([MOUSE^GETPOSX()+ITEMPX-MIDX],[MOUSE^GETPOSY()+ITEMPY-MIDY]);}
{@STRING("S","");@INT("TX",0);@INT("TY",0);@INT("SS",0);@INT("MAXT",0);@INT("CT",0);@INT("TT",0);@INT("IKW",0);CANVASOBSERVER^MOVEBKG([IMOVE-1],0);ILICZ^ADD([IMOVE-1]);MAXT^SET([INUMEKR*800]);CT^SET([ISLONEKR*800+ILICZ]);IKW^SET(IMGK^GETWIDTH());TT^SET([[PASEK^GETWIDTH()-IKW]*CT@MAXT]);GR1^MOVE([0-IMOVE-1],0);GRFAKE^MOVE([0-IMOVE],0);IMGK^SETPOSITION([PASEK^GETPOSITIONX()+TT],IMGK^GETPOSITIONY());@IF("ILICZ",">","800","BFITMP26","");S^SET(ANONI^GETEVENTNAME());SS^SET(S);@IF("S'"SCARED"||S'"HIT"||SS>20","BFITMP27","BFITMP28");@IF("TX>145&&TX<147&&S'"RUN"","BFITMP29","");TX^SET(ANONI^GETENDX());@IF("TX>500&&BGOTTHEM'FALSE","BFITMP30","");@IF("ISLONEKR",">_","ISLONEKRTEMP","BFITMP31","");}
{ANNKEYBMOUSEHELP^PLAY("M_SP");BEHMUSICSET^RUN("DOROZKA");BEHAMBIENTSNDPLAY^RUN("SFX_WYSPA_LAS");@INT("TX",0);@INT("TY",0);@INT("LEN",0);@STRING("OBJ","");@INT("CLA",0);@INT("CLB",0);@INT("CLC",0);ANFADE^SETFRAME("OPEN",0);ANONI^MOVE(-400,0);@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP76","BFITMP77");ISLONEKR^SET(GSAVE^GET("SLON_EKRANY"));ISLONETAP^SET(GSAVE^GET("SLON_ETAP"));ISTARTEKR^SET(ISLONEKR);IEKRANY^SET(AREKR^GET(ISLONETAP));ISLONEKRTEMP^SET(GSAVE^GET("SLON_EKRANY_TMP"));ISLONEKRTEMP^ADD(IEKRANY);@IF("SGAMEDIFFICULTY","_",""NORMAL"","BFITMP78","BFITMP79");CANVASOBSERVER^PASTE("IMG1",0,0);CANVASOBSERVER^PASTE("IMG2",800,0);CANVASOBSERVER^PASTE("IMG3",1600,0);IMG1A^HIDE();IMG1B^HIDE();IMG1C^HIDE();IMG1A^CLONE([IEKRANY*3]);IMG1B^CLONE([IEKRANY*3]);IMG1C^CLONE([IEKRANY*3]);@LOOP("{LEN^SET(RANDOM^GET(1));@IF("LEN","_","0","BFITMP80","");@IF("LEN","_","1","BFITMP81","");*OBJ^MOVE([_I_*800],0);*OBJ^SHOW();GR1^ADD(OBJ);}",0,[IEKRANY*3],1);KEYBOARD^SETAUTOREPEAT(FALSE);MOUSE^SETPOSITION(400,300);ANFAZA2^CLONE(1);ANFAZA2^SETPOSITION(800,400);ANFAZA2_1^HIDE();IONIX^SET(ANONI^GETPOSITIONX());DONIX^SET(IONIX);@IF("ILEVEL","_","1","BFITMP88","BFITMP89");ANFAZA1^CLONE(ARFRUG^GETSIZE());ANFAZA1C^CLONE(ARFRUG^GETSIZE());IMGFAKE^CLONE(ARFRUG^GETSIZE());BEKIPASND^SET(FALSE);@IF(GSAVE^GET("SLON_STATUS"),"_",""NIEODWIEDZONY"","BFITMP90","BFITMP91");}
{*SOBJ^STOP(FALSE);*SOBJ^SETPOSITION(800,80);ARAG^REMOVE(SOBJ]);GRAG^REMOVE(SOBJ);ANEKIPA^PLAY(["HIT"+IRIDE2]);}
{BCOLL^SET(TRUE);BFD^SET(FALSE);ANFAZA2^HIDE();ANFAZA2^STOP(FALSE);ANFAZA2^SETPOSITION(800,380);IMOVE^SET(2);DONISPEED^SET([DONISPEEDCONS+0.27]);ANSLONHEAD^PLAY("PANIC");ANSLONKORP^PLAY("KOL");ZWH_I314^PLAY();*SCATCH^HIDE();}
{S1^SET(["ENEMY"+IENEMYNO]);CLSCHASZCZEENEMYOBJ^NEW(S1,0,IX,IY);GENEMIES^ADD(S1);SPLAYERGOON^ADDBEHAVIOUR(["ONBRUTALCHANGED^"+S1],"BEHGOONENEMY");IENEMYNO^INC();ARRMAPA^SET(IX,IY,S1);SPOLE^SET("");}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP71","BFITMP72");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP73","BFITMP74");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP75","BFITMP76");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP77","BFITMP78");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]<ICENTERY&&IBKGSTARTY<0","BFITMP79","BFITMP80");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONY+IBKGSTARTY]>ICENTERY&&[IPLAYERGOONY+11-ICENTERY]<ISIZEY","BFITMP81","BFITMP82");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]<ICENTERX&&IBKGSTARTX<0","BFITMP83","BFITMP84");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@IF("[IPLAYERGOONX+IBKGSTARTX]>ICENTERX&&[IPLAYERGOONX+15-ICENTERX]<ISIZEX","BFITMP85","BFITMP86");ARRMAPA^SET(IPLAYERGOONX,IPLAYERGOONY,"PLAYER");BPLAYERSTOI^SET(FALSE);ANNPLAYER^PLAY(SPLAYEREVENT);}
{@INT("X",0);@INT("Y",0);@INT("ICI1",0);@INT("ICI2",0);@INT("ICI1D",0);@INT("ICI2D",0);@STRING("OBJ","");@STRING("OBJ2","");@BOOL("Z1",FALSE);@BOOL("Z2",FALSE);@BOOL("TEST1",FALSE);@BOOL("TEST2",FALSE);@INT("IDY2",0);@INT("POS2",0);@INT("POS3",0);@INT("POS4",0);@INT("POSY",0);@INT("ICL",0);@INT("IFPS",0);@STRING("SOBJ","");@INT("POSBW",0);@INT("IB",0);@INT("IZMIENNA2",0);@INT("INRILELOK1",0);@INT("INRILELOK2",0);@INT("ZXC",0);IWSKAZNIK^SET([INRILE*4]);IMGWSKAZNIK^SETPOSITION([IMGBELKA^GETPOSITIONX()+IWSKAZNIK+IWSKAZNIKLEVEL],IMGWSKAZNIK^GETPOSITIONY());OBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(135,300,FALSE,9,9,TRUE));OBJ2^SET(CANVASOBSERVER^GETGRAPHICSAT(265,300,FALSE,9,9,TRUE));ICI1^SET(*OBJ^GETCLONEINDEX());ICI2^SET(*OBJ2^GETCLONEINDEX());@LOOP("{X^SET(*["PIX_"+_I_]^GETPOSITIONX());Y^SET(*["PIX_"+_I_]^GETPOSITIONY());OBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(X,Y,FALSE,[10+ICI1],[10+ICI2],FALSE));@IF(OBJ^FIND("ANNMASK"),">","-1","BFITMP30","");@IF(OBJ^FIND("ANNPRZESZKM"),">","-1","BFITMP31","");}",1,14,1);@IF("IKEYSTOP","!_","TRUE","BFITMP48","");GRTUNEL^MOVE([0-IMOVEFAST],0);CANVASOBSERVER^MOVEBKG(IMOVEFAST,0);@LOOP("{*["ANNBABELKIW_"+_I_]^MOVE([0-IMOVEFAST],0);POSBW^SET(*["ANNBABELKIW_"+_I_]^GETPOSITIONX());@IF("POSBW","<","-10","BFITMP49","");}",0,19,1);GRBABELKIB^MOVE([0-IMOVEFAST],0);IOFFSET^ADD(IMOVEFAST);INRILELOK1^SET([[1+INRILE]*400]);INRILELOK2^SET([7+INRILELOK1]);@IF("IOFFSET>INRILELOK1&&IOFFSET<INRILELOK2","BFITMP53","");@IF("INRILE","_",[IZMIENNA-3],"BFITMP56","");@IF("INRILE","_",[IZMIENNA-2],"BFITMP60","");@IF("TEMPO_W","_","0","BFITMP61","");TEMPO_W^INC();@IF("IKEY","_","1","BFITMP63","");}
{*["ANNPRZESZKM_"+[_I_*2]]^SETFRAME(STEMP,ZERORAND);}
{*["ANNPRZESZKM_"+[_I_*2]]^SETFRAME(STEMP,ILEVELNAUT);}
{OBJ^SET(["ANNPRZESZK_"+[_I_*2]]);@IF("ILEVELNAUT","_","2","BFITMP20","BFITMP21");ARPRZESZKD^CHANGEAT(_I_,1);CANVASOBSERVER^PASTE(OBJ,[_I_*400],0);@IF("ILEVELNAUT","_","2","BFITMP22","BFITMP23");*["ANNPRZESZKM_"+[_I_*2]]^SETPOSITION([_I_*400],0);*["ANNPRZESZKM_"+[_I_*2]]^SETPRIORITY([10+_I_]);*["ANNPRZESZKM_"+[_I_*2]]^HIDE();}
{@IF("_I_",">_","1","BFITMP24","");GRTUNEL^ADD(["ANNPRZESZKM_"+[_I_*2]]);}
{@IF("_I_'0||_I_'1","BFITMP26","BFITMP27");GRTUNEL^ADD(["ANNPRZESZKM_"+[_I_*2+1]]);}
{SOBJ^SET(["ANNPRZESZK_"+[IKTORY*2]]);@IF(ARPRZESZKD^GET(IKTORY),"_","1","BFITMP50","");SOBJ^SET(["ANNPRZESZK_"+[IKTORY*2+1]]);@IF(ARPRZESZKG^GET(IKTORY),"_","1","BFITMP51","");}
{ZXC^SET([INRILE%4]);CANVASOBSERVER^REMOVE(["ANNTOR_"+INRILE]);CANVASOBSERVER^PASTE(["ANNTOR_"+IKTORY],[ZXC*400],0);CANVASOBSERVER^REMOVE(["ANNPRZESZK_"+INRILE]);CANVASOBSERVER^REMOVE(["ANNPRZESZK_"+[INRILE*2+1]]);@IF("IKTORY",">",IZMIENNA],"BFITMP52","");INRILE^INC();IKTORY^INC();}
{ANNPOLA^HIDE();ANNPOLACOPY^HIDE();DBLEVEL^REMOVEALL();DBLEVEL^LOAD(["LEV"+IBDLEVEL+"_"+SGAMEDIFFICULTY+".FLD"]);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));ISIZEX^SET(S1^GET(0,3));ISIZEY^SET(S1^GET(4,3));DBLEVEL^NEXT();STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));IPLAYERPOSX^SET(S1^GET(0,3));IPLAYERPOSY^SET(S1^GET(4,3));DBLEVEL^NEXT();I1^SET(0);@WHILE("I1","<","ISIZEY","{STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));@LOOP("{I2^SET(S1^GET([_I_*4],3));ARRMAPA^SET(_I_,I1,I2);}",0,ISIZEX,1);DBLEVEL^NEXT();I1^INC();}");ICENTERX^SET(6);ICENTERY^SET(5);ISCROLLMAXX^SET([[ISIZEX*IGRID]-[14*IGRID]]);ISCROLLMAXY^SET([[ISIZEY*IGRID]-[10*IGRID]]);IBKGSTARTX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);IBKGSTARTY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);IBKGSTARTX^CLAMP(0,ISCROLLMAXX);IBKGSTARTY^CLAMP(0,ISCROLLMAXY);ISCREENPOSX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);ISCREENPOSY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);ISLOWNIKSELECTOR^SET(IBDLEVEL);I1^SET(0);I2^SET(0);@WHILE("I1","<","ISIZEY","{@LOOP("{I3^SET(ARRMAPA^GET(_I_,I1));@IF("I3","_","5","BFITMP56","");@IF("I3>IINFO_OD&&I3<IINFO_DO","BFITMP57","");}",0,ISIZEX,1);I1^INC();}");ANNPLAYER^SETFPS(40);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPLAYER^SETPOSITION(I1,I2);CANVASOBSERVER^MOVEBKG(IBKGSTARTX,IBKGSTARTY);GOBJ^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);ANNPLAYER^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);IMGMASKCUT^MOVE([0-IBKGSTARTX],[0-IBKGSTARTY]);BEHINITBKG^RUN();}
{ANNPOLACOPY^HIDE();I1^ADD([ILASTDIRX*IGRID]);I2^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET([IPLAYERPOSX+ILASTDIRX],[IPLAYERPOSY+ILASTDIRY],IPCHANY);CANVASOBSERVER^PASTE("ANNPOLACOPY",I1,I2);IPCHANY^SET(-1);ISPADX^SET([I1 @ IGRID]);ISPADY^SET([[I2 @ IGRID]+1]);ISPADREMX^SET(ISPADX);ISPADREMY^SET([ISPADY-1]);SSPADANIESELECTOR^SET("D");@IF("BSPADA","_","FALSE","BFITMP65","");@IF("BSPADA","_","FALSE","BFITMP66","");}
{SBUTTONSSELECTOR^REMOVEBEHAVIOUR("ONBRUTALCHANGED$UKONCZONY");}
{SGZAJEZDNIASCENECODELAST^SET(GSAVE^GET("SCENE_CODE"));@IF("SGZAJEZDNIASCENECODELAST","_",""CCRE"","BFITMP0","");SGSLOTNAME^SET([""+IGSLOTNO+"FREE"]);S1^SET("$COMMON\SAVE\SLOT_DEF.DTA");S2^SET(["$COMMON\SAVE\SLOT"+SGSLOTNAME+".DTA"]);S1^COPYFILE(S1,S2);GSAVE^DBLOAD();IGMUSICVOLUME^SET(GSAVE^GGET(["SLOT"+IGSLOTNO+"_MUSIC_VOLUME"]));SFXMENUCLICK^PLAY();}
{DBLEVEL^REMOVEALL();DBLEVEL^LOAD(VARSPATHNAME);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));ISIZEX^SET(S1^GET(0,3));ISIZEY^SET(S1^GET(4,3));IBDKRAINA^SET(S1^GET(8,3));DBLEVEL^NEXT();ANNPOLA^LOAD(["POLA"+IBDKRAINA+".ANN"]);ANNPOLA^HIDE();ANNPOLACOPY^LOAD(["POLA"+IBDKRAINA+"_COPY.ANN"]);ANNPOLACOPY^HIDE();ANNEXPLOSION^LOAD(["EXPLO"+IBDKRAINA+".ANN"]);ANNEXPLOSION^HIDE();ANNEXPLOSION^SETFPS(40);ANNTNTR^LOAD(["TNTR"+IBDKRAINA+".ANN"]);ANNTNTR^HIDE();ANNSTONE17^LOAD(["STONE"+IBDKRAINA+"_TNTO.ANN"]);ANNSTONE17^SETFPS(40);ANNSTONE20^LOAD(["STONE"+IBDKRAINA+"_20.ANN"]);ANNSTONE20^SETFPS(40);ANNSTONE22^LOAD(["STONE"+IBDKRAINA+"_22.ANN"]);ANNSTONE22^SETFPS(40);ANNSTONE23^LOAD(["STONE"+IBDKRAINA+"_23.ANN"]);ANNSTONE23^SETFPS(40);ANNSTONE24^LOAD(["STONE"+IBDKRAINA+"_24.ANN"]);ANNSTONE24^SETFPS(40);ANNPANELBKG^SETFRAME("IDLE",IBDKRAINA);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));IPLAYERPOSX^SET(S1^GET(0,3));IPLAYERPOSY^SET(S1^GET(4,3));DBLEVEL^NEXT();I1^SET(0);@WHILE("I1","<","ISIZEY","{STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));@LOOP("{I2^SET(S1^GET([_I_*4],3));ARRMAPA^SET(_I_,I1,I2);}",0,ISIZEX,1);DBLEVEL^NEXT();I1^INC();}");ICENTERX^SET(6);ICENTERY^SET(5);ISCROLLMAXX^SET([[ISIZEX*IGRID]-[14*IGRID]]);ISCROLLMAXY^SET([[ISIZEY*IGRID]-[10*IGRID]]);IBKGSTARTX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);IBKGSTARTY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);IBKGSTARTX^CLAMP(0,ISCROLLMAXX);IBKGSTARTY^CLAMP(0,ISCROLLMAXY);ISCREENPOSX^SET([[IPLAYERPOSX-ICENTERX]*IGRID]);ISCREENPOSY^SET([[IPLAYERPOSY-ICENTERY]*IGRID]);ISLOWNIKSELECTOR^SET(IBDLEVEL);I1^SET(0);I2^SET(0);@WHILE("I1","<","ISIZEY","{@LOOP("{I3^SET(ARRMAPA^GET(_I_,I1));@IF("I3","_","5","BFITMP66","");@IF("I3>IINFO_OD&&I3<IINFO_DO","BFITMP67","");}",0,ISIZEX,1);I1^INC();}");ANNPLAYER^SETFPS(40);I1^SET([IPLAYERPOSX*IGRID]);I2^SET([IPLAYERPOSY*IGRID]);ANNPLAYER^SETPOSITION(I1,I2);GOBJ^ADD("ANNPASEK");ANNPASEK^MOVE(20,0);CANVASOBSERVER^MOVEBKG([IBKGSTARTX-VARIPRZESUNIECIEX],IBKGSTARTY);GOBJ^MOVE([0-IBKGSTARTX+VARIPRZESUNIECIEX],[0-IBKGSTARTY]);ANNPLAYER^MOVE([0-IBKGSTARTX+VARIPRZESUNIECIEX],[0-IBKGSTARTY]);}
{IBDLEVEL^SET(GSAVE^GET("EDITOR_SLOT_NO"));VARSPATHNAME^SET(["$COMMON\SAVE_BD\BD_CLEV"+IBDLEVEL+".FLD"]);}
{ANNPOLACOPY^HIDE();I1^ADD([ILASTDIRX*IGRID]);I2^ADD([ILASTDIRY*IGRID]);ARRMAPA^SET([IPLAYERPOSX+ILASTDIRX],[IPLAYERPOSY+ILASTDIRY],IPCHANY);CANVASOBSERVER^PASTE("ANNPOLACOPY",I1,I2);IPCHANY^SET(-1);ISPADX^SET([I1 @ IGRID]);ISPADY^SET([[I2 @ IGRID]+1]);ISPADREMX^SET(ISPADX);ISPADREMY^SET([ISPADY-1]);SSPADANIESELECTOR^SET("D");@IF("BSPADA","_","FALSE","BFITMP79","");@IF("BSPADA","_","FALSE","BFITMP80","");}
{CANVASOBSERVER^SAVE(["$COMMON\SAVE_BD\BD_SCR"+VARISLOTNO+".IMG"],0.5,0.5);CURSOR^SHOW();}
{KEYBOARD^SETAUTOREPEAT(FALSE);ANNSCROLLMASK^CLONE(7);@LOOP("{*["ANNSCROLLMASK_"+_I_]^SETFRAME("IDLE",_I_);}",0,8,1);VARISLOTNO^SET(GSAVE^GET("EDITOR_SLOT_NO"));VARSPATHNAME^SET(["$COMMON\SAVE_BD\BD_CLEV"+VARISLOTNO+".FLD"]);BEHLOAD^RUN();I1^SET(ANNBUTTONS^GETNOFINEVENT(0));ANNBUTTONS^CLONE([I1-1]);@LOOP("{S1^SET(["ANNBUTTONS_"+_I_]);*S1^SETFRAME("IDLE",_I_);GBUTTONS^ADD(S1);}",0,I1,1);GBUTTONS^ADD("ANNMENU");ANNRUNNER^PLAY("RUN");}
{DBLEVEL^REMOVEALL();DBLEVEL^LOAD(VARSPATHNAME);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));ISIZEX^SET(S1^GET(0,3));ISIZEY^SET(S1^GET(4,3));VARIKRAINANO^SET(S1^GET(8,3));DBLEVEL^NEXT();ANNPOLA^LOAD(["POLA"+VARIKRAINANO+".ANN"]);ANNPOLA^HIDE();ANNCURSOR^LOAD(["CURSOR"+VARIKRAINANO+".ANN"]);ANNBUTTONS^LOAD(["BUTTONS"+VARIKRAINANO+".ANN"]);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));IPLAYERPOSX^SET(S1^GET(0,3));IPLAYERPOSY^SET(S1^GET(4,3));DBLEVEL^NEXT();I1^SET(0);@WHILE("I1","<","ISIZEY","{STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL^GETFIELD(0));@LOOP("{I2^SET(S1^GET([_I_*4],3));ARRMAPA^SET(_I_,I1,I2);}",0,ISIZEX,1);DBLEVEL^NEXT();I1^INC();}");I1^SET(0);@WHILE("I1","<","ISIZEX","{@LOOP("{ANNPOLA^SETFRAME("POLA",ARRMAPA^GET(I1,_I_));CANVASOBSERVER^PASTE("ANNPOLA",[I1*IGRID],[_I_*IGRID]);}",0,ISIZEY,1);I1^INC();}");ANNPOLA^SETFRAME("POLA",121);CANVASOBSERVER^REFRESH();}
{DBLEVEL^SELECT([IPLAYERPOSY+2]);STLEVEL^SET("DBLEVEL_CURSOR");S3^SET(STLEVEL|S0);S3^REPLACEAT([IPLAYERPOSX*4],"121");STLEVEL|S0^SET(S3);DBLEVEL_CURSOR^SET("STLEVEL");CANVASOBSERVER^PASTE("ANNPOLA",[IPLAYERPOSX*IGRID],[IPLAYERPOSY*IGRID]);DBLEVEL^SELECT(1);STLEVEL^SET("DBLEVEL_CURSOR");S3^SET(STLEVEL|S0);S1^SET(I1);S2^SET(I2);IPLAYERPOSX^SET(I1);IPLAYERPOSY^SET(I2);@LOOP("{S1^SET(["0"+S1]);}",0,[3-S1^LENGTH()],1);@LOOP("{S2^SET(["0"+S2]);}",0,[3-S2^LENGTH()],1);S3^REPLACEAT(0,S1);S3^REPLACEAT(4,S2);STLEVEL|S0^SET(S3);DBLEVEL_CURSOR^SET("STLEVEL");}
{CANVASOBSERVER^PASTE("ANNCURSOR",I1,I2);I1^DIV(IGRID);I2^DIV(IGRID);DBLEVEL^SELECT([I2+2]);STLEVEL^SET("DBLEVEL_CURSOR");S1^SET(STLEVEL|S0);S1^REPLACEAT([I1*4],SFIELD);STLEVEL|S0^SET(S1);DBLEVEL_CURSOR^SET("STLEVEL");@IF("SFIELD","_",""015"","BFITMP3","");DBLEVEL^SAVE(VARSPATHNAME);CANVASOBSERVER^REFRESH();SFX_LABIRYNT_PROJEKT_ELEMENT_PUT^PLAY();}
{I1^SET([IMOUSEX%IGRID]);I2^SET([IMOUSEY%IGRID]);I1^SET([IMOUSEX-I1+30+IBKGPOSX]);I2^SET([IMOUSEY-I2+30+IBKGPOSY]);B1^SET(TRUE);@IF("[I1@IGRID]'IPLAYERPOSX&&[I2@IGRID]'IPLAYERPOSY","BFITMP0","");@IF("I1<'IGRID||I1>'[[ISIZEX-1]*IGRID]","BFITMP1","");@IF("I2<'IGRID||I2>'[[ISIZEY-1]*IGRID]","BFITMP2","");@IF("B1","_","TRUE","BFITMP4","");}
{GSIZE^ADD("BTNXM","BTNXP","BTNYM","BTNYP");GSIZE^ADD("BTNKRAINA0","BTNKRAINA1","BTNKRAINA2","BTNKRAINA3","BTNKRAINA4");ARRSL^LOAD("$COMMON\SAVE_BD\INFOSL.ARR");@IF(ARRSL^GETSIZE(),"_","0","BFITMP4","");ARRKR^LOAD("$COMMON\SAVE_BD\INFOKR.ARR");@IF(ARRKR^GETSIZE(),"_","0","BFITMP5","");B_SLOT^CLONE(19);@LOOP("{VARSTMP0^SET(["BTNSLOT"+_I_]);VARSTMP1^SET(["B_SLOT_"+_I_]);VARSTMP2^SET(ARRSL^GET(_I_));@IF("VARSTMP2","_",""F"","BFITMP6","");VARITMP0^SET([[_I_@5]*190]);VARITMP1^SET([[_I_%5]*50]);*VARSTMP1^SETPOSITION(VARITMP0,VARITMP1);*VARSTMP1^SETFRAME(VARSTMP2,0);*VARSTMP0^SETSTD(VARSTMP1);}",0,20,1);ANNLICZBY^CLONE(1);ANNLICZBY^SETFRAME("X",[VARISIZEX-10]);ANNLICZBY_1^SETFRAME("Y",[VARISIZEY-10]);VARIACTIVESLOT^SET(GSAVE^GET("EDITOR_SLOT_NO"));}
{DBLEVEL^REMOVEALL();DBLEVEL^LOAD(["$COMMON\SAVE_BD\BD_CLEV"+VARIACTIVESLOT+".FLD"]);DBLEVEL^SELECT(0);STLEVEL^SET("DBLEVEL_CURSOR");VARSTMP0^SET(["0"+VARISIZEX]);VARSTMP1^SET(["0"+VARISIZEY]);VARSTMP2^SET(STLEVEL|S0);VARSTMP2^REPLACEAT(0,VARSTMP0);VARSTMP2^REPLACEAT(4,VARSTMP1);VARSTMP2^REPLACEAT(8,["00"+VARIKRAINANO]);STLEVEL|S0^SET(VARSTMP2);DBLEVEL_CURSOR^SET("STLEVEL");VARSTMP0^SET("001");DBLEVEL^SELECT(2);STLEVEL^SET("DBLEVEL_CURSOR");VARSTMP2^SET(STLEVEL|S0);@LOOP("{VARSTMP2^REPLACEAT([_I_*4],VARSTMP0);}",0,VARISIZEX,1);STLEVEL|S0^SET(VARSTMP2);DBLEVEL_CURSOR^SET("STLEVEL");DBLEVEL^SELECT([VARISIZEY+1]);STLEVEL^SET("DBLEVEL_CURSOR");VARSTMP2^SET(STLEVEL|S0);@LOOP("{VARSTMP2^REPLACEAT([_I_*4],VARSTMP0);}",0,VARISIZEX,1);STLEVEL|S0^SET(VARSTMP2);DBLEVEL_CURSOR^SET("STLEVEL");VARITMP0^SET([[VARISIZEX-1]*4]);DBLEVEL^SELECT(3);@LOOP("{STLEVEL^SET("DBLEVEL_CURSOR");VARSTMP2^SET(STLEVEL|S0);VARSTMP2^REPLACEAT(0,VARSTMP0);VARSTMP2^REPLACEAT(VARITMP0,VARSTMP0);STLEVEL|S0^SET(VARSTMP2);DBLEVEL_CURSOR^SET("STLEVEL");DBLEVEL^NEXT();}",0,[VARISIZEY-2],1);DBLEVEL^SAVE(["$COMMON\SAVE_BD\BD_CLEV"+VARIACTIVESLOT+".FLD"]);}
{ARRSL^CHANGEAT(VARIACTIVESLOT,"E");ARRSL^SAVE("$COMMON\SAVE_BD\INFOSL.ARR");VARSTMP0^SET("$COMMON\BD_PUSTY.IMG");VARSTMP1^SET(["$COMMON\SAVE_BD\BD_SCR"+VARIACTIVESLOT+".IMG"]);VARSTMP1^COPYFILE(VARSTMP0,VARSTMP1);VARSTMP1^SET(["B_SLOT_"+VARIACTIVESLOT]);*VARSTMP1^SETFRAME("E",0);GSIZE^ENABLE();ANNLICZBY^SHOW();ANNLICZBY_1^SHOW();ANNSYMBOLUKLADU^SHOW();ANNKRAINAACTIVE^SHOW();BTNPLAY^DISABLE();BTNDELETE^DISABLE();IMGSCR^LOAD("$COMMON\BD_PUSTY.IMG");}
{GSIZE^DISABLE();ANNLICZBY^HIDE();ANNLICZBY_1^HIDE();ANNSYMBOLUKLADU^HIDE();ANNKRAINAACTIVE^HIDE();BTNPLAY^ENABLE();BTNDELETE^ENABLE();IMGSCR^LOAD(["$COMMON\SAVE_BD\BD_SCR"+VARIACTIVESLOT+".IMG"]);IMGSCR^SETPOSITION(391,281);IMGSCR^SHOW();}
{VARSTMP0^SET("$COMMON\BD_LEVDEF.FLD");VARSTMP1^SET(["$COMMON\SAVE_BD\BD_CLEV"+VARIACTIVESLOT+".FLD"]);VARSTMP1^COPYFILE(VARSTMP0,VARSTMP1);BEHSETMAP^RUN();ARRSL^CHANGEAT(VARIACTIVESLOT,"F");ARRKR^CHANGEAT(VARIACTIVESLOT,VARIKRAINANO);ARRSL^SAVE("$COMMON\SAVE_BD\INFOSL.ARR");ARRKR^SAVE("$COMMON\SAVE_BD\INFOKR.ARR");GSAVE^SET("EDITOR_SLOT_NO",VARIACTIVESLOT);BEHGOTOSCENE^RUN("BDASHEDITOR");}
{ARRSL^ADD("E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E");ARRSL^SAVE("$COMMON\SAVE_BD\INFOSL.ARR");}
{ARRKR^ADD(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);ARRKR^SAVE("$COMMON\SAVE_BD\INFOKR.ARR");}
{SOBJACTION^REMOVEBEHAVIOUR("ONBRUTALCHANGED$__END__");}
{SBUTTONOFF^SET(ARRLASTLOCKOBJECT^GET([IOBJECTNR*2]));SBUTTONOFF^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX],[IPPOSY+IPDEY],FALSE,100,100,FALSE));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX+IPDEX],[IPPOSY+IPDEY+IPDEY],FALSE,100,100,FALSE));SFX_BDASH_GAME_PRZESUWANIE^STOP(FALSE);}
{SPUSHED^SET(SOBJECTNAME);IOBJECTNR^SET(*SPLAYERCOLL^GETCLONEINDEX());*SPLAYERCOLL^MOVE(IPDEX,IPDEY);SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX+IPDEX],[IPPOSY+IPDEY+IPDEY],FALSE,110,110,FALSE));I1^SET([IOBJECTNR*2]);ARRLASTLOCKOBJECT^CHANGEAT(I1,ARRLASTLOCKOBJECT^GET([I1+1]));ARRLASTLOCKOBJECT^CHANGEAT([I1+1],SBUTTONON);ANNOBJECTRUNNER^PLAY("RUN");}
{INEWPLAYER^SET($1);S1^SET(*SNEWPLAYERNAME^GETEVENTNAME());@IF(S1^GET(0,8),"!_",""PRISONER"","BFITMP381","");7;}
{SBUTTONOFF^SET(ARRLASTLOCKPLAYER^GET([IPLAYERNR*2]));SBUTTONOFF^SET(ARRLASTBUTTONPLAYER^GET(IPLAYERNR));IPPOSX^SET(*SACTIVEPLAYERNAME^GETCENTERX());IPPOSY^SET(*SACTIVEPLAYERNAME^GETCENTERY());SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPPOSX,IPPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONPLAYER^CHANGEAT(IPLAYERNR,SBUTTONON);SFOGOFF^SET(ARRLASTFOG^GET([IPLAYERNR*2]));}
{SACTIVEPLAYERDIR^SET(S1);*SACTIVEPLAYERNAME^PLAY(S1);*SACTIVEPLAYERMNAME^SETFRAME(S1,0);*SACTIVEPLAYERMNAME^MOVE(IPDEX,IPDEY);BACPLAYERISMOVING^SET(TRUE);SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX],[IPPOSY+IPDEY],FALSE,110,110,FALSE));I1^SET([IPLAYERNR*2]);ARRLASTLOCKPLAYER^CHANGEAT(I1,ARRLASTLOCKPLAYER^GET([I1+1]));ARRLASTLOCKPLAYER^CHANGEAT([I1+1],SBUTTONON);SFOGON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPPOSX+IPDEX],[IPPOSY+IPDEY],FALSE,30,30,FALSE));ARRLASTFOG^CHANGEAT(I1,ARRLASTFOG^GET([I1+1]));ARRLASTFOG^CHANGEAT([I1+1],SFOGON);}
{SFX_BDASH_GAME_TELEPORTTUNEL^PLAY();*SPRESSER^SETPOSITION(I1,I2);*SACTIVEPLAYERMNAME^SETPOSITION(I1,I2);SFOGOFF^SET(ARRLASTFOG^GET([IACTIVEPLAYER*2]));I3^SET([IACTIVEPLAYER*2]);SFOGON^SET(CANVASOBSERVER^GETGRAPHICSAT([I1+20],[I2+20],FALSE,30,30,FALSE));ARRLASTFOG^CHANGEAT(I3,ARRLASTFOG^GET([I3+1]));ARRLASTFOG^CHANGEAT([I3+1],SFOGON);}
{SFX_BDASH_GAME_TELEPORTTUNEL^PLAY();*SPRESSER^SETPOSITION(I1,I2);*SACTIVEPLAYERMNAME^SETPOSITION(I1,I2);SFOGOFF^SET(ARRLASTFOG^GET([IACTIVEPLAYER*2]));I3^SET([IACTIVEPLAYER*2]);SFOGON^SET(CANVASOBSERVER^GETGRAPHICSAT([I1+20],[I2+20],FALSE,30,30,FALSE));ARRLASTFOG^CHANGEAT(I3,ARRLASTFOG^GET([I3+1]));ARRLASTFOG^CHANGEAT([I3+1],SFOGON);@BREAK();}
{SFX_BDASH_GAME_TELEPORTTUNEL^PLAY();*SPRESSER^SETPOSITION(I1,I2);*SACTIVEPLAYERMNAME^SETPOSITION(I1,I2);SFOGOFF^SET(ARRLASTFOG^GET([IACTIVEPLAYER*2]));I3^SET([IACTIVEPLAYER*2]);SFOGON^SET(CANVASOBSERVER^GETGRAPHICSAT([I1+20],[I2+20],FALSE,30,30,FALSE));ARRLASTFOG^CHANGEAT(I3,ARRLASTFOG^GET([I3+1]));ARRLASTFOG^CHANGEAT([I3+1],SFOGON);@BREAK();}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY1^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY1^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY1^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY1^CHANGEAT(I1,ARRLASTLOCKENEMY1^GET([I1+1]));ARRLASTLOCKENEMY1^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY6^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY6^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY6^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY6^CHANGEAT(I1,ARRLASTLOCKENEMY6^GET([I1+1]));ARRLASTLOCKENEMY6^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY2^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY2^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY2^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY2^CHANGEAT(I1,ARRLASTLOCKENEMY2^GET([I1+1]));ARRLASTLOCKENEMY2^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY3^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY3^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY3^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY3^CHANGEAT(I1,ARRLASTLOCKENEMY3^GET([I1+1]));ARRLASTLOCKENEMY3^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY4^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY4^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY4^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY4^CHANGEAT(I1,ARRLASTLOCKENEMY4^GET([I1+1]));ARRLASTLOCKENEMY4^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY5^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY5^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY5^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY5^CHANGEAT(I1,ARRLASTLOCKENEMY5^GET([I1+1]));ARRLASTLOCKENEMY5^CHANGEAT([I1+1],SBUTTONON);}
{SBUTTONOFF^SET(ARRLASTLOCKENEMY7^GET([ICLONENR*2]));SBUTTONOFF^SET(ARRLASTBUTTONENEMY7^GET(ICLONENR));SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT(IPOSX,IPOSY,FALSE,100,100,FALSE));ARRLASTBUTTONENEMY7^CHANGEAT(ICLONENR,SBUTTONON);}
{SBUTTONON^SET(CANVASOBSERVER^GETGRAPHICSAT([IPOSX+IDEX],[IPOSY+IDEY],FALSE,110,110,FALSE));I1^SET([ICLONENR*2]);ARRLASTLOCKENEMY7^CHANGEAT(I1,ARRLASTLOCKENEMY7^GET([I1+1]));ARRLASTLOCKENEMY7^CHANGEAT([I1+1],SBUTTONON);}
{VARBCHEATUSED^SET(TRUE);@IF("STREX|BACK","_","-170.0","BFITMP64","BFITMP65");SFXCHEATON^PLAY();VARSCHEATSEL^SET("");}
{STREX|DIR^SET(0);STREX|DPOSX^SET(400.0);STREX|DPOSY^SET(300.0);STREX|FORCEX^SET(0.0);STREX|FORCEY^SET(0.0);STREX|ACCELERATION^SET(0.3);STREX|DEFIANCE^SET(0.965);STREX|BOUNCE^SET(-0.7);STREX|BACK^SET(-100.0);STREX|BACKWARD^SET(0.0);STREXBALL|READY^SET(TRUE);STREXBALL|ACTIVE^SET(FALSE);VARICHREXBALLPOWER^SET(1);STREX|IPOSX^SET(STREX|DPOSX);STREX|IPOSY^SET(STREX|DPOSY);ANNREX^SETPOSITION(STREX|IPOSX,STREX|IPOSY);ANNREXMASK^SETPOSITION(STREX|IPOSX,STREX|IPOSY);ANNREX^PLAY("IDLE");}
{STKRET|DPOSX^SET(400.0);STKRET|DPOSY^SET(300.0);STKRET|FORCEX^SET(0.0);STKRET|FORCEY^SET(0.0);STKRET|DEFIANCE^SET(0.92);STKRET|BOUNCE^SET(-0.7);STKRET|IPOSX^SET(STKRET|DPOSX);STKRET|IPOSY^SET(STKRET|DPOSY);ANNKRET^SETPOSITION(STKRET|IPOSX,STKRET|IPOSY);ANNKRET^PLAY("IDLE");}
{VARIREXANGLE^ADD(STREX|DIR);VARDDELTAX^SINUS(VARIREXANGLE);VARDDELTAY^COSINUS(VARIREXANGLE);VARDDELTAY^MUL(-1.0);STREX|FORCEX^ADD([VARDDELTAX*STREX|ACCELERATION]);STREX|FORCEY^ADD([VARDDELTAY*STREX|ACCELERATION]);STREX|FORCEX^MUL(STREX|DEFIANCE);STREX|FORCEY^MUL(STREX|DEFIANCE);@IF("STREX|FORCEX<0.0&&[STREX|DPOSX+STREX|FORCEX]<60.0","BFITMP89","");@IF("STREX|FORCEX>0.0&&[STREX|DPOSX+STREX|FORCEX]>740.0","BFITMP90","");VARSREXCOLLSEL^SET(CANVASOBSERVER^GETGRAPHICSAT([STREX|DPOSX+STREX|FORCEX],STREX|DPOSY,FALSE,69,70,FALSE));STREX|DPOSX^ADD(STREX|FORCEX);STBKG|DPOSY^ADD(STREX|FORCEY);VARIMOVEX^SET([STREX|DPOSX-STREX|IPOSX]);VARIBKGMOVEY^SET([STBKG|IPOSY-STBKG|DPOSY]);CANVASOBSERVER^MOVEBKG(0,[0-VARIBKGMOVEY]);GELEM^MOVE(0,VARIBKGMOVEY);GMASKR^MOVE(0,VARIBKGMOVEY);GMASKK^MOVE(0,VARIBKGMOVEY);ANNREX^MOVE(VARIMOVEX,0);ANNREXMASK^MOVE(VARIMOVEX,0);STREX|IPOSX^SET(STREX|DPOSX);STBKG|IPOSY^SET(STBKG|DPOSY);STREX|TAILX^SET([[STREX|BACK+STREX|BACKWARD]*VARDDELTAX]);STREX|TAILY^SET([[STREX|BACK+STREX|BACKWARD]*VARDDELTAY]);STREX|TAILX^ADD(STREX|DPOSX);STREX|TAILY^ADD([STREX|DPOSY+STREX|FORCEY]);STKRET|FORCEX^ADD([[STREX|TAILX-STKRET|DPOSX]@40.0]);STKRET|FORCEY^ADD([[STREX|TAILY-STKRET|DPOSY]@40.0]);STKRET|FORCEX^MUL(STKRET|DEFIANCE);STKRET|FORCEY^MUL(STKRET|DEFIANCE);@IF("STKRET|FORCEX<0.0&&[STKRET|DPOSX+STKRET|FORCEX]<60.0","BFITMP91","");@IF("STKRET|FORCEX>0.0&&[STKRET|DPOSX+STKRET|FORCEX]>740.0","BFITMP92","");VARSKRETCOLLSEL^SET(CANVASOBSERVER^GETGRAPHICSAT([STKRET|DPOSX+STKRET|FORCEX],[STKRET|DPOSY+STKRET|FORCEY],FALSE,65,65,FALSE));STKRET|DPOSX^ADD(STKRET|FORCEX);STKRET|DPOSY^ADD([STKRET|FORCEY-STREX|FORCEY]);VARIMOVEX^SET([STKRET|DPOSX-STKRET|IPOSX]);VARIMOVEY^SET([STKRET|DPOSY-STKRET|IPOSY]);ANNKRET^MOVE(VARIMOVEX,VARIMOVEY);STKRET|IPOSX^SET(STKRET|DPOSX);STKRET|IPOSY^SET(STKRET|DPOSY);BEHKRETANGLE^RUN();BEHCHAINMOVE^RUN();VARIEKRANNO^SET([[STBKG|IPOSY-300]@600]);VARIEKRANACTIVATE^SET([STBKG|IPOSY@600]);@IF("STREXBALL|ACTIVE","_","TRUE","BFITMP93","");BEHENEMIES^RUN();BEHWIEZE^RUN();@IF("STVBALL|ACTIVE","_","TRUE","BFITMP94","");@IF("STWBALL|ACTIVE","_","TRUE","BFITMP95","");@IF("STYBALL|ACTIVE","_","TRUE","BFITMP96","");@IF("STZBALL|ACTIVE","_","TRUE","BFITMP97","");VARIENDTYPESEL^SET(VARIENDTYPE);}
{VARDTMP1^SET([STREX|DPOSX-STKRET|DPOSX]);VARDTMP2^SET([STREX|DPOSY-STKRET|DPOSY]);VARDODLEGLOSC^SET([[VARDTMP1*VARDTMP1]+[VARDTMP2*VARDTMP2]]);VARDODLEGLOSC^SQRT(VARDODLEGLOSC);VARDTMP1^SET([VARDTMP1@VARDTMP2]);VARDTMP1^ARCTAN(VARDTMP1);@IF("VARDTMP2",">","0","BFITMP121","BFITMP122");VARITMP0^DIV(10);VARITMP0^MUL(10);@IF("VARITMP0",">","359","BFITMP123","");VARIKRETANGLE^SET(VARITMP0);@IF("VARDODLEGLOSC",">",[100.0-STREX|BACK-STREX|BACKWARD],"BFITMP124","");}
{STWBALL|VX^SET([STREX|DPOSX-STWBALL|PX]);STWBALL|VY^SET([STREX|DPOSY-STWBALL|PY]);VARDTMP0^SET([[STWBALL|VX*STWBALL|VX]+[STWBALL|VY*STWBALL|VY]]);VARDTMP0^SQRT(VARDTMP0);VARDTMP0^DIV(5.5);STWBALL|VX^DIV(VARDTMP0);STWBALL|VY^DIV(VARDTMP0);STWBALL|PX^ADD(STWBALL|VX);STWBALL|PY^ADD([STWBALL|VY+VARIBKGMOVEY]);ANNWBALL^MOVE([STWBALL|PX-STWBALL|IPX],[STWBALL|PY-STWBALL|IPY]);STWBALL|IPX^SET(STWBALL|PX);STWBALL|IPY^SET(STWBALL|PY);STWBALL|DURATION^DEC();@IF("STWBALL|DURATION","_","0","BFITMP158","BFITMP159");}
{STREX|BACK^SET(-100.0);}
{STREX|BACK^SET(-170.0);}
{STREXBALL|PX^SET(STREX|IPOSX);STREXBALL|PY^SET(STREX|IPOSY);STREXBALL|IPX^SET(STREXBALL|PX);STREXBALL|IPY^SET(STREXBALL|PY);STREXBALL|VX^SET([VARDDELTAX*40.0]);STREXBALL|VY^SET([VARDDELTAY*40.0]);STREXBALL|DURATION^SET(12);STREXBALL|ACTIVE^SET(TRUE);ANNREXBALL^SETPOSITION(STREXBALL|PX,STREXBALL|PY);ANNREXBALL^PLAY("LECI");SFX_CZARO_GAME_STRZAL_BOHATERA^PLAY();}
{STVBALL|OWNER^SET(VARSTMPVOWNER);STVBALL|IPX^SET(STVBALL|PX);STVBALL|IPY^SET(STVBALL|PY);STVBALL|VX^SET([STREX|DPOSX-STVBALL|PX]);STVBALL|VY^SET([STREX|DPOSY-STVBALL|PY]);VARDTMP0^SET([[STVBALL|VX*STVBALL|VX]+[STVBALL|VY*STVBALL|VY]]);VARDTMP0^SQRT(VARDTMP0);VARDTMP0^DIV(15);STVBALL|VX^DIV(VARDTMP0);STVBALL|VY^DIV(VARDTMP0);STVBALL|DURATION^SET(30);STVBALL|ACTIVE^SET(TRUE);STVBALL|READY^SET(FALSE);ANNVBALL^SETPOSITION(STVBALL|PX,STVBALL|PY);ANNVBALL^PLAY("LECI");ANNWILQ^SETPOSITION(STVBALL|PX,STVBALL|PY);ANNWILQ^PLAY("IDLE");SFX_CZARO_GAME_STRZAL_WROGAPTAK^PLAY();}
{STYBALL|OWNER^SET(VARSTMPYOWNER);STYBALL|IPX^SET(STYBALL|PX);STYBALL|IPY^SET(STYBALL|PY);STYBALL|VX^SET([STREX|DPOSX-STYBALL|PX]);STYBALL|VY^SET([STREX|DPOSY-STYBALL|PY]);VARDTMP0^SET([50-RANDOM^GET(100)]);VARDTMP1^SET([50-RANDOM^GET(100)]);STYBALL|VX^ADD(VARDTMP0);STYBALL|VY^ADD(VARDTMP1);VARDTMP0^SET([[STYBALL|VX*STYBALL|VX]+[STYBALL|VY*STYBALL|VY]]);VARDTMP0^SQRT(VARDTMP0);VARDTMP0^DIV(15);STYBALL|VX^DIV(VARDTMP0);STYBALL|VY^DIV(VARDTMP0);STYBALL|DURATION^SET(30);STYBALL|ACTIVE^SET(TRUE);STYBALL|READY^SET(FALSE);ANNYBALL^SETPOSITION(STYBALL|PX,STYBALL|PY);ANNYBALL^PLAY("LECI");SFX_CZARO_GAME_STRZAL_WROGAPTAK^PLAY();}
{STZBALL|OWNER^SET(VARSTMPZOWNER);STZBALL|IPX^SET(STZBALL|PX);STZBALL|IPY^SET(STZBALL|PY);STZBALL|VX^SET([STREX|DPOSX-STZBALL|PX]);STZBALL|VY^SET([STREX|DPOSY-STZBALL|PY]);VARDTMP0^SET([50-RANDOM^GET(100)]);VARDTMP1^SET([50-RANDOM^GET(100)]);STZBALL|VX^ADD(VARDTMP0);STZBALL|VY^ADD(VARDTMP1);VARDTMP0^SET([[STZBALL|VX*STZBALL|VX]+[STZBALL|VY*STZBALL|VY]]);VARDTMP0^SQRT(VARDTMP0);VARDTMP0^DIV(15);STZBALL|VX^DIV(VARDTMP0);STZBALL|VY^DIV(VARDTMP0);STZBALL|DURATION^SET(30);STZBALL|ACTIVE^SET(TRUE);STZBALL|READY^SET(FALSE);ANNZBALL^SETPOSITION(STZBALL|PX,STZBALL|PY);ANNZBALL^PLAY("LECI");SFX_CZARO_GAME_STRZAL_WROGAPTAK^PLAY();}
{STREX|FORCEX^SUB([[STREX|DPOSX-STKRET|DPOSX]@ VARDODLEGLOSC]);STREX|FORCEY^SUB([[STREX|DPOSY-STKRET|DPOSY]@ VARDODLEGLOSC]);}
{VARIDELTAX^SET([VARICENTERX-STPLAYER|POSX-STUKLAD|POSX]);VARIDELTAY^SET([VARICENTERY-STPLAYER|POSY-STUKLAD|POSY]);VARIDELTAX^DIV(10);@IF([STUKLAD|POSX+VARIDELTAX],">","0","BFITMP104","");@IF([STUKLAD|POSX+VARIDELTAX],"<",[800-STUKLAD|SIZEX],"BFITMP105","");VARIDELTAY^DIV(10);@IF([STUKLAD|POSY+VARIDELTAY],">","0","BFITMP106","");@IF([STUKLAD|POSY+VARIDELTAY],"<",[600-STUKLAD|SIZEY],"BFITMP107","");STUKLAD|POSX^ADD(VARIDELTAX);STUKLAD|POSY^ADD(VARIDELTAY);VARDTMP0^SET(STUKLAD|POSX);VARDTMP1^SET(STUKLAD|POSY);STBKG|POSX^SET([VARDTMP0*STBKG|FACTORX]);STBKG|POSY^SET([VARDTMP1*STBKG|FACTORY]);GBKGB^MOVE([STBKG|POSX-STBKG|PPOSX],[STBKG|POSY-STBKG|PPOSY]);STBKG|PPOSX^SET(STBKG|POSX);STBKG|PPOSY^SET(STBKG|POSY);GUKLAD^MOVE(VARIDELTAX,VARIDELTAY);GMASKI^MOVE(VARIDELTAX,VARIDELTAY);GWINDY^MOVE(VARIDELTAX,VARIDELTAY);GBONUSY^MOVE(VARIDELTAX,VARIDELTAY);@IF("VARBDYNA","_","TRUE","BFITMP108","");@IF("STPLAYER|MOVEY",">",[VARDCHMAXFORCEY-4.0],"BFITMP110","");STPLAYER|FORCEX^ADD([VARIPLAYERDIR*3.0]);STPLAYER|FORCEX^MUL(0.75);STPLAYER|MOVEX^SET(STPLAYER|FORCEX);STPLAYER|FORCEY^ADD(STPLAYER|GRAVITY);@IF("STPLAYER|FORCEY",">","VARDCHMAXFORCEY","BFITMP111","");STPLAYER|MOVEY^SET(STPLAYER|FORCEY);VARITMPX^SET([STPLAYER|POSX+STPLAYER|MOVEX+STUKLAD|POSX]);VARITMPY^SET([STPLAYER|POSY+STPLAYER|MOVEY+STUKLAD|POSY]);@IF("STPLAYER|MOVEY",">","0","BFITMP112","");GWINDY^NEXTFRAME();@IF("STPLAYER|MOVEY",">","0","BFITMP113","");VARSWALLOBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITMPX,VARITMPY,FALSE,4,4,FALSE));VARSWALLSEL^SET(VARSWALLOBJ^GET(0,6));VARSWALLOBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITMPX,VARITMPY,FALSE,3,3,FALSE));VARSWALLSEL^SET(VARSWALLOBJ^GET(0,6));STPLAYER|POSX^ADD(STPLAYER|MOVEX);STPLAYER|POSY^ADD(STPLAYER|MOVEY);ANNPLAYER^MOVE([VARIDELTAX+STPLAYER|MOVEX],[VARIDELTAY+STPLAYER|MOVEY]);VARSELEMOBJ^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITMPX,[VARITMPY-20],TRUE,15,15,TRUE));@IF("VARSELEMOBJ","_","NULL","BFITMP116","");VARSELEMSEL^SET(VARSELEMOBJ^GET(0,6));BEHROJE^RUN();BEHBAZUKOWCY^RUN();BEHKRABY^RUN();}
{VARDTMP0^SET([STPLAYER|FORCEX-10.0]);}
{VARDTMP0^SET([STPLAYER|FORCEX+10.0]);}
{@IF("VARSPLAYERDIR","_",""L"","BFITMP91","BFITMP92");VARDTMP2^SET(STPLAYER|FORCEX);VARDTMP2^SET(VARDTMP2^ABS(VARDTMP2));VARDTMP2^CLAMP(2.0,10.0);VARDTMP1^SET([STPLAYER|FORCEY-VARDTMP2]);VARDTMP1^CLAMP(-15.0,15.0);STDYNA|FORCEX^SET(VARDTMP0);STDYNA|FORCEY^SET(VARDTMP1);STDYNA|POSX^SET([STPLAYER|POSX+STUKLAD|POSX]);STDYNA|POSY^SET([STPLAYER|POSY+STUKLAD|POSY]);STDYNA|POSY^SUB(50);STDYNA|DURATION^SET(70);ANNDYNA^SETPOSITION(STDYNA|POSX,STDYNA|POSY);ANNDYNA^PLAY("IDLE");GUKLAD^ADD("ANNDYNA");VARIDYNACOUNT^DEC();VARBDYNA^SET(TRUE);}
{STUKLAD|POSX^ADD(VARIDELTAX);STUKLAD|POSY^ADD(VARIDELTAY);VARDTMP0^SET(STUKLAD|POSX);VARDTMP1^SET(STUKLAD|POSY);STBKG|POSX^SET([VARDTMP0*STBKG|FACTORX]);STBKG|POSY^SET([VARDTMP1*STBKG|FACTORY]);GBKGB^MOVE([STBKG|POSX-STBKG|PPOSX],[STBKG|POSY-STBKG|PPOSY]);STBKG|PPOSX^SET(STBKG|POSX);STBKG|PPOSY^SET(STBKG|POSY);GUKLAD^MOVE(VARIDELTAX,VARIDELTAY);GMASKI^MOVE(VARIDELTAX,VARIDELTAY);GWINDY^MOVE(VARIDELTAX,VARIDELTAY);GBONUSY^MOVE(VARIDELTAX,VARIDELTAY);ANNPLAYER^MOVE(VARIDELTAX,VARIDELTAY);}
{VARDTMP0^SET(VARITMP0);VARDTMP1^SET(VARITMP1);VARDTMP0^DIV(VARDTMP2);VARDTMP1^DIV(VARDTMP2);VARITMP0^SET([VARDTMP0*3]);VARITMP1^SET([VARDTMP1*3]);*VARSTMP0^MOVE(VARITMP0,VARITMP1);@IF(SFX_PIRAT_GAME_OSY^ISPLAYING(),"_","FALSE","BFITMP117","");}
{*GSSCENENAME^STARTMUSIC([$1+".WAV"]);GIMUSICVOLUME^SET(GIMUSICVOLUME);}
{@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]>290&&ANNBOSSRUCH^GETPOSITIONY()<100","BFITMP157","");@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]<290&&ANNBOSSRUCH^GETPOSITIONY()>0","BFITMP158","");}
{@IF("[EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()]>0&&ANNBOSSRUCH^GETPOSITIONX()<150","BFITMP159","");@IF([EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()],"<","0","BFITMP160","");}
{SNDSTRZALDUZEUFO^PLAY();ANNJAJOSTART_1^SETPRIORITY(119);ANNJAJOSTART_1^SETPOSITION(ANNBOSS1_3^GETPOSITIONX(),ANNBOSS1_3^GETPOSITIONY());;ANNJAJOSTART_1^PLAY("JAJOF1ST");}
{SNDSTRZALDUZEUFO^PLAY();ANNJAJOSTART_2^SETPRIORITY(119);ANNJAJOSTART_2^SETPOSITION(ANNBOSS1_3^GETPOSITIONX(),ANNBOSS1_3^GETPOSITIONY());;ANNJAJOSTART_2^PLAY("JAJOF2ST");}
{SNDSTRZALDUZEUFO^PLAY();ANNJAJOSTART_3^SETPRIORITY(119);ANNJAJOSTART_3^SETPOSITION(ANNBOSS1_3^GETPOSITIONX(),ANNBOSS1_3^GETPOSITIONY());;ANNJAJOSTART_3^PLAY("JAJOF3ST");}
{SNDSTRZALDUZEUFO^PLAY();ANNJAJOSTART_4^SETPRIORITY(119);ANNJAJOSTART_4^SETPOSITION(ANNBOSS1_3^GETPOSITIONX(),ANNBOSS1_3^GETPOSITIONY());;ANNJAJOSTART_4^PLAY("JAJOF4ST");}
{@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]>270&&ANNBOSSRUCH^GETPOSITIONY()]<130","BFITMP189","");@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]<270&&ANNBOSSRUCH^GETPOSITIONY()>-70","BFITMP190","");}
{@IF("[EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()]>150&&ANNBOSSRUCH^GETPOSITIONX()<180","BFITMP191","");@IF([EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()],"<","150","BFITMP192","");}
{@IF([EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()],"<","300","BFITMP204","");@IF([EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()],">","380","BFITMP205","");@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]>'300&&[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]<'380","BFITMP206","");}
{@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]>316&&ANNBOSSRUCH^GETPOSITIONY()]<50","BFITMP220","");@IF("[EXTWORLD^GETPOSITIONY(1)-ANNBOSSRUCH^GETPOSITIONY()]<316&&ANNBOSSRUCH^GETPOSITIONY()>-70","BFITMP221","");}
{@IF("[EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()]>150&&ANNBOSSRUCH^GETPOSITIONX()<95","BFITMP222","");@IF("[EXTWORLD^GETPOSITIONX(1)-ANNBOSSRUCH^GETPOSITIONX()]<150&&[ANNBOSSRUCH^GETPOSITIONX()-2]<180","BFITMP223","");}
{DTANGENS^SET([DKIERUNEKX @ DKIERUNEKY]);DALFA^SET(DTANGENS^ARCTANEX(DKIERUNEKY,DKIERUNEKX));DALFA^MUL(0.178);}
{ANNPRZESZKODY^HIDE();ANNPRZESZKODY^CLONE(700);IILOSCWIERSZY^SET(DBDANEGRY^GETROWSNO());@LOOP("{APOZ0^ADD("1");APOZ1^ADD("1");APOZ2^ADD("0");APOZ3^ADD("0");APOZ4^ADD("0");APOZ5^ADD("0");APOZ6^ADD("0");APOZ7^ADD("0");APOZ8^ADD("0");APOZ9^ADD("0");APOZ10^ADD("0");APOZ11^ADD("1");}",0,IILOSCWIERSZY,1);@LOOP("{DBDANEGRY^SELECT(_I_);STCBAZA^SET("DBDANEGRY_CURSOR");ITEMP^SET(STCBAZA|SRODEK);IRODZAJPOTW^SET([ITEMP@10]);@IF("ITEMP","!_","0","BFITMP462","");STEMP^SET(["ANNPRZESZKODY_"+[_I_+1]]);*STEMP^SETFRAME(["DOL_"+STCBAZA|DOL],RANDOM^GET(*STEMP^GETNOFINEVENT(["DOL_"+STCBAZA|DOL])));*STEMP^SHOW();*STEMP^SETPOSITION([_I_*150],550);GRPRZESZKODY^ADD(STEMP);IPRZECHI^SET(_I_);ITEMP10^SET(STCBAZA|DOL);@LOOP("{ITEMP9^SET([10-_I_]);*["APOZ"+ITEMP9]^ADDAT(IPRZECHI,1);}",0,[ITEMP10@50-1],1);STEMP^SET(["ANNPRZESZKODY_"+[_I_+250]]);*STEMP^SETFRAME(["GORA_"+STCBAZA|GORA],RANDOM^GET(*STEMP^GETNOFINEVENT(["GORA_"+STCBAZA|GORA])));*STEMP^SHOW();*STEMP^SETPOSITION([_I_*150],50);GRPRZESZKODY^ADD(STEMP);ITEMP10^SET(STCBAZA|GORA);@LOOP("{ITEMP9^SET([2+_I_]);*["APOZ"+ITEMP9]^ADDAT(IPRZECHI,1);}",0,[ITEMP10@50-1],1);BBYLAWYSPA^SET(FALSE);@IF("STCBAZA|WYSPA","_","1","BFITMP463","");@IF("STCBAZA|WYSPA","_","2","BFITMP464","");_I_^SET(IPRZECHI);}",0,IILOSCWIERSZY,1);}
{ITEMP5^SET(*SSPRAWDZANAK^GETCENTERX());DKIERUNEKX^SET([EXTWORLD^GETPOSITIONX(IRAKIETAOBJ)-ITEMP5]);ITEMP5^SET(*SSPRAWDZANAK^GETCENTERY());DKIERUNEKY^SET([EXTWORLD^GETPOSITIONY(IRAKIETAOBJ)-ITEMP5]);@IF("DKIERUNEKX>0&&DKIERUNEKY>0","BFITMP87","");@IF("DKIERUNEKX<0&&DKIERUNEKY>0","BFITMP88","");@IF("DKIERUNEKX>0&&DKIERUNEKY<0","BFITMP89","");@IF("DKIERUNEKX<0&&DKIERUNEKY<0","BFITMP90","");@IF("DKIERUNEKX'0&&DKIERUNEKY'0","BFITMP91","");@IF("DKIERUNEKX'0&&DKIERUNEKY<0","BFITMP92","");@IF("DKIERUNEKX'0&&DKIERUNEKY>0","BFITMP93","");@IF("DKIERUNEKX<0&&DKIERUNEKY'0","BFITMP94","");@IF("DKIERUNEKX>0&&DKIERUNEKY'0","BFITMP95","");DTANGENS^SET([DKIERUNEKX @ DKIERUNEKY]);DALFA^SET(DTANGENS^ARCTANEX(DKIERUNEKY,DKIERUNEKX));FLTROT^UNLINK("ANNRAKIETA");DALFA^ADD(180);FLTROT^SETPROPERTY("ANGLE",DALFA);FLTROT^LINK("ANNRAKIETA");STRAFIONY^SET(CANVASOBSERVER^GETGRAPHICSAT(EXTWORLD^GETPOSITIONX(IRAKIETAOBJ),EXTWORLD^GETPOSITIONY(IRAKIETAOBJ),TRUE,120,120,TRUE));@IF("STRAFIONY","!_",""NULL"","BFITMP104","");}
{DTANGENS^SET([DKIERUNEKX @ DKIERUNEKY]);DALFA^SET(DTANGENS^ARCTANEX(DKIERUNEKY,DKIERUNEKX));DALFA^MUL(0.178);}
{BNALADOWANA^SET(FALSE);ANNNALADOWANIE^PLAY("NALADOWANIE");ANNNALADOWANIE^SETFRAME("NALADOWANIE",[[IRAKIETA-1]*8]);ANNDODATKI_7^PLAY("RAKIETA");SNDREXSTRZALRAKIETA^PLAY();@IF("BJESTBOSS","_","FALSE","BFITMP255","BFITMP256");}
{IPOZY^SET(EXTWORLD^GETPOSITIONY(1));IPOZXRZE^SET(EXTWORLD^GETPOSITIONX(1));IPOZX^SET([IPOZXRZE+IPOSTEP]);IRZUTX^SET([IPOZX+55]);IRZUTX^SET([IRZUTX @ 150]);IRZUTY^SET([IPOZY @ 50]);IPOROWNANIE^SET(*["APOZ"+IRZUTY]^GET(IRZUTX));@IF("IPOROWNANIE","_","1","BFITMP310","BFITMP311");IRZUTY^SET([IPOZY-16]);IRZUTX^SET([IPOZX @ 150]);IRZUTY^SET([IRZUTY @ 50]);IPOROWNANIE^SET(*["APOZ"+IRZUTY]^GET(IRZUTX));@IF("IPOROWNANIE","_","1","BFITMP335","BFITMP336");IRZUTX^SET([IPOZX-23]);IRZUTX^SET([IRZUTX @ 150]);IRZUTY^SET([IPOZY @ 50]);IPOROWNANIE^SET(*["APOZ"+IRZUTY]^GET(IRZUTX));@IF("IPOROWNANIE","_","1","BFITMP360","BFITMP361");IRZUTY^SET([IPOZY+16]);IRZUTX^SET([IPOZX @ 150]);IRZUTY^SET([IRZUTY @ 50]);IPOROWNANIE^SET(*["APOZ"+IRZUTY]^GET(IRZUTX));@IF("IPOROWNANIE","_","1","BFITMP385","BFITMP386");}
{AWYKPOZYCJE^REMOVEALL();IPRZECHI^SET(_I_);BEHWCZYTAJKLONY^RUN();_I_^SET(IPRZECHI);AWYKPOZYCJE^REMOVEALL();}
{AWYKPOZYCJE^REMOVEALL();IPRZECHI^SET(_I_);@LOOP("{AWYKPOZYCJE^ADD(_I_);}",IPROGDOL,[IPROGGORA-IPROGDOL],1);@IF("BBYLAWYSPA'TRUE||STCBAZA|WYSPA!'0","BFITMP454","");IINDEKS^SET(RANDOM^GET(0,AWYKPOZYCJE^GETSIZE()));IPOZKLON^SET(AWYKPOZYCJE^GET(IINDEKS));_I_^SET(IPRZECHI);*["ANNKALAREPA_"+INRKLONU]^SETPOSITION([_I_*150],[IPOZKLON*50]);GRPOTWORKI^ADD(["ANNKALAREPA_"+INRKLONU]);*["APOZ"+IPOZKLON]^INSERTAT(_I_,["ANNKALAREPA_"+INRKLONU]);*["ANNKALAREPA_"+INRKLONU]^PLAY(IRODZAJPOTW);*["ANNKALAREPA_"+INRKLONU]^SETFRAME(IRODZAJPOTW,RANDOM^GET(*["ANNKALAREPA_"+INRKLONU]^GETNOFINEVENT(IRODZAJPOTW)));AWYKPOZYCJE^REMOVEALL();INRKLONU^INC();}
{{REKSIO_BUTTON^ENABLE();PLAZA^ENABLE();}
{RATUNEK^GOTO("MAPAPUSTA");
{GESIZLAPANE^SET(1);GES1_BUTTON^DISABLE();GES2_BUTTON^DISABLE();GES3_BUTTON^DISABLE();GES4_BUTTON^DISABLE();GES5_BUTTON^DISABLE();GES6_BUTTON^DISABLE();ROBSEQ^PLAY("KLUCZSUCCESS");{REKSIO^PLAY("ZADOWOLO");}
{ANIMOPOLE$1^SETASBUTTON(TRUE,FALSE);}
{ANIMOPOLE$1^SETASBUTTON(FALSE,FALSE);}
{ANIMOPOLE$1^HIDE();}
{ANIMOREKSIOGRA^SETPOSITION(VARDESTX,VARDESTY);BEHENABLEBUTTONS^RUN();BEHRUCHKROKODYLA7-5^RUNC();BEHENDGAME^RUNC();}
{BUTTONZOLW7-1^ENABLE();BUTTONKAMIEN7-2^ENABLE();BUTTONKAMIEN7-3^ENABLE();BUTTONZOLW7-4^ENABLE();BUTTONKROKODYL7-5^ENABLE();BUTTONZOLW7-6^ENABLE();BUTTONZOLW7-7^ENABLE();BUTTONKAMIEN7-END^ENABLE();BUTTONMAPA^ENABLE();BUTTONEXIT^ENABLE();}
{BUTTONZOLW7-1^DISABLEBUTVISIBLE();BUTTONKAMIEN7-2^DISABLEBUTVISIBLE();BUTTONKAMIEN7-3^DISABLEBUTVISIBLE();BUTTONZOLW7-4^DISABLEBUTVISIBLE();BUTTONKROKODYL7-5^DISABLEBUTVISIBLE();BUTTONZOLW7-6^DISABLEBUTVISIBLE();BUTTONZOLW7-7^DISABLEBUTVISIBLE();BUTTONKAMIEN7-END^DISABLEBUTVISIBLE();BUTTONMAPA^DISABLEBUTVISIBLE();BUTTONEXIT^DISABLEBUTVISIBLE();}
{BEHDISABLEBUTTONS^RUN();ANIMOREKSIOGRA^SHOW();ANIMOREKSIOSTART^HIDE();VARSTANREKSIA^SET(1;VARDX^SET(-10);VARDY^SET(-10);VARDESTX^SET(287);VARDESTY^SET(281);ANIMOREKSIOGRA^PLAY("NW");RZEKATIMER1^SET(2000);}
{BEHZANURZENIEZOLWIA7-1^RUNC();BEHZANURZENIEZOLWIA7-4^RUNC();BEHZANURZENIEZOLWIA7-6^RUNC();BEHZANURZENIEZOLWIA7-7^RUNC();}
{VARDESTX^SET(185);VARDESTY^SET(249);ANIMOZOLW7-1^PLAY("ZATAPIA");BEHREKSIOSPADA^RUN();}
{VARDESTX^SET(363);VARDESTY^SET(249);ANIMOZOLW7-4^PLAY("ZATAPIA");BEHREKSIOSPADA^RUN();}
{VARDESTX^SET(452);VARDESTY^SET(334);ANIMOZOLW7-6^PLAY("ZATAPIA");BEHREKSIOSPADA^RUN();}
{VARDESTX^SET(541);VARDESTY^SET(249);ANIMOZOLW7-7^PLAY("ZATAPIA");BEHREKSIOSPADA^RUN();}
{VARMELODIA^SET(1);;}
{REKSIO15^PLAY("OGLADAMAPE);}
{INT_TMP^SET(ARRAY1^GET(INT_AKTUALNA_ZAGADKA));!SCENETEXT1^SETTEXT(INT_TMP);!SCENETEXT2^SETTEXT(INT_AKTUALNA_ZAGADKA);COND_CZY_ZLA^CHECK(TRUE);;;}
{INT_TMP2^SET(ARRAY2^GET(INT_AKTUALNA_ZAGADKA));!SCENETEXT1^SETTEXT(INT_AKTUALNA_ZAGADKA);!SCENETEXT2^SETTEXT(INT_TMP2);;COND_CZY_DOBRA^CHECK(TRUE);}
{INT_POSX^SET([$1^GETPOSITIONX()-50]);INT_POSY^SET([$1^GETPOSITIONY()-50]);BKGCIEMNO^MERGEALPHA(INT_POSX,INT_POSY,"POCHODNIA");}
{COND_CZY_Z_18^CHECK(TRUE);;}
{STRZAL^SETPRIORITY(25);KAMIENROZWALANY^SET(CANVAS_OBSERVER^GETGRAPHICSAT(STRZAL^GETPOSITIONX(),STRZAL^GETPOSITIONY()));MOUSE^SHOW();;KONDNAKLADKI^CHECK(TRUE);}
{WGLAB^SET(SPADANIEKAMIENI^GET(N));!!!24LASER^RUN("KAMIENBADANYCZYPOW","SET",KAMIENBADANYSKLAD);!!!N^INC();SETTEXT^RUN();ZRZUCAKAMIEN^RUNC();}
{{THIS^PLAY();};}
{THIS^SETPRIORITY(100)
{STATEK1^MOVE(-1,1);STATEK2^MOVE(-1,1);PIRACIANIMO^MOVE(-1,1);UZURPATOR^MOVE(-1,1);;;;;;}
{STATEK1^MOVE(-1,1);STATEK2^MOVE(-1,1);PIRACI^MOVE(-1,1);UZURPATOR^MOVE(-1,1);;;;;;}
{STATEK1^MOVE(-1,1);STATEK2^MOVE(-1,1);PIRACI^MOVE(-1,1);UZURPATOR^MOVE(-1,1);;;;;;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET( ["ANIMO" + $1] );UFO^RUN( ["ANIMO" + $1], "SETASBUTTON", FALSE, FALSE );UFO^RUN( ["ANIMO" + $1], "HIDE" );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( "PATRZY_NA_LAMPE" );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(  ["ANIMO"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", TRUE, TRUE );UFO^RUN( VARSTRINGTEMP, "SHOW" );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND( $1) );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( "PATRZY_NA_LAMPE" );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET( ["ANIMO" + $1] );UFO^RUN( ["ANIMO" + $1], "SETASBUTTON", FALSE, FALSE );UFO^RUN( ["ANIMO" + $1], "HIDE" );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(  ["ANIMO"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", TRUE, TRUE );UFO^RUN( VARSTRINGTEMP, "SHOW" );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "STOP", FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND( $1) );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET( ["ANIMO" + $1] );UFO^RUN( ["ANIMO" + $1], "SETASBUTTON", FALSE, FALSE );UFO^RUN( ["ANIMO" + $1], "HIDE" );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(  ["ANIMO"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", TRUE, TRUE );UFO^RUN( VARSTRINGTEMP, "SHOW" );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND( $1) );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{$1^SETPRIORITY(201);$1^ADDBEHAVIOUR( "ONFRAMECHANGED$H0", "BEHUFOFIRE");$1^ADDBEHAVIOUR( "ONFRAMECHANGED$H1", "BEHUFOFIRE");$1^ADDBEHAVIOUR( "ONFINISHED$TRAFIONY", "BEHHIDE" );$1^ADDBEHAVIOUR( "ONFINISHED$H0", "BEHUFOGOTOKURNIKP" );$1^ADDBEHAVIOUR( "ONFINISHED$H1", "BEHUFOGOTOKURNIKL" );$1^ADDBEHAVIOUR( "ONFINISHED$P0", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$P1", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$P2", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$L0", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$L1", "BEHUFOATAKKURNIK" );$1^ADDBEHAVIOUR( "ONFINISHED$L2", "BEHUFOATAKKURNIK" );}
{$1^SETPRIORITY(250);$1^ADDBEHAVIOUR( "ONFINISHED$PEKA", "BEHHIDE");$1^ADDBEHAVIOUR( "ONFRAMECHANGED$PLAY", "BEHUFOFIREMOVE" );}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET( ["ANIMO" + $1] );UFO^RUN( ["ANIMO" + $1], "SETASBUTTON", FALSE, FALSE );UFO^RUN( ["ANIMO" + $1], "HIDE" );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( RANDOM^GET(0,2) );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP1^SET( $1 );CONDPLAYERROR^CHECK(TRUE);CONDREMOVEMENUITEM^BREAK( TRUE );VARSTRINGTEMP^SET(  ["ANIMO"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", TRUE, TRUE );UFO^RUN( VARSTRINGTEMP, "SHOW" );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND( $1) );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ANIMOREKSIO^PLAY( "SPRAWDZA" );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{SEQKOGUT^STOP(FALSE);VARINTTEMP^SET( 0 );VARSTRINGTEMP^SET( $1 );BEHCOUNTITEMS^RUNLOOPED( 0, ARRAYTEMP^GETSIZE() );CONDADDITEMTOSHIP^BREAK( TRUE );ARRAYWARSZTATPRZEDMIOTY^ADD( $1 );VARSTRINGTEMP^SET(  ["ANIMOMENU_"+$1] );UFO^RUN( VARSTRINGTEMP, "SETASBUTTON", FALSE, FALSE );UFO^RUN( VARSTRINGTEMP, "STOP", FALSE );UFO^RUN( VARSTRINGTEMP, "HIDE" );ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT( ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1) );BEHSHOWSHIP^RUNLOOPED( 0, ARRAYWARSZTATPRZEDMIOTY^GETSIZE() );BEHSHOWMENU^RUNLOOPED( 0, ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE() );ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();ANIMOREKSIO^PLAY("ZADOWOLONY");VARSTRINGTEMP^SET( $1 );CONDPLAYSUCCESS^CHECK(TRUE);}
{;}
{SEQKOT^PLAY("1NAKLIK");
{ARRAYFRAMEROBAKI^CHANGEAT( VARNR, 59;}
{VARINTTEMP^SET(  UFO^RUN( ["ANIMOROBAL" + $1], "ISPLAYING") );VARINTLOOP^ADD( VARINTTEMP );}
{VARNR^SET( UFO^RUN( ["ANIMOLEBIODKA" + $1], "GETEVENTNAME" ) );VARNR^INC();UFO^RUN( ["ANIMOLEBIODKA" + $1], "PLAY",  VARNR );VARINTTEMP^SET( $1 );CONDONFINISHED_JE^CHECK( TRUE );VARINTTEMP^SET( 0 );BEHGAMEOVER^RUNLOOPED( 0, 7 );CONDGAMEOVER^CHECK( TRUE );}
{VARINTTEMP^ADD( UFO^RUN( ["ANIMOLEBIODKA" + $1 ], "GETEVENTNAME" );}
{;}
{;}
{;}
{$1^ADDBEHAVIOUR("ONFINISHED$CCW", "BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFINISHED$CW", "BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CW", "BEHCOLLISION");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CCW", "BEHCOLLISION");$1^SETPRIORITY(5);}
{VARITEMP1^SET([ANNREKSIO^GETPOSITIONX()+$1]);VARITEMP2^SET([ANNREKSIO^GETPOSITIONY()+$2]);VARITEMP3^SET($1);VARITEMP3^MUL(-1);VARITEMP4^SET($2);VARITEMP4^MUL(-1);CONDALPHA^BREAK(TRUE);ANNREKSIO^MOVE($1, $2);}
{VARSTEMP1^SET(THIS^GETNAME());VARITEMP1^SET(UFO^RUN(VARSTEMP1, "GETPOSITIONX");VARITEMP2^SET(UFO^RUN(VARSTEMP1, "GETPOSITIONY");VARSTEMP1^SET(THIS^GETNAME());CONDDETECT^CHECK( TRUE );}
{VARPLAYER^SET($1);UFO^RUN(ARRCARS^GET(VARPLAYER), "SETPRIORITY", ARRPRIORITY^GET(VARPLAYER));UFO^RUN(ARRCARS^GET(VARPLAYER), "SETPOSITION", ARRSTARTPOSX^GET(VARPLAYER),ARRSTARTPOSY^GET(VARPLAYER));ARRPOSX^CHANGEAT(VARPLAYER, ARRSTARTPOSX^GET(VARPLAYER));ARRDIRX^CHANGEAT(VARPLAYER, 1.0);ARRDIRY^CHANGEAT(VARPLAYER, 0.0);ARRPOSY^CHANGEAT(VARPLAYER, ARRSTARTPOSY^GET(VARPLAYER));UFO^RUN(ARRCARS^GET(VARPLAYER), "SETFPS", [30-[VARPLAYER*3]]);}
{$1^SETPOSITION(ARRCHICKENX^GET(VARINUMCHICKEN), ARRCHICKENY^GET(VARINUMCHICKEN));ARRCHICKEN^ADD($1^GETNAME());VARINUMCHICKEN^INC();}
{VARITEMP1^SET($1);VARITEMP1^INC();VARITEMP2^SET([$1+6]);ARRPOSX^CHANGEAT(VARITEMP2, ARRPOSX^GET(VARITEMP1));ARRPOSY^CHANGEAT(VARITEMP2, ARRPOSY^GET(VARITEMP1));UFO^RUN(["ANNTORPEDO"+$1], "SETPOSITION", ARRPOSX^GET(VARITEMP1), ARRPOSY^GET(VARITEMP1));UFO^RUN(["ANNTORPEDO"+$1], "SHOW");UFO^RUN(["ANNTORPEDO"+$1], "PLAY", "FLY");}
{CONDEXPLINDEX^BREAK( TRUE );UFO^RUN(["ANNTORPEDO"+VARITEMP1], "PAUSE");UFO^RUN(["ANNTORPEDO"+VARITEMP1], "HIDE");UFO^RUN(["VARITORPEDO"+VARITEMP1], "SET", 0);VARITEMP2^SET([VARITEMP1+6]);VTEMP1^ASSIGN(ARRPOSX^GET(VARITEMP2), ARRPOSY^GET(VARITEMP2));VTEMP2^ASSIGN(-10.0, -10.0);VTEMP1^ADD("VTEMP2");UFO^RUN(["ANNEXPL"+VARITEMP1], "SETPOSITION",VTEMP1^GET(0), VTEMP1^GET(1));UFO^RUN(["ANNEXPL"+VARITEMP1], "PLAY", "EXPL");CONDWHOGOTHIT^CHECK( TRUE );}
{;}
{VARITEMP1^SET(ARRCURRENTMOVE^GET(VARENEMY);BEHDONEXTMOVE^RUN();}
{VARITEMP1^SET([$1^GETCLONEINDEX()-1]);VARITEMP2^SET([ARRENEMYPOSY^GET(VARITEMP1)-1]);$1^SETPOSITION([ARRENEMYPOSX^GET(VARITEMP1)*32], [VARITEMP2*32]);$1^ADDBEHAVIOUR("ONFINISHED$INIT", "BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK0", "BEHEMOVEUP");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK1", "BEHEMOVERIGHT");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK2", "BEHEMOVEDOWN");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK3", "BEHEMOVELEFT");$1^ADDBEHAVIOUR("ONFINISHED$WALK0", "BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK1", "BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK2", "BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK3", "BEHNEXTMOVE");$1^SETFPS(RANDOM^GET(13,7));$1^PLAY("INIT");$1^SHOW();}
{VARITEMP1^SET([ARRPLAYERPOSY^GET(VARPLAYER)-1]);VARITEMP1^CLAMP(1,18);ARRNEXTPOSX^CHANGEAT(VARPLAYER, ARRPLAYERPOSX^GET(VARPLAYER));ARRNEXTPOSY^CHANGEAT(VARPLAYER, VARITEMP1);CONDNOMOVEY^BREAK( TRUE );VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)], "GET", ARRNEXTPOSX^GET(VARPLAYER));ARRCURRENTFIELD^CHANGEAT(VARPLAYER, VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^BREAK( TRUE );UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER, VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER, ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER, ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), 0);UFO^RUN(["ANNPLAYER"+VARPLAYER], "PLAY", "UP");}
{VARITEMP1^SET([ARRPLAYERPOSX^GET(VARPLAYER)+1]);VARITEMP1^CLAMP(0,24);ARRNEXTPOSX^CHANGEAT(VARPLAYER, VARITEMP1);ARRNEXTPOSY^CHANGEAT(VARPLAYER, ARRPLAYERPOSY^GET(VARPLAYER));CONDNOMOVEX^BREAK( TRUE );VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)], "GET", ARRNEXTPOSX^GET(VARPLAYER));ARRCURRENTFIELD^CHANGEAT(VARPLAYER, VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^BREAK( TRUE );UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER, VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER, ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER, ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), 0);UFO^RUN(["ANNPLAYER"+VARPLAYER], "PLAY", "RIGHT");}
{VARITEMP1^SET([ARRPLAYERPOSY^GET(VARPLAYER)+1]);VARITEMP1^CLAMP(1,18);ARRNEXTPOSX^CHANGEAT(VARPLAYER, ARRPLAYERPOSX^GET(VARPLAYER));ARRNEXTPOSY^CHANGEAT(VARPLAYER, VARITEMP1);CONDNOMOVEY^BREAK( TRUE );VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)], "GET", ARRNEXTPOSX^GET(VARPLAYER));ARRCURRENTFIELD^CHANGEAT(VARPLAYER, VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^BREAK( TRUE );UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER, VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER, ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER, ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), 0);UFO^RUN(["ANNPLAYER"+VARPLAYER], "PLAY", "DOWN");}
{VARITEMP1^SET([ARRPLAYERPOSX^GET(VARPLAYER)-1]);VARITEMP1^CLAMP(0,24);ARRNEXTPOSX^CHANGEAT(VARPLAYER, VARITEMP1);ARRNEXTPOSY^CHANGEAT(VARPLAYER, ARRPLAYERPOSY^GET(VARPLAYER));CONDNOMOVEX^BREAK( TRUE );VARITEMP1^SET(UFO^RUN(["ARRWALLS_"+ARRNEXTPOSY^GET(VARPLAYER)], "GET", ARRNEXTPOSX^GET(VARPLAYER));ARRCURRENTFIELD^CHANGEAT(VARPLAYER, VARITEMP1);VARFIELD^SET(VARITEMP1);CONDPOSSIBLEMOVE^BREAK( TRUE );UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), ARRLASTFIELD^GET(VARPLAYER));ARRLASTFIELD^CHANGEAT(VARPLAYER, VARFIELD);ARRPLAYERPOSX^CHANGEAT(VARPLAYER, ARRNEXTPOSX^GET(VARPLAYER));ARRPLAYERPOSY^CHANGEAT(VARPLAYER, ARRNEXTPOSY^GET(VARPLAYER));UFO^RUN(["ARRWALLS_"+ARRPLAYERPOSY^GET(VARPLAYER)], "CHANGEAT", ARRPLAYERPOSX^GET(VARPLAYER), 0);UFO^RUN(["ANNPLAYER"+VARPLAYER], "PLAY", "LEFT");}
{VARPLAYER^SET($1);VARENDFIELD^SET(VARFIELD);VARITEMP1^SET([ARRPLAYERPOSX^GET($1)*32]);VARITEMP2^SET([ARRPLAYERPOSY^GET($1)-1]);VARITEMP2^MUL(32);UFO^RUN(["ANNPLAYER"+$1], "PLAY", "IDLE");}
{VARSTEMP1^SET(ANNDOOR0^GETFRAMENAME());@IF("VARSTEMP1", "<>", ""OPEN"", "BEHOPEN", "");}
{VARITEMP1^SET(23);VARITEMP2^SET(4);VARITEMP3^SET(ARRPLAYERPOSX^GET(0));VARITEMP4^SET(ARRPLAYERPOSY^GET(0));CCONDISATPOS^BREAK( TRUE );VARITEMP3^SET(ARRPLAYERPOSX^GET(1));VARITEMP4^SET(ARRPLAYERPOSY^GET(1));CCONDISATPOS^BREAK( TRUE );VARITEMP1^SET(21);VARITEMP2^SET(2);VARITEMP3^SET(ARRPLAYERPOSX^GET(0));VARITEMP4^SET(ARRPLAYERPOSY^GET(0));CCONDISATPOS^BREAK( TRUE );VARITEMP3^SET(ARRPLAYERPOSX^GET(1));VARITEMP4^SET(ARRPLAYERPOSY^GET(1));CCONDISATPOS^BREAK( TRUE );VARSTEMP1^SET(ANNDOOR0^GETFRAMENAME());@IF("VARSTEMP1", "<>", ""CLOSED"", "BEHCLOSE", "");}
{VARITEMP1^SET(UFO^RUN($1, "GETCENTERX");VARITEMP2^SET(UFO^RUN($1, "GETCENTERY");VARSTEMP1^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITEMP1, VARITEMP2, TRUE, 5, 5, TRUE));CONDCOLLISION^BREAK( TRUE );VARITEMP1^SET(ARRPLAYERS^FIND(VARSTEMP1));ANNPLAYER0^PAUSE();ANNPLAYER1^PAUSE();UFO^RUN(["ANNPLAYER"+VARITEMP1], "PLAY", "DIE");UFO^RUN(["ANNPLAYER"+VARITEMP1], "SETPRIORITY", 10);UFO^RUN(["SNDPLAYERWORM"+VARITEMP1], "PLAY");}
{;}
{;}
{;}
{;}
{;}
{;}
{I_X^SET([ AOBJ8^GETPOSITIONX() + $2 ]);I_Y^SET([ AOBJ8^GETPOSITIONY() + $3 ]);UFO^RUN( $4, "SET" , I_Y );UFO^RUN( $1, "SETPOSITION" , I_X , I_Y );UFO^RUN( $1, "SETFPS" , 48 );UFO^RUN( $1, "PLAY" , "PLAY" );}
{GROUPSOUND^ADD( "SNDENTRE", "SNDKRABIK", "SNDSTARTCHOMIK, "SNDKRABIKKABLE", "SNDSUCCESS", "SNDKRETENTRE1", "SNDKRETENTRE2" );VARLEVEL4^SET( "S42_0_SKLADZIK" );VARROZDZIAL4^SET( 1 );}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDER^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{{ SNDER1^PLAY(); };}
{{ SNDES1^PLAY(); };}
{ITICK^INC();I_FIELD_INDEX^SET( I_MOLE_FIELD_CURR );IOUT^SET( MAT^GET( I_MOLE_FIELD_CURR ) );I_FIELD_CODE^SET( MAT^GET( I_FIELD_INDEX );BEH_MOLE_FINISHED_EMPTY^RUNC();I_MOLE_FIELD_CURR^SET( I_MOLE_FIELD_NEXT );BEH_MOLE_KILL^RUNC();BEH_KEYB^RUN();IEXIT^INC();}
{$1^ADDBEHAVIOUR( "ONFRAMECHANGED$LEWO" , "BEHENTICKL" );$1^ADDBEHAVIOUR( "ONFRAMECHANGED$PRAWO" , "BEHENTICKR" );$1^ADDBEHAVIOUR( "ONFRAMECHANGED$GORA" , "BEHENTICKUP" );$1^ADDBEHAVIOUR( "ONFRAMECHANGED$DOL" , "BEHENTICKDN" );$1^ADDBEHAVIOUR( "ONFINISHED$LEWO" , "BEHENFIN" );$1^ADDBEHAVIOUR( "ONFINISHED$PRAWO" , "BEHENFIN" );$1^ADDBEHAVIOUR( "ONFINISHED$GORA" , "BEHENFIN" );$1^ADDBEHAVIOUR( "ONFINISHED$DOL" , "BEHENFIN" );}
{I_0^SET( $1^GETCLONEINDEX() );BEHENDEFINEMOVE^RUN();}
{$1^STOP( FALSE );}
{S_2^SET([ SC_CLONE_EMPTY + [I_FIELD_INDEX+1] ]);UFO^RUN( S_2, "SHOW" );MAT^SET( [I_FIELD_INDEX%I_LEVEL_WIDTH], [I_FIELD_INDEX@I_LEVEL_WIDTH], IC_FIELD_CODE_EMPTY );ARRFLDCLONES^CHANGEAT( I_FIELD_INDEX , [I_FIELD_INDEX+1] );}
{$1^ADDBEHAVIOUR( "ONFINISHED$PLAY" , "BEH_EXP_FINISHED" );ARR_EXP^ADD(0);}
{VAR_1^INC();BUTTON$1^SETPRIORITY(VAR_1);}
{B$1^SETPRIORITY(100);}
{B$1^SETPRIORITY(1);}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{ SEQKRET^PLAY( "GEN2" );
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{BEHINITZASLONAX^RUNLOOPED( 0, 7, 1, "[80*$1]" );}
{VARTEMP^INC();VARDY^SET( $3 );VARSTRING^SET(  ["ANIMOZASLONA_"+VARTEMP] );UFO^RUN( VARSTRING, "SHOW" );UFO^RUN( VARSTRING, "SETPOSITION", 0, 0);UFO^RUN( VARSTRING, "SETFRAME", "PLAY", 0);UFO^RUN( VARSTRING, "SETPRIORITY", 50 );UFO^RUN( VARSTRING, "MOVE",  [120*$1 ], VARDY );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFINISHED$PLAY", "BEHZASLONAHIDE" );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFRAMECHANGED$PLAY", "BEHZASLONAMOVE" );CONDZASLONAHIDE^CHECK(TRUE);}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{BEHINITZASLONAX^RUNLOOPED( 0, 7,1, "[80*$1 ]" );}
{VARTEMP^INC();VARDY^SET( $3 );VARSTRING^SET(  ["ANIMOZASLONA_"+VARTEMP] );UFO^RUN( VARSTRING, "SHOW" );UFO^RUN( VARSTRING, "SETPOSITION", 0, 0);UFO^RUN( VARSTRING, "SETFRAME", "PLAY", 0);UFO^RUN( VARSTRING, "SETPRIORITY", 50 );UFO^RUN( VARSTRING, "MOVE",  [120*$1 ], VARDY );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFINISHED$PLAY", "BEHZASLONAHIDE" );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFRAMECHANGED$PLAY", "BEHZASLONAMOVE" );CONDZASLONAHIDE^CHECK(TRUE);}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{BEHINITZASLONAX^RUNLOOPED( 0, 7,1, "[80*$1 ]" );}
{VARTEMP^INC();VARDY^SET( $3 );VARSTRING^SET(  ["ANIMOZASLONA_"+VARTEMP] );UFO^RUN( VARSTRING, "SHOW" );UFO^RUN( VARSTRING, "SETPOSITION", 0, 0);UFO^RUN( VARSTRING, "SETFRAME", "PLAY", 0);UFO^RUN( VARSTRING, "SETPRIORITY", 50 );UFO^RUN( VARSTRING, "MOVE",  [120*$1 ], VARDY );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFINISHED$PLAY", "BEHZASLONAHIDE" );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFRAMECHANGED$PLAY", "BEHZASLONAMOVE" );CONDZASLONAHIDE^CHECK(TRUE);}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{;}
{BEHINITZASLONAX^RUNLOOPED( 0, 7, 1, "[80*$1 ]" );}
{VARTEMP^INC();VARDY^SET( $3 );VARSTRING^SET(  ["ANIMOZASLONA_"+VARTEMP] );UFO^RUN( VARSTRING, "SHOW" );UFO^RUN( VARSTRING, "SETPOSITION", 0, 0);UFO^RUN( VARSTRING, "SETFRAME", "PLAY", 0);UFO^RUN( VARSTRING, "SETPRIORITY", 50 );UFO^RUN( VARSTRING, "MOVE",  [120*$1 ], VARDY );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFINISHED$PLAY", "BEHZASLONAHIDE" );UFO^RUN( VARSTRING, "ADDBEHAVIOUR", "ONFRAMECHANGED$PLAY", "BEHZASLONAMOVE" );CONDZASLONAHIDE^CHECK(TRUE);}
{;}
{VARICOUNT^INC();BEHDISABLEBUTTONS^RUN();VARSTEMP1^SET( ["WAJHA"+$1] );UFO^RUN( VARSTEMP1, "PLAY", "PLAY" );}
{;}
{;}
{ANNST^PLAY("ELAPSE");;ANNKRET^PLAY("IDZIE_START");ANNREKSIO^PLAY("IDZIE_START");SEQZABBA^PLAY("0GADA5");}
{KOM84_1_1^PLAY();ISKRY^PLAY(START");}
{VARLEVEL8^SET("S85_SLONCE");ARRCARS^ADD("ANNEGG", "ANNLARGE", "ANNMID", "ANNSMALL");BEHINITFILTER^RUN();ARRDIRX^ADD(0.0, 0.0, 0.0, 0..0);ARRDIRY^ADD(0.0, 0.0, 0.0, 0..0);ARRSPEED^ADD(0.0, 0.0, 0.0, 0.0);ARRPOSX^ADD(0.0, 0.0, 0.0, 0.0);ARRPOSY^ADD(0.0, 0.0, 0.0, 0.0);ARRLASTPOSX^ADD(0.0,0.0,0.0,0.0);ARRLASTPOSY^ADD(0.0,0.0,0.0,0.0);ARRSTARTPOSX^ADD(150.0,290.0,530.0,470.0);ARRSTARTPOSY^ADD(400.0,280.0,360.0,400.0);ARRANGLE^ADD(0.0, 0.0, 0.0, 0.0);ARRTOANGLE^ADD(0.0, 0.0, 0.0, 0.0);ARRASTDIRX^ADD(0.73, 0.5, -0.5);ARRASTDIRY^ADD(-0.73, -0.2, 0.2);ARRHWIDTH^ADD(15.0, 41.5, 29.0, 20.0);ARRHHEIGHT^ADD(23.0, 41.5, 29.5, 20.0);VARPLAYABLE^SET(1);BEHINITPLAYER^RUN("0");BEHINITPLAYER^RUN("1");BEHINITPLAYER^RUN("2");BEHINITPLAYER^RUN("3");ANNPOWER^SETPOSITION(ARRSTARTPOSX^GET(0), ARRSTARTPOSY^GET(0));SNDNARR1^PLAY();}
{CONDSUN^BREAK( TRUE );VARITEMP1^SET(ARRCARS^FIND(VARSTEMP1));VNORMAL^ASSIGN([ARRPOSX^GET(VARPLAYER)+ARRHWIDTH^GET(VARPLAYER)], [ARRPOSY^GET(VARPLAYER)+ARRHHEIGHT^GET(VARPLAYER)]);VTEMP1^ASSIGN([ARRPOSX^GET(VARITEMP1)+ARRHWIDTH^GET(VARITEMP1)], [ARRPOSY^GET(VARITEMP1)+ARRHHEIGHT^GET(VARITEMP1)]);VTEMP1^MUL(-1.0);VNORMAL^ADD("VTEMP1");VNORMAL^NORMALIZE();VINCIDENT^ASSIGN(ARRDIRX^GET(VARPLAYER), ARRDIRY^GET(VARPLAYER));VINCIDENT^MUL(-1.0);VINCIDENT^REFLECT("VNORMAL", "VREFLECT");ARRDIRX^CHANGEAT(VARITEMP1, ARRDIRX^GET(VARPLAYER));ARRDIRY^CHANGEAT(VARITEMP1, ARRDIRY^GET(VARPLAYER));ARRPOSX^CHANGEAT(VARITEMP1, ARRLASTPOSX^GET(VARITEMP1));ARRPOSY^CHANGEAT(VARITEMP1, ARRLASTPOSY^GET(VARITEMP1));ARRSPEED^CHANGEAT(VARITEMP1, 2.0);VARDTEMP2^ARCTANEX(VREFLECT^GET(1), VREFLECT^GET(0));ARRDIRX^CHANGEAT(VARPLAYER, VREFLECT^GET(0));ARRDIRY^CHANGEAT(VARPLAYER, VREFLECT^GET(1));ARRTOANGLE^CHANGEAT(VARPLAYER, VARDTEMP2);ARRANGLE^CHANGEAT(VARPLAYER, VARDTEMP2);BEHPLAYPONG^RUN();}
{ARRDIRY^MULAT(VARPLAYER, -1.0);ARRPOSX^CHANGEAT(VARPLAYER, ARRLASTPOSX^GET(VARPLAYER));ARRPOSY^CHANGEAT(VARPLAYER, ARRLASTPOSY^GET(VARPLAYER));BEHPLAYPONG^RUN();}
{ARRDIRX^MULAT(VARPLAYER, -1.0);ARRPOSX^CHANGEAT(VARPLAYER, ARRLASTPOSX^GET(VARPLAYER));ARRPOSY^CHANGEAT(VARPLAYER, ARRLASTPOSY^GET(VARPLAYER));BEHPLAYPONG^RUN();}
{VARLEVEL6^SET("S66_WYBOR");BTNRED^DISABLEBUTVISIBLE();BTNGREEN^DISABLEBUTVISIBLE();BTNYELLOW^DISABLEBUTVISIBLE();BTNBLUE^DISABLEBUTVISIBLE();ARRLOCALNAMES^ADD("ANNCAR0, "ANNCAR1", "ANNCAR2", "ANNCAR3");ARRCARNAMES^REMOVEALL();ARRCARNAMES^ADD("1", "2", "3", "4");ARRCARINDICES^REMOVEALL();ARRCARINDICES^ADD(0, 1, 2, 3);BTNZAMEK^DISABLE();UFO^RUN(["BEHINITSCHEME"+VARLEVEL6XX], "RUN");}
{ARRCARS^ADD(ARRCARNAMES^GET(0),ARRCARNAMES^GET(1),ARRCARNAMES^GET(2),ARRCARNAMES^GET(3));BEHINITFILTER^RUN();ARRKEYSACCEL^ADD("UP", "S", "J", "8");ARRKEYSRIGHT^ADD("RIGHT", "X", "M", "6");ARRKEYSLEFT^ADD("LEFT", "Z", "N", "4");ARRDIRX^ADD(0.0, 0.0, 0.0, 0..0);ARRDIRY^ADD(0.0, 0.0, 0.0, 0..0);ARRSPEED^ADD(0.0, 0.0, 0.0, 0.0);ARRPOSX^ADD(0.0, 0.0, 0.0, 0.0);ARRPOSY^ADD(0.0, 0.0, 0.0, 0.0);ARRLASTPOSX^ADD(0.0, 0.0, 0.0, 0.0);ARRLASTPOSY^ADD(0.0, 0.0, 0.0, 0.0);ARRDISPX^ADD(0.0, 0.0, 0.0, 0.0);ARRDISPY^ADD(0.0, 0.0, 0.0, 0.0);ARRSTARTPOSX^ADD(200,200,150, 150);ARRSTARTPOSY^ADD(30,65,30,65);ARRREVERSE^ADD(0,0,0,0);ARRPRENEXTLAP^ADD(0,0,0,0);ARRANGLE^ADD(0.0, 0.0, 0.0, 0.0);ARRTOANGLE^ADD(0.0, 0.0, 0.0, 0.0);ARRSLOWDOWN^ADD(0,0,0,0);ARRPRIORITY^ADD(5,5,5,5);ARRNUMPATH^ADD(0,0,0,0);ARRLAP^ADD(0,0,0,0);ARRLAPTIME^ADD(0,0,0,0);ARRROUTE^ADD(0,0,0,0);ARRPATHX0^ADD(253,377,491,617,701,744,762,761,742,716,679,652,633,592,561,526,474,409,362,326,302,309,340,390,446,529,631,683,693,654,455,260,152,114,94,127,146,146,120,113,167,216);ARRPATHY0^ADD(59,75,59,54,63,85,135,200,285,323,321,280,214,197,259,294,343,401,401,373,258,208,181,182,247,343,394,444,492,526,533,518,503,473,397,342,284,226,166,102,60,57);ARRPATHX1^ADD(264,424,548,616,678,733,755,766,754,738,704,680,659,639,607,579,563,505,462,418,385,346,316,297,290,304,323,362,397,434,462,545,628,672,689,665,582,448,307,175,107,97,119,138,138,136,139,170,223);ARRPATHY1^ADD(63,75,52,47,71,94,138,214,272,293,306,303,279,229,210,224,256,302,356,394,399,382,344,293,246,204,187,179,192,228,284,351,395,444,486,515,543,528,544,493,440,386,337,281,216,134,72,49,53);ARRPATHX2^ADD(270,379,517,636,708,740,754,758,759,757,745,729,708,679,659,631,612,584,564,541,507,481,455,432,400,349,319,308,303,326,364,408,447,489,563,652,696,697,682,646,573,286,195,139,105,93,95,117,135,136,120,120,134,163,207;ARRPATHY2^ADD(64,73,56,52,68,89,110,144,206,251,291,314,326,317,287,236,227,228,251,284,306,336,370,388,391,386,359,310,253,210,205,226,267,309,355,416,460,483,510,524,534,520,494,476,454,426,386,356,317,256,208,157,101,71,59;ARRPATHX3^ADD(264,424,548,616,678,733,755,766,754,738,704,680,659,639,607,579,563,505,462,418,385,346,316,297,290,304,323,362,397,434,462,545,628,672,689,665,582,448,307,175,107,97,119,138,138,136,139,170,223);ARRPATHY3^ADD(63,75,52,47,71,94,138,214,272,293,306,303,279,229,210,224,256,302,356,394,399,382,344,293,246,204,187,179,192,228,284,351,395,444,486,515,543,528,544,493,440,386,337,281,216,134,72,49,53);IMGBRIDGE^SETOPACITY(200);IMGOVERLAY^SETOPACITY(200);VARPLAYER^SET(ARRCARINDICES^GET(0));BEHINITPLAYER^RUN();VARPLAYER^SET(ARRCARINDICES^GET(1));BEHINITPLAYER^RUN();VARPLAYER^SET(ARRCARINDICES^GET(2));BEHINITPLAYER^RUN();VARPLAYER^SET(ARRCARINDICES^GET(3));BEHINITPLAYER^RUN();SNDINTRO^PLAY();}
{VARITEMP1^SET(ARRSPEED^GET(VARPLAYER);VARITEMP1^MUL(2000);VARITEMP1^ADD(10025);UFO^RUN(["SNDENGINE"+VARPLAYER], "SETFREQ", VARITEMP1);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(["ANIMO"+$1],"SETASBUTTON",FALSE,FALSE);UFO^RUN(["ANIMO"+$1],"HIDE");BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY("PATRZY_NA_LAMPE");ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",TRUE,TRUE);UFO^RUN(VARSTRINGTEMP,"SHOW");VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY("PATRZY_NA_LAMPE");ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(["ANIMO"+$1],"SETASBUTTON",FALSE,FALSE);UFO^RUN(["ANIMO"+$1],"HIDE");BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",TRUE,TRUE);UFO^RUN(VARSTRINGTEMP,"SHOW");VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"STOP",FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(["ANIMO"+$1],"SETASBUTTON",FALSE,FALSE);UFO^RUN(["ANIMO"+$1],"HIDE");BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",TRUE,TRUE);UFO^RUN(VARSTRINGTEMP,"SHOW");VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{$1^SETPRIORITY(201);$1^ADDBEHAVIOUR("ONFRAMECHANGED$H0","BEHUFOFIRE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$H1","BEHUFOFIRE");$1^ADDBEHAVIOUR("ONFINISHED$TRAFIONY","BEHHIDE");$1^ADDBEHAVIOUR("ONFINISHED$H0","BEHUFOGOTOKURNIKP");$1^ADDBEHAVIOUR("ONFINISHED$H1","BEHUFOGOTOKURNIKL");$1^ADDBEHAVIOUR("ONFINISHED$P0","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$P1","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$P2","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$L0","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$L1","BEHUFOATAKKURNIK");$1^ADDBEHAVIOUR("ONFINISHED$L2","BEHUFOATAKKURNIK");}
{$1^SETPRIORITY(250);$1^ADDBEHAVIOUR("ONFINISHED$PEKA","BEHHIDE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$PLAY","BEHUFOFIREMOVE");}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{ARRAYWARSZTATMENUPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(["ANIMO"+$1],"SETASBUTTON",FALSE,FALSE);UFO^RUN(["ANIMO"+$1],"HIDE");BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY(RANDOM^GET(0,2));ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{VARSTRINGTEMP1^SET($1);CONDPLAYERROR^CHECK(TRUE);CONDREMOVEMENUITEM^ONE_BREAK(TRUE);VARSTRINGTEMP^SET(["ANIMO"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",TRUE,TRUE);UFO^RUN(VARSTRINGTEMP,"SHOW");VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ANIMOREKSIO^PLAY("SPRAWDZA");ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();}
{SEQKOGUT^STOP(FALSE);VARINTTEMP^SET(0);VARSTRINGTEMP^SET($1);BEHCOUNTITEMS^RUNLOOPED(0,ARRAYTEMP^GETSIZE());CONDADDITEMTOSHIP^ONE_BREAK(TRUE);ARRAYWARSZTATPRZEDMIOTY^ADD($1);VARSTRINGTEMP^SET(["ANIMOMENU_"+$1]);UFO^RUN(VARSTRINGTEMP,"SETASBUTTON",FALSE,FALSE);UFO^RUN(VARSTRINGTEMP,"STOP",FALSE);UFO^RUN(VARSTRINGTEMP,"HIDE");ARRAYWARSZTATMENUPRZEDMIOTY^REMOVEAT(ARRAYWARSZTATMENUPRZEDMIOTY^FIND($1));BEHSHOWSHIP^RUNLOOPED(0,ARRAYWARSZTATPRZEDMIOTY^GETSIZE());BEHSHOWMENU^RUNLOOPED(0,ARRAYWARSZTATMENUPRZEDMIOTY^GETSIZE());ARRAYWARSZTATMENUPRZEDMIOTY^SAVEINI();ARRAYWARSZTATPRZEDMIOTY^SAVEINI();ANIMOREKSIO^PLAY("ZADOWOLONY");VARSTRINGTEMP^SET($1);CONDPLAYSUCCESS^CHECK(TRUE);}
{PRZYGODA^GOTO("S62_PAKMAN");]
[VARLEVEL6^SET("S61?LADOWANIE0");}
{B_NULL;}
{VARINTTEMP^SET(UFO^RUN(["ANIMOROBAL"+$1],"ISPLAYING"));VARINTLOOP^ADD(VARINTTEMP);}
{VARNR^SET(UFO^RUN(["ANIMOLEBIODKA"+$1],"GETEVENTNAME"));VARNR^INC();UFO^RUN(["ANIMOLEBIODKA"+$1],"PLAY",VARNR);VARINTTEMP^SET($1);CONDONFINISHED_JE^CHECK(TRUE);VARINTTEMP^SET(0);BEHGAMEOVER^RUNLOOPED(0,7);CONDGAMEOVER^CHECK(TRUE);}
{VARINTTEMP^ADD(UFO^RUN(["ANIMOLEBIODKA"+$1],"GETEVENTNAME"));}
{B_NULL;}
{$1^ADDBEHAVIOUR("ONFINISHED$CCW","BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFINISHED$CW","BEHNEXTDIR");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CW","BEHCOLLISION");$1^ADDBEHAVIOUR("ONFRAMECHANGED$CCW","BEHCOLLISION");$1^SETPRIORITY(5);}
{VARITEMP1^SET([ANNREKSIO^GETPOSITIONX()+$1]);VARITEMP2^SET([ANNREKSIO^GETPOSITIONY()+$2]);VARITEMP3^SET($1);VARITEMP3^MUL(-1);VARITEMP4^SET($2);VARITEMP4^MUL(-1);CONDALPHA^ONE_BREAK(TRUE);ANNREKSIO^MOVE($1,$2);}
{VARPLAYER^SET($1);UFO^RUN(ARRCARS^GET(VARPLAYER),"SETPRIORITY",ARRPRIORITY^GET(VARPLAYER));UFO^RUN(ARRCARS^GET(VARPLAYER),"SETPOSITION",ARRSTARTPOSX^GET(VARPLAYER),ARRSTARTPOSY^GET(VARPLAYER));ARRPOSX^CHANGEAT(VARPLAYER,ARRSTARTPOSX^GET(VARPLAYER));ARRDIRX^CHANGEAT(VARPLAYER,1.0);ARRDIRY^CHANGEAT(VARPLAYER,0.0);ARRPOSY^CHANGEAT(VARPLAYER,ARRSTARTPOSY^GET(VARPLAYER));UFO^RUN(ARRCARS^GET(VARPLAYER),"SETFPS",[30-[VARPLAYER*3]]);}
{$1^SETPOSITION(ARRCHICKENX^GET(VARINUMCHICKEN),ARRCHICKENY^GET(VARINUMCHICKEN));ARRCHICKEN^ADD($1^GETNAME());VARINUMCHICKEN^INC();}
{VARITEMP1^SET($1);VARITEMP1^INC();VARITEMP2^SET([$1+6]);ARRPOSX^CHANGEAT(VARITEMP2,ARRPOSX^GET(VARITEMP1));ARRPOSY^CHANGEAT(VARITEMP2,ARRPOSY^GET(VARITEMP1));UFO^RUN(["ANNTORPEDO"+$1],"SETPOSITION",ARRPOSX^GET(VARITEMP1),ARRPOSY^GET(VARITEMP1));UFO^RUN(["ANNTORPEDO"+$1],"SHOW");UFO^RUN(["ANNTORPEDO"+$1],"PLAY","FLY");}
{CONDEXPLINDEX^ONE_BREAK(TRUE);UFO^RUN(["ANNTORPEDO"+VARITEMP1],"PAUSE");UFO^RUN(["ANNTORPEDO"+VARITEMP1],"HIDE");UFO^RUN(["VARITORPEDO"+VARITEMP1],"SET",0);VARITEMP2^SET([VARITEMP1+6]);VTEMP1^ASSIGN(ARRPOSX^GET(VARITEMP2),ARRPOSY^GET(VARITEMP2));VTEMP2^ASSIGN(-10.0,-10.0);VTEMP1^ADD(VTEMP2);UFO^RUN(["ANNEXPL"+VARITEMP1],"SETPOSITION",VTEMP1^GET(0),VTEMP1^GET(1));UFO^RUN(["ANNEXPL"+VARITEMP1],"PLAY","EXPL");CONDWHOGOTHIT^CHECK(TRUE);}
[THIS>HIDE();}
[THIS>PLAY("PLAY");}
[GLINA^PLAY("ENTRE");}
[EKRAN^SHOW();GLINA^PLAY("GADA1");}
{GLINA>PLAY("GADA2");}
{GLINA^PLAY("GADA3");]
{GLINA>PLAY("GADA5");}
{GLINA^PLAY("GADA6");]
{EKRAN^HIDE();ZNACZKI1>HIDE();ZNACZKI2^HIDE();ZNACZKI3^HIDE();ZNACZKI4>HIDE();BUT1>DISABLE();BUT2^DISABLE();BUT3>DISABLE();BUT4^DISABLE();BUT5>DISABLE();BUT6^DISABLE();ENTERBUT^DISABLE();GLINABUT^DISABLE();GLINA^PLAY("EXIT");}
{GLINA>PLAY("OK");}
[BUT1^ENABLE();BUT2>ENABLE();BUT3^ENABLE();BUT4^ENABLE();BUT5>ENABLE();BUT6^ENABLE();ENTERBUT^ENABLE();GLINABUT^ENABLE();}
[CON1^CHECK(RUN);CON2^CHECK(RUN);CON3>CHECK(RUN);CON4^CHECK(RUN);}
[GLINAGADA7^RUN();KONTROLAVAR^SET(1);DISABLEALL^RUN();}
{BUT1^DISABLEBUTVISIBLE();BUT2>DISABLEBUTVISIBLE();BUT3^DISABLEBUTVISIBLE();BUT4^DISABLEBUTVISIBLE();BUT5^DISABLEBUTVISIBLE();BUT6^DISABLEBUTVISIBLE();ENTERBUT^DISABLEBUTVISIBLE();GLINABUT^DISABLEBUTVISIBLE();}
{PRZYGODA^GOTO("S31_0_ZIEMIA");]
{DIDISABLE>RUN();KTORAPROBA^RUN();ENABLEALL^RUN();PROBA^INC();ZNACZKI1>HIDE();ZNACZKI2^HIDE();ZNACZKI3^HIDE();ZNACZKI4>HIDE();}
[CONPR1^CHECK(TRUE);CONPR2^CHECK(TRUE);CONPR3>CHECK(TRUE);]
{GLINA>PLAY("GADA3B");}
[PRZYGODA>GOTO("DECR");}
[GLINAENTRE>RUN();]
{ZNACZKI1^SHOW();ZNACZKI1^SETFRAME("PLAY",ZNACZKI2>GETFRAMENAME());ZNACZKI2^SHOW();ZNACZKI2^SETFRAME("PLAY",ZNACZKI3>GETFRAMENAME());ZNACZKI3^SHOW();ZNACZKI3^SETFRAME("PLAY",ZNACZKI4>GETFRAMENAME());}
{ZNACZKI3^SHOW();ZNACZKI3^SETFRAME("PLAY",ZNACZKI4^GETFRAMENAME());]
[DISABLEALL^RUN();KTORAPROBA^RUN();PROBA^INC();}
[DISABLEALL>RUN();HASLOOKIEJ^RUN();}
[VAR_KOD^SET([ZNACZKI1^GETFRAMENAME()+ZNACZKI2^GETFRAMENAME()]);VAR_KOD>ADD([ZNACZKI3^GETFRAMENAME()+ZNACZKI4^GETFRAMENAME()]);@IF("VAR_KOD","!_","6234","B_LOST","B_WIN");}
[ZNACZKI1^HIDE();ZNACZKI2>HIDE();ZNACZKI3^HIDE();ZNACZKI4^HIDE();ZNACZKI4>SETFRAME("PLAY",0);ZNACZKI3^SETFRAME("PLAY",0);ZNACZKI2^SETFRAME("PLAY",0);ZNACZKI1>SETFRAME("PLAY",0);VAR_CYFRA^SET(0);ENABLEALL^RUN();}
{B_NULL;}
{MENUGLOWNE^SETMINHSPRIORITY(0);POPBKGJEZ^HIDE();BUTHUN^DISABLE();BUTCZE^DISABLE();MENUGLOWNE^RESUME();UFO^SETLANGUAGE("040E");SNDROZDZIAL1^LOAD("$WAVS\HUN\NARRMENU_1.WAV");SNDROZDZIAL2^LOAD("$WAVS\HUN\NARRMENU_2.WAV");SNDROZDZIAL3^LOAD("$WAVS\HUN\NARRMENU_3.WAV");SNDROZDZIAL4^LOAD("$WAVS\HUN\NARRMENU_4.WAV");SNDROZDZIAL5^LOAD("$WAVS\HUN\NARRMENU_5.WAV");SNDROZDZIAL6^LOAD("$WAVS\HUN\NARRMENU_6.WAV");SNDROZDZIAL7^LOAD("$WAVS\HUN\NARRMENU_7.WAV");SNDROZDZIAL8^LOAD("$WAVS\HUN\NARRMENU_8.WAV");SNDKONTYNUACJA^LOAD("$WAVS\HUN\NARRNOWE_4.WAV");SNDRESTART^LOAD("$WAVS\HUN\NARREXTRA_1.WAV");SNDONRESTART^LOAD("$WAVS\HUN\NARREXTRA_2.WAV");SNDTAK^LOAD("$WAVS\HUN\NARREXTRA_3.WAV");SNDNIE^LOAD("$WAVS\HUN\NARREXTRA_4.WAV");SNDNIEWIEM^LOAD("$WAVS\HUN\NARREXTRA_5.WAV");SNDKRET^LOAD("$WAVS\HUN\KRE14_1_1.WAV");SNDHUN^LOAD("$WAVS\HUN\JEZ4.WAV");SNDCZE^LOAD("$WAVS\HUN\JEZ2.WAV");}
{VARITEMP1^SET([$1^GETCLONEINDEX()-1]);VARITEMP2^SET([ARRENEMYPOSY^GET(VARITEMP1)-1]);$1^SETPOSITION([ARRENEMYPOSX^GET(VARITEMP1)*32],[VARITEMP2*32]);$1^ADDBEHAVIOUR("ONFINISHED$INIT","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK0","BEHEMOVEUP");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK1","BEHEMOVERIGHT");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK2","BEHEMOVEDOWN");$1^ADDBEHAVIOUR("ONFRAMECHANGED$WALK3","BEHEMOVELEFT");$1^ADDBEHAVIOUR("ONFINISHED$WALK0","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK1","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK2","BEHNEXTMOVE");$1^ADDBEHAVIOUR("ONFINISHED$WALK3","BEHNEXTMOVE");$1^SETFPS(RANDOM^GET(13,7));$1^PLAY("INIT");$1^SHOW();}
{VARPLAYER^SET($1);VARENDFIELD^SET(VARFIELD);VARITEMP1^SET([ARRPLAYERPOSX^GET($1)*32]);VARITEMP2^SET([ARRPLAYERPOSY^GET($1)-1]);VARITEMP2^MUL(32);UFO^RUN(["ANNPLAYER"+$1],"PLAY","IDLE");}
[THIS^PLAY("PLAY");}
{KRE31_0_1>PLAY();}
[VARROZDZIAL3^SET(1);BEHRESETROZDZIAL3^RUN();PRZYGODA^GOTO( "S31_0_ZIEMIA" );}
{BEH_ASK_PLAY_AGAIN;}
{BEH_SHIP_REPEAT_GAZ;}
{I_X^SET([AOBJ8^GETPOSITIONX()+$2]);I_Y^SET([AOBJ8^GETPOSITIONY()+$3]);UFO^RUN($4,"SET",I_Y);UFO^RUN($1,"SETPOSITION",I_X,I_Y);UFO^RUN($1,"SETFPS",48);UFO^RUN($1,"PLAY","PLAY");}
{GROUPSOUND^ADD("SNDENTRE","SNDKRABIK","SNDSTARTCHOMIK,"SNDKRABIKKABLE","SNDSUCCESS","SNDKRETENTRE1","SNDKRETENTRE2");VARLEVEL4^SET("S42_0_SKLADZIK");VARROZDZIAL4^SET(1);}
{BEHMOLECHFLD;}
{$1^ADDBEHAVIOUR("ONFRAMECHANGED$LEWO","BEHENTICKL");$1^ADDBEHAVIOUR("ONFRAMECHANGED$PRAWO","BEHENTICKR");$1^ADDBEHAVIOUR("ONFRAMECHANGED$GORA","BEHENTICKUP");$1^ADDBEHAVIOUR("ONFRAMECHANGED$DOL","BEHENTICKDN");$1^ADDBEHAVIOUR("ONFINISHED$LEWO","BEHENFIN");$1^ADDBEHAVIOUR("ONFINISHED$PRAWO","BEHENFIN");$1^ADDBEHAVIOUR("ONFINISHED$GORA","BEHENFIN");$1^ADDBEHAVIOUR("ONFINISHED$DOL","BEHENFIN");}
{I_0^SET($1^GETCLONEINDEX());BEHENDEFINEMOVE^RUN();}
{$1^STOP(FALSE);}
{S_2^SET([SC_CLONE_EMPTY+[I_FIELD_INDEX+1]]);UFO^RUN(S_2,"SHOW");MAT^SET([I_FIELD_INDEX%I_LEVEL_WIDTH],[I_FIELD_INDEX@I_LEVEL_WIDTH],IC_FIELD_CODE_EMPTY);ARRFLDCLONES^CHANGEAT(I_FIELD_INDEX,[I_FIELD_INDEX+1]);}
{$1^ADDBEHAVIOUR("ONFINISHED$PLAY","BEH_EXP_FINISHED");ARR_EXP^ADD(0);}
{VAR_1^INC();BUTTON$1^SETPRIORITY(VAR_1);}
{B$1^SETPRIORITY(100);}
{B$1^SETPRIORITY(1);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{BEHINITZASLONAX^RUNLOOPED(0,7,1,"[80*$1]");}
{VARTEMP^INC();VARDY^SET($3);VARSTRING^SET(["ANIMOZASLONA_"+VARTEMP]);UFO^RUN(VARSTRING,"SHOW");UFO^RUN(VARSTRING,"SETPOSITION",0,0);UFO^RUN(VARSTRING,"SETFRAME","PLAY",0);UFO^RUN(VARSTRING,"SETPRIORITY",50);UFO^RUN(VARSTRING,"MOVE",[120*$1],VARDY);UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFINISHED$PLAY","BEHZASLONAHIDE");UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFRAMECHANGED$PLAY","BEHZASLONAMOVE");CONDZASLONAHIDE^CHECK(TRUE);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{BEHINITZASLONAX^RUNLOOPED(0,7,1,"[80*$1]");}
{VARTEMP^INC();VARDY^SET($3);VARSTRING^SET(["ANIMOZASLONA_"+VARTEMP]);UFO^RUN(VARSTRING,"SHOW");UFO^RUN(VARSTRING,"SETPOSITION",0,0);UFO^RUN(VARSTRING,"SETFRAME","PLAY",0);UFO^RUN(VARSTRING,"SETPRIORITY",50);UFO^RUN(VARSTRING,"MOVE",[120*$1],VARDY);UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFINISHED$PLAY","BEHZASLONAHIDE");UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFRAMECHANGED$PLAY","BEHZASLONAMOVE");CONDZASLONAHIDE^CHECK(TRUE);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{BEHINITZASLONAX^RUNLOOPED(0,7,1,"[80*$1]");}
{VARTEMP^INC();VARDY^SET($3);VARSTRING^SET(["ANIMOZASLONA_"+VARTEMP]);UFO^RUN(VARSTRING,"SHOW");UFO^RUN(VARSTRING,"SETPOSITION",0,0);UFO^RUN(VARSTRING,"SETFRAME","PLAY",0);UFO^RUN(VARSTRING,"SETPRIORITY",50);UFO^RUN(VARSTRING,"MOVE",[120*$1],VARDY);UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFINISHED$PLAY","BEHZASLONAHIDE");UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFRAMECHANGED$PLAY","BEHZASLONAMOVE");CONDZASLONAHIDE^CHECK(TRUE);}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{B_NULL;}
{BEHINITZASLONAX^RUNLOOPED(0,7,1,"[80*$1]");}
{VARTEMP^INC();VARDY^SET($3);VARSTRING^SET(["ANIMOZASLONA_"+VARTEMP]);UFO^RUN(VARSTRING,"SHOW");UFO^RUN(VARSTRING,"SETPOSITION",0,0);UFO^RUN(VARSTRING,"SETFRAME","PLAY",0);UFO^RUN(VARSTRING,"SETPRIORITY",50);UFO^RUN(VARSTRING,"MOVE",[120*$1],VARDY);UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFINISHED$PLAY","BEHZASLONAHIDE");UFO^RUN(VARSTRING,"ADDBEHAVIOUR","ONFRAMECHANGED$PLAY","BEHZASLONAMOVE");CONDZASLONAHIDE^CHECK(TRUE);}
{I_CONTROL^SET(-1);]
[SND_PYT^STOP();SND_TAK>STOP();SND_NIE^PLAY();}
[I_CONTROL^SET(1);}
[I_CONTROL^SET(1);}
{BUT_TAK>DISABLE();BUT_NIE>DISABLE();IMG_POPUP_BKG>HIDE();BUT_EXIT^ENABLE();BUT_PAUSE^ENABLE();BUT_ENTRY_BREAKER^DISABLE();SEQ_ENTRY^STOP(FALSE);MOUSE^SET( "ACTIVE" );MOUSE^SET( "ARROW" );}
[BUT_EXIT>DISABLEBUTVISIBLE();BUT_PAUSE>DISABLEBUTVISIBLE();IMG_POPUP_BKG^SHOW();BUT_TAK^ENABLE();BUT_NIE>ENABLE();SND_PYT^PLAY();]
{]
[CON_POINTS_LESS_0^CHECK(TRUE);CON_POINTS_GREATER_9999^CHECK(TRUE);I_3^SET( I_POINTS );I_3^DIV( 1000 );ANN_POINTS_1000^SETFRAME( "PLAY", I_3 );I_3^SET( I_POINTS );I_3^MOD( 1000 );I_3^DIV( 100 );ANN_POINTS_0100^SETFRAME( "PLAY", I_3 );I_3>SET( I_POINTS );I_3^MOD( 100 );I_3^DIV( 10 );ANN_POINTS_0010^SETFRAME( "PLAY", I_3 );I_3^SET( I_POINTS );I_3^MOD( 10 );ANN_POINTS_0001^SETFRAME( "PLAY", I_3 );}
[B_0^SET( TRUE );I_1^SET( RANDOM^GET( 100 ) );CON_I1_L_I0>BREAK( TRUE );B_0>SET( FALSE );}
{VARICOUNT^INC();BEHDISABLEBUTTONS^RUN();VARSTEMP1^SET(["WAJHA"+$1]);UFO^RUN(VARSTEMP1,"PLAY","PLAY");}
{B_NULL;}
{B_NULL;}
{VARLEVEL8^SET("S85_SLONCE");ARRCARS^ADD("ANNEGG","ANNLARGE","ANNMID","ANNSMALL");BEHINITFILTER^RUN();ARRDIRX^ADD(0.0,0.0,0.0,0.0);ARRDIRY^ADD(0.0,0.0,0.0,0.0);ARRSPEED^ADD(0.0,0.0,0.0,0.0);ARRPOSX^ADD(0.0,0.0,0.0,0.0);ARRPOSY^ADD(0.0,0.0,0.0,0.0);ARRLASTPOSX^ADD(0.0,0.0,0.0,0.0);ARRLASTPOSY^ADD(0.0,0.0,0.0,0.0);ARRSTARTPOSX^ADD(150.0,290.0,530.0,470.0);ARRSTARTPOSY^ADD(400.0,280.0,360.0,400.0);ARRANGLE^ADD(0.0,0.0,0.0,0.0);ARRTOANGLE^ADD(0.0,0.0,0.0,0.0);ARRASTDIRX^ADD(0.73,0.5,-0.5);ARRASTDIRY^ADD(-0.73,-0.2,0.2);ARRHWIDTH^ADD(15.0,41.5,29.0,20.0);ARRHHEIGHT^ADD(23.0,41.5,29.5,20.0);VARPLAYABLE^SET(1);BEHINITPLAYER^RUN("0");BEHINITPLAYER^RUN("1");BEHINITPLAYER^RUN("2");BEHINITPLAYER^RUN("3");ANNPOWER^SETPOSITION(ARRSTARTPOSX^GET(0),ARRSTARTPOSY^GET(0));SNDNARR1^PLAY();}
{CONDSUN^ONE_BREAK(TRUE);VARITEMP1^SET(ARRCARS^FIND(VARSTEMP1));VNORMAL^ASSIGN([ARRPOSX^GET(VARPLAYER)+ARRHWIDTH^GET(VARPLAYER)],[ARRPOSY^GET(VARPLAYER)+ARRHHEIGHT^GET(VARPLAYER)]);VTEMP1^ASSIGN([ARRPOSX^GET(VARITEMP1)+ARRHWIDTH^GET(VARITEMP1)],[ARRPOSY^GET(VARITEMP1)+ARRHHEIGHT^GET(VARITEMP1)]);VTEMP1^MUL(-1.0);VNORMAL^ADD(VTEMP1);VNORMAL^NORMALIZE();VINCIDENT^ASSIGN(ARRDIRX^GET(VARPLAYER),ARRDIRY^GET(VARPLAYER));VINCIDENT^MUL(-1.0);VINCIDENT^REFLECT(VNORMAL,VREFLECT);ARRDIRX^CHANGEAT(VARITEMP1,ARRDIRX^GET(VARPLAYER));ARRDIRY^CHANGEAT(VARITEMP1,ARRDIRY^GET(VARPLAYER));ARRPOSX^CHANGEAT(VARITEMP1,ARRLASTPOSX^GET(VARITEMP1));ARRPOSY^CHANGEAT(VARITEMP1,ARRLASTPOSY^GET(VARITEMP1));ARRSPEED^CHANGEAT(VARITEMP1,2.0);VARDTEMP2^ARCTANEX(VREFLECT^GET(1),VREFLECT^GET(0));ARRDIRX^CHANGEAT(VARPLAYER,VREFLECT^GET(0));ARRDIRY^CHANGEAT(VARPLAYER,VREFLECT^GET(1));ARRTOANGLE^CHANGEAT(VARPLAYER,VARDTEMP2);ARRANGLE^CHANGEAT(VARPLAYER,VARDTEMP2);BEHPLAYPONG^RUN();}
{ARRDIRY^MULAT(VARPLAYER,-1.0);ARRPOSX^CHANGEAT(VARPLAYER,ARRLASTPOSX^GET(VARPLAYER));ARRPOSY^CHANGEAT(VARPLAYER,ARRLASTPOSY^GET(VARPLAYER));BEHPLAYPONG^RUN();}
{ARRDIRX^MULAT(VARPLAYER,-1.0);ARRPOSX^CHANGEAT(VARPLAYER,ARRLASTPOSX^GET(VARPLAYER));ARRPOSY^CHANGEAT(VARPLAYER,ARRLASTPOSY^GET(VARPLAYER));BEHPLAYPONG^RUN();}
{VARLEVEL6^SET("S66_WYBOR");BTNRED^DISABLEBUTVISIBLE();BTNGREEN^DISABLEBUTVISIBLE();BTNYELLOW^DISABLEBUTVISIBLE();BTNBLUE^DISABLEBUTVISIBLE();ARRLOCALNAMES^ADD("ANNCAR0,"ANNCAR1","ANNCAR2","ANNCAR3");ARRCARNAMES^REMOVEALL();ARRCARNAMES^ADD("1","2","3","4");ARRCARINDICES^REMOVEALL();ARRCARINDICES^ADD(0,1,2,3);BTNZAMEK^DISABLE();UFO^RUN(["BEHINITSCHEME"+VARLEVEL6XX],"RUN");}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^SUB(3060);VARI_POSKRETX^SUB(3060);VARI_POSREXXGOTO^SUB(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{VARI_POSREXX^ADD(3060);VARI_POSKRETX^ADD(3060);VARI_POSREXXGOTO^ADD(3060);WPATH^SETPOSITION(100,[VARI_POSREXX+VARI_BKGXOFFSET],[VARI_POSREXY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(100,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);WPATH^SETPOSITION(101,[VARI_POSKRETX+VARI_BKGXOFFSET],[VARI_POSKRETY+VARI_BKGYOFFSET],0);WPATH^FINDPATH(101,VARI_3DPATHID,VARI_POSREXXGOTO,[VARI_POSREXYGOTO,0.0,FALSE);}
{@MSGBOX("SUKCES!");}
{I1^SET([_I_*2]);I2^SET([[_I_*2]+1]);ARRKAMWSP^CHANGEAT(I1,*S1^GETPOSITIONX());ARRKAMWSP^CHANGEAT(I2,*S1^GETPOSITIONY());}
{ARRKAMSTAN^REMOVEAT(I1);ARRKAMGRAFA^ADD(ARRKAMGRAFA^GET(I1));ARRKAMGRAFA^REMOVEAT(I1);ARRKAMWSP^ADD(0,0);ARRKAMWSP^REMOVEAT([I1*2]);ARRKAMWSP^REMOVEAT([I1*2]);IILOSCKAMIENI^DEC();I2^DEC();}
{I1^SET([_I_*2]);I2^SET([[_I_*2]+1]);ARRKAMWSP^CHANGEAT(I1,*S1^GETPOSITIONX());ARRKAMWSP^CHANGEAT(I2,*S1^GETPOSITIONY());}
{ARRKAMSTAN^REMOVEAT(I1);ARRKAMGRAFA^ADD(ARRKAMGRAFA^GET(I1));ARRKAMGRAFA^REMOVEAT(I1);ARRKAMWSP^ADD(0,0);ARRKAMWSP^REMOVEAT([I1*2]);ARRKAMWSP^REMOVEAT([I1*2]);IILOSCKAMIENI^DEC();I2^DEC();}
{I1^SET([_I_*2]);I2^SET([[_I_*2]+1]);ARRKAMWSP^CHANGEAT(I1,*S1^GETPOSITIONX());ARRKAMWSP^CHANGEAT(I2,*S1^GETPOSITIONY());}
{ARRKAMSTAN^REMOVEAT(I1);ARRKAMGRAFA^ADD(ARRKAMGRAFA^GET(I1));ARRKAMGRAFA^REMOVEAT(I1);ARRKAMWSP^ADD(0,0);ARRKAMWSP^REMOVEAT([I1*2]);ARRKAMWSP^REMOVEAT([I1*2]);IILOSCKAMIENI^DEC();I2^DEC();}
{ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(MOUSE^GETPOSX());VARILASTY^SET(MOUSE^GETPOSY());VARIDOMAGIC^SET(1);}
{VARDTEMP0^MUL(-1.0);}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7);BEHPLAYERCOLL^RUN();}
{VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}
{I9^SET($1);S3^SET(["ANRZUTEK1_"+IRZUTKLON]);I1^SET(RANDOM^GET(500));I1^ADD(150);ARPOS^SET(IRZUTKLON,0,I1);I2^SET(RANDOM^GET(500));I2^ADD(150);ARPOS^SET(IRZUTKLON,1,I2);I3^SET([I2-I1]);*S3^SETPOSITION([I1-I3],600);I3^SET(I3^LENGTH(I3,600));D1^SET(I3);D2^SET([I2-I1]);D2^SET([D2@D1]);D3^SET(600);D3^SET([D3@D1]);D2^SET([D2*20]);D3^SET([D3*20]);ARPOS^SET(IRZUTKLON,2,D2);ARPOS^SET(IRZUTKLON,3,D3);*S3^NPLAY(I9);SFX_LASRZUT^PLAY();IRZUTKLON^SET([[IRZUTKLON+1]%20]);}
{STLEV^SET("DBLEV_CURSOR");*SKLOC^SETFRAME(0,STLEV^GETFIELD(0));I1^SET([STLEV^GETFIELD(1)*50]);*SKLOC^SETPOSITION(800,[Y_POCZ_OFF-I1]);I1^SET(STLEV^GETFIELD(3));@IF("I1>0&&I1<10","BFITMP71","BFITMP72");I1^SET(STLEV^GETFIELD(2));@IF("I1",">_","20","BFITMP73","");I1^SET(SKLOC^GET(7,1));I1^SET([[I1+1]%5]);SKLOC^SET(["ANKLOC_"+I1]);DBLEV^NEXT();D1^SET(IWYMIAR);D2^SET([DWYMIARPOCZ-D1]);D1^SET(PRZESUW_1^GETWIDTH());D3^SET([D2@DWYMIARPOCZ]);D1^SET([D3*D1]);I1^SET(D1);PRZESUW^SETPOSITION([I1-20],0);IWYMIAR^DEC();};
{I9^SET($1);S3^SET(["ANRZUTEK1_"+IRZUTKLON]);I1^SET(RANDOM^GET(500));I1^ADD(150);ARPOS^SET(IRZUTKLON,0,I1);I2^SET(RANDOM^GET(500));I2^ADD(150);ARPOS^SET(IRZUTKLON,1,I2);I3^SET([I2-I1]);*S3^SETPOSITION([I1-I3],600);I3^SET(I3^LENGTH(I3,600));D1^SET(I3);D2^SET([I2-I1]);D2^SET([D2@D1]);D3^SET(600);D3^SET([D3@D1]);D2^SET([D2*20]);D3^SET([D3*20]);ARPOS^SET(IRZUTKLON,2,D2);ARPOS^SET(IRZUTKLON,3,D3);*S3^NPLAY(I9);IRZUTKLON^SET([[IRZUTKLON+1]%20]);}
{STLEV^SET("DBLEV_CURSOR");*SKLOC^SETFRAME(0,STLEV^GETFIELD(0));I1^SET([STLEV^GETFIELD(1)*50]);*SKLOC^SETPOSITION(800,[Y_POCZ_OFF-I1]);I1^SET(STLEV^GETFIELD(3));@IF("I1>0&&I1<10","BFITMP66","BFITMP67");I1^SET(STLEV^GETFIELD(2));@IF("I1",">_","20","BFITMP68","");I1^SET(SKLOC^GET(7,1));I1^SET([[I1+1]%5]);SKLOC^SET(["ANKLOC_"+I1]);DBLEV^NEXT();D1^SET(IWYMIAR);D2^SET([DWYMIARPOCZ-D1]);D1^SET(PRZESUW_1^GETWIDTH());D3^SET([D2@DWYMIARPOCZ]);D1^SET([D3*D1]);I1^SET(D1);PRZESUW^SETPOSITION([I1-20],0);IWYMIAR^DEC();};
{VARD_MASS^SET(0.1);VARD_FRICTION^SET(0.01);VARD_FRICTIONV^SET(0.01);VARD_BOUNCE^SET(0.01);VARD_BOUNCEV^SET(0.01);VARD_MAXV^SET(100.0);VARI_TMP4^SET(12);ANN_JO_OGNIWO^CLONE(CONSTI_LANCUCHLENGTH);VARI_ID^SET(301);VARS_OBJ^SET("ANN_JO_OGNIWO");VARI_X^SET(*VARS_OBJ^GETCENTERX());VARI_Y^SET(*VARS_OBJ^GETCENTERY());VARI_Y^ADD(200);*VARS_OBJ^SHOW();WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,0,2,6,6,6);WTEST^SETLIMIT(VARI_ID,0,-300,0,800,900,0);*VARS_OBJ^SHOW();*VARS_OBJ^SETANCHOR("CENTER");WTEST^LINK(VARI_ID,VARS_OBJ);WTEST^SETPOSITION(VARI_ID,VARI_X,VARI_Y,0);VARI_Y^SUB([VARI_TMP4*2]);VARI_ID^INC();@LOOP("{VARI_TMP1^SET(_I_);VARS_OBJ^SET(["ANN_JO_OGNIWO_"+_I_]);WTEST^ADDBODY(VARI_ID,VARD_MASS,VARD_FRICTION,VARD_FRICTIONV,VARD_BOUNCE,VARD_BOUNCEV,VARD_MAXV,1,2,3,3,3);WTEST^SETPOSITION(VARI_ID,VARI_X,VARI_Y,0);WTEST^SETLIMIT(VARI_ID,0,-200,0,800,800,0);*VARS_OBJ^SETANCHOR("CENTER");WTEST^LINK(VARI_ID,VARS_OBJ);VARI_TMP1^SET([VARI_ID-1]);VARI_TMP2^SET([VARI_Y+16]);WTEST^JOIN(VARI_ID,VARI_TMP1,VARI_X,VARI_TMP2,0,0,-180,180,0,1,0);VARI_Y^SUB([VARI_TMP4*2]);VARI_ID^INC();}",1,CONSTI_LANCUCHLENGTH,1);WTEST^ADDFORCE([VARI_ID-2],-10000,0,0);WTEST^ADDFORCE([VARI_ID-3],0,100000,0);}
{VARD_TMP1^SET([VARELAPSED*VARD_MAGNESSPEED*16.0]);@IF(KEYBOARD^ISKEYDOWN("UP"),"_","TRUE","BFITMP25","");@IF(KEYBOARD^ISKEYDOWN("DOWN"),"_","TRUE","BFITMP26","");@IF(KEYBOARD^ISKEYDOWN("LEFT"),"_","TRUE","BFITMP27","");@IF(KEYBOARD^ISKEYDOWN("RIGHT"),"_","TRUE","BFITMP28","");}
{VARELAPSED^SET(WTEST^MOVEOBJECTS());VARD_STALA^SET([VARELAPSED*16.0]);VARD_SPEEDROT^SET(90.0);VARI_BKGX^SET(WTEST^GETBKGPOSX());VARI_BKGY^SET(WTEST^GETBKGPOSY());@IF("VARI_BKGX!'VARI_BKGOLDX||VARI_BKGY!'VARI_BKGOLDY","BFITMP12","");@IF(KEYBOARD^ISKEYDOWN("UP"),"_","TRUE","BFITMP13","");@IF(KEYBOARD^ISKEYDOWN("DOWN"),"_","TRUE","BFITMP14","");@IF(KEYBOARD^ISKEYDOWN("LEFT"),"_","TRUE","BFITMP15","");@IF(KEYBOARD^ISKEYDOWN("RIGHT"),"_","TRUE","BFITMP16","");VARI_CARANGLEREAL^SET(WTEST^GETROTATIONZ(501));VARI_CARANGLE^SET([WTEST^GETROTATIONZ(501)+360]);VARI_CARANGLE^SET([VARI_CARANGLE%360]);VARD_TMP5^SET(WTEST^GETPOSITIONZ(501));}
{VARELAPSED^SET(WTEST^MOVEOBJECTS());VARD_STALA^SET([VARELAPSED*16.0]);VARB_JADE^SET(FALSE);VARD_SPEEDROT^SET(WTEST^GETSPEED(501));VARD_SPEEDROT^MUL(4);VARD_SPEEDROT^ADD(2);VARI_BKGX^SET(WTEST^GETBKGPOSX());VARI_BKGY^SET(WTEST^GETBKGPOSY());@IF("VARI_BKGX!'VARI_BKGOLDX||VARI_BKGY!'VARI_BKGOLDY","BFITMP16","");@IF(KEYBOARD^ISKEYDOWN("UP"),"_","TRUE","BFITMP17","");@IF(KEYBOARD^ISKEYDOWN("DOWN"),"_","TRUE","BFITMP18","");@IF("VARB_JADE","_","FALSE","BFITMP19","");@IF(KEYBOARD^ISKEYDOWN("LEFT"),"_","TRUE","BFITMP20","");@IF(KEYBOARD^ISKEYDOWN("RIGHT"),"_","TRUE","BFITMP21","");VARI_CARANGLEREAL^SET(WTEST^GETROTATIONZ(501));VARI_CARANGLE^SET([WTEST^GETROTATIONZ(501)+360]);VARI_CARANGLE^SET([VARI_CARANGLE%360]);VARI_ANGLE^SET([0-VARI_CARANGLE]);VARD_TMP5^SET(WTEST^GETPOSITIONZ(501));VARD_TMP5^DIV(4);VARD_TMP1^SET(WTEST^GETPOSITIONZ(502));VARD_TMP2^SET(WTEST^GETPOSITIONZ(503));VARD_TMP3^SET(WTEST^GETPOSITIONZ(504));VARD_TMP4^SET(WTEST^GETPOSITIONZ(505));VARD_POS1^SET([[VARD_TMP1+VARD_TMP2]@2]);VARD_POS2^SET([[VARD_TMP3+VARD_TMP4]@2]);VARD_ROTY^SET([[VARD_POS1-VARD_POS2]@2]);VARD_ROTY^SET(VARD_ROTY^ABS(VARD_ROTY));VARD_Y^SET([VARD_TMP5-VARD_ROTY]);VARD_Y^DIV(50);VARD_Y^ADD(1);VARD_POS1^SET([[VARD_TMP1+VARD_TMP3]@2]);VARD_POS2^SET([[VARD_TMP2+VARD_TMP4]@2]);VARD_ROTX^SET([[VARD_POS1-VARD_POS2]@2]);VARD_ROTX^SET(VARD_ROTX^ABS(VARD_ROTX));VARD_X^SET([VARD_TMP5-VARD_ROTX]);VARD_X^DIV(50);VARD_X^ADD(1);FROTATE^UNLINK("ANN_H_SAMOCHODZIK");FSCALE^UNLINK("ANN_H_SAMOCHODZIK");FSCALE^SETPROPERTY("FACTORX",VARD_X);FSCALE^SETPROPERTY("FACTORY",VARD_Y);FROTATE^SETPROPERTY("ANGLE",VARI_ANGLE);FSCALE^LINK("ANN_H_SAMOCHODZIK");FROTATE^LINK("ANN_H_SAMOCHODZIK");VARI_CARX^SET(WTEST^GETPOSITIONX(501));VARI_CARY^SET(WTEST^GETPOSITIONY(501));ANN_H_MOTOCIEN^SETPOSITION([VARI_CARX-VARI_MOTOSHADOWDIST],[VARI_CARY+VARI_MOTOSHADOWDIST]);VARI_TMP1^SET(WTEST^GETSPEED(501));VARI_TMP1^DIV(4);VARI_TMP1^ADD(16);ANN_H_KOLOUR^SETFPS(VARI_TMP1);ANN_H_KOLOUL^SETFPS(VARI_TMP1);ANN_H_KOLODR^SETFPS(VARI_TMP1);ANN_H_KOLODL^SETFPS(VARI_TMP1);}
{VARD_ELAPSED^SET(WTEST^MOVEOBJECTS());VARD_STALA^SET([VARD_ELAPSED*16.0]);VARI_BKGX^SET(WTEST^GETBKGPOSX());VARI_BKGY^SET(WTEST^GETBKGPOSY());@IF("VARI_BKGX!'VARI_BKGOLDX||VARI_BKGY!'VARI_BKGOLDY","BFITMP40","");BEH_UFOELAPSE^RUN();}
{SZWROTEKRANU^SET(SREXKIERUNEK);I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP200","BFITMP201");@IF("IALLMOVEX","!_","0","BFITMP202","");}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP33","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP34","BFITMP35");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP40","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP41","BFITMP42");};
{SZWROTEKRANU^SET(SREXKIERUNEK);I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP192","BFITMP193");@IF("IALLMOVEX","!_","0","BFITMP194","");}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP25","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP26","BFITMP27");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP32","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP33","BFITMP34");};
{ARR_UKLAD^LOAD("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^LOAD("$COMMON\TUNEL_NAKLADKA.ARR");ANN_NAKLADKA^CLONE(38);VARI_TMP1^SET(0);VARI_TMP2^SET([39*3]);@LOOP("{VARI_TMPX^SET(ARR_NAKLADKA^GET([_I_+0]));VARI_TMPY^SET(ARR_NAKLADKA^GET([_I_+1]));VARS_TMP2^SET(ARR_NAKLADKA^GET([_I_+2]));VARS_TMP1^SET(["ANN_NAKLADKA_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);VARI_TMP1^INC();GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP2,3);ANN_UKLAD^CLONE(366);VARI_TMP1^SET(0);VARI_TMP2^SET([367*3]);@LOOP("{VARI_TMPX^SET(ARR_UKLAD^GET([_I_+0]));VARI_TMPY^SET(ARR_UKLAD^GET([_I_+1]));VARS_TMP2^SET(ARR_UKLAD^GET([_I_+2]));VARS_TMP1^SET(["ANN_UKLAD_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);@IF(VARS_TMP2^FIND("TLO"),"!_","-1","BFITMP27","BFITMP28");VARI_TMP1^INC();GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP2,3);VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","0","BFITMP20","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","1","BFITMP22","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{ARR_UKLAD^LOAD("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^LOAD("$COMMON\TUNEL_NAKLADKA.ARR");ANN_NAKLADKA^CLONE(38);VARI_TMP1^SET(0);VARI_TMP2^SET([39*3]);@LOOP("{VARI_TMPX^SET(ARR_NAKLADKA^GET([_I_+0]));VARI_TMPY^SET(ARR_NAKLADKA^GET([_I_+1]));VARS_TMP2^SET(ARR_NAKLADKA^GET([_I_+2]));VARS_TMP1^SET(["ANN_NAKLADKA_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);VARI_TMP1^INC();GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP2,3);ANN_UKLAD^CLONE(366);VARI_TMP1^SET(0);VARI_TMP2^SET([367*3]);@LOOP("{VARI_TMPX^SET(ARR_UKLAD^GET([_I_+0]));VARI_TMPY^SET(ARR_UKLAD^GET([_I_+1]));VARS_TMP2^SET(ARR_UKLAD^GET([_I_+2]));VARS_TMP1^SET(["ANN_UKLAD_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);@IF(VARS_TMP2^FIND("TLO"),"!_","-1","BFITMP27","BFITMP28");VARI_TMP1^INC();GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP2,3);VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","0","BFITMP20","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","1","BFITMP22","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{ARR_UKLAD^LOAD("$COMMON\TUNEL_UKLAD.ARR");ARR_NAKLADKA^LOAD("$COMMON\TUNEL_NAKLADKA.ARR");ANN_NAKLADKA^CLONE(38);VARI_TMP1^SET(0);VARI_TMP2^SET([39*3]);@LOOP("{VARI_TMPX^SET(ARR_NAKLADKA^GET([_I_+0]));VARI_TMPY^SET(ARR_NAKLADKA^GET([_I_+1]));VARS_TMP2^SET(ARR_NAKLADKA^GET([_I_+2]));VARS_TMP1^SET(["ANN_NAKLADKA_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);VARI_TMP1^INC();GRP_NAKLADKA^ADD(VARS_TMP1);}",0,VARI_TMP2,3);ANN_UKLAD^CLONE(366);VARI_TMP1^SET(0);VARI_TMP2^SET([367*3]);@LOOP("{VARI_TMPX^SET(ARR_UKLAD^GET([_I_+0]));VARI_TMPY^SET(ARR_UKLAD^GET([_I_+1]));VARS_TMP2^SET(ARR_UKLAD^GET([_I_+2]));VARS_TMP1^SET(["ANN_UKLAD_"+VARI_TMP1]);*VARS_TMP1^SETPOSITION(VARI_TMPX,VARI_TMPY);*VARS_TMP1^SETFRAME("UKLAD",VARS_TMP2);@IF(VARS_TMP2^FIND("TLO"),"!_","-1","BFITMP23","BFITMP24");VARI_TMP1^INC();GRP_UKLAD^ADD(VARS_TMP1);}",0,VARI_TMP2,3);VARI_FRONTX^SET(0);VARI_FRONTY^SET(0);VARI_BKGX^SET(0);VARI_BKGY^SET(0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","0","BFITMP16","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,IFORCE,0,0);@IF("VARI_SOFADIR","!_","1","BFITMP18","");};
{IFORCE^SET(1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{IFORCE^SET(-1);IFORCE^MUL([VARD_ELAPSED*17000.0]);WTEST^ADDFORCE(501,0,IFORCE,0);}
{I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP217","BFITMP218");@IF("IALLMOVEX","!_","0","BFITMP219","");}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BREXLOCK","_","FALSE","BFITMP248","");I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE1LOCK","_","FALSE","BFITMP254","");I1^SET([3600-[IE1PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_1^SETFRAME([SE1TARCZA+SE1KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE2LOCK","_","FALSE","BFITMP273","");I1^SET([3600-[IE2PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_2^SETFRAME([SE2TARCZA+SE2KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE3LOCK","_","FALSE","BFITMP292","");I1^SET([3600-[IE3PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_3^SETFRAME([SE3TARCZA+SE3KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE4LOCK","_","FALSE","BFITMP311","");I1^SET([3600-[IE4PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_4^SETFRAME([SE4TARCZA+SE4KIERUNEK],I1);}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP24","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP25","BFITMP26");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP32","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP33","BFITMP34");};
{IPIERWSZYZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));IDRUGIZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));INRPRZEDSTAWIANEGO^SET(0);I1^SET(ARRTURNIEJ^FIND(0));I2^SET([TURNIEJ_IRUNDA*8]);I2^SET([5+I2-I1]);TURNIEJ_IRUNDA^INC();I3^SET([TURNIEJ_IRUNDA*4]);I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,0);ARRTURNIEJ^CHANGEAT(I1,I4);I3^ADD(RANDOM^GET(3));I3^INC();I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,ARRTURNIEJ^GET(I2));ARRTURNIEJ^CHANGEAT(I2,I4);G_SARCADESCENELAST^SET(INRRUMAKA);G_SARCADESCENELAST^ADD(TURNIEJ_IRUNDA);G_SARCADESCENELAST^ADD(VARI_SZUKAJHERBU);SEQOPIS^PLAY("ZWYCIEZA");}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SFX_TURNIEJOUT^PLAY();}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SFX_TURNIEJOUT^PLAY();}
{I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP201","BFITMP202");@IF("IALLMOVEX","!_","0","BFITMP203","");}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BREXLOCK","_","FALSE","BFITMP232","");I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE1LOCK","_","FALSE","BFITMP238","");I1^SET([3600-[IE1PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_1^SETFRAME([SE1TARCZA+SE1KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE2LOCK","_","FALSE","BFITMP257","");I1^SET([3600-[IE2PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_2^SETFRAME([SE2TARCZA+SE2KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE3LOCK","_","FALSE","BFITMP276","");I1^SET([3600-[IE3PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_3^SETFRAME([SE3TARCZA+SE3KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE4LOCK","_","FALSE","BFITMP295","");I1^SET([3600-[IE4PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_4^SETFRAME([SE4TARCZA+SE4KIERUNEK],I1);}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP20","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP21","BFITMP22");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP28","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP29","BFITMP30");};
{IPIERWSZYZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));IDRUGIZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));INRPRZEDSTAWIANEGO^SET(0);I1^SET(ARRTURNIEJ^FIND(0));I2^SET([TURNIEJ_IRUNDA*8]);I2^SET([5+I2-I1]);TURNIEJ_IRUNDA^INC();I3^SET([TURNIEJ_IRUNDA*4]);I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,0);ARRTURNIEJ^CHANGEAT(I1,I4);I3^ADD(RANDOM^GET(3));I3^INC();I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,ARRTURNIEJ^GET(I2));ARRTURNIEJ^CHANGEAT(I2,I4);G_SARCADESCENELAST^SET(INRRUMAKA);G_SARCADESCENELAST^ADD(TURNIEJ_IRUNDA);G_SARCADESCENELAST^ADD(VARI_SZUKAJHERBU);SEQOPIS^PLAY("ZWYCIEZA");}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SNDZAPLANSZA^PLAY();}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SNDZAPLANSZA^PLAY();}
{I1^SET(*["IGRANICA"+SREXKIERUNEK]^GET());I1^SET([I1-IREXPOSX-IOTOCZENIEPOSX]);I2^SET(ANNZWROTEKRANU^GETNOFINEVENT("NULL"));IALLMOVEX^SET([I1@I2]);IALLMOVEX^ADD(IREXKIERUNEK);@IF("SREXKIERUNEK","_",""R"","BFITMP202","BFITMP203");@IF("IALLMOVEX","!_","0","BFITMP204","");}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BREXLOCK","_","FALSE","BFITMP233","");I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE1LOCK","_","FALSE","BFITMP239","");I1^SET([3600-[IE1PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_1^SETFRAME([SE1TARCZA+SE1KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE2LOCK","_","FALSE","BFITMP258","");I1^SET([3600-[IE2PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_2^SETFRAME([SE2TARCZA+SE2KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE3LOCK","_","FALSE","BFITMP277","");I1^SET([3600-[IE3PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_3^SETFRAME([SE3TARCZA+SE3KIERUNEK],I1);}
{I2^SET($1);I3^SET($2);I4^SET($3);@IF("BE4LOCK","_","FALSE","BFITMP296","");I1^SET([3600-[IE4PUNKTY*9]]);I1^SET([I1@360]);I1^CLAMP(0,10);ANNTARCZA_4^SETFRAME([SE4TARCZA+SE4KIERUNEK],I1);}
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP20","");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP21","BFITMP22");};
{@IF("KEYBOARD^ISKEYDOWN("RIGHT")","!_","0","BFITMP28","");};
{@IF("KEYBOARD^ISKEYDOWN("LEFT")","!_","0","BFITMP29","BFITMP30");};
{IPIERWSZYZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+3]));IDRUGIZAW^SET(ARRTURNIEJ^GET([[4*TURNIEJ_IRUNDA]+2]));INRPRZEDSTAWIANEGO^SET(0);I1^SET(ARRTURNIEJ^FIND(0));I2^SET([TURNIEJ_IRUNDA*8]);I2^SET([5+I2-I1]);TURNIEJ_IRUNDA^INC();I3^SET([TURNIEJ_IRUNDA*4]);I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,0);ARRTURNIEJ^CHANGEAT(I1,I4);I3^ADD(RANDOM^GET(3));I3^INC();I4^SET(ARRTURNIEJ^GET(I3));ARRTURNIEJ^CHANGEAT(I3,ARRTURNIEJ^GET(I2));ARRTURNIEJ^CHANGEAT(I2,I4);SEQOPIS^PLAY("ZWYCIEZA");}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SNDZAPLANSZA^PLAY();}
{BREXZAPLANSZA^SET(TRUE);IREXPUNKTY^SUB(25);I1^SET([10*[IREXPUNKTYMAX-IREXPUNKTY]]);I1^SET([I1@IREXPUNKTYMAX]);I1^CLAMP(0,10);ANNTARCZA_5^SETFRAME([SREXTARCZA+SREXKIERUNEK],I1);SNDZAPLANSZA^PLAY();}
